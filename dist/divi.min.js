!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).divi={})}(this,(function(t){"use strict";const e=Math.PI,n=2*e,i=1e-6,r=n-i;function s(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}let a=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?s:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return s;const n=10**e;return function(t){this._+=t[0];for(let e=1,i=t.length;e<i;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,i){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,e,n,i,r,s){this._append`C${+t},${+e},${+n},${+i},${this._x1=+r},${this._y1=+s}`}arcTo(t,n,r,s,a){if(t=+t,n=+n,r=+r,s=+s,(a=+a)<0)throw new Error(`negative radius: ${a}`);let o=this._x1,c=this._y1,u=r-t,l=s-n,h=o-t,p=c-n,d=h*h+p*p;if(null===this._x1)this._append`M${this._x1=t},${this._y1=n}`;else if(d>i)if(Math.abs(p*u-l*h)>i&&a){let f=r-o,m=s-c,y=u*u+l*l,g=f*f+m*m,b=Math.sqrt(y),v=Math.sqrt(d),_=a*Math.tan((e-Math.acos((y+d-g)/(2*b*v)))/2),x=_/v,w=_/b;Math.abs(x-1)>i&&this._append`L${t+x*h},${n+x*p}`,this._append`A${a},${a},0,0,${+(p*f>h*m)},${this._x1=t+w*u},${this._y1=n+w*l}`}else this._append`L${this._x1=t},${this._y1=n}`;else;}arc(t,s,a,o,c,u){if(t=+t,s=+s,u=!!u,(a=+a)<0)throw new Error(`negative radius: ${a}`);let l=a*Math.cos(o),h=a*Math.sin(o),p=t+l,d=s+h,f=1^u,m=u?o-c:c-o;null===this._x1?this._append`M${p},${d}`:(Math.abs(this._x1-p)>i||Math.abs(this._y1-d)>i)&&this._append`L${p},${d}`,a&&(m<0&&(m=m%n+n),m>r?this._append`A${a},${a},0,1,${f},${t-l},${s-h}A${a},${a},0,1,${f},${this._x1=p},${this._y1=d}`:m>i&&this._append`A${a},${a},0,${+(m>=e)},${f},${this._x1=t+a*Math.cos(c)},${this._y1=s+a*Math.sin(c)}`)}rect(t,e,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}};function o(){return new a}o.prototype=a.prototype;var c="http://www.w3.org/1999/xhtml",u={svg:"http://www.w3.org/2000/svg",xhtml:c,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function l(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),u.hasOwnProperty(e)?{space:u[e],local:t}:t}function h(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===c&&e.documentElement.namespaceURI===c?e.createElement(t):e.createElementNS(n,t)}}function p(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function d(t){var e=l(t);return(e.local?p:h)(e)}function f(){}function m(t){return null==t?f:function(){return this.querySelector(t)}}function y(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function g(){return[]}function b(t){return function(e){return e.matches(t)}}var v=Array.prototype.find;function _(){return this.firstElementChild}var x=Array.prototype.filter;function w(){return Array.from(this.children)}function S(t){return new Array(t.length)}function I(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function A(t,e,n,i,r,s){for(var a,o=0,c=e.length,u=s.length;o<u;++o)(a=e[o])?(a.__data__=s[o],i[o]=a):n[o]=new I(t,s[o]);for(;o<c;++o)(a=e[o])&&(r[o]=a)}function T(t,e,n,i,r,s,a){var o,c,u,l=new Map,h=e.length,p=s.length,d=new Array(h);for(o=0;o<h;++o)(c=e[o])&&(d[o]=u=a.call(c,c.__data__,o,e)+"",l.has(u)?r[o]=c:l.set(u,c));for(o=0;o<p;++o)u=a.call(t,s[o],o,s)+"",(c=l.get(u))?(i[o]=c,c.__data__=s[o],l.delete(u)):n[o]=new I(t,s[o]);for(o=0;o<h;++o)(c=e[o])&&l.get(d[o])===c&&(r[o]=c)}function k(t){return t.__data__}function C(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function M(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function E(t){return function(){this.removeAttribute(t)}}function N(t){return function(){this.removeAttributeNS(t.space,t.local)}}function D(t,e){return function(){this.setAttribute(t,e)}}function O(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function B(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function L(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function F(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function V(t){return function(){this.style.removeProperty(t)}}function U(t,e,n){return function(){this.style.setProperty(t,e,n)}}function P(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function R(t){return function(){delete this[t]}}function j(t,e){return function(){this[t]=e}}function $(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function z(t){return t.trim().split(/^|\s+/)}function H(t){return t.classList||new q(t)}function q(t){this._node=t,this._names=z(t.getAttribute("class")||"")}function Y(t,e){for(var n=H(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function G(t,e){for(var n=H(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function W(t){return function(){Y(this,t)}}function K(t){return function(){G(this,t)}}function Q(t,e){return function(){(e.apply(this,arguments)?Y:G)(this,t)}}function J(){this.textContent=""}function Z(t){return function(){this.textContent=t}}function X(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function tt(){this.innerHTML=""}function et(t){return function(){this.innerHTML=t}}function nt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function it(){this.nextSibling&&this.parentNode.appendChild(this)}function rt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function st(){return null}function at(){var t=this.parentNode;t&&t.removeChild(this)}function ot(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ct(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ut(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,s=e.length;i<s;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?e.length=r:delete this.__on}}}function lt(t,e,n){return function(){var i,r=this.__on,s=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(r)for(var a=0,o=r.length;a<o;++a)if((i=r[a]).type===t.type&&i.name===t.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),void(i.value=e);this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function ht(t,e,n){var i=F(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function pt(t,e){return function(){return ht(this,t,e)}}function dt(t,e){return function(){return ht(this,t,e.apply(this,arguments))}}I.prototype={constructor:I,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},q.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var ft=[null];function mt(t,e){this._groups=t,this._parents=e}function yt(t){return"string"==typeof t?new mt([[document.querySelector(t)]],[document.documentElement]):new mt([[t]],ft)}function gt(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}function bt(t){return"string"==typeof t?new mt([document.querySelectorAll(t)],[document.documentElement]):new mt([y(t)],ft)}mt.prototype={constructor:mt,select:function(t){"function"!=typeof t&&(t=m(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s,a,o=e[r],c=o.length,u=i[r]=new Array(c),l=0;l<c;++l)(s=o[l])&&(a=t.call(s,s.__data__,l,o))&&("__data__"in s&&(a.__data__=s.__data__),u[l]=a);return new mt(i,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return y(t.apply(this,arguments))}}(t):function(t){return null==t?g:function(){return this.querySelectorAll(t)}}(t);for(var e=this._groups,n=e.length,i=[],r=[],s=0;s<n;++s)for(var a,o=e[s],c=o.length,u=0;u<c;++u)(a=o[u])&&(i.push(t.call(a,a.__data__,u,o)),r.push(a));return new mt(i,r)},selectChild:function(t){return this.select(null==t?_:function(t){return function(){return v.call(this.children,t)}}("function"==typeof t?t:b(t)))},selectChildren:function(t){return this.selectAll(null==t?w:function(t){return function(){return x.call(this.children,t)}}("function"==typeof t?t:b(t)))},filter:function(t){"function"!=typeof t&&(t=function(t){return function(){return this.matches(t)}}(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s,a=e[r],o=a.length,c=i[r]=[],u=0;u<o;++u)(s=a[u])&&t.call(s,s.__data__,u,a)&&c.push(s);return new mt(i,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,k);var n,i=e?T:A,r=this._parents,s=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var a=s.length,o=new Array(a),c=new Array(a),u=new Array(a),l=0;l<a;++l){var h=r[l],p=s[l],d=p.length,f=C(t.call(h,h&&h.__data__,l,r)),m=f.length,y=c[l]=new Array(m),g=o[l]=new Array(m);i(h,p,y,g,u[l]=new Array(d),f,e);for(var b,v,_=0,x=0;_<m;++_)if(b=y[_]){for(_>=x&&(x=_+1);!(v=g[x])&&++x<m;);b._next=v||null}}return(o=new mt(o,r))._enter=c,o._exit=u,o},enter:function(){return new mt(this._enter||this._groups.map(S),this._parents)},exit:function(){return new mt(this._exit||this._groups.map(S),this._parents)},join:function(t,e,n){var i=this.enter(),r=this,s=this.exit();return"function"==typeof t?(i=t(i))&&(i=i.selection()):i=i.append(t+""),null!=e&&(r=e(r))&&(r=r.selection()),null==n?s.remove():n(s),i&&r?i.merge(r).order():r},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,s=i.length,a=Math.min(r,s),o=new Array(r),c=0;c<a;++c)for(var u,l=n[c],h=i[c],p=l.length,d=o[c]=new Array(p),f=0;f<p;++f)(u=l[f]||h[f])&&(d[f]=u);for(;c<r;++c)o[c]=n[c];return new mt(o,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],s=r.length-1,a=r[s];--s>=0;)(i=r[s])&&(a&&4^i.compareDocumentPosition(a)&&a.parentNode.insertBefore(i,a),a=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=M);for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var a,o=n[s],c=o.length,u=r[s]=new Array(c),l=0;l<c;++l)(a=o[l])&&(u[l]=a);u.sort(e)}return new mt(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,s=i.length;r<s;++r){var a=i[r];if(a)return a}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,s=e[n],a=0,o=s.length;a<o;++a)(r=s[a])&&t.call(r,r.__data__,a,s);return this},attr:function(t,e){var n=l(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?N:E:"function"==typeof e?n.local?L:B:n.local?O:D)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?V:"function"==typeof e?P:U)(t,e,null==n?"":n)):function(t,e){return t.style.getPropertyValue(e)||F(t).getComputedStyle(t,null).getPropertyValue(e)}(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?R:"function"==typeof e?$:j)(t,e)):this.node()[t]},classed:function(t,e){var n=z(t+"");if(arguments.length<2){for(var i=H(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?Q:e?W:K)(n,e))},text:function(t){return arguments.length?this.each(null==t?J:("function"==typeof t?X:Z)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?tt:("function"==typeof t?nt:et)(t)):this.node().innerHTML},raise:function(){return this.each(it)},lower:function(){return this.each(rt)},append:function(t){var e="function"==typeof t?t:d(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:d(t),i=null==e?st:"function"==typeof e?e:m(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(at)},clone:function(t){return this.select(t?ct:ot)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,s=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),a=s.length;if(!(arguments.length<2)){for(o=e?lt:ut,i=0;i<a;++i)this.each(o(s[i],e,n));return this}var o=this.node().__on;if(o)for(var c,u=0,l=o.length;u<l;++u)for(i=0,c=o[u];i<a;++i)if((r=s[i]).type===c.type&&r.name===c.name)return c.value},dispatch:function(t,e){return this.each(("function"==typeof e?dt:pt)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i,r=t[e],s=0,a=r.length;s<a;++s)(i=r[s])&&(yield i)}};var vt=Array.isArray;function _t(t){return null!=t?vt(t)?t:[t]:[]}function xt(t){return t<0?`count() + ${t}`:t}class wt{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,e){return this.__derive(this,t,e)}filter(t){return this.__filter(this,t)}slice(t,e){return this.filter(function(t=0,e=1/0){return`${xt(t)} < row_number() && row_number() <= ${xt(e)}`}(t,e)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,e){return this.__relocate(this,_t(t),e)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,e){return this.__sample(this,t,e)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,e){return this.__impute(this,t,e)}fold(t,e){return this.__fold(this,t,e)}pivot(t,e,n){return this.__pivot(this,t,e,n)}spread(t,e){return this.__spread(this,t,e)}unroll(t,e){return this.__unroll(this,t,e)}lookup(t,e,...n){return this.__lookup(this,t,e,n.flat())}join(t,e,n,i){return this.__join(this,t,e,n,i)}join_left(t,e,n,i){const r={...i,left:!0,right:!1};return this.__join(this,t,e,n,r)}join_right(t,e,n,i){const r={...i,left:!1,right:!0};return this.__join(this,t,e,n,r)}join_full(t,e,n,i){const r={...i,left:!0,right:!0};return this.__join(this,t,e,n,r)}cross(t,e,n){return this.__cross(this,t,e,n)}semijoin(t,e){return this.__semijoin(this,t,e)}antijoin(t,e){return this.__antijoin(this,t,e)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function St(t){throw Error(t)}function It(t){return"number"==typeof t}function At(t){return"function"==typeof t}function Tt(t,e){const n=Array(t);if(At(e))for(let i=0;i<t;++i)n[i]=e(i);else n.fill(e);return n}let kt=class extends wt{constructor(t,e,n,i,r,s,a){super(a),this._names=Object.freeze(t),this._data=n,this._total=e,this._nrows=i?i.count():e,this._mask=e!==this._nrows&&i||null,this._group=r||null,this._order=s||null}create(t){St("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(1!==this.numRows()?"s":"");return`Table: ${this.numCols()+" col"+(1!==this.numCols()?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,e){return this.array(t,e)}array(t,e){St("Not implemented")}*values(t){const e=this.getter(t),n=this.numRows();for(let t=0;t<n;++t)yield e(t)}get(t,e=0){St("Not implemented")}getter(t){St("Not implemented")}objects(t){St("Not implemented")}object(t){St("Not implemented")}[Symbol.iterator](){St("Not implemented")}print(t={}){It(t)?t={limit:t}:null==t.limit&&(t.limit=10);const e=this.objects({...t,grouped:!1}),n=`${this[Symbol.toStringTag]}. Showing ${e.length} rows.`;return console.log(n),console.table(e),this}indices(t=!0){if(this._index)return this._index;const e=this.numRows(),n=new Uint32Array(e),i=this.isOrdered(),r=this.mask();let s=-1;if(r)for(let t=r.next(0);t>=0;t=r.next(t+1))n[++s]=t;else for(let t=0;t<e;++t)n[++s]=t;if(t&&i){const t=this._order,e=this._data;n.sort(((n,i)=>t(n,i,e)))}return!t&&i||(this._index=n),n}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:e,size:n}=this._group,i=Tt(n,(()=>[])),r=this._index,s=this.mask(),a=this.numRows();if(r&&this.isOrdered())for(let t,n=0;n<a;++n)t=r[n],i[e[t]].push(t);else if(s)for(let t=s.next(0);t>=0;t=s.next(t+1))i[e[t]].push(t);else for(let t=0;t<a;++t)i[e[t]].push(t);if(t&&!r&&this.isOrdered()){const t=this._order,e=this._data;for(let r=0;r<n;++r)i[r].sort(((n,i)=>t(n,i,e)))}return!t&&this.isOrdered()||(this._partitions=i),i}scan(t,e,n=1/0,i=0){const r=this._mask,s=this._nrows,a=this._data;let o=i||0;if(o>s)return;const c=Math.min(s,o+n),u=()=>o=this._total;if(e&&this.isOrdered()||r&&this._index){const e=this.indices(),n=this._data;for(;o<c;++o)t(e[o],n,u)}else if(r){let e=c-o+1;for(o=r.nth(o);--e&&o>-1;o=r.next(o+1))t(o,a,u)}else for(;o<c;++o)t(o,a,u)}slice(t=0,e=1/0){if(this.isGrouped())return super.slice(t,e);const n=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),e=Math.min(i,Math.max(0,e+(e<0?i:0))),this.scan((t=>n.push(t)),!0,e-t,t),this.reify(n)}reduce(t){return this.__reduce(this,t)}},Ct=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},Mt=function(t){return t&&At(t.get)?t:new Ct(t)};function Et(t){return t instanceof Date}function Nt(t){return t===Object(t)}function Dt(t){return t instanceof RegExp}function Ot(t){return"string"==typeof t}function Bt(t,e){const n=e=>St(`Illegal argument type: ${e||typeof t}`);return t instanceof Map?Lt(t.entries(),e):Et(t)?n("Date"):Dt(t)?n("RegExp"):Ot(t)?n():vt(t)?function(t,e){const n=t.length,i={},r=t=>i[t]=Array(n);if(n){const i=(e=e||Object.keys(t[0])).map(r),s=i.length;for(let r=0;r<n;++r){const n=t[r];for(let t=0;t<s;++t)i[t][r]=n[e[t]]}}else e&&e.forEach(r);return i}(t,e):At(t[Symbol.iterator])?function(t,e){const n={},i=t=>n[t]=[];let r,s;for(const n of t){r||(r=(e=e||Object.keys(n)).map(i),s=r.length);for(let t=0;t<s;++t)r[t].push(n[e[t]])}!r&&e&&e.forEach(i);return n}(t,e):Nt(t)?Lt(Object.entries(t),e):n()}function Lt(t,e=["key","value"]){const n=[],i=[];for(const[e,r]of t)n.push(e),i.push(r);const r={};return e[0]&&(r[e[0]]=n),e[1]&&(r[e[1]]=i),r}const{hasOwnProperty:Ft}=Object.prototype;function Vt(t,e){return Ft.call(t,e)}function Ut(t){return t?new Pt({...t.data()},t.columnNames()):new Pt}class Pt{constructor(t,e){this.data=t||{},this.names=e||[]}add(t,e){return this.has(t)||this.names.push(t+""),this.data[t]=e}has(t){return Vt(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}var Rt=void 0;const jt=Object.getPrototypeOf(Int8Array);function $t(t){return t instanceof jt}function zt(t){return vt(t)||$t(t)}function Ht(t){return null!=t&&t==t}const qt=t=>zt(t)||Ot(t);var Yt={compact:t=>zt(t)?t.filter((t=>Ht(t))):t,concat:(...t)=>[].concat(...t),includes:(t,e,n)=>!!qt(t)&&t.includes(e,n),indexof:(t,e)=>qt(t)?t.indexOf(e):-1,join:(t,e)=>zt(t)?t.join(e):Rt,lastindexof:(t,e)=>qt(t)?t.lastIndexOf(e):-1,length:t=>qt(t)?t.length:0,pluck:(t,e)=>zt(t)?t.map((t=>Ht(t)?t[e]:Rt)):Rt,reverse:t=>zt(t)?t.slice().reverse():Ot(t)?t.split("").reverse().join(""):Rt,slice:(t,e,n)=>qt(t)?t.slice(e,n):Rt};function Gt(t,e,n="0"){const i=t+"",r=i.length;return r<e?Array(e-r+1).join(n)+i:i}const Wt=t=>(t<10?"0":"")+t,Kt=t=>t<0?"-"+Gt(-t,6):t>9999?"+"+Gt(t,6):Gt(t,4);function Qt(t,e,n,i,r,s,a,o,c){const u=o?"Z":"";return Kt(t)+"-"+Wt(e+1)+"-"+Wt(n)+(!c||a?"T"+Wt(i)+":"+Wt(r)+":"+Wt(s)+"."+Gt(a,3)+u:s?"T"+Wt(i)+":"+Wt(r)+":"+Wt(s)+u:r||i||!o?"T"+Wt(i)+":"+Wt(r)+u:"")}function Jt(t,e){return isNaN(t)?"Invalid Date":Qt(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds(),!1,e)}function Zt(t,e){return isNaN(t)?"Invalid Date":Qt(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds(),!0,e)}const Xt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function te(t){return t.match(Xt)&&!isNaN(Date.parse(t))}const ee=864e5,ne=6048e5,ie=new Date,re=new Date,se=t=>(ie.setTime("string"==typeof t?function(t,e=Date.parse){return te(t)?e(t):t}(t):t),ie);var ae={format_date:(t,e)=>Jt(se(t),!e),format_utcdate:(t,e)=>Zt(se(t),!e),timestamp:t=>+se(t),year:t=>se(t).getFullYear(),quarter:t=>Math.floor(se(t).getMonth()/3),month:t=>se(t).getMonth(),date:t=>se(t).getDate(),dayofweek:t=>se(t).getDay(),hours:t=>se(t).getHours(),minutes:t=>se(t).getMinutes(),seconds:t=>se(t).getSeconds(),milliseconds:t=>se(t).getMilliseconds(),utcyear:t=>se(t).getUTCFullYear(),utcquarter:t=>Math.floor(se(t).getUTCMonth()/3),utcmonth:t=>se(t).getUTCMonth(),utcdate:t=>se(t).getUTCDate(),utcdayofweek:t=>se(t).getUTCDay(),utchours:t=>se(t).getUTCHours(),utcminutes:t=>se(t).getUTCMinutes(),utcseconds:t=>se(t).getUTCSeconds(),utcmilliseconds:t=>se(t).getUTCMilliseconds(),datetime:function(t,e,n,i,r,s,a){return arguments.length?new Date(t,e||0,null==n?1:n,i||0,r||0,s||0,a||0):new Date(Date.now())},dayofyear:function(t){re.setTime(+t),re.setHours(0,0,0,0),ie.setTime(+re),ie.setMonth(0),ie.setDate(1);const e=6e4*(re.getTimezoneOffset()-ie.getTimezoneOffset());return Math.floor(1+(re-ie-e)/ee)},week:function(t,e){const n=e||0;re.setTime(+t),re.setDate(re.getDate()-(re.getDay()+7-n)%7),re.setHours(0,0,0,0),ie.setTime(+t),ie.setMonth(0),ie.setDate(1),ie.setDate(1-(ie.getDay()+7-n)%7),ie.setHours(0,0,0,0);const i=6e4*(re.getTimezoneOffset()-ie.getTimezoneOffset());return Math.floor((re-ie+1-i)/ne)},utcdatetime:function(t,e,n,i,r,s,a){return arguments.length?new Date(Date.UTC(t,e||0,null==n?1:n,i||0,r||0,s||0,a||0)):new Date(Date.now())},utcdayofyear:function(t){re.setTime(+t),re.setUTCHours(0,0,0,0);const e=Date.UTC(re.getUTCFullYear(),0,1);return Math.floor(1+(re-e)/ee)},utcweek:function(t,e){const n=e||0;return re.setTime(+t),re.setUTCDate(re.getUTCDate()-(re.getUTCDay()+7-n)%7),re.setUTCHours(0,0,0,0),ie.setTime(+t),ie.setUTCMonth(0),ie.setUTCDate(1),ie.setUTCDate(1-(ie.getUTCDay()+7-n)%7),ie.setUTCHours(0,0,0,0),Math.floor((re-ie+1)/ne)},now:Date.now};function oe(t,e){return null!=t&&null!=e&&t==t&&e==e&&(t===e||(Et(t)||Et(e)?+t==+e:Dt(t)&&Dt(e)?t+""==e+"":!(!Nt(t)||!Nt(e))&&function(t,e){if(Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;if(t.length||e.length)return ce(t,e);const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;if(n.sort(),i.sort(),!ce(n,i,((t,e)=>t===e)))return!1;const r=n.length;for(let i=0;i<r;++i){const r=n[i];if(!oe(t[r],e[r]))return!1}return!0}(t,e)))}function ce(t,e,n=oe){const i=t.length;if(i!==e.length)return!1;for(let r=0;r<i;++r)if(!n(t[r],e[r]))return!1;return!0}var ue={parse_json:t=>JSON.parse(t),to_json:t=>JSON.stringify(t)};let le=Math.random;function he(){return le()}function pe(t){return t instanceof Map}function de(t){return pe(t)||function(t){return t instanceof Set}(t)}function fe(t){return Array.from(t)}var me={has:(t,e)=>de(t)?t.has(e):null!=t&&Vt(t,e),keys:t=>pe(t)?fe(t.keys()):null!=t?Object.keys(t):[],values:t=>de(t)?fe(t.values()):null!=t?Object.values(t):[],entries:t=>de(t)?fe(t.entries()):null!=t?Object.entries(t):[],object:t=>t?Object.fromEntries(t):Rt};var ye={bin:function(t,e,n,i,r){return null==t?null:t<e?-1/0:t>n?1/0:(t=Math.max(e,Math.min(t,n)),e+i*Math.floor(1e-14+(t-e)/i+(r||0)))},equal:oe,recode:function(t,e,n){if(e instanceof Map){if(e.has(t))return e.get(t)}else if(Vt(e,t))return e[t];return void 0!==n?n:t},sequence:function(t,e,n){let i=arguments.length;t=+t,e=+e,n=i<2?(e=t,t=0,1):i<3?1:+n,i=0|Math.max(0,Math.ceil((e-t)/n));const r=new Array(i);for(let e=0;e<i;++e)r[e]=t+e*n;return r},...Yt,...ae,...ue,...{random:he,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:t=>180*t/Math.PI,radians:t=>Math.PI*t/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh},...me,...{parse_date:t=>null==t?t:new Date(t),parse_float:t=>null==t?t:Number.parseFloat(t),parse_int:(t,e)=>null==t?t:Number.parseInt(t,e),endswith:(t,e,n)=>null!=t&&String(t).endsWith(e,n),match:(t,e,n)=>{const i=null==t?t:String(t).match(e);return null==n||null==i?i:"number"==typeof n?i[n]:i.groups?i.groups[n]:null},normalize:(t,e)=>null==t?t:String(t).normalize(e),padend:(t,e,n)=>null==t?t:String(t).padEnd(e,n),padstart:(t,e,n)=>null==t?t:String(t).padStart(e,n),upper:t=>null==t?t:String(t).toUpperCase(),lower:t=>null==t?t:String(t).toLowerCase(),repeat:(t,e)=>null==t?t:String(t).repeat(e),replace:(t,e,n)=>null==t?t:String(t).replace(e,String(n)),substring:(t,e,n)=>null==t?t:String(t).substring(e,n),split:(t,e,n)=>null==t?[]:String(t).split(e,n),startswith:(t,e,n)=>null!=t&&String(t).startsWith(e,n),trim:t=>null==t?t:String(t).trim()}};function ge(t){return"bigint"==typeof t}function be(t){return void 0===t?t+"":ge(t)?t+"n":JSON.stringify(t)}function ve(t,e=[],n=[]){return new _e(t,_t(e),_t(n))}let _e=class{constructor(t,e,n){this.name=t,this.fields=e,this.params=n}toString(){const t=[...this.fields.map((t=>`d[${be(t)}]`)),...this.params.map(be)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const xe=t=>ve("any",t),we=()=>ve("count"),Se=t=>ve("array_agg",t),Ie=t=>ve("array_agg_distinct",t),Ae=(t,e)=>ve("map_agg",[t,e]),Te=(t,e)=>ve("object_agg",[t,e]),ke=(t,e)=>ve("entries_agg",[t,e]);var Ce={...ye,row_object:(...t)=>ve("row_object",null,t.flat()),count:we,any:xe,array_agg:Se,array_agg_distinct:Ie,object_agg:Te,map_agg:Ae,entries_agg:ke,valid:t=>ve("valid",t),invalid:t=>ve("invalid",t),distinct:t=>ve("distinct",t),mode:t=>ve("mode",t),sum:t=>ve("sum",t),product:t=>ve("product",t),mean:t=>ve("mean",t),average:t=>ve("average",t),variance:t=>ve("variance",t),variancep:t=>ve("variancep",t),stdev:t=>ve("stdev",t),stdevp:t=>ve("stdevp",t),min:t=>ve("min",t),max:t=>ve("max",t),quantile:(t,e)=>ve("quantile",t,e),median:t=>ve("median",t),covariance:(t,e)=>ve("covariance",[t,e]),covariancep:(t,e)=>ve("covariancep",[t,e]),corr:(t,e)=>ve("corr",[t,e]),bins:(t,e,n,i)=>ve("bins",t,[e,n,i]),row_number:()=>ve("row_number"),rank:()=>ve("rank"),avg_rank:()=>ve("avg_rank"),dense_rank:()=>ve("dense_rank"),percent_rank:()=>ve("percent_rank"),cume_dist:()=>ve("cume_dist"),ntile:t=>ve("ntile",null,t),lag:(t,e,n)=>ve("lag",t,[e,n]),lead:(t,e,n)=>ve("lead",t,[e,n]),first_value:t=>ve("first_value",t),last_value:t=>ve("last_value",t),nth_value:(t,e)=>ve("nth_value",t,e),fill_down:(t,e)=>ve("fill_down",t,e),fill_up:(t,e)=>ve("fill_up",t,e)};function Me(t,e,n,i){const r="map"===i||!0===i?Ae:"entries"===i?ke:"object"===i?Te:St('groups option must be "map", "entries", or "object".'),{names:s}=t.groups(),a=function(t,e){t=de(t)?t:new Set(t);let n=e,i=0;for(;t.has(n);)n=e+ ++i;return n}(t.columnNames(),"_");let o=t.select().reify(e).create({data:{[a]:n}}).rollup({[a]:Se(a)});for(let t=s.length;--t>=0;)o=o.groupby(s.slice(0,t)).rollup({[a]:r(s[t],a)});return o.get(a)}const Ee="ArrowFunctionExpression",Ne="FunctionExpression",De="Identifier",Oe="Literal",Be="MemberExpression",Le="ObjectExpression",Fe="ObjectPattern",Ve="Property",Ue="Column",Pe="Constant",Re="Dictionary",je="Parameter",$e="Op",ze=(t,e)=>{const n=Qe[t.type];return n?n(t,e):St(`Unsupported expression construct: ${t.type}`)},He=(t,e)=>"("+ze(t.left,e)+" "+t.operator+" "+ze(t.right,e)+")",qe=(t,e)=>"("+Ge(t.params,e)+")=>"+ze(t.body,e),Ye=(t,e)=>ze(t.callee,e)+"("+Ge(t.arguments,e)+")",Ge=(t,e,n=",")=>t.map((t=>ze(t,e))).join(n),We=t=>t.computed?`[${be(t.name)}]`:`.${t.name}`,Ke=(t,e,n)=>{const i=t.table||"";return`data${i}${We(t)}.${n}(${e.index}${i})`},Qe={Constant:t=>t.raw,Column:(t,e)=>Ke(t,e,"get"),Dictionary:(t,e)=>Ke(t,e,"key"),Function:t=>`fn.${t.name}`,Parameter:t=>`$${We(t)}`,Op:(t,e)=>`op(${be(t.name)},${e.op||e.index})`,Literal:t=>t.raw,Identifier:t=>t.name,TemplateLiteral:(t,e)=>{const{quasis:n,expressions:i}=t,r=i.length;let s=n[0].value.raw;for(let t=0;t<r;)s+="${"+ze(i[t],e)+"}"+n[++t].value.raw;return"`"+s+"`"},MemberExpression:(t,e)=>{const n=!t.computed,i=ze(t.object,e),r=ze(t.property,e);return i+(n?"."+r:"["+r+"]")},CallExpression:Ye,NewExpression:(t,e)=>"new "+Ye(t,e),ArrayExpression:(t,e)=>"["+Ge(t.elements,e)+"]",AssignmentExpression:He,BinaryExpression:He,LogicalExpression:He,UnaryExpression:(t,e)=>"("+t.operator+ze(t.argument,e)+")",ConditionalExpression:(t,e)=>"("+ze(t.test,e)+"?"+ze(t.consequent,e)+":"+ze(t.alternate,e)+")",ObjectExpression:(t,e)=>"({"+Ge(t.properties,e)+"})",Property:(t,e)=>{const n=ze(t.key,e);return(t.computed?`[${n}]`:n)+":"+ze(t.value,e)},ArrowFunctionExpression:qe,FunctionExpression:qe,FunctionDeclaration:qe,ArrayPattern:(t,e)=>"["+Ge(t.elements,e)+"]",ObjectPattern:(t,e)=>"{"+Ge(t.properties,e)+"}",VariableDeclaration:(t,e)=>t.kind+" "+Ge(t.declarations,e,","),VariableDeclarator:(t,e)=>ze(t.id,e)+"="+ze(t.init,e),SpreadElement:(t,e)=>"..."+ze(t.argument,e),BlockStatement:(t,e)=>"{"+Ge(t.body,e,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(t,e)=>ze(t.expression,e),IfStatement:(t,e)=>"if ("+ze(t.test,e)+")"+ze(t.consequent,e)+(t.alternate?" else "+ze(t.alternate,e):""),SwitchStatement:(t,e)=>"switch ("+ze(t.discriminant,e)+") {"+Ge(t.cases,e,"")+"}",SwitchCase:(t,e)=>(t.test?"case "+ze(t.test,e):"default")+": "+Ge(t.consequent,e,";")+";",ReturnStatement:(t,e)=>"return "+ze(t.argument,e),Program:(t,e)=>ze(t.body[0],e)};function Je(t,e={index:"row"}){return ze(t,e)}function Ze(t){const e=typeof t;return"string"===e?`"${t}"`:"object"===e&&t?Et(t)?+t:vt(t)||$t(t)?`[${t.map(Ze)}]`:Dt(t)?t+"":function(t){let e="{",n=-1;for(const i in t)++n>0&&(e+=","),e+=`"${i}":${Ze(t[i])}`;return e+="}",e}(t):t}function Xe(t,e){const n=t.length;return 1===n?(e,n)=>Ze(t[0](e,n)):(i,r)=>{let s="";for(let a=0;a<n;++a){a>0&&(s+="|");const n=t[a](i,r);if(e&&(null==n||n!=n))return null;s+=Ze(n)}return s}}function tn(){}function en(t){return t.init=t.init||tn,t.add=t.add||tn,t.rem=t.rem||tn,t}function nn(t,e){return t.product_v=!1,t.product=e}var rn={count:{create:()=>en({value:t=>t.count}),param:[]},array_agg:{create:()=>en({init:t=>t.values=!0,value:t=>t.list.values(t.stream)}),param:[1]},object_agg:{create:()=>en({init:t=>t.values=!0,value:t=>Object.fromEntries(t.list.values())}),param:[2]},map_agg:{create:()=>en({init:t=>t.values=!0,value:t=>new Map(t.list.values())}),param:[2]},entries_agg:{create:()=>en({init:t=>t.values=!0,value:t=>t.list.values(t.stream)}),param:[2]},any:{create:()=>en({add:(t,e)=>{null==t.any&&(t.any=e)},value:t=>t.valid?t.any:Rt}),param:[1]},valid:{create:()=>en({value:t=>t.valid}),param:[1]},invalid:{create:()=>en({value:t=>t.count-t.valid}),param:[1]},distinct:{create:()=>({init:t=>t.distinct=function(){const t=new Map;return{count:()=>t.size,values:()=>Array.from(t.values(),(t=>t.v)),increment(e){const n=Ze(e),i=t.get(n);i?++i.n:t.set(n,{v:e,n:1})},decrement(e){const n=Ze(e),i=t.get(n);1===i.n?t.delete(n):--i.n},forEach(e){t.forEach((({v:t,n})=>e(t,n)))}}}(),value:t=>t.distinct.count()+(t.valid===t.count?0:1),add:(t,e)=>t.distinct.increment(e),rem:(t,e)=>t.distinct.decrement(e)}),param:[1]},array_agg_distinct:{create:()=>en({value:t=>t.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>en({value:t=>{let e=Rt,n=0;return t.distinct.forEach(((t,i)=>{i>n&&(n=i,e=t)})),e}}),param:[1],req:["distinct"]},sum:{create:()=>({init:t=>t.sum=0,value:t=>t.valid?t.sum:Rt,add:(t,e)=>ge(e)?0===t.sum?t.sum=e:t.sum+=e:t.sum+=+e,rem:(t,e)=>t.sum-=e}),param:[1]},product:{create:()=>({init:t=>nn(t,1),value:t=>t.valid?t.product_v?nn(t,function(t,e=0,n=t.length){let i=t[e++];for(let r=e;r<n;++r)i*=t[r];return i}(t.list.values())):t.product:void 0,add:(t,e)=>ge(e)&&1===t.product?t.product=e:t.product*=e,rem:(t,e)=>0==e||e===1/0||e===-1/0?t.product_v=!0:t.product/=e}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:t=>t.mean=0,value:t=>t.valid?t.mean:Rt,add:(t,e)=>{t.mean_d=e-t.mean,t.mean+=t.mean_d/t.valid},rem:(t,e)=>{t.mean_d=e-t.mean,t.mean-=t.valid?t.mean_d/t.valid:t.mean}}),param:[1]},average:{create:()=>en({value:t=>t.valid?t.mean:Rt}),param:[1],req:["mean"]},variance:{create:()=>({init:t=>t.dev=0,value:t=>t.valid>1?t.dev/(t.valid-1):Rt,add:(t,e)=>t.dev+=t.mean_d*(e-t.mean),rem:(t,e)=>t.dev-=t.mean_d*(e-t.mean)}),param:[1],req:["mean"]},variancep:{create:()=>en({value:t=>t.valid>1?t.dev/t.valid:Rt}),param:[1],req:["variance"]},stdev:{create:()=>en({value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid-1)):Rt}),param:[1],req:["variance"]},stdevp:{create:()=>en({value:t=>t.valid>1?Math.sqrt(t.dev/t.valid):Rt}),param:[1],req:["variance"]},min:{create:()=>({init:t=>t.min=Rt,value:t=>t.min=Number.isNaN(t.min)?t.list.min():t.min,add:(t,e)=>{(e<t.min||t.min===Rt)&&(t.min=e)},rem:(t,e)=>{e<=t.min&&(t.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:t=>t.max=Rt,value:t=>t.max=Number.isNaN(t.max)?t.list.max():t.max,add:(t,e)=>{(e>t.max||t.max===Rt)&&(t.max=e)},rem:(t,e)=>{e>=t.max&&(t.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:t=>en({value:e=>e.list.quantile(t)}),param:[1,1],req:["array_agg"]},median:{create:()=>en({value:t=>t.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:t=>{t.cov=t.mean_x=t.mean_y=t.dev_x=t.dev_y=0},value:t=>t.valid>1?t.cov/(t.valid-1):Rt,add:(t,e,n)=>{const i=e-t.mean_x,r=n-t.mean_y;t.mean_x+=i/t.valid,t.mean_y+=r/t.valid;const s=n-t.mean_y;t.dev_x+=i*(e-t.mean_x),t.dev_y+=r*s,t.cov+=i*s},rem:(t,e,n)=>{const i=e-t.mean_x,r=n-t.mean_y;t.mean_x-=t.valid?i/t.valid:t.mean_x,t.mean_y-=t.valid?r/t.valid:t.mean_y;const s=n-t.mean_y;t.dev_x-=i*(e-t.mean_x),t.dev_y-=r*s,t.cov-=i*s}}),param:[2]},covariancep:{create:()=>en({value:t=>t.valid>1?t.cov/t.valid:Rt}),param:[2],req:["covariance"]},corr:{create:()=>en({value:t=>t.valid>1?t.cov/(Math.sqrt(t.dev_x)*Math.sqrt(t.dev_y)):Rt}),param:[2],req:["covariance"]},bins:{create:(t,e,n,i)=>en({value:r=>function(t,e,n=15,i=!0,r=0,s){const a=Math.LN10;if(null==s){const i=Math.ceil(Math.log(n)/a),o=e-t||Math.abs(t)||1,c=[5,2];for(s=Math.max(r,Math.pow(10,Math.round(Math.log(o)/a)-i));Math.ceil(o/s)>n;)s*=10;const u=c.length;for(let t=0;t<u;++t){const e=s/c[t];e>=r&&o/e<=n&&(s=e)}}if(i){let n=Math.log(s);const i=n>=0?0:1+~~(-n/a),r=Math.pow(10,-i-1);n=Math.floor(t/s+r)*s,t=t<n?n-s:n,e=Math.ceil(e/s)*s}return[t,e===t?t+s:e,s]}(r.min,r.max,t,e,n,i)}),param:[1,4],req:["min","max"]}};const sn={create(){let t;return{init:()=>t=1,value:e=>{const n=e.index;return n&&!e.peer(n)?t=n+1:t}}},param:[]},an={create(){let t;return{init:()=>t=0,value:e=>{const{index:n,peer:i,size:r}=e;let s=n;if(t<s){for(;s+1<r&&i(s+1);)++s;t=s}return(1+t)/r}}},param:[]};var on={row_number:{create:()=>({init:tn,value:t=>t.index+1}),param:[]},rank:sn,avg_rank:{create(){let t,e;return{init:()=>(t=-1,e=1),value:n=>{const i=n.index;if(i>=t){for(e=t=i+1;n.peer(t);e+=++t);e/=t-i}return e}}},param:[]},dense_rank:{create(){let t;return{init:()=>t=1,value:e=>{const n=e.index;return n&&!e.peer(n)?++t:t}}},param:[]},percent_rank:{create(){const{init:t,value:e}=sn.create();return{init:t,value:t=>(e(t)-1)/(t.size-1)}},param:[]},cume_dist:an,ntile:{create(t){(t=+t)>0||St("ntile num must be greater than zero.");const{init:e,value:n}=an.create();return{init:e,value:e=>Math.ceil(t*n(e))}},param:[0,1]},lag:{create:(t,e=Rt)=>(t=+t||1,{init:tn,value:(n,i)=>{const r=n.index-t;return r>=0?n.value(r,i):e}}),param:[1,2]},lead:{create:(t,e=Rt)=>(t=+t||1,{init:tn,value:(n,i)=>{const r=n.index+t;return r<n.size?n.value(r,i):e}}),param:[1,2]},first_value:{create:()=>({init:tn,value:(t,e)=>t.value(t.i0,e)}),param:[1]},last_value:{create:()=>({init:tn,value:(t,e)=>t.value(t.i1-1,e)}),param:[1]},nth_value:{create:t=>((t=+t)>0||St("nth_value nth must be greater than zero."),{init:tn,value:(e,n)=>{const i=e.i0+(t-1);return i<e.i1?e.value(i,n):Rt}}),param:[1,1]},fill_down:{create(t=Rt){let e;return{init:()=>e=t,value:(t,n)=>{const i=t.value(t.index,n);return Ht(i)?e=i:e}}},param:[1,1]},fill_up:{create(t=Rt){let e,n;return{init:()=>(e=t,n=-1),value:(i,r)=>i.index<=n?e:(n=function(t,e,n){for(const i=t.size;n<i;++n)if(Ht(t.value(n,e)))return n;return-1}(i,r,i.index))>=0?e=i.value(n,r):(n=i.size,e=t)}},param:[1,1]}};function cn(t){return Vt(rn,t)}function un(t){return Vt(on,t)}function ln(t){return Vt(ye,t)||"row_object"===t}function hn(t){return cn(t)&&rn[t]}function pn(t){return un(t)&&on[t]}function dn(t,e,n){return t=`"use strict"; return ${t};`,Function("fn","$",t)(e,n)}var fn={escape:(t,e,n)=>dn(t,e,n),expr:(t,e)=>dn(`(row,data,op)=>${t}`,ye,e),expr2:(t,e)=>dn(`(row0,data0,row,data)=>${t}`,ye,e),join:(t,e)=>dn(`(row1,data1,row2,data2)=>${t}`,ye,e),param:(t,e)=>dn(t,ye,e)};const mn={"==":1,"!=":1,"===":1,"!==":1};function yn(t,e,n=0,i,r){if(t.type=Ue,t.name=e,t.table=n,r&&i&&At(i.keyFor)){const e=mn[r.operator]?r.left===t?r.right:r.left:r.callee&&"equal"===r.callee.name?r.arguments[r.arguments[0]===t?1:0]:null;e&&e.type===Oe&&function(t,e,n,i){i<0?(t.type=Oe,t.value=!1,t.raw="false"):(e.type=Re,n.value=i,n.raw=i+"")}(r,t,e,i.keyFor(e.value))}return t}function gn(t){return vt(t)?t:pe(t)?t.entries():t?Object.entries(t):[]}const bn="row_object";function vn(t,e){t.type=Le;const n=t.properties=[];for(const t of gn(e)){const[e,i]=vt(t)?t:[t,t];n.push({type:Ve,key:{type:Oe,raw:be(i)},value:yn({computed:!0},e)})}return t}function _n(t){return Je(vn({},t))}function xn(t){return fn.expr(_n(t))}function wn(t,e,n,i){return new(n||(n=Promise))((function(r,s){function a(t){try{c(i.next(t))}catch(t){s(t)}}function o(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,o)}c((i=i.apply(t,e||[])).next())}))}function Sn(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function In(t){return this instanceof In?(this.v=t,this):new In(t)}function An(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(t){r[t]&&(i[t]=function(e){return new Promise((function(n,i){s.push([t,e,n,i])>1||o(t,e)}))})}function o(t,e){try{(n=r[t](e)).value instanceof In?Promise.resolve(n.value.v).then(c,u):l(s[0][2],n)}catch(t){l(s[0][3],t)}var n}function c(t){o("next",t)}function u(t){o("throw",t)}function l(t,e){t(e),s.shift(),s.length&&o(s[0][0],s[0][1])}}function Tn(t){var e,n;return e={},i("next"),i("throw",(function(t){throw t})),i("return"),e[Symbol.iterator]=function(){return this},e;function i(i,r){e[i]=t[i]?function(e){return(n=!n)?{value:In(t[i](e)),done:!1}:r?r(e):e}:r}}function kn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=Sn(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(n){e[n]=t[n]&&function(e){return new Promise((function(i,r){(function(t,e,n,i){Promise.resolve(i).then((function(e){t({value:e,done:n})}),e)})(i,r,(e=t[n](e)).done,e.value)}))}}}"function"==typeof SuppressedError&&SuppressedError;const Cn=new TextDecoder("utf-8"),Mn=t=>Cn.decode(t),En=new TextEncoder,Nn=t=>En.encode(t),Dn=t=>"function"==typeof t,On=t=>null!=t&&Object(t)===t,Bn=t=>On(t)&&Dn(t.then),Ln=t=>On(t)&&Dn(t[Symbol.iterator]),Fn=t=>On(t)&&Dn(t[Symbol.asyncIterator]),Vn=t=>On(t)&&"done"in t&&"value"in t,Un=t=>"_getDOMStream"in t&&"_getNodeStream"in t,Pn=t=>On(t)&&Dn(t.clear)&&Dn(t.bytes)&&Dn(t.position)&&Dn(t.setPosition)&&Dn(t.capacity)&&Dn(t.getBufferIdentifier)&&Dn(t.createLong),Rn="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;function jn(t,e,n=0,i=e.byteLength){const r=t.byteLength,s=new Uint8Array(t.buffer,t.byteOffset,r),a=new Uint8Array(e.buffer,e.byteOffset,Math.min(i,r));return s.set(a,n),t}function $n(t,e){const n=function(t){const e=t[0]?[t[0]]:[];let n,i,r,s;for(let a,o,c=0,u=0,l=t.length;++c<l;)a=e[u],o=t[c],!a||!o||a.buffer!==o.buffer||o.byteOffset<a.byteOffset?o&&(e[++u]=o):(({byteOffset:n,byteLength:r}=a),({byteOffset:i,byteLength:s}=o),n+r<i||i+s<n?o&&(e[++u]=o):e[u]=new Uint8Array(a.buffer,n,i-n+s));return e}(t),i=n.reduce(((t,e)=>t+e.byteLength),0);let r,s,a,o=0,c=-1;const u=Math.min(e||Number.POSITIVE_INFINITY,i);for(const t=n.length;++c<t;){if(r=n[c],s=r.subarray(0,Math.min(r.length,u-o)),u<=o+s.length){s.length<r.length?n[c]=r.subarray(s.length):s.length===r.length&&c++,a?jn(a,s,o):a=s;break}jn(a||(a=new Uint8Array(u)),s,o),o+=s.length}return[a||new Uint8Array(0),n.slice(c),i-(a?a.byteLength:0)]}function zn(t,e){let n=Vn(e)?e.value:e;return n instanceof t?t===Uint8Array?new t(n.buffer,n.byteOffset,n.byteLength):n:n?("string"==typeof n&&(n=Nn(n)),n instanceof ArrayBuffer||n instanceof Rn?new t(n):Pn(n)?zn(t,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new t(0):new t(n.buffer,n.byteOffset,n.byteLength/t.BYTES_PER_ELEMENT):t.from(n)):new t(0)}const Hn=t=>zn(Int32Array,t),qn=t=>zn(Uint8Array,t),Yn=t=>(t.next(),t);const Gn=t=>function*(t,e){const n=function*(t){yield t},i="string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof Rn?n(e):Ln(e)?e:n(e);return yield*Yn(function*(e){let n=null;do{n=e.next(yield zn(t,n))}while(!n.done)}(i[Symbol.iterator]())),new t}(Uint8Array,t);function Wn(t,e){return An(this,arguments,(function*(){if(Bn(e))return yield In(yield In(yield*Tn(kn(Wn(t,yield In(e))))));const n=function(t){return An(this,arguments,(function*(){yield yield In(yield In(t))}))},i="string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof Rn?n(e):Ln(e)?function(t){return An(this,arguments,(function*(){yield In(yield*Tn(kn(Yn(function*(t){let e=null;do{e=t.next(yield null==e?void 0:e.value)}while(!e.done)}(t[Symbol.iterator]())))))}))}(e):Fn(e)?e:n(e);return yield In(yield*Tn(kn(Yn(function(e){return An(this,arguments,(function*(){let n=null;do{n=yield In(e.next(yield yield In(zn(t,n))))}while(!n.done)}))}(i[Symbol.asyncIterator]()))))),yield In(new t)}))}const Kn=t=>Wn(Uint8Array,t);function Qn(t,e,n){if(0!==t)for(let i=-1,r=(n=n.slice(0,e)).length;++i<r;)n[i]+=t;return n.subarray(0,e)}var Jn={fromIterable:t=>Zn(function*(t){let e,n,i,r,s=!1,a=[],o=0;function c(){return"peek"===i?$n(a,r)[0]:([n,a,o]=$n(a,r),n)}({cmd:i,size:r}=yield null);const u=Gn(t)[Symbol.iterator]();try{do{if(({done:e,value:n}=Number.isNaN(r-o)?u.next():u.next(r-o)),!e&&n.byteLength>0&&(a.push(n),o+=n.byteLength),e||r<=o)do{({cmd:i,size:r}=yield c())}while(r<o)}while(!e)}catch(t){(s=!0)&&"function"==typeof u.throw&&u.throw(t)}finally{!1===s&&"function"==typeof u.return&&u.return(null)}return null}(t)),fromAsyncIterable:t=>Zn(function(t){return An(this,arguments,(function*(){let e,n,i,r,s=!1,a=[],o=0;function c(){return"peek"===i?$n(a,r)[0]:([n,a,o]=$n(a,r),n)}({cmd:i,size:r}=yield yield In(null));const u=Kn(t)[Symbol.asyncIterator]();try{do{if(({done:e,value:n}=Number.isNaN(r-o)?yield In(u.next()):yield In(u.next(r-o))),!e&&n.byteLength>0&&(a.push(n),o+=n.byteLength),e||r<=o)do{({cmd:i,size:r}=yield yield In(c()))}while(r<o)}while(!e)}catch(t){(s=!0)&&"function"==typeof u.throw&&(yield In(u.throw(t)))}finally{!1===s&&"function"==typeof u.return&&(yield In(u.return(new Uint8Array(0))))}return yield In(null)}))}(t)),fromDOMStream:t=>Zn(function(t){return An(this,arguments,(function*(){let e,n,i,r=!1,s=!1,a=[],o=0;function c(){return"peek"===n?$n(a,i)[0]:([e,a,o]=$n(a,i),e)}({cmd:n,size:i}=yield yield In(null));const u=new Xn(t);try{do{if(({done:r,value:e}=Number.isNaN(i-o)?yield In(u.read()):yield In(u.read(i-o))),!r&&e.byteLength>0&&(a.push(qn(e)),o+=e.byteLength),r||i<=o)do{({cmd:n,size:i}=yield yield In(c()))}while(i<o)}while(!r)}catch(t){(s=!0)&&(yield In(u.cancel(t)))}finally{!1===s?yield In(u.cancel()):t.locked&&u.releaseLock()}return yield In(null)}))}(t)),fromNodeStream:t=>Zn(function(t){return An(this,arguments,(function*(){const e=[];let n,i,r,s="error",a=!1,o=null,c=0,u=[];function l(){return"peek"===n?$n(u,i)[0]:([r,u,c]=$n(u,i),r)}if(({cmd:n,size:i}=yield yield In(null)),t.isTTY)return yield yield In(new Uint8Array(0)),yield In(null);try{e[0]=ti(t,"end"),e[1]=ti(t,"error");do{if(e[2]=ti(t,"readable"),[s,o]=yield In(Promise.race(e.map((t=>t[2])))),"error"===s)break;if((a="end"===s)||(Number.isFinite(i-c)?(r=qn(t.read(i-c)),r.byteLength<i-c&&(r=qn(t.read()))):r=qn(t.read()),r.byteLength>0&&(u.push(r),c+=r.byteLength)),a||i<=c)do{({cmd:n,size:i}=yield yield In(l()))}while(i<c)}while(!a)}finally{yield In(h(e,"error"===s?o:null))}return yield In(null);function h(e,n){return r=u=null,new Promise(((i,r)=>{for(const[n,i]of e)t.off(n,i);try{const e=t.destroy;e&&e.call(t,n),n=void 0}catch(t){n=t||n}finally{null!=n?r(n):i()}}))}}))}(t)),toDOMStream(t,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(t,e){throw new Error('"toNodeStream" not available in this environment')}};const Zn=t=>(t.next(),t);class Xn{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch((()=>{}))}get closed(){return this.reader?this.reader.closed.catch((()=>{})):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return wn(this,void 0,void 0,(function*(){const{reader:e,source:n}=this;e&&(yield e.cancel(t).catch((()=>{}))),n&&n.locked&&this.releaseLock()}))}read(t){return wn(this,void 0,void 0,(function*(){if(0===t)return{done:null==this.reader,value:new Uint8Array(0)};const e=yield this.reader.read();return!e.done&&(e.value=qn(e)),e}))}}const ti=(t,e)=>{const n=t=>i([e,t]);let i;return[e,n,new Promise((r=>(i=r)&&t.once(e,n)))]};var ei,ni,ii,ri,si,ai,oi,ci,ui;!function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"}(ei||(ei={})),function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"}(ni||(ni={})),function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"}(ii||(ii={})),function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"}(ri||(ri={})),function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"}(si||(si={})),function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"}(ai||(ai={})),function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"}(oi||(oi={})),function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth",t[t.DurationSecond=-27]="DurationSecond",t[t.DurationMillisecond=-28]="DurationMillisecond",t[t.DurationMicrosecond=-29]="DurationMicrosecond",t[t.DurationNanosecond=-30]="DurationNanosecond"}(ci||(ci={})),function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"}(ui||(ui={}));const li=void 0;function hi(t){if(null===t)return"null";if(t===li)return"undefined";switch(typeof t){case"number":case"bigint":return`${t}`;case"string":return`"${t}"`}return"function"==typeof t[Symbol.toPrimitive]?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?t instanceof BigInt64Array||t instanceof BigUint64Array?`[${[...t].map((t=>hi(t)))}]`:`[${t}]`:ArrayBuffer.isView(t)?`[${t}]`:JSON.stringify(t,((t,e)=>"bigint"==typeof e?`${e}`:e))}const pi=Symbol.for("isArrowBigNum");function di(t,...e){return 0===e.length?Object.setPrototypeOf(zn(this.TypedArray,t),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(t,...e),this.constructor.prototype)}function fi(...t){return di.apply(this,t)}function mi(...t){return di.apply(this,t)}function yi(...t){return di.apply(this,t)}function gi(t){const{buffer:e,byteOffset:n,length:i,signed:r}=t,s=new BigUint64Array(e,n,i),a=r&&s.at(-1)&BigInt(1)<<BigInt(63);let o=a?BigInt(1):BigInt(0),c=BigInt(0);if(a){for(const t of s)o+=~t*(BigInt(1)<<BigInt(32)*c++);o*=BigInt(-1)}else for(const t of s)o+=t*(BigInt(1)<<BigInt(32)*c++);return o}di.prototype[pi]=!0,di.prototype.toJSON=function(){return`"${bi(this)}"`},di.prototype.valueOf=function(){return gi(this)},di.prototype.toString=function(){return bi(this)},di.prototype[Symbol.toPrimitive]=function(t="default"){switch(t){case"number":return gi(this);case"string":return bi(this);case"default":return vi(this)}return bi(this)},Object.setPrototypeOf(fi.prototype,Object.create(Int32Array.prototype)),Object.setPrototypeOf(mi.prototype,Object.create(Uint32Array.prototype)),Object.setPrototypeOf(yi.prototype,Object.create(Uint32Array.prototype)),Object.assign(fi.prototype,di.prototype,{constructor:fi,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array}),Object.assign(mi.prototype,di.prototype,{constructor:mi,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array}),Object.assign(yi.prototype,di.prototype,{constructor:yi,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});const bi=t=>{if(8===t.byteLength){return`${new t.BigIntArray(t.buffer,t.byteOffset,1)[0]}`}if(!t.signed)return _i(t);let e=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);if(new Int16Array([e.at(-1)])[0]>=0)return _i(t);e=e.slice();let n=1;for(let t=0;t<e.length;t++){const i=e[t],r=~i+n;e[t]=r,n&=0===i?1:0}return`-${_i(e)}`},vi=t=>{if(8===t.byteLength){return new t.BigIntArray(t.buffer,t.byteOffset,1)[0]}return bi(t)};function _i(t){let e="";const n=new Uint32Array(2);let i=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);const r=new Uint32Array((i=new Uint16Array(i).reverse()).buffer);let s=-1;const a=i.length-1;do{for(n[0]=i[s=0];s<a;)i[s++]=n[1]=n[0]/10,n[0]=(n[0]-10*n[1]<<16)+i[s];i[s]=n[1]=n[0]/10,n[0]=n[0]-10*n[1],e=`${n[0]}${e}`}while(r[0]||r[1]||r[2]||r[3]);return null!=e?e:"0"}class xi{static new(t,e){switch(e){case!0:return new fi(t);case!1:return new mi(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new fi(t)}return 16===t.byteLength?new yi(t):new mi(t)}static signed(t){return new fi(t)}static unsigned(t){return new mi(t)}static decimal(t){return new yi(t)}constructor(t,e){return xi.new(t,e)}}function wi(t){if("bigint"==typeof t&&(t<Number.MIN_SAFE_INTEGER||t>Number.MAX_SAFE_INTEGER))throw new TypeError(`${t} is not safe to convert to a number.`);return Number(t)}var Si,Ii,Ai,Ti,ki,Ci,Mi,Ei,Ni,Di,Oi,Bi,Li,Fi,Vi,Ui,Pi,Ri,ji,$i,zi;class Hi{static isNull(t){return(null==t?void 0:t.typeId)===ci.Null}static isInt(t){return(null==t?void 0:t.typeId)===ci.Int}static isFloat(t){return(null==t?void 0:t.typeId)===ci.Float}static isBinary(t){return(null==t?void 0:t.typeId)===ci.Binary}static isUtf8(t){return(null==t?void 0:t.typeId)===ci.Utf8}static isBool(t){return(null==t?void 0:t.typeId)===ci.Bool}static isDecimal(t){return(null==t?void 0:t.typeId)===ci.Decimal}static isDate(t){return(null==t?void 0:t.typeId)===ci.Date}static isTime(t){return(null==t?void 0:t.typeId)===ci.Time}static isTimestamp(t){return(null==t?void 0:t.typeId)===ci.Timestamp}static isInterval(t){return(null==t?void 0:t.typeId)===ci.Interval}static isDuration(t){return(null==t?void 0:t.typeId)===ci.Duration}static isList(t){return(null==t?void 0:t.typeId)===ci.List}static isStruct(t){return(null==t?void 0:t.typeId)===ci.Struct}static isUnion(t){return(null==t?void 0:t.typeId)===ci.Union}static isFixedSizeBinary(t){return(null==t?void 0:t.typeId)===ci.FixedSizeBinary}static isFixedSizeList(t){return(null==t?void 0:t.typeId)===ci.FixedSizeList}static isMap(t){return(null==t?void 0:t.typeId)===ci.Map}static isDictionary(t){return(null==t?void 0:t.typeId)===ci.Dictionary}static isDenseUnion(t){return Hi.isUnion(t)&&t.mode===ni.Dense}static isSparseUnion(t){return Hi.isUnion(t)&&t.mode===ni.Sparse}get typeId(){return ci.NONE}}Si=Symbol.toStringTag,Hi[Si]=((zi=Hi.prototype).children=null,zi.ArrayType=Array,zi[Symbol.toStringTag]="DataType");let qi=class extends Hi{toString(){return"Null"}get typeId(){return ci.Null}};Ii=Symbol.toStringTag,qi[Ii]=(t=>t[Symbol.toStringTag]="Null")(qi.prototype);class Yi extends Hi{constructor(t,e){super(),this.isSigned=t,this.bitWidth=e}get typeId(){return ci.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}Ai=Symbol.toStringTag,Yi[Ai]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(Yi.prototype);class Gi extends Yi{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class Wi extends Yi{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class Ki extends Yi{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class Qi extends Yi{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class Ji extends Yi{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class Zi extends Yi{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class Xi extends Yi{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class tr extends Yi{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(Gi.prototype,"ArrayType",{value:Int8Array}),Object.defineProperty(Wi.prototype,"ArrayType",{value:Int16Array}),Object.defineProperty(Ki.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(Qi.prototype,"ArrayType",{value:BigInt64Array}),Object.defineProperty(Ji.prototype,"ArrayType",{value:Uint8Array}),Object.defineProperty(Zi.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(Xi.prototype,"ArrayType",{value:Uint32Array}),Object.defineProperty(tr.prototype,"ArrayType",{value:BigUint64Array});class er extends Hi{constructor(t){super(),this.precision=t}get typeId(){return ci.Float}get ArrayType(){switch(this.precision){case ii.HALF:return Uint16Array;case ii.SINGLE:return Float32Array;case ii.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}Ti=Symbol.toStringTag,er[Ti]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))(er.prototype);class nr extends er{constructor(){super(ii.HALF)}}class ir extends er{constructor(){super(ii.SINGLE)}}class rr extends er{constructor(){super(ii.DOUBLE)}}Object.defineProperty(nr.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(ir.prototype,"ArrayType",{value:Float32Array}),Object.defineProperty(rr.prototype,"ArrayType",{value:Float64Array});let sr=class extends Hi{constructor(){super()}get typeId(){return ci.Binary}toString(){return"Binary"}};ki=Symbol.toStringTag,sr[ki]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(sr.prototype);let ar=class extends Hi{constructor(){super()}get typeId(){return ci.Utf8}toString(){return"Utf8"}};Ci=Symbol.toStringTag,ar[Ci]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(ar.prototype);let or=class extends Hi{constructor(){super()}get typeId(){return ci.Bool}toString(){return"Bool"}};Mi=Symbol.toStringTag,or[Mi]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(or.prototype);let cr=class extends Hi{constructor(t,e,n=128){super(),this.scale=t,this.precision=e,this.bitWidth=n}get typeId(){return ci.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};Ei=Symbol.toStringTag,cr[Ei]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))(cr.prototype);class ur extends Hi{constructor(t){super(),this.unit=t}get typeId(){return ci.Date}toString(){return`Date${32*(this.unit+1)}<${ri[this.unit]}>`}}Ni=Symbol.toStringTag,ur[Ni]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Date"))(ur.prototype);class lr extends ur{constructor(){super(ri.DAY)}}class hr extends ur{constructor(){super(ri.MILLISECOND)}}class pr extends Hi{constructor(t,e){super(),this.unit=t,this.bitWidth=e}get typeId(){return ci.Time}toString(){return`Time${this.bitWidth}<${si[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}Di=Symbol.toStringTag,pr[Di]=(t=>(t.unit=null,t.bitWidth=null,t[Symbol.toStringTag]="Time"))(pr.prototype);class dr extends pr{constructor(){super(si.SECOND,32)}}class fr extends pr{constructor(){super(si.MILLISECOND,32)}}class mr extends pr{constructor(){super(si.MICROSECOND,64)}}class yr extends pr{constructor(){super(si.NANOSECOND,64)}}class gr extends Hi{constructor(t,e){super(),this.unit=t,this.timezone=e}get typeId(){return ci.Timestamp}toString(){return`Timestamp<${si[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}Oi=Symbol.toStringTag,gr[Oi]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Timestamp"))(gr.prototype);class br extends Hi{constructor(t){super(),this.unit=t}get typeId(){return ci.Interval}toString(){return`Interval<${ai[this.unit]}>`}}Bi=Symbol.toStringTag,br[Bi]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(br.prototype);class vr extends br{constructor(){super(ai.DAY_TIME)}}class _r extends br{constructor(){super(ai.YEAR_MONTH)}}let xr=class extends Hi{constructor(t){super(),this.unit=t}get typeId(){return ci.Duration}toString(){return`Duration<${si[this.unit]}>`}};Li=Symbol.toStringTag,xr[Li]=(t=>(t.unit=null,t.ArrayType=BigInt64Array,t[Symbol.toStringTag]="Duration"))(xr.prototype);let wr=class extends Hi{constructor(t){super(),this.children=[t]}get typeId(){return ci.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};Fi=Symbol.toStringTag,wr[Fi]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(wr.prototype);class Sr extends Hi{constructor(t){super(),this.children=t}get typeId(){return ci.Struct}toString(){return`Struct<{${this.children.map((t=>`${t.name}:${t.type}`)).join(", ")}}>`}}Vi=Symbol.toStringTag,Sr[Vi]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(Sr.prototype);class Ir extends Hi{constructor(t,e,n){super(),this.mode=t,this.children=n,this.typeIds=e=Int32Array.from(e),this.typeIdToChildIndex=e.reduce(((t,e,n)=>(t[e]=n)&&t||t),Object.create(null))}get typeId(){return ci.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map((t=>`${t.type}`)).join(" | ")}>`}}Ui=Symbol.toStringTag,Ir[Ui]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(Ir.prototype);let Ar=class extends Hi{constructor(t){super(),this.byteWidth=t}get typeId(){return ci.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};Pi=Symbol.toStringTag,Ar[Pi]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(Ar.prototype);let Tr=class extends Hi{constructor(t,e){super(),this.listSize=t,this.children=[e]}get typeId(){return ci.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};Ri=Symbol.toStringTag,Tr[Ri]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(Tr.prototype);class kr extends Hi{constructor(t,e=!1){var n,i,r;if(super(),this.children=[t],this.keysSorted=e,t&&(t.name="entries",null===(n=null==t?void 0:t.type)||void 0===n?void 0:n.children)){const e=null===(i=null==t?void 0:t.type)||void 0===i?void 0:i.children[0];e&&(e.name="key");const n=null===(r=null==t?void 0:t.type)||void 0===r?void 0:r.children[1];n&&(n.name="value")}}get typeId(){return ci.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map((t=>`${t.name}:${t.type}`)).join(", ")}}>`}}ji=Symbol.toStringTag,kr[ji]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))(kr.prototype);const Cr=(Mr=-1,()=>++Mr);var Mr;class Er extends Hi{constructor(t,e,n,i){super(),this.indices=e,this.dictionary=t,this.isOrdered=i||!1,this.id=null==n?Cr():wi(n)}get typeId(){return ci.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}function Nr(t){const e=t;switch(t.typeId){case ci.Decimal:return t.bitWidth/32;case ci.Timestamp:return 2;case ci.Date:case ci.Interval:return 1+e.unit;case ci.FixedSizeList:return e.listSize;case ci.FixedSizeBinary:return e.byteWidth;default:return 1}}$i=Symbol.toStringTag,Er[$i]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(Er.prototype);class Dr{visitMany(t,...e){return t.map(((t,n)=>this.visit(t,...e.map((t=>t[n])))))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,e=!0){return function(t,e,n=!0){if("number"==typeof e)return Or(t,e,n);if("string"==typeof e&&e in ci)return Or(t,ci[e],n);if(e&&e instanceof Hi)return Or(t,Br(e),n);if((null==e?void 0:e.type)&&e.type instanceof Hi)return Or(t,Br(e.type),n);return Or(t,ci.NONE,n)}(this,t,e)}getVisitFnByTypeId(t,e=!0){return Or(this,t,e)}visitNull(t,...e){return null}visitBool(t,...e){return null}visitInt(t,...e){return null}visitFloat(t,...e){return null}visitUtf8(t,...e){return null}visitBinary(t,...e){return null}visitFixedSizeBinary(t,...e){return null}visitDate(t,...e){return null}visitTimestamp(t,...e){return null}visitTime(t,...e){return null}visitDecimal(t,...e){return null}visitList(t,...e){return null}visitStruct(t,...e){return null}visitUnion(t,...e){return null}visitDictionary(t,...e){return null}visitInterval(t,...e){return null}visitDuration(t,...e){return null}visitFixedSizeList(t,...e){return null}visitMap(t,...e){return null}}function Or(t,e,n=!0){let i=null;switch(e){case ci.Null:i=t.visitNull;break;case ci.Bool:i=t.visitBool;break;case ci.Int:i=t.visitInt;break;case ci.Int8:i=t.visitInt8||t.visitInt;break;case ci.Int16:i=t.visitInt16||t.visitInt;break;case ci.Int32:i=t.visitInt32||t.visitInt;break;case ci.Int64:i=t.visitInt64||t.visitInt;break;case ci.Uint8:i=t.visitUint8||t.visitInt;break;case ci.Uint16:i=t.visitUint16||t.visitInt;break;case ci.Uint32:i=t.visitUint32||t.visitInt;break;case ci.Uint64:i=t.visitUint64||t.visitInt;break;case ci.Float:i=t.visitFloat;break;case ci.Float16:i=t.visitFloat16||t.visitFloat;break;case ci.Float32:i=t.visitFloat32||t.visitFloat;break;case ci.Float64:i=t.visitFloat64||t.visitFloat;break;case ci.Utf8:i=t.visitUtf8;break;case ci.Binary:i=t.visitBinary;break;case ci.FixedSizeBinary:i=t.visitFixedSizeBinary;break;case ci.Date:i=t.visitDate;break;case ci.DateDay:i=t.visitDateDay||t.visitDate;break;case ci.DateMillisecond:i=t.visitDateMillisecond||t.visitDate;break;case ci.Timestamp:i=t.visitTimestamp;break;case ci.TimestampSecond:i=t.visitTimestampSecond||t.visitTimestamp;break;case ci.TimestampMillisecond:i=t.visitTimestampMillisecond||t.visitTimestamp;break;case ci.TimestampMicrosecond:i=t.visitTimestampMicrosecond||t.visitTimestamp;break;case ci.TimestampNanosecond:i=t.visitTimestampNanosecond||t.visitTimestamp;break;case ci.Time:i=t.visitTime;break;case ci.TimeSecond:i=t.visitTimeSecond||t.visitTime;break;case ci.TimeMillisecond:i=t.visitTimeMillisecond||t.visitTime;break;case ci.TimeMicrosecond:i=t.visitTimeMicrosecond||t.visitTime;break;case ci.TimeNanosecond:i=t.visitTimeNanosecond||t.visitTime;break;case ci.Decimal:i=t.visitDecimal;break;case ci.List:i=t.visitList;break;case ci.Struct:i=t.visitStruct;break;case ci.Union:i=t.visitUnion;break;case ci.DenseUnion:i=t.visitDenseUnion||t.visitUnion;break;case ci.SparseUnion:i=t.visitSparseUnion||t.visitUnion;break;case ci.Dictionary:i=t.visitDictionary;break;case ci.Interval:i=t.visitInterval;break;case ci.IntervalDayTime:i=t.visitIntervalDayTime||t.visitInterval;break;case ci.IntervalYearMonth:i=t.visitIntervalYearMonth||t.visitInterval;break;case ci.Duration:i=t.visitDuration;break;case ci.DurationSecond:i=t.visitDurationSecond||t.visitDuration;break;case ci.DurationMillisecond:i=t.visitDurationMillisecond||t.visitDuration;break;case ci.DurationMicrosecond:i=t.visitDurationMicrosecond||t.visitDuration;break;case ci.DurationNanosecond:i=t.visitDurationNanosecond||t.visitDuration;break;case ci.FixedSizeList:i=t.visitFixedSizeList;break;case ci.Map:i=t.visitMap}if("function"==typeof i)return i;if(!n)return()=>null;throw new Error(`Unrecognized type '${ci[e]}'`)}function Br(t){switch(t.typeId){case ci.Null:return ci.Null;case ci.Int:{const{bitWidth:e,isSigned:n}=t;switch(e){case 8:return n?ci.Int8:ci.Uint8;case 16:return n?ci.Int16:ci.Uint16;case 32:return n?ci.Int32:ci.Uint32;case 64:return n?ci.Int64:ci.Uint64}return ci.Int}case ci.Float:switch(t.precision){case ii.HALF:return ci.Float16;case ii.SINGLE:return ci.Float32;case ii.DOUBLE:return ci.Float64}return ci.Float;case ci.Binary:return ci.Binary;case ci.Utf8:return ci.Utf8;case ci.Bool:return ci.Bool;case ci.Decimal:return ci.Decimal;case ci.Time:switch(t.unit){case si.SECOND:return ci.TimeSecond;case si.MILLISECOND:return ci.TimeMillisecond;case si.MICROSECOND:return ci.TimeMicrosecond;case si.NANOSECOND:return ci.TimeNanosecond}return ci.Time;case ci.Timestamp:switch(t.unit){case si.SECOND:return ci.TimestampSecond;case si.MILLISECOND:return ci.TimestampMillisecond;case si.MICROSECOND:return ci.TimestampMicrosecond;case si.NANOSECOND:return ci.TimestampNanosecond}return ci.Timestamp;case ci.Date:switch(t.unit){case ri.DAY:return ci.DateDay;case ri.MILLISECOND:return ci.DateMillisecond}return ci.Date;case ci.Interval:switch(t.unit){case ai.DAY_TIME:return ci.IntervalDayTime;case ai.YEAR_MONTH:return ci.IntervalYearMonth}return ci.Interval;case ci.Duration:switch(t.unit){case si.SECOND:return ci.DurationSecond;case si.MILLISECOND:return ci.DurationMillisecond;case si.MICROSECOND:return ci.DurationMicrosecond;case si.NANOSECOND:return ci.DurationNanosecond}return ci.Duration;case ci.Map:return ci.Map;case ci.List:return ci.List;case ci.Struct:return ci.Struct;case ci.Union:switch(t.mode){case ni.Dense:return ci.DenseUnion;case ni.Sparse:return ci.SparseUnion}return ci.Union;case ci.FixedSizeBinary:return ci.FixedSizeBinary;case ci.FixedSizeList:return ci.FixedSizeList;case ci.Dictionary:return ci.Dictionary}throw new Error(`Unrecognized type '${ci[t.typeId]}'`)}Dr.prototype.visitInt8=null,Dr.prototype.visitInt16=null,Dr.prototype.visitInt32=null,Dr.prototype.visitInt64=null,Dr.prototype.visitUint8=null,Dr.prototype.visitUint16=null,Dr.prototype.visitUint32=null,Dr.prototype.visitUint64=null,Dr.prototype.visitFloat16=null,Dr.prototype.visitFloat32=null,Dr.prototype.visitFloat64=null,Dr.prototype.visitDateDay=null,Dr.prototype.visitDateMillisecond=null,Dr.prototype.visitTimestampSecond=null,Dr.prototype.visitTimestampMillisecond=null,Dr.prototype.visitTimestampMicrosecond=null,Dr.prototype.visitTimestampNanosecond=null,Dr.prototype.visitTimeSecond=null,Dr.prototype.visitTimeMillisecond=null,Dr.prototype.visitTimeMicrosecond=null,Dr.prototype.visitTimeNanosecond=null,Dr.prototype.visitDenseUnion=null,Dr.prototype.visitSparseUnion=null,Dr.prototype.visitIntervalDayTime=null,Dr.prototype.visitIntervalYearMonth=null,Dr.prototype.visitDuration=null,Dr.prototype.visitDurationSecond=null,Dr.prototype.visitDurationMillisecond=null,Dr.prototype.visitDurationMicrosecond=null,Dr.prototype.visitDurationNanosecond=null;const Lr=new Float64Array(1),Fr=new Uint32Array(Lr.buffer);function Vr(t){const e=(31744&t)>>10,n=(1023&t)/1024,i=Math.pow(-1,(32768&t)>>15);switch(e){case 31:return i*(n?Number.NaN:1/0);case 0:return i*(n?6103515625e-14*n:0)}return i*Math.pow(2,e-15)*(1+n)}function Ur(t){if(t!=t)return 32256;Lr[0]=t;const e=(2147483648&Fr[1])>>16&65535;let n=2146435072&Fr[1],i=0;return n>=1089470464?Fr[0]>0?n=31744:(n=(2080374784&n)>>16,i=(1048575&Fr[1])>>10):n<=1056964608?(i=1048576+(1048575&Fr[1]),i=1048576+(i<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,i=512+(1048575&Fr[1])>>10),e|n|65535&i}class Pr extends Dr{}function Rr(t){return(e,n,i)=>{if(e.setValid(n,null!=i))return t(e,n,i)}}const jr=(t,e,n)=>{t[e]=Math.trunc(n%4294967296),t[e+1]=Math.trunc(n/4294967296)},$r=(t,e,n,i)=>{if(n+1<e.length){const{[n]:r,[n+1]:s}=e;t.set(i.subarray(0,s-r),r)}},zr=({values:t},e,n)=>{t[e]=n},Hr=({values:t},e,n)=>{t[e]=n},qr=({values:t},e,n)=>{t[e]=Ur(n)},Yr=({values:t},e,n)=>{((t,e,n)=>{t[e]=Math.trunc(n/864e5)})(t,e,n.valueOf())},Gr=({values:t},e,n)=>{jr(t,2*e,n.valueOf())},Wr=({stride:t,values:e},n,i)=>{e.set(i.subarray(0,t),t*n)},Kr=(t,e,n)=>{t.type.unit===ri.DAY?Yr(t,e,n):Gr(t,e,n)},Qr=({values:t},e,n)=>jr(t,2*e,n/1e3),Jr=({values:t},e,n)=>jr(t,2*e,n),Zr=({values:t},e,n)=>((t,e,n)=>{t[e]=Math.trunc(1e3*n%4294967296),t[e+1]=Math.trunc(1e3*n/4294967296)})(t,2*e,n),Xr=({values:t},e,n)=>((t,e,n)=>{t[e]=Math.trunc(1e6*n%4294967296),t[e+1]=Math.trunc(1e6*n/4294967296)})(t,2*e,n),ts=(t,e,n)=>{switch(t.type.unit){case si.SECOND:return Qr(t,e,n);case si.MILLISECOND:return Jr(t,e,n);case si.MICROSECOND:return Zr(t,e,n);case si.NANOSECOND:return Xr(t,e,n)}},es=({values:t},e,n)=>{t[e]=n},ns=({values:t},e,n)=>{t[e]=n},is=({values:t},e,n)=>{t[e]=n},rs=({values:t},e,n)=>{t[e]=n},ss=(t,e,n)=>{switch(t.type.unit){case si.SECOND:return es(t,e,n);case si.MILLISECOND:return ns(t,e,n);case si.MICROSECOND:return is(t,e,n);case si.NANOSECOND:return rs(t,e,n)}},as=({values:t,stride:e},n,i)=>{t.set(i.subarray(0,e),e*n)},os=(t,e,n)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[i];gs.visit(r,t.valueOffsets[e],n)},cs=(t,e,n)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[i];gs.visit(r,e,n)},us=(t,e,n)=>{t.type.unit===ai.DAY_TIME?ls(t,e,n):hs(t,e,n)},ls=({values:t},e,n)=>{t.set(n.subarray(0,2),2*e)},hs=({values:t},e,n)=>{t[e]=12*n[0]+n[1]%12},ps=({values:t},e,n)=>{t[e]=n},ds=({values:t},e,n)=>{t[e]=n},fs=({values:t},e,n)=>{t[e]=n},ms=({values:t},e,n)=>{t[e]=n},ys=(t,e,n)=>{switch(t.type.unit){case si.SECOND:return ps(t,e,n);case si.MILLISECOND:return ds(t,e,n);case si.MICROSECOND:return fs(t,e,n);case si.NANOSECOND:return ms(t,e,n)}};Pr.prototype.visitBool=Rr((({offset:t,values:e},n,i)=>{const r=t+n;i?e[r>>3]|=1<<r%8:e[r>>3]&=~(1<<r%8)})),Pr.prototype.visitInt=Rr(zr),Pr.prototype.visitInt8=Rr(zr),Pr.prototype.visitInt16=Rr(zr),Pr.prototype.visitInt32=Rr(zr),Pr.prototype.visitInt64=Rr(zr),Pr.prototype.visitUint8=Rr(zr),Pr.prototype.visitUint16=Rr(zr),Pr.prototype.visitUint32=Rr(zr),Pr.prototype.visitUint64=Rr(zr),Pr.prototype.visitFloat=Rr(((t,e,n)=>{switch(t.type.precision){case ii.HALF:return qr(t,e,n);case ii.SINGLE:case ii.DOUBLE:return Hr(t,e,n)}})),Pr.prototype.visitFloat16=Rr(qr),Pr.prototype.visitFloat32=Rr(Hr),Pr.prototype.visitFloat64=Rr(Hr),Pr.prototype.visitUtf8=Rr((({values:t,valueOffsets:e},n,i)=>{$r(t,e,n,Nn(i))})),Pr.prototype.visitBinary=Rr((({values:t,valueOffsets:e},n,i)=>$r(t,e,n,i))),Pr.prototype.visitFixedSizeBinary=Rr(Wr),Pr.prototype.visitDate=Rr(Kr),Pr.prototype.visitDateDay=Rr(Yr),Pr.prototype.visitDateMillisecond=Rr(Gr),Pr.prototype.visitTimestamp=Rr(ts),Pr.prototype.visitTimestampSecond=Rr(Qr),Pr.prototype.visitTimestampMillisecond=Rr(Jr),Pr.prototype.visitTimestampMicrosecond=Rr(Zr),Pr.prototype.visitTimestampNanosecond=Rr(Xr),Pr.prototype.visitTime=Rr(ss),Pr.prototype.visitTimeSecond=Rr(es),Pr.prototype.visitTimeMillisecond=Rr(ns),Pr.prototype.visitTimeMicrosecond=Rr(is),Pr.prototype.visitTimeNanosecond=Rr(rs),Pr.prototype.visitDecimal=Rr(as),Pr.prototype.visitList=Rr(((t,e,n)=>{const i=t.children[0],r=t.valueOffsets,s=gs.getVisitFn(i);if(Array.isArray(n))for(let t=-1,a=r[e],o=r[e+1];a<o;)s(i,a++,n[++t]);else for(let t=-1,a=r[e],o=r[e+1];a<o;)s(i,a++,n.get(++t))})),Pr.prototype.visitStruct=Rr(((t,e,n)=>{const i=t.type.children.map((t=>gs.getVisitFn(t.type))),r=n instanceof Map?(s=e,a=n,(t,e,n,i)=>e&&t(e,s,a.get(n.name))):n instanceof $a?((t,e)=>(n,i,r,s)=>i&&n(i,t,e.get(s)))(e,n):Array.isArray(n)?((t,e)=>(n,i,r,s)=>i&&n(i,t,e[s]))(e,n):((t,e)=>(n,i,r,s)=>i&&n(i,t,e[r.name]))(e,n);var s,a;t.type.children.forEach(((e,n)=>r(i[n],t.children[n],e,n)))})),Pr.prototype.visitUnion=Rr(((t,e,n)=>{t.type.mode===ni.Dense?os(t,e,n):cs(t,e,n)})),Pr.prototype.visitDenseUnion=Rr(os),Pr.prototype.visitSparseUnion=Rr(cs),Pr.prototype.visitDictionary=Rr(((t,e,n)=>{var i;null===(i=t.dictionary)||void 0===i||i.set(t.values[e],n)})),Pr.prototype.visitInterval=Rr(us),Pr.prototype.visitIntervalDayTime=Rr(ls),Pr.prototype.visitIntervalYearMonth=Rr(hs),Pr.prototype.visitDuration=Rr(ys),Pr.prototype.visitDurationSecond=Rr(ps),Pr.prototype.visitDurationMillisecond=Rr(ds),Pr.prototype.visitDurationMicrosecond=Rr(fs),Pr.prototype.visitDurationNanosecond=Rr(ms),Pr.prototype.visitFixedSizeList=Rr(((t,e,n)=>{const{stride:i}=t,r=t.children[0],s=gs.getVisitFn(r);if(Array.isArray(n))for(let t=-1,a=e*i;++t<i;)s(r,a+t,n[t]);else for(let t=-1,a=e*i;++t<i;)s(r,a+t,n.get(t))})),Pr.prototype.visitMap=Rr(((t,e,n)=>{const i=t.children[0],{valueOffsets:r}=t,s=gs.getVisitFn(i);let{[e]:a,[e+1]:o}=r;const c=n instanceof Map?n.entries():Object.entries(n);for(const t of c)if(s(i,a,t),++a>=o)break}));const gs=new Pr,bs=Symbol.for("parent"),vs=Symbol.for("rowIndex");class _s{constructor(t,e){return this[bs]=t,this[vs]=e,new Proxy(this,new ws)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[vs],e=this[bs],n=e.type.children,i={};for(let r=-1,s=n.length;++r<s;)i[n[r].name]=Ws.visit(e.children[r],t);return i}toString(){return`{${[...this].map((([t,e])=>`${hi(t)}: ${hi(e)}`)).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new xs(this[bs],this[vs])}}class xs{constructor(t,e){this.childIndex=0,this.children=t.children,this.rowIndex=e,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Ws.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(_s.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[bs]:{writable:!0,enumerable:!1,configurable:!1,value:null},[vs]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class ws{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[bs].type.children.map((t=>t.name))}has(t,e){return-1!==t[bs].type.children.findIndex((t=>t.name===e))}getOwnPropertyDescriptor(t,e){if(-1!==t[bs].type.children.findIndex((t=>t.name===e)))return{writable:!0,enumerable:!0,configurable:!0}}get(t,e){if(Reflect.has(t,e))return t[e];const n=t[bs].type.children.findIndex((t=>t.name===e));if(-1!==n){const i=Ws.visit(t[bs].children[n],t[vs]);return Reflect.set(t,e,i),i}}set(t,e,n){const i=t[bs].type.children.findIndex((t=>t.name===e));return-1!==i?(gs.visit(t[bs].children[i],t[vs],n),Reflect.set(t,e,n)):!(!Reflect.has(t,e)&&"symbol"!=typeof e)&&Reflect.set(t,e,n)}}class Ss extends Dr{}function Is(t){return(e,n)=>e.getValid(n)?t(e,n):null}const As=(t,e)=>4294967296*t[e+1]+(t[e]>>>0),Ts=t=>new Date(t),ks=(t,e,n)=>{if(n+1>=e.length)return null;const i=e[n],r=e[n+1];return t.subarray(i,r)},Cs=({values:t},e)=>((t,e)=>Ts(((t,e)=>864e5*t[e])(t,e)))(t,e),Ms=({values:t},e)=>((t,e)=>Ts(As(t,e)))(t,2*e),Es=({stride:t,values:e},n)=>e[t*n],Ns=({values:t},e)=>t[e],Ds=({values:t},e)=>1e3*As(t,2*e),Os=({values:t},e)=>As(t,2*e),Bs=({values:t},e)=>((t,e)=>t[e+1]/1e3*4294967296+(t[e]>>>0)/1e3)(t,2*e),Ls=({values:t},e)=>((t,e)=>t[e+1]/1e6*4294967296+(t[e]>>>0)/1e6)(t,2*e),Fs=({values:t},e)=>t[e],Vs=({values:t},e)=>t[e],Us=({values:t},e)=>t[e],Ps=({values:t},e)=>t[e],Rs=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[n];return Ws.visit(i,t.valueOffsets[e])},js=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[n];return Ws.visit(i,e)},$s=({values:t},e)=>t.subarray(2*e,2*(e+1)),zs=({values:t},e)=>{const n=t[e],i=new Int32Array(2);return i[0]=Math.trunc(n/12),i[1]=Math.trunc(n%12),i},Hs=({values:t},e)=>t[e],qs=({values:t},e)=>t[e],Ys=({values:t},e)=>t[e],Gs=({values:t},e)=>t[e];Ss.prototype.visitNull=Is(((t,e)=>null)),Ss.prototype.visitBool=Is((({offset:t,values:e},n)=>{const i=t+n;return!!(e[i>>3]&1<<i%8)})),Ss.prototype.visitInt=Is((({values:t},e)=>t[e])),Ss.prototype.visitInt8=Is(Es),Ss.prototype.visitInt16=Is(Es),Ss.prototype.visitInt32=Is(Es),Ss.prototype.visitInt64=Is(Ns),Ss.prototype.visitUint8=Is(Es),Ss.prototype.visitUint16=Is(Es),Ss.prototype.visitUint32=Is(Es),Ss.prototype.visitUint64=Is(Ns),Ss.prototype.visitFloat=Is((({type:t,values:e},n)=>t.precision!==ii.HALF?e[n]:Vr(e[n]))),Ss.prototype.visitFloat16=Is((({stride:t,values:e},n)=>Vr(e[t*n]))),Ss.prototype.visitFloat32=Is(Es),Ss.prototype.visitFloat64=Is(Es),Ss.prototype.visitUtf8=Is((({values:t,valueOffsets:e},n)=>{const i=ks(t,e,n);return null!==i?Mn(i):null})),Ss.prototype.visitBinary=Is((({values:t,valueOffsets:e},n)=>ks(t,e,n))),Ss.prototype.visitFixedSizeBinary=Is((({stride:t,values:e},n)=>e.subarray(t*n,t*(n+1)))),Ss.prototype.visitDate=Is(((t,e)=>t.type.unit===ri.DAY?Cs(t,e):Ms(t,e))),Ss.prototype.visitDateDay=Is(Cs),Ss.prototype.visitDateMillisecond=Is(Ms),Ss.prototype.visitTimestamp=Is(((t,e)=>{switch(t.type.unit){case si.SECOND:return Ds(t,e);case si.MILLISECOND:return Os(t,e);case si.MICROSECOND:return Bs(t,e);case si.NANOSECOND:return Ls(t,e)}})),Ss.prototype.visitTimestampSecond=Is(Ds),Ss.prototype.visitTimestampMillisecond=Is(Os),Ss.prototype.visitTimestampMicrosecond=Is(Bs),Ss.prototype.visitTimestampNanosecond=Is(Ls),Ss.prototype.visitTime=Is(((t,e)=>{switch(t.type.unit){case si.SECOND:return Fs(t,e);case si.MILLISECOND:return Vs(t,e);case si.MICROSECOND:return Us(t,e);case si.NANOSECOND:return Ps(t,e)}})),Ss.prototype.visitTimeSecond=Is(Fs),Ss.prototype.visitTimeMillisecond=Is(Vs),Ss.prototype.visitTimeMicrosecond=Is(Us),Ss.prototype.visitTimeNanosecond=Is(Ps),Ss.prototype.visitDecimal=Is((({values:t,stride:e},n)=>xi.decimal(t.subarray(e*n,e*(n+1))))),Ss.prototype.visitList=Is(((t,e)=>{const{valueOffsets:n,stride:i,children:r}=t,{[e*i]:s,[e*i+1]:a}=n,o=r[0].slice(s,a-s);return new $a([o])})),Ss.prototype.visitStruct=Is(((t,e)=>new _s(t,e))),Ss.prototype.visitUnion=Is(((t,e)=>t.type.mode===ni.Dense?Rs(t,e):js(t,e))),Ss.prototype.visitDenseUnion=Is(Rs),Ss.prototype.visitSparseUnion=Is(js),Ss.prototype.visitDictionary=Is(((t,e)=>{var n;return null===(n=t.dictionary)||void 0===n?void 0:n.get(t.values[e])})),Ss.prototype.visitInterval=Is(((t,e)=>t.type.unit===ai.DAY_TIME?$s(t,e):zs(t,e))),Ss.prototype.visitIntervalDayTime=Is($s),Ss.prototype.visitIntervalYearMonth=Is(zs),Ss.prototype.visitDuration=Is(((t,e)=>{switch(t.type.unit){case si.SECOND:return Hs(t,e);case si.MILLISECOND:return qs(t,e);case si.MICROSECOND:return Ys(t,e);case si.NANOSECOND:return Gs(t,e)}})),Ss.prototype.visitDurationSecond=Is(Hs),Ss.prototype.visitDurationMillisecond=Is(qs),Ss.prototype.visitDurationMicrosecond=Is(Ys),Ss.prototype.visitDurationNanosecond=Is(Gs),Ss.prototype.visitFixedSizeList=Is(((t,e)=>{const{stride:n,children:i}=t,r=i[0].slice(e*n,n);return new $a([r])})),Ss.prototype.visitMap=Is(((t,e)=>{const{valueOffsets:n,children:i}=t,{[e]:r,[e+1]:s}=n,a=i[0];return new Js(a.slice(r,s-r))}));const Ws=new Ss,Ks=Symbol.for("keys"),Qs=Symbol.for("vals");class Js{constructor(t){return this[Ks]=new $a([t.children[0]]).memoize(),this[Qs]=t.children[1],new Proxy(this,new Xs)}[Symbol.iterator](){return new Zs(this[Ks],this[Qs])}get size(){return this[Ks].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Ks],e=this[Qs],n={};for(let i=-1,r=t.length;++i<r;)n[t.get(i)]=Ws.visit(e,i);return n}toString(){return`{${[...this].map((([t,e])=>`${hi(t)}: ${hi(e)}`)).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class Zs{constructor(t,e){this.keys=t,this.vals=e,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Ws.visit(this.vals,t)]})}}class Xs{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Ks].toArray().map(String)}has(t,e){return t[Ks].includes(e)}getOwnPropertyDescriptor(t,e){if(-1!==t[Ks].indexOf(e))return{writable:!0,enumerable:!0,configurable:!0}}get(t,e){if(Reflect.has(t,e))return t[e];const n=t[Ks].indexOf(e);if(-1!==n){const i=Ws.visit(Reflect.get(t,Qs),n);return Reflect.set(t,e,i),i}}set(t,e,n){const i=t[Ks].indexOf(e);return-1!==i?(gs.visit(Reflect.get(t,Qs),i,n),Reflect.set(t,e,n)):!!Reflect.has(t,e)&&Reflect.set(t,e,n)}}let ta;function ea(t,e,n,i){const{length:r=0}=t;let s="number"!=typeof e?0:e,a="number"!=typeof n?r:n;return s<0&&(s=(s%r+r)%r),a<0&&(a=(a%r+r)%r),a<s&&(ta=s,s=a,a=ta),a>r&&(a=r),i?i(t,s,a):[s,a]}Object.defineProperties(Js.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Ks]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Qs]:{writable:!0,enumerable:!1,configurable:!1,value:null}});const na=t=>t!=t;function ia(t){if("object"!==typeof t||null===t)return na(t)?na:e=>e===t;if(t instanceof Date){const e=t.valueOf();return t=>t instanceof Date&&t.valueOf()===e}return ArrayBuffer.isView(t)?e=>!!e&&function(t,e){let n=0;const i=t.length;if(i!==e.length)return!1;if(i>0)do{if(t[n]!==e[n])return!1}while(++n<i);return!0}(t,e):t instanceof Map?function(t){let e=-1;const n=[];for(const i of t.values())n[++e]=ia(i);return ra(n)}(t):Array.isArray(t)?function(t){const e=[];for(let n=-1,i=t.length;++n<i;)e[n]=ia(t[n]);return ra(e)}(t):t instanceof $a?function(t){const e=[];for(let n=-1,i=t.length;++n<i;)e[n]=ia(t.get(n));return ra(e)}(t):function(t,e=!1){const n=Object.keys(t);if(!e&&0===n.length)return()=>!1;const i=[];for(let e=-1,r=n.length;++e<r;)i[e]=ia(t[n[e]]);return ra(i,n)}(t,!0)}function ra(t,e){return n=>{if(!n||"object"!=typeof n)return!1;switch(n.constructor){case Array:return function(t,e){const n=t.length;if(e.length!==n)return!1;for(let i=-1;++i<n;)if(!t[i](e[i]))return!1;return!0}(t,n);case Map:return sa(t,n,n.keys());case Js:case _s:case Object:case void 0:return sa(t,n,e||Object.keys(n))}return n instanceof $a&&function(t,e){const n=t.length;if(e.length!==n)return!1;for(let i=-1;++i<n;)if(!t[i](e.get(i)))return!1;return!0}(t,n)}}function sa(t,e,n){const i=n[Symbol.iterator](),r=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),s=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let a=0;const o=t.length;let c=s.next(),u=i.next(),l=r.next();for(;a<o&&!u.done&&!l.done&&!c.done&&(u.value===l.value&&t[a](c.value));++a,u=i.next(),l=r.next(),c=s.next());return!!(a===o&&u.done&&l.done&&c.done)||(i.return&&i.return(),r.return&&r.return(),s.return&&s.return(),!1)}function aa(t,e,n,i){return!!(n&1<<i)}function oa(t,e,n,i){return(n&1<<i)>>i}function ca(t,e,n){const i=n.byteLength+7&-8;if(t>0||n.byteLength<i){const r=new Uint8Array(i);return r.set(t%8==0?n.subarray(t>>3):ua(new la(n,t,e,null,aa)).subarray(0,i)),r}return n}function ua(t){const e=[];let n=0,i=0,r=0;for(const s of t)s&&(r|=1<<i),8==++i&&(e[n++]=r,r=i=0);(0===n||i>0)&&(e[n++]=r);const s=new Uint8Array(e.length+7&-8);return s.set(e),s}class la{constructor(t,e,n,i,r){this.bytes=t,this.length=n,this.context=i,this.get=r,this.bit=e%8,this.byteIndex=e>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(8===this.bit&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function ha(t,e,n){if(n-e<=0)return 0;if(n-e<8){let i=0;for(const r of new la(t,e,n-e,t,oa))i+=r;return i}const i=n>>3<<3,r=e+(e%8==0?0:8-e%8);return ha(t,e,r)+ha(t,i,n)+function(t,e,n){let i=0,r=Math.trunc(e);const s=new DataView(t.buffer,t.byteOffset,t.byteLength),a=void 0===n?t.byteLength:r+n;for(;a-r>=4;)i+=pa(s.getUint32(r)),r+=4;for(;a-r>=2;)i+=pa(s.getUint16(r)),r+=2;for(;a-r>=1;)i+=pa(s.getUint8(r)),r+=1;return i}(t,r>>3,i-r>>3)}function pa(t){let e=Math.trunc(t);return e-=e>>>1&1431655765,e=(858993459&e)+(e>>>2&858993459),16843009*(e+(e>>>4)&252645135)>>>24}class da{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(0!==this._nullCount){const{type:t}=this;return Hi.isSparseUnion(t)||Hi.isDenseUnion(t)?this.children.some((t=>t.nullable)):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:e,values:n,nullBitmap:i,typeIds:r}=this;return e&&(t+=e.byteLength),n&&(t+=n.byteLength),i&&(t+=i.byteLength),r&&(t+=r.byteLength),this.children.reduce(((t,e)=>t+e.byteLength),t)}get nullCount(){if(Hi.isUnion(this.type))return this.children.reduce(((t,e)=>t+e.nullCount),0);let t,e=this._nullCount;return e<=-1&&(t=this.nullBitmap)&&(this._nullCount=e=this.length-ha(t,this.offset,this.offset+this.length)),e}constructor(t,e,n,i,r,s=[],a){let o;this.type=t,this.children=s,this.dictionary=a,this.offset=Math.floor(Math.max(e||0,0)),this.length=Math.floor(Math.max(n||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1)),r instanceof da?(this.stride=r.stride,this.values=r.values,this.typeIds=r.typeIds,this.nullBitmap=r.nullBitmap,this.valueOffsets=r.valueOffsets):(this.stride=Nr(t),r&&((o=r[0])&&(this.valueOffsets=o),(o=r[1])&&(this.values=o),(o=r[2])&&(this.nullBitmap=o),(o=r[3])&&(this.typeIds=o)))}getValid(t){const{type:e}=this;if(Hi.isUnion(e)){const n=e,i=this.children[n.typeIdToChildIndex[this.typeIds[t]]],r=n.mode===ni.Dense?this.valueOffsets[t]:t;return i.getValid(r)}if(this.nullable&&this.nullCount>0){const e=this.offset+t;return!!(this.nullBitmap[e>>3]&1<<e%8)}return!0}setValid(t,e){let n;const{type:i}=this;if(Hi.isUnion(i)){const r=i,s=this.children[r.typeIdToChildIndex[this.typeIds[t]]],a=r.mode===ni.Dense?this.valueOffsets[t]:t;n=s.getValid(a),s.setValid(a,e)}else{let{nullBitmap:i}=this;const{offset:r,length:s}=this,a=r+t,o=1<<a%8,c=a>>3;(!i||i.byteLength<=c)&&(i=new Uint8Array((r+s+63&-64)>>3).fill(255),this.nullCount>0&&i.set(ca(r,s,this.nullBitmap),0),Object.assign(this,{nullBitmap:i,_nullCount:-1}));const u=i[c];n=!!(u&o),i[c]=e?u|o:u&~o}return n!==!!e&&(this._nullCount=this.nullCount+(e?-1:1)),e}clone(t=this.type,e=this.offset,n=this.length,i=this._nullCount,r=this,s=this.children){return new da(t,e,n,i,r,s,this.dictionary)}slice(t,e){const{stride:n,typeId:i,children:r}=this,s=+(0===this._nullCount)-1,a=16===i?n:1,o=this._sliceBuffers(t,e,n,i);return this.clone(this.type,this.offset+t,e,s,o,0===r.length||this.valueOffsets?r:this._sliceChildren(r,a*t,a*e))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===ci.Null)return this.clone(this.type,0,t,0);const{length:e,nullCount:n}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,e>>3);i[e>>3]=(1<<e-(-8&e))-1,n>0&&i.set(ca(this.offset,e,this.nullBitmap),0);const r=this.buffers;return r[ui.VALIDITY]=i,this.clone(this.type,0,t,n+(t-e),r)}_sliceBuffers(t,e,n,i){let r;const{buffers:s}=this;return(r=s[ui.TYPE])&&(s[ui.TYPE]=r.subarray(t,t+e)),(r=s[ui.OFFSET])&&(s[ui.OFFSET]=r.subarray(t,t+e+1))||(r=s[ui.DATA])&&(s[ui.DATA]=6===i?r:r.subarray(n*t,n*(t+e))),s}_sliceChildren(t,e,n){return t.map((t=>t.slice(e,n)))}}da.prototype.children=Object.freeze([]);class fa extends Dr{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{type:e,offset:n=0,length:i=0}=t;return new da(e,n,i,i)}visitBool(t){const{type:e,offset:n=0}=t,i=qn(t.nullBitmap),r=zn(e.ArrayType,t.data),{length:s=r.length>>3,nullCount:a=(t.nullBitmap?-1:0)}=t;return new da(e,n,s,a,[void 0,r,i])}visitInt(t){const{type:e,offset:n=0}=t,i=qn(t.nullBitmap),r=zn(e.ArrayType,t.data),{length:s=r.length,nullCount:a=(t.nullBitmap?-1:0)}=t;return new da(e,n,s,a,[void 0,r,i])}visitFloat(t){const{type:e,offset:n=0}=t,i=qn(t.nullBitmap),r=zn(e.ArrayType,t.data),{length:s=r.length,nullCount:a=(t.nullBitmap?-1:0)}=t;return new da(e,n,s,a,[void 0,r,i])}visitUtf8(t){const{type:e,offset:n=0}=t,i=qn(t.data),r=qn(t.nullBitmap),s=Hn(t.valueOffsets),{length:a=s.length-1,nullCount:o=(t.nullBitmap?-1:0)}=t;return new da(e,n,a,o,[s,i,r])}visitBinary(t){const{type:e,offset:n=0}=t,i=qn(t.data),r=qn(t.nullBitmap),s=Hn(t.valueOffsets),{length:a=s.length-1,nullCount:o=(t.nullBitmap?-1:0)}=t;return new da(e,n,a,o,[s,i,r])}visitFixedSizeBinary(t){const{type:e,offset:n=0}=t,i=qn(t.nullBitmap),r=zn(e.ArrayType,t.data),{length:s=r.length/Nr(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new da(e,n,s,a,[void 0,r,i])}visitDate(t){const{type:e,offset:n=0}=t,i=qn(t.nullBitmap),r=zn(e.ArrayType,t.data),{length:s=r.length/Nr(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new da(e,n,s,a,[void 0,r,i])}visitTimestamp(t){const{type:e,offset:n=0}=t,i=qn(t.nullBitmap),r=zn(e.ArrayType,t.data),{length:s=r.length/Nr(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new da(e,n,s,a,[void 0,r,i])}visitTime(t){const{type:e,offset:n=0}=t,i=qn(t.nullBitmap),r=zn(e.ArrayType,t.data),{length:s=r.length/Nr(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new da(e,n,s,a,[void 0,r,i])}visitDecimal(t){const{type:e,offset:n=0}=t,i=qn(t.nullBitmap),r=zn(e.ArrayType,t.data),{length:s=r.length/Nr(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new da(e,n,s,a,[void 0,r,i])}visitList(t){const{type:e,offset:n=0,child:i}=t,r=qn(t.nullBitmap),s=Hn(t.valueOffsets),{length:a=s.length-1,nullCount:o=(t.nullBitmap?-1:0)}=t;return new da(e,n,a,o,[s,void 0,r],[i])}visitStruct(t){const{type:e,offset:n=0,children:i=[]}=t,r=qn(t.nullBitmap),{length:s=i.reduce(((t,{length:e})=>Math.max(t,e)),0),nullCount:a=(t.nullBitmap?-1:0)}=t;return new da(e,n,s,a,[void 0,void 0,r],i)}visitUnion(t){const{type:e,offset:n=0,children:i=[]}=t,r=zn(e.ArrayType,t.typeIds),{length:s=r.length,nullCount:a=-1}=t;if(Hi.isSparseUnion(e))return new da(e,n,s,a,[void 0,void 0,void 0,r],i);const o=Hn(t.valueOffsets);return new da(e,n,s,a,[o,void 0,void 0,r],i)}visitDictionary(t){const{type:e,offset:n=0}=t,i=qn(t.nullBitmap),r=zn(e.indices.ArrayType,t.data),{dictionary:s=new $a([(new fa).visit({type:e.dictionary})])}=t,{length:a=r.length,nullCount:o=(t.nullBitmap?-1:0)}=t;return new da(e,n,a,o,[void 0,r,i],[],s)}visitInterval(t){const{type:e,offset:n=0}=t,i=qn(t.nullBitmap),r=zn(e.ArrayType,t.data),{length:s=r.length/Nr(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new da(e,n,s,a,[void 0,r,i])}visitDuration(t){const{type:e,offset:n=0}=t,i=qn(t.nullBitmap),r=zn(e.ArrayType,t.data),{length:s=r.length,nullCount:a=(t.nullBitmap?-1:0)}=t;return new da(e,n,s,a,[void 0,r,i])}visitFixedSizeList(t){const{type:e,offset:n=0,child:i=(new fa).visit({type:e.valueType})}=t,r=qn(t.nullBitmap),{length:s=i.length/Nr(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new da(e,n,s,a,[void 0,void 0,r],[i])}visitMap(t){const{type:e,offset:n=0,child:i=(new fa).visit({type:e.childType})}=t,r=qn(t.nullBitmap),s=Hn(t.valueOffsets),{length:a=s.length-1,nullCount:o=(t.nullBitmap?-1:0)}=t;return new da(e,n,a,o,[s,void 0,r],[i])}}const ma=new fa;function ya(t){return ma.visit(t)}class ga{constructor(t=0,e){this.numChunks=t,this.getChunkIterator=e,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function ba(t){return t.reduce(((t,e)=>t+e.nullCount),0)}function va(t){return t.reduce(((t,e,n)=>(t[n+1]=t[n]+e.length,t)),new Uint32Array(t.length+1))}function _a(t,e,n,i){const r=[];for(let s=-1,a=t.length;++s<a;){const a=t[s],o=e[s],{length:c}=a;if(o>=i)break;if(n>=o+c)continue;if(o>=n&&o+c<=i){r.push(a);continue}const u=Math.max(0,n-o),l=Math.min(i-o,c);r.push(a.slice(u,l-u))}return 0===r.length&&r.push(t[0].slice(0,0)),r}function xa(t,e,n,i){let r=0,s=0,a=e.length-1;do{if(r>=a-1)return n<e[a]?i(t,r,n-e[r]):null;s=r+Math.trunc(.5*(a-r)),n<e[s]?a=s:r=s}while(r<a)}function wa(t,e){return t.getValid(e)}function Sa(t){function e(e,n,i){return t(e[n],i)}return function(t){return xa(this.data,this._offsets,t,e)}}function Ia(t){let e;function n(n,i,r){return t(n[i],r,e)}return function(t,i){const r=this.data;e=i;const s=xa(r,this._offsets,t,n);return e=void 0,s}}function Aa(t){let e;function n(n,i,r){let s=r,a=0,o=0;for(let r=i-1,c=n.length;++r<c;){const i=n[r];if(~(a=t(i,e,s)))return o+a;s=0,o+=i.length}return-1}return function(t,i){e=t;const r=this.data,s="number"!=typeof i?n(r,0,0):xa(r,this._offsets,i,n);return e=void 0,s}}class Ta extends Dr{}function ka(t,e,n){if(void 0===e)return-1;if(null===e)switch(t.typeId){case ci.Union:case ci.Dictionary:break;default:return function(t,e){const{nullBitmap:n}=t;if(!n||t.nullCount<=0)return-1;let i=0;for(const r of new la(n,t.offset+(e||0),t.length,n,aa)){if(!r)return i;++i}return-1}(t,n)}const i=Ws.getVisitFn(t),r=ia(e);for(let e=(n||0)-1,s=t.length;++e<s;)if(r(i(t,e)))return e;return-1}function Ca(t,e,n){const i=Ws.getVisitFn(t),r=ia(e);for(let e=(n||0)-1,s=t.length;++e<s;)if(r(i(t,e)))return e;return-1}Ta.prototype.visitNull=function(t,e){return null===e&&t.length>0?0:-1},Ta.prototype.visitBool=ka,Ta.prototype.visitInt=ka,Ta.prototype.visitInt8=ka,Ta.prototype.visitInt16=ka,Ta.prototype.visitInt32=ka,Ta.prototype.visitInt64=ka,Ta.prototype.visitUint8=ka,Ta.prototype.visitUint16=ka,Ta.prototype.visitUint32=ka,Ta.prototype.visitUint64=ka,Ta.prototype.visitFloat=ka,Ta.prototype.visitFloat16=ka,Ta.prototype.visitFloat32=ka,Ta.prototype.visitFloat64=ka,Ta.prototype.visitUtf8=ka,Ta.prototype.visitBinary=ka,Ta.prototype.visitFixedSizeBinary=ka,Ta.prototype.visitDate=ka,Ta.prototype.visitDateDay=ka,Ta.prototype.visitDateMillisecond=ka,Ta.prototype.visitTimestamp=ka,Ta.prototype.visitTimestampSecond=ka,Ta.prototype.visitTimestampMillisecond=ka,Ta.prototype.visitTimestampMicrosecond=ka,Ta.prototype.visitTimestampNanosecond=ka,Ta.prototype.visitTime=ka,Ta.prototype.visitTimeSecond=ka,Ta.prototype.visitTimeMillisecond=ka,Ta.prototype.visitTimeMicrosecond=ka,Ta.prototype.visitTimeNanosecond=ka,Ta.prototype.visitDecimal=ka,Ta.prototype.visitList=ka,Ta.prototype.visitStruct=ka,Ta.prototype.visitUnion=ka,Ta.prototype.visitDenseUnion=Ca,Ta.prototype.visitSparseUnion=Ca,Ta.prototype.visitDictionary=ka,Ta.prototype.visitInterval=ka,Ta.prototype.visitIntervalDayTime=ka,Ta.prototype.visitIntervalYearMonth=ka,Ta.prototype.visitDuration=ka,Ta.prototype.visitDurationSecond=ka,Ta.prototype.visitDurationMillisecond=ka,Ta.prototype.visitDurationMicrosecond=ka,Ta.prototype.visitDurationNanosecond=ka,Ta.prototype.visitFixedSizeList=ka,Ta.prototype.visitMap=ka;const Ma=new Ta;class Ea extends Dr{}function Na(t){const{type:e}=t;if(0===t.nullCount&&1===t.stride&&(e.typeId===ci.Timestamp||e instanceof Yi&&64!==e.bitWidth||e instanceof pr&&64!==e.bitWidth||e instanceof er&&e.precision!==ii.HALF))return new ga(t.data.length,(e=>{const n=t.data[e];return n.values.subarray(0,n.length)[Symbol.iterator]()}));let n=0;return new ga(t.data.length,(e=>{const i=t.data[e].length,r=t.slice(n,n+i);return n+=i,new Da(r)}))}class Da{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Ea.prototype.visitNull=Na,Ea.prototype.visitBool=Na,Ea.prototype.visitInt=Na,Ea.prototype.visitInt8=Na,Ea.prototype.visitInt16=Na,Ea.prototype.visitInt32=Na,Ea.prototype.visitInt64=Na,Ea.prototype.visitUint8=Na,Ea.prototype.visitUint16=Na,Ea.prototype.visitUint32=Na,Ea.prototype.visitUint64=Na,Ea.prototype.visitFloat=Na,Ea.prototype.visitFloat16=Na,Ea.prototype.visitFloat32=Na,Ea.prototype.visitFloat64=Na,Ea.prototype.visitUtf8=Na,Ea.prototype.visitBinary=Na,Ea.prototype.visitFixedSizeBinary=Na,Ea.prototype.visitDate=Na,Ea.prototype.visitDateDay=Na,Ea.prototype.visitDateMillisecond=Na,Ea.prototype.visitTimestamp=Na,Ea.prototype.visitTimestampSecond=Na,Ea.prototype.visitTimestampMillisecond=Na,Ea.prototype.visitTimestampMicrosecond=Na,Ea.prototype.visitTimestampNanosecond=Na,Ea.prototype.visitTime=Na,Ea.prototype.visitTimeSecond=Na,Ea.prototype.visitTimeMillisecond=Na,Ea.prototype.visitTimeMicrosecond=Na,Ea.prototype.visitTimeNanosecond=Na,Ea.prototype.visitDecimal=Na,Ea.prototype.visitList=Na,Ea.prototype.visitStruct=Na,Ea.prototype.visitUnion=Na,Ea.prototype.visitDenseUnion=Na,Ea.prototype.visitSparseUnion=Na,Ea.prototype.visitDictionary=Na,Ea.prototype.visitInterval=Na,Ea.prototype.visitIntervalDayTime=Na,Ea.prototype.visitIntervalYearMonth=Na,Ea.prototype.visitDuration=Na,Ea.prototype.visitDurationSecond=Na,Ea.prototype.visitDurationMillisecond=Na,Ea.prototype.visitDurationMicrosecond=Na,Ea.prototype.visitDurationNanosecond=Na,Ea.prototype.visitFixedSizeList=Na,Ea.prototype.visitMap=Na;const Oa=new Ea,Ba=(t,e)=>t+e;class La extends Dr{visitNull(t,e){return 0}visitInt(t,e){return t.type.bitWidth/8}visitFloat(t,e){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,e){return 1/8}visitDecimal(t,e){return t.type.bitWidth/8}visitDate(t,e){return 4*(t.type.unit+1)}visitTime(t,e){return t.type.bitWidth/8}visitTimestamp(t,e){return t.type.unit===si.SECOND?4:8}visitInterval(t,e){return 4*(t.type.unit+1)}visitDuration(t,e){return 8}visitStruct(t,e){return t.children.reduce(((t,n)=>t+Ua.visit(n,e)),0)}visitFixedSizeBinary(t,e){return t.type.byteWidth}visitMap(t,e){return 8+t.children.reduce(((t,n)=>t+Ua.visit(n,e)),0)}visitDictionary(t,e){var n;return t.type.indices.bitWidth/8+((null===(n=t.dictionary)||void 0===n?void 0:n.getByteLength(t.values[e]))||0)}}const Fa=({type:t,children:e,typeIds:n,valueOffsets:i},r)=>{const s=t.typeIdToChildIndex[n[r]];return 8+Ua.visit(e[s],i[r])},Va=({children:t},e)=>4+Ua.visitMany(t,t.map((()=>e))).reduce(Ba,0);La.prototype.visitUtf8=({valueOffsets:t},e)=>t[e+1]-t[e]+8,La.prototype.visitBinary=({valueOffsets:t},e)=>t[e+1]-t[e]+8,La.prototype.visitList=({valueOffsets:t,stride:e,children:n},i)=>{const r=n[0],{[i*e]:s}=t,{[i*e+1]:a}=t,o=Ua.getVisitFn(r.type),c=r.slice(s,a-s);let u=8;for(let t=-1,e=a-s;++t<e;)u+=o(c,t);return u},La.prototype.visitFixedSizeList=({stride:t,children:e},n)=>{const i=e[0],r=i.slice(n*t,t),s=Ua.getVisitFn(i.type);let a=0;for(let t=-1,e=r.length;++t<e;)a+=s(r,t);return a},La.prototype.visitUnion=(t,e)=>t.type.mode===ni.Dense?Fa(t,e):Va(t,e),La.prototype.visitDenseUnion=Fa,La.prototype.visitSparseUnion=Va;const Ua=new La;var Pa;const Ra={},ja={};class $a{constructor(t){var e,n,i;const r=t[0]instanceof $a?t.flatMap((t=>t.data)):t;if(0===r.length||r.some((t=>!(t instanceof da))))throw new TypeError("Vector constructor expects an Array of Data instances.");const s=null===(e=r[0])||void 0===e?void 0:e.type;switch(r.length){case 0:this._offsets=[0];break;case 1:{const{get:t,set:e,indexOf:n,byteLength:i}=Ra[s.typeId],a=r[0];this.isValid=t=>wa(a,t),this.get=e=>t(a,e),this.set=(t,n)=>e(a,t,n),this.indexOf=t=>n(a,t),this.getByteLength=t=>i(a,t),this._offsets=[0,a.length];break}default:Object.setPrototypeOf(this,ja[s.typeId]),this._offsets=va(r)}this.data=r,this.type=s,this.stride=Nr(s),this.numChildren=null!==(i=null===(n=s.children)||void 0===n?void 0:n.length)&&void 0!==i?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce(((t,e)=>t+e.byteLength),0)}get nullCount(){return ba(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${ci[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,e){}indexOf(t,e){return-1}includes(t,e){return this.indexOf(t,e)>-1}getByteLength(t){return 0}[Symbol.iterator](){return Oa.visit(this)}concat(...t){return new $a(this.data.concat(t.flatMap((t=>t.data)).flat(Number.POSITIVE_INFINITY)))}slice(t,e){return new $a(ea(this,t,e,(({data:t,_offsets:e},n,i)=>_a(t,e,n,i))))}toJSON(){return[...this]}toArray(){const{type:t,data:e,length:n,stride:i,ArrayType:r}=this;switch(t.typeId){case ci.Int:case ci.Float:case ci.Decimal:case ci.Time:case ci.Timestamp:switch(e.length){case 0:return new r;case 1:return e[0].values.subarray(0,n*i);default:return e.reduce(((t,{values:e,length:n})=>(t.array.set(e.subarray(0,n*i),t.offset),t.offset+=n*i,t)),{array:new r(n*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var e;return this.getChildAt(null===(e=this.type.children)||void 0===e?void 0:e.findIndex((e=>e.name===t)))}getChildAt(t){return t>-1&&t<this.numChildren?new $a(this.data.map((({children:e})=>e[t]))):null}get isMemoized(){return!!Hi.isDictionary(this.type)&&this.data[0].dictionary.isMemoized}memoize(){if(Hi.isDictionary(this.type)){const t=new za(this.data[0].dictionary),e=this.data.map((e=>{const n=e.clone();return n.dictionary=t,n}));return new $a(e)}return new za(this)}unmemoize(){if(Hi.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),e=this.data.map((e=>{const n=e.clone();return n.dictionary=t,n}));return new $a(e)}return this}}Pa=Symbol.toStringTag,$a[Pa]=(t=>{t.type=Hi.prototype,t.data=[],t.length=0,t.stride=1,t.numChildren=0,t._offsets=new Uint32Array([0]),t[Symbol.isConcatSpreadable]=!0;const e=Object.keys(ci).map((t=>ci[t])).filter((t=>"number"==typeof t&&t!==ci.NONE));for(const n of e){const e=Ws.getVisitFnByTypeId(n),i=gs.getVisitFnByTypeId(n),r=Ma.getVisitFnByTypeId(n),s=Ua.getVisitFnByTypeId(n);Ra[n]={get:e,set:i,indexOf:r,byteLength:s},ja[n]=Object.create(t,{isValid:{value:Sa(wa)},get:{value:Sa(Ws.getVisitFnByTypeId(n))},set:{value:Ia(gs.getVisitFnByTypeId(n))},indexOf:{value:Aa(Ma.getVisitFnByTypeId(n))},getByteLength:{value:Sa(Ua.getVisitFnByTypeId(n))}})}return"Vector"})($a.prototype);class za extends $a{constructor(t){super(t.data);const e=this.get,n=this.set,i=this.slice,r=new Array(this.length);Object.defineProperty(this,"get",{value(t){const n=r[t];if(void 0!==n)return n;const i=e.call(this,t);return r[t]=i,i}}),Object.defineProperty(this,"set",{value(t,e){n.call(this,t,e),r[t]=e}}),Object.defineProperty(this,"slice",{value:(t,e)=>new za(i.call(this,t,e))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new $a(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function Ha(t){if(!t||t.length<=0)return function(t){return!0};let e="";const n=t.filter((t=>t==t));return n.length>0&&(e=`\n    switch (x) {${n.map((t=>`\n        case ${function(t){if("bigint"!=typeof t)return hi(t);return`${hi(t)}n`}(t)}:`)).join("")}\n            return false;\n    }`),t.length!==n.length&&(e=`if (x !== x) return false;\n${e}`),new Function("x",`${e}\nreturn true;`)}const qa=(t,e)=>(Math.ceil(t)*e+63&-64||64)/e;class Ya{constructor(t,e=1){this.buffer=t,this.stride=e,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/e))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,e){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const e=this.stride,n=this.length*e,i=this.buffer.length;n>=i&&this._resize(qa(0===i?1*n:2*n,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=qa(t*this.stride,this.BYTES_PER_ELEMENT);const e=((t,e=0)=>t.length>=e?t.subarray(0,e):jn(new t.constructor(e),t,0))(this.buffer,t);return this.clear(),e}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=jn(new this.ArrayType(t),this.buffer)}}Ya.prototype.offset=0;class Ga extends Ya{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,e){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=e,this}}class Wa extends Ga{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,e){const{buffer:n}=this.reserve(t-this.length+1),i=t>>3,r=t%8,s=n[i]>>r&1;return e?0===s&&(n[i]|=1<<r,++this.numValid):1===s&&(n[i]&=~(1<<r),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class Ka extends Ga{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,e){const n=this.length-1,i=this.reserve(t-n+1).buffer;return n<t++&&i.fill(i[n],n,t),i[t]=i[t-1]+e,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let Qa=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:e}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=e,this.stride=Nr(t),this._nulls=new Wa,e&&e.length>0&&(this._isValid=Ha(e))}toVector(){return new $a([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:e,_values:n,_nulls:i,_typeIds:r,children:s}=this;return e&&(t+=e.byteLength),n&&(t+=n.byteLength),i&&(t+=i.byteLength),r&&(t+=r.byteLength),s.reduce(((t,e)=>t+e.byteLength),t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce(((t,e)=>t+e.reservedByteLength),t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,e){return this.setValid(t,this.isValid(e))&&this.setValue(t,e),this}setValue(t,e){this._setValue(this,t,e)}setValid(t,e){return this.length=this._nulls.set(t,+e).length,e}addChild(t,e=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,e,n,i;const{type:r,length:s,nullCount:a,_typeIds:o,_offsets:c,_values:u,_nulls:l}=this;(e=null==o?void 0:o.flush(s))?i=null==c?void 0:c.flush(s):t=(i=null==c?void 0:c.flush(s))?null==u?void 0:u.flush(c.last()):null==u?void 0:u.flush(s),a>0&&(n=null==l?void 0:l.flush(s));const h=this.children.map((t=>t.flush()));return this.clear(),ya({type:r,length:s,nullCount:a,children:h,child:h[0],data:t,typeIds:e,nullBitmap:n,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,e,n,i;this.length=0,null===(t=this._nulls)||void 0===t||t.clear(),null===(e=this._values)||void 0===e||e.clear(),null===(n=this._offsets)||void 0===n||n.clear(),null===(i=this._typeIds)||void 0===i||i.clear();for(const t of this.children)t.clear();return this}};Qa.prototype.length=1,Qa.prototype.stride=1,Qa.prototype.children=null,Qa.prototype.finished=!1,Qa.prototype.nullValues=null,Qa.prototype._isValid=()=>!0;class Ja extends Qa{constructor(t){super(t),this._values=new Ga(new this.ArrayType(0),this.stride)}setValue(t,e){const n=this._values;return n.reserve(t-n.length+1),super.setValue(t,e)}}class Za extends Qa{constructor(t){super(t),this._pendingLength=0,this._offsets=new Ka}setValue(t,e){const n=this._pending||(this._pending=new Map),i=n.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=e instanceof Js?e[Ks].length:e.length,n.set(t,e)}setValid(t,e){return!!super.setValid(t,e)||((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,e=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,e),this}}class Xa{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,e,n,i){return t.prep(8,24),t.writeInt64(BigInt(null!=i?i:0)),t.pad(4),t.writeInt32(n),t.writeInt64(BigInt(null!=e?e:0)),t.offset()}}const to=new Int32Array(2),eo=new Float32Array(to.buffer),no=new Float64Array(to.buffer),io=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0];var ro;!function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"}(ro||(ro={}));let so=class t{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(e){return new t(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return to[0]=this.readInt32(t),eo[0]}readFloat64(t){return to[io?0:1]=this.readInt32(t),to[io?1:0]=this.readInt32(t+4),no[0]}writeInt8(t,e){this.bytes_[t]=e}writeUint8(t,e){this.bytes_[t]=e}writeInt16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeUint16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeInt32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeUint32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeInt64(t,e){this.writeInt32(t,Number(BigInt.asIntN(32,e))),this.writeInt32(t+4,Number(BigInt.asIntN(32,e>>BigInt(32))))}writeUint64(t,e){this.writeUint32(t,Number(BigInt.asUintN(32,e))),this.writeUint32(t+4,Number(BigInt.asUintN(32,e>>BigInt(32))))}writeFloat32(t,e){eo[0]=e,this.writeInt32(t,to[0])}writeFloat64(t,e){no[0]=e,this.writeInt32(t,to[io?0:1]),this.writeInt32(t+4,to[io?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+4+4)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let e=0;e<4;e++)t+=String.fromCharCode(this.readInt8(this.position_+4+e));return t}__offset(t,e){const n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0}__union(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t}__string(t,e){t+=this.readInt32(t);const n=this.readInt32(t);t+=4;const i=this.bytes_.subarray(t,t+n);return e===ro.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,e){return"string"==typeof t?this.__string(e):this.__union(t,e)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+4}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(4!=t.length)throw new Error("FlatBuffers: file identifier must be length 4");for(let e=0;e<4;e++)if(t.charCodeAt(e)!=this.readInt8(this.position()+4+e))return!1;return!0}createScalarList(t,e){const n=[];for(let i=0;i<e;++i){const e=t(i);null!==e&&n.push(e)}return n}createObjList(t,e){const n=[];for(let i=0;i<e;++i){const e=t(i);null!==e&&n.push(e.unpack())}return n}},ao=class t{constructor(t){let e;this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder,e=t||1024,this.bb=so.allocate(e),this.space=e}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,n){e>this.minalign&&(this.minalign=e);const i=1+~(this.bb.capacity()-this.space+n)&e-1;for(;this.space<i+e+n;){const e=this.bb.capacity();this.bb=t.growByteBuffer(this.bb),this.space+=this.bb.capacity()-e}this.pad(i)}pad(t){for(let e=0;e<t;e++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,e,n){(this.force_defaults||e!=n)&&(this.addInt8(e),this.slot(t))}addFieldInt16(t,e,n){(this.force_defaults||e!=n)&&(this.addInt16(e),this.slot(t))}addFieldInt32(t,e,n){(this.force_defaults||e!=n)&&(this.addInt32(e),this.slot(t))}addFieldInt64(t,e,n){(this.force_defaults||e!==n)&&(this.addInt64(e),this.slot(t))}addFieldFloat32(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat32(e),this.slot(t))}addFieldFloat64(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat64(e),this.slot(t))}addFieldOffset(t,e,n){(this.force_defaults||e!=n)&&(this.addOffset(e),this.slot(t))}addFieldStruct(t,e,n){e!=n&&(this.nested(e),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){null!==this.vtable&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const e=t.capacity();if(3221225472&e)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const n=e<<1,i=so.allocate(n);return i.setPosition(n-e),i.bytes().set(t.bytes(),n-e),i}addOffset(t){this.prep(4,0),this.writeInt32(this.offset()-t+4)}startObject(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(let e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let e=this.vtable_in_use-1;for(;e>=0&&0==this.vtable[e];e--);const n=e+1;for(;e>=0;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);this.addInt16(t-this.object_start);const i=2*(n+2);this.addInt16(i);let r=0;const s=this.space;t:for(e=0;e<this.vtables.length;e++){const t=this.bb.capacity()-this.vtables[e];if(i==this.bb.readInt16(t)){for(let e=2;e<i;e+=2)if(this.bb.readInt16(s+e)!=this.bb.readInt16(t+e))continue t;r=this.vtables[e];break}}return r?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,r-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,e,n){const i=n?4:0;if(e){const t=e;if(this.prep(this.minalign,8+i),4!=t.length)throw new TypeError("FlatBuffers: file identifier must be length 4");for(let e=3;e>=0;e--)this.writeInt8(t.charCodeAt(e))}this.prep(this.minalign,4+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,e){this.finish(t,e,!0)}requiredField(t,e){const n=this.bb.capacity()-t,i=n-this.bb.readInt32(n);if(!(e<this.bb.readInt16(i)&&0!=this.bb.readInt16(i+e)))throw new TypeError("FlatBuffers: field "+e+" must be set")}startVector(t,e,n){this.notNested(),this.vector_num_elems=e,this.prep(4,t*e),this.prep(n,t*e)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const e=this.createString(t);return this.string_maps.set(t,e),e}createString(t){if(null==t)return 0;let e;e=t instanceof Uint8Array?t:this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);for(let t=0,n=this.space,i=this.bb.bytes();t<e.length;t++)i[n++]=e[t];return this.endVector()}createObjectOffset(t){return null===t?0:"string"==typeof t?this.createString(t):t.pack(this)}createObjectOffsetList(t){const e=[];for(let n=0;n<t.length;++n){const i=t[n];if(null===i)throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.");e.push(this.createObjectOffset(i))}return e}createStructOffsetList(t,e){return e(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};class oo{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsKeyValue(t,e){return(e||new oo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,e){return t.setPosition(t.position()+4),(e||new oo).__init(t.readInt32(t.position())+t.position(),t)}key(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}value(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,e){t.addFieldOffset(0,e,0)}static addValue(t,e){t.addFieldOffset(1,e,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,e,n){return oo.startKeyValue(t),oo.addKey(t,e),oo.addValue(t,n),oo.endKeyValue(t)}}var co,uo,lo,ho;!function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"}(co||(co={})),function(t){t[t.Little=0]="Little",t[t.Big=1]="Big"}(uo||(uo={})),function(t){t[t.DenseArray=0]="DenseArray"}(lo||(lo={}));class po{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInt(t,e){return(e||new po).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,e){return t.setPosition(t.position()+4),(e||new po).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startInt(t){t.startObject(2)}static addBitWidth(t,e){t.addFieldInt32(0,e,0)}static addIsSigned(t,e){t.addFieldInt8(1,+e,0)}static endInt(t){return t.endObject()}static createInt(t,e,n){return po.startInt(t),po.addBitWidth(t,e),po.addIsSigned(t,n),po.endInt(t)}}class fo{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryEncoding(t,e){return(e||new fo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,e){return t.setPosition(t.position()+4),(e||new fo).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new po).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):lo.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,e){t.addFieldInt64(0,e,BigInt("0"))}static addIndexType(t,e){t.addFieldOffset(1,e,0)}static addIsOrdered(t,e){t.addFieldInt8(2,+e,0)}static addDictionaryKind(t,e){t.addFieldInt16(3,e,lo.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class mo{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBinary(t,e){return(e||new mo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,e){return t.setPosition(t.position()+4),(e||new mo).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return mo.startBinary(t),mo.endBinary(t)}}class yo{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBool(t,e){return(e||new yo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,e){return t.setPosition(t.position()+4),(e||new yo).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return yo.startBool(t),yo.endBool(t)}}!function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"}(ho||(ho={}));let go=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDate(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDate(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ho.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,e){t.addFieldInt16(0,e,ho.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(e,n){return t.startDate(e),t.addUnit(e,n),t.endDate(e)}};class bo{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDecimal(t,e){return(e||new bo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,e){return t.setPosition(t.position()+4),(e||new bo).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,e){t.addFieldInt32(0,e,0)}static addScale(t,e){t.addFieldInt32(1,e,0)}static addBitWidth(t,e){t.addFieldInt32(2,e,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,e,n,i){return bo.startDecimal(t),bo.addPrecision(t,e),bo.addScale(t,n),bo.addBitWidth(t,i),bo.endDecimal(t)}}var vo,_o,xo;!function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"}(vo||(vo={}));class wo{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDuration(t,e){return(e||new wo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,e){return t.setPosition(t.position()+4),(e||new wo).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):vo.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,e){t.addFieldInt16(0,e,vo.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,e){return wo.startDuration(t),wo.addUnit(t,e),wo.endDuration(t)}}class So{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeBinary(t,e){return(e||new So).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,e){return t.setPosition(t.position()+4),(e||new So).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,e){return So.startFixedSizeBinary(t),So.addByteWidth(t,e),So.endFixedSizeBinary(t)}}class Io{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeList(t,e){return(e||new Io).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,e){return t.setPosition(t.position()+4),(e||new Io).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,e){return Io.startFixedSizeList(t),Io.addListSize(t,e),Io.endFixedSizeList(t)}}!function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"}(_o||(_o={}));class Ao{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFloatingPoint(t,e){return(e||new Ao).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,e){return t.setPosition(t.position()+4),(e||new Ao).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):_o.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,e){t.addFieldInt16(0,e,_o.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,e){return Ao.startFloatingPoint(t),Ao.addPrecision(t,e),Ao.endFloatingPoint(t)}}!function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"}(xo||(xo={}));class To{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInterval(t,e){return(e||new To).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,e){return t.setPosition(t.position()+4),(e||new To).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):xo.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,e){t.addFieldInt16(0,e,xo.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,e){return To.startInterval(t),To.addUnit(t,e),To.endInterval(t)}}class ko{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsList(t,e){return(e||new ko).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,e){return t.setPosition(t.position()+4),(e||new ko).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return ko.startList(t),ko.endList(t)}}let Co=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMap(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMap(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startMap(t){t.startObject(1)}static addKeysSorted(t,e){t.addFieldInt8(0,+e,0)}static endMap(t){return t.endObject()}static createMap(e,n){return t.startMap(e),t.addKeysSorted(e,n),t.endMap(e)}};class Mo{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsNull(t,e){return(e||new Mo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,e){return t.setPosition(t.position()+4),(e||new Mo).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Mo.startNull(t),Mo.endNull(t)}}class Eo{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsStruct_(t,e){return(e||new Eo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,e){return t.setPosition(t.position()+4),(e||new Eo).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return Eo.startStruct_(t),Eo.endStruct_(t)}}class No{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTime(t,e){return(e||new No).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,e){return t.setPosition(t.position()+4),(e||new No).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):vo.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,e){t.addFieldInt16(0,e,vo.MILLISECOND)}static addBitWidth(t,e){t.addFieldInt32(1,e,32)}static endTime(t){return t.endObject()}static createTime(t,e,n){return No.startTime(t),No.addUnit(t,e),No.addBitWidth(t,n),No.endTime(t)}}class Do{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTimestamp(t,e){return(e||new Do).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,e){return t.setPosition(t.position()+4),(e||new Do).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):vo.SECOND}timezone(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,e){t.addFieldInt16(0,e,vo.SECOND)}static addTimezone(t,e){t.addFieldOffset(1,e,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,e,n){return Do.startTimestamp(t),Do.addUnit(t,e),Do.addTimezone(t,n),Do.endTimestamp(t)}}var Oo,Bo;!function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"}(Oo||(Oo={}));class Lo{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUnion(t,e){return(e||new Lo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,e){return t.setPosition(t.position()+4),(e||new Lo).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Oo.Sparse}typeIds(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb.__vector(this.bb_pos+e)+4*t):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,e){t.addFieldInt16(0,e,Oo.Sparse)}static addTypeIds(t,e){t.addFieldOffset(1,e,0)}static createTypeIdsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()}static startTypeIdsVector(t,e){t.startVector(4,e,4)}static endUnion(t){return t.endObject()}static createUnion(t,e,n){return Lo.startUnion(t),Lo.addMode(t,e),Lo.addTypeIds(t,n),Lo.endUnion(t)}}class Fo{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUtf8(t,e){return(e||new Fo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,e){return t.setPosition(t.position()+4),(e||new Fo).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return Fo.startUtf8(t),Fo.endUtf8(t)}}!function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.FloatingPoint=3]="FloatingPoint",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct_=13]="Struct_",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.LargeList=21]="LargeList",t[t.RunEndEncoded=22]="RunEndEncoded"}(Bo||(Bo={}));let Vo=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsField(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsField(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}name(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Bo.NONE}type(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__union(t,this.bb_pos+e):null}dictionary(t){const e=this.bb.__offset(this.bb_pos,12);return e?(t||new fo).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}children(e,n){const i=this.bb.__offset(this.bb_pos,14);return i?(n||new t).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,16);return n?(e||new oo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,e){t.addFieldOffset(0,e,0)}static addNullable(t,e){t.addFieldInt8(1,+e,0)}static addTypeType(t,e){t.addFieldInt8(2,e,Bo.NONE)}static addType(t,e){t.addFieldOffset(3,e,0)}static addDictionary(t,e){t.addFieldOffset(4,e,0)}static addChildren(t,e){t.addFieldOffset(5,e,0)}static createChildrenVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startChildrenVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(6,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endField(t){return t.endObject()}},Uo=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSchema(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSchema(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):uo.Little}fields(t,e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new Vo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new oo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,e){t.addFieldInt16(0,e,uo.Little)}static addFields(t,e){t.addFieldOffset(1,e,0)}static createFieldsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startFieldsVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(2,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static addFeatures(t,e){t.addFieldOffset(3,e,0)}static createFeaturesVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()}static startFeaturesVector(t,e){t.startVector(8,e,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,e){t.finish(e)}static finishSizePrefixedSchemaBuffer(t,e){t.finish(e,void 0,!0)}static createSchema(e,n,i,r,s){return t.startSchema(e),t.addEndianness(e,n),t.addFields(e,i),t.addCustomMetadata(e,r),t.addFeatures(e,s),t.endSchema(e)}};class Po{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFooter(t,e){return(e||new Po).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,e){return t.setPosition(t.position()+4),(e||new Po).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):co.V1}schema(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new Uo).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}dictionaries(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new Xa).__init(this.bb.__vector(this.bb_pos+n)+24*t,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,e){const n=this.bb.__offset(this.bb_pos,10);return n?(e||new Xa).__init(this.bb.__vector(this.bb_pos+n)+24*t,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new oo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,co.V1)}static addSchema(t,e){t.addFieldOffset(1,e,0)}static addDictionaries(t,e){t.addFieldOffset(2,e,0)}static startDictionariesVector(t,e){t.startVector(24,e,8)}static addRecordBatches(t,e){t.addFieldOffset(3,e,0)}static startRecordBatchesVector(t,e){t.startVector(24,e,8)}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,e){t.finish(e)}static finishSizePrefixedFooterBuffer(t,e){t.finish(e,void 0,!0)}}class Ro{constructor(t=[],e,n,i=ei.V5){this.fields=t||[],this.metadata=e||new Map,n||(n=zo(t)),this.dictionaries=n,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map((t=>t.name))}toString(){return`Schema<{ ${this.fields.map(((t,e)=>`${e}: ${t}`)).join(", ")} }>`}select(t){const e=new Set(t),n=this.fields.filter((t=>e.has(t.name)));return new Ro(n,this.metadata)}selectAt(t){const e=t.map((t=>this.fields[t])).filter(Boolean);return new Ro(e,this.metadata)}assign(...t){const e=t[0]instanceof Ro?t[0]:Array.isArray(t[0])?new Ro(t[0]):new Ro(t),n=[...this.fields],i=$o($o(new Map,this.metadata),e.metadata),r=e.fields.filter((t=>{const e=n.findIndex((e=>e.name===t.name));return!~e||(n[e]=t.clone({metadata:$o($o(new Map,n[e].metadata),t.metadata)}))&&!1})),s=zo(r,new Map);return new Ro([...n,...r],i,new Map([...this.dictionaries,...s]))}}Ro.prototype.fields=null,Ro.prototype.metadata=null,Ro.prototype.dictionaries=null;class jo{static new(...t){let[e,n,i,r]=t;return t[0]&&"object"==typeof t[0]&&(({name:e}=t[0]),void 0===n&&(n=t[0].type),void 0===i&&(i=t[0].nullable),void 0===r&&(r=t[0].metadata)),new jo(`${e}`,n,i,r)}constructor(t,e,n=!1,i){this.name=t,this.type=e,this.nullable=n,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[e,n,i,r]=t;return t[0]&&"object"==typeof t[0]?({name:e=this.name,type:n=this.type,nullable:i=this.nullable,metadata:r=this.metadata}=t[0]):[e=this.name,n=this.type,i=this.nullable,r=this.metadata]=t,jo.new(e,n,i,r)}}function $o(t,e){return new Map([...t||new Map,...e||new Map])}function zo(t,e=new Map){for(let n=-1,i=t.length;++n<i;){const i=t[n].type;if(Hi.isDictionary(i))if(e.has(i.id)){if(e.get(i.id)!==i.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else e.set(i.id,i.dictionary);i.children&&i.children.length>0&&zo(i.children,e)}return e}jo.prototype.type=null,jo.prototype.name=null,jo.prototype.nullable=null,jo.prototype.metadata=null;var Ho=ao,qo=so;class Yo{static decode(t){t=new qo(qn(t));const e=Po.getRootAsFooter(t),n=Ro.decode(e.schema(),new Map,e.version());return new Go(n,e)}static encode(t){const e=new Ho,n=Ro.encode(e,t.schema);Po.startRecordBatchesVector(e,t.numRecordBatches);for(const n of[...t.recordBatches()].slice().reverse())Wo.encode(e,n);const i=e.endVector();Po.startDictionariesVector(e,t.numDictionaries);for(const n of[...t.dictionaryBatches()].slice().reverse())Wo.encode(e,n);const r=e.endVector();return Po.startFooter(e),Po.addSchema(e,n),Po.addVersion(e,ei.V5),Po.addRecordBatches(e,i),Po.addDictionaries(e,r),Po.finishFooterBuffer(e,Po.endFooter(e)),e.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,e=ei.V5,n,i){this.schema=t,this.version=e,n&&(this._recordBatches=n),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,e=-1,n=this.numRecordBatches;++e<n;)(t=this.getRecordBatch(e))&&(yield t)}*dictionaryBatches(){for(let t,e=-1,n=this.numDictionaries;++e<n;)(t=this.getDictionaryBatch(e))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class Go extends Yo{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,e){super(t,e.version()),this._footer=e}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const e=this._footer.recordBatches(t);if(e)return Wo.decode(e)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const e=this._footer.dictionaries(t);if(e)return Wo.decode(e)}return null}}class Wo{static decode(t){return new Wo(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,e){const{metaDataLength:n}=e,i=BigInt(e.offset),r=BigInt(e.bodyLength);return Xa.createBlock(t,i,n,r)}constructor(t,e,n){this.metaDataLength=t,this.offset=wi(n),this.bodyLength=wi(e)}}const Ko=Object.freeze({done:!0,value:void 0});class Qo{tee(){return this._getDOMStream().tee()}pipe(t,e){return this._getNodeStream().pipe(t,e)}pipeTo(t,e){return this._getDOMStream().pipeTo(t,e)}pipeThrough(t,e){return this._getDOMStream().pipeThrough(t,e)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class Jo extends Qo{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise((t=>this._closedPromiseResolve=t))}get closed(){return this._closedPromise}cancel(t){return wn(this,void 0,void 0,(function*(){yield this.return(t)}))}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(Ko);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Jn.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Jn.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return wn(this,void 0,void 0,(function*(){return yield this.abort(t),Ko}))}return(t){return wn(this,void 0,void 0,(function*(){return yield this.close(),Ko}))}read(t){return wn(this,void 0,void 0,(function*(){return(yield this.next(t,"read")).value}))}peek(t){return wn(this,void 0,void 0,(function*(){return(yield this.next(t,"peek")).value}))}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise(((t,e)=>{this.resolvers.push({resolve:t,reject:e})})):Promise.resolve(Ko)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class Zo extends Jo{write(t){if((t=qn(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?Mn(this.toUint8Array(!0)):this.toUint8Array(!1).then(Mn)}toUint8Array(t=!1){return t?$n(this._values)[0]:(()=>wn(this,void 0,void 0,(function*(){var t,e,n,i;const r=[];let s=0;try{for(var a,o=!0,c=kn(this);!(t=(a=yield c.next()).done);o=!0){i=a.value,o=!1;const t=i;r.push(t),s+=t.byteLength}}catch(t){e={error:t}}finally{try{o||t||!(n=c.return)||(yield n.call(c))}finally{if(e)throw e.error}}return $n(r,s)[0]})))()}}class Xo extends Za{constructor(t){super(t),this._values=new Ya(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+4*this.length;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,e){return super.setValue(t,qn(e))}_flushPending(t,e){const n=this._offsets,i=this._values.reserve(e).buffer;let r=0;for(const[e,s]of t)if(void 0===s)n.set(e,0);else{const t=s.length;i.set(s,r),n.set(e,t),r+=t}}}class tc extends Qa{constructor(t){super(t),this._values=new Wa}setValue(t,e){this._values.set(t,+e)}}class ec extends Ja{}ec.prototype._setValue=Kr;class nc extends ec{}nc.prototype._setValue=Yr;class ic extends ec{}ic.prototype._setValue=Gr;class rc extends Ja{}rc.prototype._setValue=as;class sc extends Qa{constructor({type:t,nullValues:e,dictionaryHashFunction:n}){super({type:new Er(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=ou({type:this.type.indices,nullValues:e}),this.dictionary=ou({type:this.type.dictionary,nullValues:null}),"function"==typeof n&&(this.valueToKey=n)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,e){const n=this.indices;return e=n.setValid(t,e),this.length=n.length,e}setValue(t,e){const n=this._keysToIndices,i=this.valueToKey(e);let r=n[i];return void 0===r&&(n[i]=r=this._dictionaryOffset+this.dictionary.append(e).length-1),this.indices.setValue(t,r)}flush(){const t=this.type,e=this._dictionary,n=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=e?e.concat(n):n,this.finished||(this._dictionaryOffset+=n.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return"string"==typeof t?t:`${t}`}}class ac extends Ja{}ac.prototype._setValue=Wr;class oc extends Qa{setValue(t,e){const[n]=this.children,i=t*this.stride;for(let t=-1,r=e.length;++t<r;)n.set(i+t,e[t])}addChild(t,e="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const n=this.children.push(t);return this.type=new Tr(this.type.listSize,new jo(e,t.type,!0)),n}}class cc extends Ja{setValue(t,e){this._values.set(t,e)}}class uc extends cc{setValue(t,e){super.setValue(t,Ur(e))}}class lc extends cc{}class hc extends cc{}class pc extends Ja{}pc.prototype._setValue=us;class dc extends pc{}dc.prototype._setValue=ls;class fc extends pc{}fc.prototype._setValue=hs;class mc extends Ja{}mc.prototype._setValue=ys;class yc extends mc{}yc.prototype._setValue=ps;class gc extends mc{}gc.prototype._setValue=ds;class bc extends mc{}bc.prototype._setValue=fs;class vc extends mc{}vc.prototype._setValue=ms;class _c extends Ja{setValue(t,e){this._values.set(t,e)}}class xc extends _c{}class wc extends _c{}class Sc extends _c{}class Ic extends _c{}class Ac extends _c{}class Tc extends _c{}class kc extends _c{}class Cc extends _c{}class Mc extends Za{constructor(t){super(t),this._offsets=new Ka}addChild(t,e="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new wr(new jo(e,t.type,!0)),this.numChildren-1}_flushPending(t){const e=this._offsets,[n]=this.children;for(const[i,r]of t)if(void 0===r)e.set(i,0);else{const t=r,s=t.length,a=e.set(i,s).buffer[i];for(let e=-1;++e<s;)n.set(a+e,t[e])}}}class Ec extends Za{set(t,e){return super.set(t,e)}setValue(t,e){const n=e instanceof Map?e:new Map(Object.entries(e)),i=this._pending||(this._pending=new Map),r=i.get(t);r&&(this._pendingLength-=r.size),this._pendingLength+=n.size,i.set(t,n)}addChild(t,e=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new kr(new jo(e,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const e=this._offsets,[n]=this.children;for(const[i,r]of t)if(void 0===r)e.set(i,0);else{let{[i]:t,[i+1]:s}=e.set(i,r.size).buffer;for(const e of r.entries())if(n.set(t,e),++t>=s)break}}}class Nc extends Qa{setValue(t,e){}setValid(t,e){return this.length=Math.max(t+1,this.length),e}}class Dc extends Qa{setValue(t,e){const{children:n,type:i}=this;switch(Array.isArray(e)||e.constructor){case!0:return i.children.forEach(((i,r)=>n[r].set(t,e[r])));case Map:return i.children.forEach(((i,r)=>n[r].set(t,e.get(i.name))));default:return i.children.forEach(((i,r)=>n[r].set(t,e[i.name])))}}setValid(t,e){return super.setValid(t,e)||this.children.forEach((n=>n.setValid(t,e))),e}addChild(t,e=`${this.numChildren}`){const n=this.children.push(t);return this.type=new Sr([...this.type.children,new jo(e,t.type,!0)]),n}}class Oc extends Ja{}Oc.prototype._setValue=ts;class Bc extends Oc{}Bc.prototype._setValue=Qr;class Lc extends Oc{}Lc.prototype._setValue=Jr;class Fc extends Oc{}Fc.prototype._setValue=Zr;class Vc extends Oc{}Vc.prototype._setValue=Xr;class Uc extends Ja{}Uc.prototype._setValue=ss;class Pc extends Uc{}Pc.prototype._setValue=es;class Rc extends Uc{}Rc.prototype._setValue=ns;class jc extends Uc{}jc.prototype._setValue=is;class $c extends Uc{}$c.prototype._setValue=rs;class zc extends Qa{constructor(t){super(t),this._typeIds=new Ga(new Int8Array(0),1),"function"==typeof t.valueToChildTypeId&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,e){return this.set(this.length,t,e)}set(t,e,n){return void 0===n&&(n=this._valueToChildTypeId(this,e,t)),this.setValue(t,e,n),this}setValue(t,e,n){this._typeIds.set(t,n);const i=this.type.typeIdToChildIndex[n],r=this.children[i];null==r||r.set(t,e)}addChild(t,e=`${this.children.length}`){const n=this.children.push(t),{type:{children:i,mode:r,typeIds:s}}=this,a=[...i,new jo(e,t.type)];return this.type=new Ir(r,[...s,n],a),n}_valueToChildTypeId(t,e,n){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class Hc extends zc{}class qc extends zc{constructor(t){super(t),this._offsets=new Ga(new Int32Array(0))}setValue(t,e,n){const i=this._typeIds.set(t,n).buffer[t],r=this.getChildAt(this.type.typeIdToChildIndex[i]),s=this._offsets.set(t,r.length).buffer[t];null==r||r.set(s,e)}}class Yc extends Za{constructor(t){super(t),this._values=new Ya(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+4*this.length;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,e){return super.setValue(t,Nn(e))}_flushPending(t,e){}}Yc.prototype._flushPending=Xo.prototype._flushPending;const Gc=new class extends Dr{visitNull(){return Nc}visitBool(){return tc}visitInt(){return _c}visitInt8(){return xc}visitInt16(){return wc}visitInt32(){return Sc}visitInt64(){return Ic}visitUint8(){return Ac}visitUint16(){return Tc}visitUint32(){return kc}visitUint64(){return Cc}visitFloat(){return cc}visitFloat16(){return uc}visitFloat32(){return lc}visitFloat64(){return hc}visitUtf8(){return Yc}visitBinary(){return Xo}visitFixedSizeBinary(){return ac}visitDate(){return ec}visitDateDay(){return nc}visitDateMillisecond(){return ic}visitTimestamp(){return Oc}visitTimestampSecond(){return Bc}visitTimestampMillisecond(){return Lc}visitTimestampMicrosecond(){return Fc}visitTimestampNanosecond(){return Vc}visitTime(){return Uc}visitTimeSecond(){return Pc}visitTimeMillisecond(){return Rc}visitTimeMicrosecond(){return jc}visitTimeNanosecond(){return $c}visitDecimal(){return rc}visitList(){return Mc}visitStruct(){return Dc}visitUnion(){return zc}visitDenseUnion(){return qc}visitSparseUnion(){return Hc}visitDictionary(){return sc}visitInterval(){return pc}visitIntervalDayTime(){return dc}visitIntervalYearMonth(){return fc}visitDuration(){return mc}visitDurationSecond(){return yc}visitDurationMillisecond(){return gc}visitDurationMicrosecond(){return bc}visistDurationNanosecond(){return vc}visitFixedSizeList(){return oc}visitMap(){return Ec}};class Wc extends Dr{compareSchemas(t,e){return t===e||e instanceof t.constructor&&this.compareManyFields(t.fields,e.fields)}compareManyFields(t,e){return t===e||Array.isArray(t)&&Array.isArray(e)&&t.length===e.length&&t.every(((t,n)=>this.compareFields(t,e[n])))}compareFields(t,e){return t===e||e instanceof t.constructor&&t.name===e.name&&t.nullable===e.nullable&&this.visit(t.type,e.type)}}function Kc(t,e){return e instanceof t.constructor}function Qc(t,e){return t===e||Kc(t,e)}function Jc(t,e){return t===e||Kc(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function Zc(t,e){return t===e||Kc(t,e)&&t.precision===e.precision}function Xc(t,e){return t===e||Kc(t,e)&&t.unit===e.unit}function tu(t,e){return t===e||Kc(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function eu(t,e){return t===e||Kc(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function nu(t,e){return t===e||Kc(t,e)&&t.mode===e.mode&&t.typeIds.every(((t,n)=>t===e.typeIds[n]))&&su.compareManyFields(t.children,e.children)}function iu(t,e){return t===e||Kc(t,e)&&t.unit===e.unit}function ru(t,e){return t===e||Kc(t,e)&&t.unit===e.unit}Wc.prototype.visitNull=Qc,Wc.prototype.visitBool=Qc,Wc.prototype.visitInt=Jc,Wc.prototype.visitInt8=Jc,Wc.prototype.visitInt16=Jc,Wc.prototype.visitInt32=Jc,Wc.prototype.visitInt64=Jc,Wc.prototype.visitUint8=Jc,Wc.prototype.visitUint16=Jc,Wc.prototype.visitUint32=Jc,Wc.prototype.visitUint64=Jc,Wc.prototype.visitFloat=Zc,Wc.prototype.visitFloat16=Zc,Wc.prototype.visitFloat32=Zc,Wc.prototype.visitFloat64=Zc,Wc.prototype.visitUtf8=Qc,Wc.prototype.visitBinary=Qc,Wc.prototype.visitFixedSizeBinary=function(t,e){return t===e||Kc(t,e)&&t.byteWidth===e.byteWidth},Wc.prototype.visitDate=Xc,Wc.prototype.visitDateDay=Xc,Wc.prototype.visitDateMillisecond=Xc,Wc.prototype.visitTimestamp=tu,Wc.prototype.visitTimestampSecond=tu,Wc.prototype.visitTimestampMillisecond=tu,Wc.prototype.visitTimestampMicrosecond=tu,Wc.prototype.visitTimestampNanosecond=tu,Wc.prototype.visitTime=eu,Wc.prototype.visitTimeSecond=eu,Wc.prototype.visitTimeMillisecond=eu,Wc.prototype.visitTimeMicrosecond=eu,Wc.prototype.visitTimeNanosecond=eu,Wc.prototype.visitDecimal=Qc,Wc.prototype.visitList=function(t,e){return t===e||Kc(t,e)&&t.children.length===e.children.length&&su.compareManyFields(t.children,e.children)},Wc.prototype.visitStruct=function(t,e){return t===e||Kc(t,e)&&t.children.length===e.children.length&&su.compareManyFields(t.children,e.children)},Wc.prototype.visitUnion=nu,Wc.prototype.visitDenseUnion=nu,Wc.prototype.visitSparseUnion=nu,Wc.prototype.visitDictionary=function(t,e){return t===e||Kc(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&su.visit(t.indices,e.indices)&&su.visit(t.dictionary,e.dictionary)},Wc.prototype.visitInterval=iu,Wc.prototype.visitIntervalDayTime=iu,Wc.prototype.visitIntervalYearMonth=iu,Wc.prototype.visitDuration=ru,Wc.prototype.visitDurationSecond=ru,Wc.prototype.visitDurationMillisecond=ru,Wc.prototype.visitDurationMicrosecond=ru,Wc.prototype.visitDurationNanosecond=ru,Wc.prototype.visitFixedSizeList=function(t,e){return t===e||Kc(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&su.compareManyFields(t.children,e.children)},Wc.prototype.visitMap=function(t,e){return t===e||Kc(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&su.compareManyFields(t.children,e.children)};const su=new Wc;function au(t,e){return su.compareSchemas(t,e)}function ou(t){const e=t.type,n=new(Gc.getVisitFn(e)())(t);if(e.children&&e.children.length>0){const i=t.children||[],r={nullValues:t.nullValues},s=Array.isArray(i)?(t,e)=>i[e]||r:({name:t})=>i[t]||r;for(const[t,i]of e.children.entries()){const{type:e}=i,r=s(i,t);n.children.push(ou(Object.assign(Object.assign({},r),{type:e})))}}return n}function cu(t,e){return function(t,e){const n=[...t.fields],i=[],r={numBatches:e.reduce(((t,e)=>Math.max(t,e.length)),0)};let s=0,a=0,o=-1;const c=e.length;let u,l=[];for(;r.numBatches-- >0;){for(a=Number.POSITIVE_INFINITY,o=-1;++o<c;)l[o]=u=e[o].shift(),a=Math.min(a,u?u.length:a);Number.isFinite(a)&&(l=uu(n,a,l,e,r),a>0&&(i[s++]=ya({type:new Sr(n),length:a,nullCount:0,children:l.slice()})))}return[t=t.assign(n),i.map((e=>new du(t,e)))]}(t,e.map((t=>t.data.concat())))}function uu(t,e,n,i,r){var s;const a=(e+63&-64)>>3;for(let o=-1,c=i.length;++o<c;){const c=n[o],u=null==c?void 0:c.length;if(u>=e)u===e?n[o]=c:(n[o]=c.slice(0,e),r.numBatches=Math.max(r.numBatches,i[o].unshift(c.slice(e,u-e))));else{const i=t[o];t[o]=i.clone({nullable:!0}),n[o]=null!==(s=null==c?void 0:c._changeLengthAndBackfillNullBitmap(e))&&void 0!==s?s:ya({type:i.type,length:e,nullCount:e,nullBitmap:new Uint8Array(a)})}}return n}var lu,hu;class pu{constructor(...t){var e,n;if(0===t.length)return this.batches=[],this.schema=new Ro([]),this._offsets=[0],this;let i,r;t[0]instanceof Ro&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(r=t.pop());const s=t=>{if(t){if(t instanceof du)return[t];if(t instanceof pu)return t.batches;if(t instanceof da){if(t.type instanceof Sr)return[new du(new Ro(t.type.children),t)]}else{if(Array.isArray(t))return t.flatMap((t=>s(t)));if("function"==typeof t[Symbol.iterator])return[...t].flatMap((t=>s(t)));if("object"==typeof t){const e=Object.keys(t),n=e.map((e=>new $a([t[e]]))),i=new Ro(e.map(((t,e)=>new jo(String(t),n[e].type)))),[,r]=cu(i,n);return 0===r.length?[new du(t)]:r}}}return[]},a=t.flatMap((t=>s(t)));if(i=null!==(n=null!=i?i:null===(e=a[0])||void 0===e?void 0:e.schema)&&void 0!==n?n:new Ro([]),!(i instanceof Ro))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const t of a){if(!(t instanceof du))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!au(i,t.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=null!=r?r:va(this.data)}get data(){return this.batches.map((({data:t})=>t))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce(((t,e)=>t+e.length),0)}get nullCount(){return-1===this._nullCount&&(this._nullCount=ba(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,e){}indexOf(t,e){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?Oa.visit(new $a(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[\n  ${this.toArray().join(",\n  ")}\n]`}concat(...t){const e=this.schema,n=this.data.concat(t.flatMap((({data:t})=>t)));return new pu(e,n.map((t=>new du(e,t))))}slice(t,e){const n=this.schema;[t,e]=ea({length:this.numRows},t,e);const i=_a(this.data,this._offsets,t,e);return new pu(n,i.map((t=>new du(n,t))))}getChild(t){return this.getChildAt(this.schema.fields.findIndex((e=>e.name===t)))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const e=this.data.map((e=>e.children[t]));if(0===e.length){const{type:n}=this.schema.fields[t],i=ya({type:n,length:0,nullCount:0});e.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new $a(e)}return null}setChild(t,e){var n;return this.setChildAt(null===(n=this.schema.fields)||void 0===n?void 0:n.findIndex((e=>e.name===t)),e)}setChildAt(t,e){let n=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){e||(e=new $a([ya({type:new qi,length:this.numRows})]));const r=n.fields.slice(),s=r[t].clone({type:e.type}),a=this.schema.fields.map(((t,e)=>this.getChildAt(e)));[r[t],a[t]]=[s,e],[n,i]=cu(n,a)}return new pu(n,i)}select(t){const e=this.schema.fields.reduce(((t,e,n)=>t.set(e.name,n)),new Map);return this.selectAt(t.map((t=>e.get(t))).filter((t=>t>-1)))}selectAt(t){const e=this.schema.selectAt(t),n=this.batches.map((e=>e.selectAt(t)));return new pu(e,n)}assign(t){const e=this.schema.fields,[n,i]=t.schema.fields.reduce(((t,n,i)=>{const[r,s]=t,a=e.findIndex((t=>t.name===n.name));return~a?s[a]=i:r.push(i),t}),[[],[]]),r=this.schema.assign(t.schema),s=[...e.map(((t,e)=>[e,i[e]])).map((([e,n])=>void 0===n?this.getChildAt(e):t.getChildAt(n))),...n.map((e=>t.getChildAt(e)))].filter(Boolean);return new pu(...cu(r,s))}}lu=Symbol.toStringTag,pu[lu]=(t=>(t.schema=null,t.batches=[],t._offsets=new Uint32Array([0]),t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,t.isValid=Sa(wa),t.get=Sa(Ws.getVisitFn(ci.Struct)),t.set=Ia(gs.getVisitFn(ci.Struct)),t.indexOf=Aa(Ma.getVisitFn(ci.Struct)),t.getByteLength=Sa(Ua.getVisitFn(ci.Struct)),"Table"))(pu.prototype);let du=class t{constructor(...t){switch(t.length){case 2:if([this.schema]=t,!(this.schema instanceof Ro))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=ya({nullCount:0,type:new Sr(this.schema.fields),children:this.schema.fields.map((t=>ya({type:t.type,nullCount:0})))})]=t,!(this.data instanceof da))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=fu(this.schema,this.data.children);break;case 1:{const[e]=t,{fields:n,children:i,length:r}=Object.keys(e).reduce(((t,n,i)=>(t.children[i]=e[n],t.length=Math.max(t.length,e[n].length),t.fields[i]=jo.new({name:n,type:e[n].type,nullable:!0}),t)),{length:0,fields:new Array,children:new Array}),s=new Ro(n),a=ya({type:new Sr(n),length:r,children:i,nullCount:0});[this.schema,this.data]=fu(s,a.children,r);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=mu(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Ws.visit(this.data,t)}set(t,e){return gs.visit(this.data,t,e)}indexOf(t,e){return Ma.visit(this.data,t,e)}getByteLength(t){return Ua.visit(this.data,t)}[Symbol.iterator](){return Oa.visit(new $a([this.data]))}toArray(){return[...this]}concat(...t){return new pu(this.schema,[this,...t])}slice(e,n){const[i]=new $a([this.data]).slice(e,n).data;return new t(this.schema,i)}getChild(t){var e;return this.getChildAt(null===(e=this.schema.fields)||void 0===e?void 0:e.findIndex((e=>e.name===t)))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new $a([this.data.children[t]]):null}setChild(t,e){var n;return this.setChildAt(null===(n=this.schema.fields)||void 0===n?void 0:n.findIndex((e=>e.name===t)),e)}setChildAt(e,n){let i=this.schema,r=this.data;if(e>-1&&e<this.numCols){n||(n=new $a([ya({type:new qi,length:this.numRows})]));const t=i.fields.slice(),s=r.children.slice(),a=t[e].clone({type:n.type});[t[e],s[e]]=[a,n.data[0]],i=new Ro(t,new Map(this.schema.metadata)),r=ya({type:new Sr(t),children:s})}return new t(i,r)}select(e){const n=this.schema.select(e),i=new Sr(n.fields),r=[];for(const t of e){const e=this.schema.fields.findIndex((e=>e.name===t));~e&&(r[e]=this.data.children[e])}return new t(n,ya({type:i,length:this.numRows,children:r}))}selectAt(e){const n=this.schema.selectAt(e),i=e.map((t=>this.data.children[t])).filter(Boolean),r=ya({type:new Sr(n.fields),length:this.numRows,children:i});return new t(n,r)}};function fu(t,e,n=e.reduce(((t,e)=>Math.max(t,e.length)),0)){var i;const r=[...t.fields],s=[...e],a=(n+63&-64)>>3;for(const[o,c]of t.fields.entries()){const t=e[o];t&&t.length===n||(r[o]=c.clone({nullable:!0}),s[o]=null!==(i=null==t?void 0:t._changeLengthAndBackfillNullBitmap(n))&&void 0!==i?i:ya({type:c.type,length:n,nullCount:n,nullBitmap:new Uint8Array(a)}))}return[t.assign(r),ya({type:new Sr(r),length:n,children:s})]}function mu(t,e,n=new Map){var i,r;if((null!==(i=null==t?void 0:t.length)&&void 0!==i?i:0)>0&&(null==t?void 0:t.length)===(null==e?void 0:e.length))for(let i=-1,s=t.length;++i<s;){const{type:s}=t[i],a=e[i];for(const t of[a,...(null===(r=null==a?void 0:a.dictionary)||void 0===r?void 0:r.data)||[]])mu(s.children,null==t?void 0:t.children,n);if(Hi.isDictionary(s)){const{id:t}=s;if(n.has(t)){if(n.get(t)!==a.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else(null==a?void 0:a.dictionary)&&n.set(t,a.dictionary)}}return n}hu=Symbol.toStringTag,du[hu]=(t=>(t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(du.prototype);class yu extends du{constructor(t){const e=t.fields.map((t=>ya({type:t.type})));super(t,ya({type:new Sr(t.fields),nullCount:0,children:e}))}}var gu,bu;!function(t){t[t.BUFFER=0]="BUFFER"}(gu||(gu={})),function(t){t[t.LZ4_FRAME=0]="LZ4_FRAME",t[t.ZSTD=1]="ZSTD"}(bu||(bu={}));class vu{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBodyCompression(t,e){return(e||new vu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,e){return t.setPosition(t.position()+4),(e||new vu).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):bu.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):gu.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,e){t.addFieldInt8(0,e,bu.LZ4_FRAME)}static addMethod(t,e){t.addFieldInt8(1,e,gu.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,e,n){return vu.startBodyCompression(t),vu.addCodec(t,e),vu.addMethod(t,n),vu.endBodyCompression(t)}}class _u{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,e,n){return t.prep(8,16),t.writeInt64(BigInt(null!=n?n:0)),t.writeInt64(BigInt(null!=e?e:0)),t.offset()}}let xu=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,e,n){return t.prep(8,16),t.writeInt64(BigInt(null!=n?n:0)),t.writeInt64(BigInt(null!=e?e:0)),t.offset()}},wu=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsRecordBatch(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRecordBatch(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new xu).__init(this.bb.__vector(this.bb_pos+n)+16*t,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new _u).__init(this.bb.__vector(this.bb_pos+n)+16*t,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const e=this.bb.__offset(this.bb_pos,10);return e?(t||new vu).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,e){t.addFieldInt64(0,e,BigInt("0"))}static addNodes(t,e){t.addFieldOffset(1,e,0)}static startNodesVector(t,e){t.startVector(16,e,8)}static addBuffers(t,e){t.addFieldOffset(2,e,0)}static startBuffersVector(t,e){t.startVector(16,e,8)}static addCompression(t,e){t.addFieldOffset(3,e,0)}static endRecordBatch(t){return t.endObject()}},Su=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryBatch(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryBatch(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new wu).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startDictionaryBatch(t){t.startObject(3)}static addId(t,e){t.addFieldInt64(0,e,BigInt("0"))}static addData(t,e){t.addFieldOffset(1,e,0)}static addIsDelta(t,e){t.addFieldInt8(2,+e,0)}static endDictionaryBatch(t){return t.endObject()}};var Iu;!function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"}(Iu||(Iu={}));let Au=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMessage(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMessage(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):co.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):Iu.NONE}header(t){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__union(t,this.bb_pos+e):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new oo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,co.V1)}static addHeaderType(t,e){t.addFieldInt8(1,e,Iu.NONE)}static addHeader(t,e){t.addFieldOffset(2,e,0)}static addBodyLength(t,e){t.addFieldInt64(3,e,BigInt("0"))}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,e){t.finish(e)}static finishSizePrefixedMessageBuffer(t,e){t.finish(e,void 0,!0)}static createMessage(e,n,i,r,s,a){return t.startMessage(e),t.addVersion(e,n),t.addHeaderType(e,i),t.addHeader(e,r),t.addBodyLength(e,s),t.addCustomMetadata(e,a),t.endMessage(e)}};const Tu=new class extends Dr{visit(t,e){return null==t||null==e?void 0:super.visit(t,e)}visitNull(t,e){return Mo.startNull(e),Mo.endNull(e)}visitInt(t,e){return po.startInt(e),po.addBitWidth(e,t.bitWidth),po.addIsSigned(e,t.isSigned),po.endInt(e)}visitFloat(t,e){return Ao.startFloatingPoint(e),Ao.addPrecision(e,t.precision),Ao.endFloatingPoint(e)}visitBinary(t,e){return mo.startBinary(e),mo.endBinary(e)}visitBool(t,e){return yo.startBool(e),yo.endBool(e)}visitUtf8(t,e){return Fo.startUtf8(e),Fo.endUtf8(e)}visitDecimal(t,e){return bo.startDecimal(e),bo.addScale(e,t.scale),bo.addPrecision(e,t.precision),bo.addBitWidth(e,t.bitWidth),bo.endDecimal(e)}visitDate(t,e){return go.startDate(e),go.addUnit(e,t.unit),go.endDate(e)}visitTime(t,e){return No.startTime(e),No.addUnit(e,t.unit),No.addBitWidth(e,t.bitWidth),No.endTime(e)}visitTimestamp(t,e){const n=t.timezone&&e.createString(t.timezone)||void 0;return Do.startTimestamp(e),Do.addUnit(e,t.unit),void 0!==n&&Do.addTimezone(e,n),Do.endTimestamp(e)}visitInterval(t,e){return To.startInterval(e),To.addUnit(e,t.unit),To.endInterval(e)}visitDuration(t,e){return wo.startDuration(e),wo.addUnit(e,t.unit),wo.endDuration(e)}visitList(t,e){return ko.startList(e),ko.endList(e)}visitStruct(t,e){return Eo.startStruct_(e),Eo.endStruct_(e)}visitUnion(t,e){Lo.startTypeIdsVector(e,t.typeIds.length);const n=Lo.createTypeIdsVector(e,t.typeIds);return Lo.startUnion(e),Lo.addMode(e,t.mode),Lo.addTypeIds(e,n),Lo.endUnion(e)}visitDictionary(t,e){const n=this.visit(t.indices,e);return fo.startDictionaryEncoding(e),fo.addId(e,BigInt(t.id)),fo.addIsOrdered(e,t.isOrdered),void 0!==n&&fo.addIndexType(e,n),fo.endDictionaryEncoding(e)}visitFixedSizeBinary(t,e){return So.startFixedSizeBinary(e),So.addByteWidth(e,t.byteWidth),So.endFixedSizeBinary(e)}visitFixedSizeList(t,e){return Io.startFixedSizeList(e),Io.addListSize(e,t.listSize),Io.endFixedSizeList(e)}visitMap(t,e){return Co.startMap(e),Co.addKeysSorted(e,t.keysSorted),Co.endMap(e)}};function ku(t){return new Vu(t.count,Mu(t.columns),Eu(t.columns))}function Cu(t,e){return(t.children||[]).filter(Boolean).map((t=>jo.fromJSON(t,e)))}function Mu(t){return(t||[]).reduce(((t,e)=>{return[...t,new Ru(e.count,(n=e.VALIDITY,(n||[]).reduce(((t,e)=>t+ +(0===e)),0))),...Mu(e.children)];var n}),[])}function Eu(t,e=[]){for(let n=-1,i=(t||[]).length;++n<i;){const i=t[n];i.VALIDITY&&e.push(new Pu(e.length,i.VALIDITY.length)),i.TYPE_ID&&e.push(new Pu(e.length,i.TYPE_ID.length)),i.OFFSET&&e.push(new Pu(e.length,i.OFFSET.length)),i.DATA&&e.push(new Pu(e.length,i.DATA.length)),e=Eu(i.children,e)}return e}function Nu(t=[]){return new Map(t.map((({key:t,value:e})=>[t,e])))}function Du(t){return new Yi(t.isSigned,t.bitWidth)}function Ou(t,e){const n=t.type.name;switch(n){case"NONE":case"null":return new qi;case"binary":return new sr;case"utf8":return new ar;case"bool":return new or;case"list":return new wr((e||[])[0]);case"struct":case"struct_":return new Sr(e||[])}switch(n){case"int":{const e=t.type;return new Yi(e.isSigned,e.bitWidth)}case"floatingpoint":{const e=t.type;return new er(ii[e.precision])}case"decimal":{const e=t.type;return new cr(e.scale,e.precision,e.bitWidth)}case"date":{const e=t.type;return new ur(ri[e.unit])}case"time":{const e=t.type;return new pr(si[e.unit],e.bitWidth)}case"timestamp":{const e=t.type;return new gr(si[e.unit],e.timezone)}case"interval":{const e=t.type;return new br(ai[e.unit])}case"duration":{const e=t.type;return new xr(si[e.unit])}case"union":{const n=t.type,[i,...r]=(n.mode+"").toLowerCase(),s=i.toUpperCase()+r.join("");return new Ir(ni[s],n.typeIds||[],e||[])}case"fixedsizebinary":{const e=t.type;return new Ar(e.byteWidth)}case"fixedsizelist":{const n=t.type;return new Tr(n.listSize,(e||[])[0])}case"map":{const n=t.type;return new kr((e||[])[0],n.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var Bu=ao,Lu=so;class Fu{static fromJSON(t,e){const n=new Fu(0,ei.V5,e);return n._createHeader=function(t,e){return()=>{switch(e){case oi.Schema:return Ro.fromJSON(t);case oi.RecordBatch:return Vu.fromJSON(t);case oi.DictionaryBatch:return Uu.fromJSON(t)}throw new Error(`Unrecognized Message type: { name: ${oi[e]}, type: ${e} }`)}}(t,e),n}static decode(t){t=new Lu(qn(t));const e=Au.getRootAsMessage(t),n=e.bodyLength(),i=e.version(),r=e.headerType(),s=new Fu(n,i,r);return s._createHeader=function(t,e){return()=>{switch(e){case oi.Schema:return Ro.decode(t.header(new Uo),new Map,t.version());case oi.RecordBatch:return Vu.decode(t.header(new wu),t.version());case oi.DictionaryBatch:return Uu.decode(t.header(new Su),t.version())}throw new Error(`Unrecognized Message type: { name: ${oi[e]}, type: ${e} }`)}}(e,r),s}static encode(t){const e=new Bu;let n=-1;return t.isSchema()?n=Ro.encode(e,t.header()):t.isRecordBatch()?n=Vu.encode(e,t.header()):t.isDictionaryBatch()&&(n=Uu.encode(e,t.header())),Au.startMessage(e),Au.addVersion(e,ei.V5),Au.addHeader(e,n),Au.addHeaderType(e,t.headerType),Au.addBodyLength(e,BigInt(t.bodyLength)),Au.finishMessageBuffer(e,Au.endMessage(e)),e.asUint8Array()}static from(t,e=0){if(t instanceof Ro)return new Fu(0,ei.V5,oi.Schema,t);if(t instanceof Vu)return new Fu(e,ei.V5,oi.RecordBatch,t);if(t instanceof Uu)return new Fu(e,ei.V5,oi.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===oi.Schema}isRecordBatch(){return this.headerType===oi.RecordBatch}isDictionaryBatch(){return this.headerType===oi.DictionaryBatch}constructor(t,e,n,i){this._version=e,this._headerType=n,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=wi(t)}}class Vu{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,e,n){this._nodes=e,this._buffers=n,this._length=wi(t)}}class Uu{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,e,n=!1){this._data=t,this._isDelta=n,this._id=wi(e)}}class Pu{constructor(t,e){this.offset=wi(t),this.length=wi(e)}}class Ru{constructor(t,e){this.length=wi(t),this.nullCount=wi(e)}}function ju(t,e){const n=[];for(let i,r=-1,s=-1,a=t.childrenLength();++r<a;)(i=t.children(r))&&(n[++s]=jo.decode(i,e));return n}function $u(t){const e=new Map;if(t)for(let n,i,r=-1,s=Math.trunc(t.customMetadataLength());++r<s;)(n=t.customMetadata(r))&&null!=(i=n.key())&&e.set(i,n.value());return e}function zu(t){return new Yi(t.isSigned(),t.bitWidth())}function Hu(t,e){const n=t.typeType();switch(n){case Bo.NONE:case Bo.Null:return new qi;case Bo.Binary:return new sr;case Bo.Utf8:return new ar;case Bo.Bool:return new or;case Bo.List:return new wr((e||[])[0]);case Bo.Struct_:return new Sr(e||[])}switch(n){case Bo.Int:{const e=t.type(new po);return new Yi(e.isSigned(),e.bitWidth())}case Bo.FloatingPoint:{const e=t.type(new Ao);return new er(e.precision())}case Bo.Decimal:{const e=t.type(new bo);return new cr(e.scale(),e.precision(),e.bitWidth())}case Bo.Date:{const e=t.type(new go);return new ur(e.unit())}case Bo.Time:{const e=t.type(new No);return new pr(e.unit(),e.bitWidth())}case Bo.Timestamp:{const e=t.type(new Do);return new gr(e.unit(),e.timezone())}case Bo.Interval:{const e=t.type(new To);return new br(e.unit())}case Bo.Duration:{const e=t.type(new wo);return new xr(e.unit())}case Bo.Union:{const n=t.type(new Lo);return new Ir(n.mode(),n.typeIdsArray()||[],e||[])}case Bo.FixedSizeBinary:{const e=t.type(new So);return new Ar(e.byteWidth())}case Bo.FixedSizeList:{const n=t.type(new Io);return new Tr(n.listSize(),(e||[])[0])}case Bo.Map:{const n=t.type(new Co);return new kr((e||[])[0],n.keysSorted())}}throw new Error(`Unrecognized type: "${Bo[n]}" (${n})`)}jo.encode=function(t,e){let n=-1,i=-1,r=-1;const s=e.type;let a=e.typeId;Hi.isDictionary(s)?(a=s.dictionary.typeId,r=Tu.visit(s,t),i=Tu.visit(s.dictionary,t)):i=Tu.visit(s,t);const o=(s.children||[]).map((e=>jo.encode(t,e))),c=Vo.createChildrenVector(t,o),u=e.metadata&&e.metadata.size>0?Vo.createCustomMetadataVector(t,[...e.metadata].map((([e,n])=>{const i=t.createString(`${e}`),r=t.createString(`${n}`);return oo.startKeyValue(t),oo.addKey(t,i),oo.addValue(t,r),oo.endKeyValue(t)}))):-1;e.name&&(n=t.createString(e.name));Vo.startField(t),Vo.addType(t,i),Vo.addTypeType(t,a),Vo.addChildren(t,c),Vo.addNullable(t,!!e.nullable),-1!==n&&Vo.addName(t,n);-1!==r&&Vo.addDictionary(t,r);-1!==u&&Vo.addCustomMetadata(t,u);return Vo.endField(t)},jo.decode=function(t,e){let n,i,r,s,a,o;e&&(o=t.dictionary())?e.has(n=wi(o.id()))?(s=(s=o.indexType())?zu(s):new Ki,a=new Er(e.get(n),s,n,o.isOrdered()),i=new jo(t.name(),a,t.nullable(),$u(t))):(s=(s=o.indexType())?zu(s):new Ki,e.set(n,r=Hu(t,ju(t,e))),a=new Er(r,s,n,o.isOrdered()),i=new jo(t.name(),a,t.nullable(),$u(t))):(r=Hu(t,ju(t,e)),i=new jo(t.name(),r,t.nullable(),$u(t)));return i||null},jo.fromJSON=function(t,e){let n,i,r,s,a,o;return e&&(s=t.dictionary)?e.has(n=s.id)?(i=(i=s.indexType)?Du(i):new Ki,o=new Er(e.get(n),i,n,s.isOrdered),r=new jo(t.name,o,t.nullable,Nu(t.metadata))):(i=(i=s.indexType)?Du(i):new Ki,e.set(n,a=Ou(t,Cu(t,e))),o=new Er(a,i,n,s.isOrdered),r=new jo(t.name,o,t.nullable,Nu(t.metadata))):(a=Ou(t,Cu(t,e)),r=new jo(t.name,a,t.nullable,Nu(t.metadata))),r||null},Ro.encode=function(t,e){const n=e.fields.map((e=>jo.encode(t,e)));Uo.startFieldsVector(t,n.length);const i=Uo.createFieldsVector(t,n),r=e.metadata&&e.metadata.size>0?Uo.createCustomMetadataVector(t,[...e.metadata].map((([e,n])=>{const i=t.createString(`${e}`),r=t.createString(`${n}`);return oo.startKeyValue(t),oo.addKey(t,i),oo.addValue(t,r),oo.endKeyValue(t)}))):-1;Uo.startSchema(t),Uo.addFields(t,i),Uo.addEndianness(t,qu?uo.Little:uo.Big),-1!==r&&Uo.addCustomMetadata(t,r);return Uo.endSchema(t)},Ro.decode=function(t,e=new Map,n=ei.V5){const i=function(t,e){const n=[];for(let i,r=-1,s=-1,a=t.fieldsLength();++r<a;)(i=t.fields(r))&&(n[++s]=jo.decode(i,e));return n}(t,e);return new Ro(i,$u(t),e,n)},Ro.fromJSON=function(t,e=new Map){return new Ro(function(t,e){return(t.fields||[]).filter(Boolean).map((t=>jo.fromJSON(t,e)))}(t,e),Nu(t.metadata),e)},Vu.encode=function(t,e){const n=e.nodes||[],i=e.buffers||[];wu.startNodesVector(t,n.length);for(const e of n.slice().reverse())Ru.encode(t,e);const r=t.endVector();wu.startBuffersVector(t,i.length);for(const e of i.slice().reverse())Pu.encode(t,e);const s=t.endVector();return wu.startRecordBatch(t),wu.addLength(t,BigInt(e.length)),wu.addNodes(t,r),wu.addBuffers(t,s),wu.endRecordBatch(t)},Vu.decode=function(t,e=ei.V5){if(null!==t.compression())throw new Error("Record batch compression not implemented");return new Vu(t.length(),function(t){const e=[];for(let n,i=-1,r=-1,s=t.nodesLength();++i<s;)(n=t.nodes(i))&&(e[++r]=Ru.decode(n));return e}(t),function(t,e){const n=[];for(let i,r=-1,s=-1,a=t.buffersLength();++r<a;)(i=t.buffers(r))&&(e<ei.V4&&(i.bb_pos+=8*(r+1)),n[++s]=Pu.decode(i));return n}(t,e))},Vu.fromJSON=ku,Uu.encode=function(t,e){const n=Vu.encode(t,e.data);return Su.startDictionaryBatch(t),Su.addId(t,BigInt(e.id)),Su.addIsDelta(t,e.isDelta),Su.addData(t,n),Su.endDictionaryBatch(t)},Uu.decode=function(t,e=ei.V5){return new Uu(Vu.decode(t.data(),e),t.id(),t.isDelta())},Uu.fromJSON=function(t){return new Uu(ku(t.data),t.id,t.isDelta)},Ru.encode=function(t,e){return xu.createFieldNode(t,BigInt(e.length),BigInt(e.nullCount))},Ru.decode=function(t){return new Ru(t.length(),t.nullCount())},Pu.encode=function(t,e){return _u.createBuffer(t,BigInt(e.offset),BigInt(e.length))},Pu.decode=function(t){return new Pu(t.offset(),t.length())};const qu=(()=>{const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),256===new Int16Array(t)[0]})(),Yu="ARROW1",Gu=new Uint8Array(6);for(let t=0;t<6;t+=1)Gu[t]=Yu.codePointAt(t);Gu.length;class Wu extends Dr{static assemble(...t){const e=t=>t.flatMap((t=>Array.isArray(t)?e(t):t instanceof du?t.data.children:t.data)),n=new Wu;return n.visitMany(e(t)),n}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof $a)return this.visitMany(t.data),this;const{type:e}=t;if(!Hi.isDictionary(e)){const{length:n}=t;if(n>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(Hi.isUnion(e))this.nodes.push(new Ru(n,0));else{const{nullCount:i}=t;Hi.isNull(e)||Ku.call(this,i<=0?new Uint8Array(0):ca(t.offset,n,t.nullBitmap)),this.nodes.push(new Ru(n,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Ku(t){const e=t.byteLength+7&-8;return this.buffers.push(t),this.bufferRegions.push(new Pu(this._byteLength,e)),this._byteLength+=e,this}function Qu(t){return Ku.call(this,t.values.subarray(0,t.length*t.stride))}function Ju(t){const{length:e,values:n,valueOffsets:i}=t,{0:r,[e]:s}=i,a=Math.min(s-r,n.byteLength-r);return Ku.call(this,Qn(-r,e+1,i)),Ku.call(this,n.subarray(r,r+a)),this}function Zu(t){const{length:e,valueOffsets:n}=t;if(n){const{0:i,[e]:r}=n;return Ku.call(this,Qn(-i,e+1,n)),this.visit(t.children[0].slice(i,r-i))}return this.visit(t.children[0])}function Xu(t){return this.visitMany(t.type.children.map(((e,n)=>t.children[n])).filter(Boolean))[0]}Wu.prototype.visitBool=function(t){let e;return t.nullCount>=t.length?Ku.call(this,new Uint8Array(0)):(e=t.values)instanceof Uint8Array?Ku.call(this,ca(t.offset,t.length,e)):Ku.call(this,ua(t.values))},Wu.prototype.visitInt=Qu,Wu.prototype.visitFloat=Qu,Wu.prototype.visitUtf8=Ju,Wu.prototype.visitBinary=Ju,Wu.prototype.visitFixedSizeBinary=Qu,Wu.prototype.visitDate=Qu,Wu.prototype.visitTimestamp=Qu,Wu.prototype.visitTime=Qu,Wu.prototype.visitDecimal=Qu,Wu.prototype.visitList=Zu,Wu.prototype.visitStruct=Xu,Wu.prototype.visitUnion=function(t){var e;const{type:n,length:i,typeIds:r,valueOffsets:s}=t;if(Ku.call(this,r),n.mode===ni.Sparse)return Xu.call(this,t);if(n.mode===ni.Dense){if(t.offset<=0)return Ku.call(this,s),Xu.call(this,t);{const a=new Int32Array(i),o=Object.create(null),c=Object.create(null);for(let t,n,u=-1;++u<i;)void 0!==(t=r[u])&&(void 0===(n=o[t])&&(n=o[t]=s[u]),a[u]=s[u]-n,c[t]=(null!==(e=c[t])&&void 0!==e?e:0)+1);Ku.call(this,a),this.visitMany(t.children.map(((t,e)=>{const r=n.typeIds[e],s=o[r],a=c[r];return t.slice(s,Math.min(i,a))})))}}return this},Wu.prototype.visitInterval=Qu,Wu.prototype.visitDuration=Qu,Wu.prototype.visitFixedSizeList=Zu,Wu.prototype.visitMap=Zu;class tl extends Qo{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new Zo,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,On(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy="boolean"!=typeof t.autoDestroy||t.autoDestroy,this._writeLegacyIpcFormat="boolean"==typeof t.writeLegacyIpcFormat&&t.writeLegacyIpcFormat}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return Bn(t)?t.then((t=>this.writeAll(t))):Fn(t)?rl(this,t):il(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,e=null){var n;return t===this._sink||t instanceof Zo?this._sink=t:(this._sink=new Zo,t&&(On(n=t)&&Dn(n.abort)&&Dn(n.getWriter)&&!Un(n))?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&(t=>On(t)&&Dn(t.end)&&Dn(t.write)&&(t=>"boolean"==typeof t)(t.writable)&&!Un(t))(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,e&&au(e,this._schema)||(null==e?(this._position=0,this._schema=null):(this._started=!0,this._schema=e,this._writeSchema(e))),this}write(t){let e=null;if(!this._sink)throw new Error("RecordBatchWriter is closed");if(null==t)return this.finish()&&void 0;if(t instanceof pu&&!(e=t.schema))return this.finish()&&void 0;if(t instanceof du&&!(e=t.schema))return this.finish()&&void 0;if(e&&!au(e,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,e)}t instanceof du?t instanceof yu||this._writeRecordBatch(t):t instanceof pu?this.writeAll(t.batches):Ln(t)&&this.writeAll(t)}_writeMessage(t,e=8){const n=e-1,i=Fu.encode(t),r=i.byteLength,s=this._writeLegacyIpcFormat?4:8,a=r+s+n&~n,o=a-r-s;return t.headerType===oi.RecordBatch?this._recordBatchBlocks.push(new Wo(a,t.bodyLength,this._position)):t.headerType===oi.DictionaryBatch&&this._dictionaryBlocks.push(new Wo(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-s)),r>0&&this._write(i),this._writePadding(o)}_write(t){if(this._started){const e=qn(t);e&&e.byteLength>0&&(this._sink.write(e),this._position+=e.byteLength)}return this}_writeSchema(t){return this._writeMessage(Fu.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Gu)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:e,nodes:n,bufferRegions:i,buffers:r}=Wu.assemble(t),s=new Vu(t.numRows,n,i),a=Fu.from(s,e);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(r)}_writeDictionaryBatch(t,e,n=!1){this._dictionaryDeltaOffsets.set(e,t.length+(this._dictionaryDeltaOffsets.get(e)||0));const{byteLength:i,nodes:r,bufferRegions:s,buffers:a}=Wu.assemble(new $a([t])),o=new Vu(t.length,r,s),c=new Uu(o,e,n),u=Fu.from(c,i);return this._writeMessage(u)._writeBodyBuffers(a)}_writeBodyBuffers(t){let e,n,i;for(let r=-1,s=t.length;++r<s;)(e=t[r])&&(n=e.byteLength)>0&&(this._write(e),(i=(n+7&-8)-n)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[e,n]of t.dictionaries){let t=this._dictionaryDeltaOffsets.get(e)||0;if(0===t||(n=null==n?void 0:n.slice(t)).length>0)for(const i of n.data)this._writeDictionaryBatch(i,e,t>0),t+=i.length}return this}}class el extends tl{static writeAll(t,e){const n=new el(e);return Bn(t)?t.then((t=>n.writeAll(t))):Fn(t)?rl(n,t):il(n,t)}}class nl extends tl{static writeAll(t){const e=new nl;return Bn(t)?t.then((t=>e.writeAll(t))):Fn(t)?rl(e,t):il(e,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const e=Yo.encode(new Yo(t,ei.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(e)._write(Int32Array.of(e.byteLength))._writeMagic()}}function il(t,e){let n=e;e instanceof pu&&(n=e.batches,t.reset(void 0,e.schema));for(const e of n)t.write(e);return t.finish()}function rl(t,e){var n,i,r,s,a,o,c;return wn(this,void 0,void 0,(function*(){try{for(n=!0,i=kn(e);r=yield i.next(),!(s=r.done);n=!0){c=r.value,n=!1;const e=c;t.write(e)}}catch(t){a={error:t}}finally{try{n||s||!(o=i.return)||(yield o.call(i))}finally{if(a)throw a.error}}return t.finish()}))}function sl(t,e=1){return(t*e+63&-64||64)/e}function al(t,e,n=t.BYTES_PER_ELEMENT){return new t(sl(e,n))}function ol(t){return t instanceof da?t:new da(t.type,0,t.length,t.nulls,t.buffers,null,t.dict)}const cl=new TextEncoder;const ul=cl.encodeInto?function(t,e,n){return cl.encodeInto(n,t.subarray(e)).written}:function(t,e,n){const i=cl.encode(n);return t.set(i,e),i.length};function ll(t,e){const n=al(t.ArrayType,e);return{set(t,e){n[e]=t},data:()=>({type:t,length:e,buffers:[null,n]})}}function hl(t,e){const n=al(t.ArrayType,e/8);return{set(t,e){t&&(n[e>>3]|=1<<e%8)},data:()=>({type:t,length:e,buffers:[null,n]})}}function pl(t,e){const n=al(t.ArrayType,e);return{set(t,e){n[e]=t/864e5|0},data:()=>({type:t,length:e,buffers:[null,n]})}}function dl(t,e){const n=al(t.ArrayType,e<<1);return{set(t,e){const i=e<<1;n[i]=t%4294967296|0,n[i+1]=t/4294967296|0},data:()=>({type:t,length:e,buffers:[null,n]})}}function fl(t,e){const n=[],i=al(t.indices.ArrayType,e),r=Object.create(null);let s=-1,a=0;return{set(t,e){const o=String(t);let c=r[o];void 0===c&&(a+=o.length,r[o]=c=++s,n.push(o)),i[e]=c},data:()=>({type:t,length:e,buffers:[null,i],dict:ml(t.dictionary,n,a)})}}function ml(t,e,n){const i=function(t,e,n){const i=al(Int32Array,e+1),r=al(Uint8Array,3*n);let s=0;return{set(t,e){s+=ul(r,s,t),i[e+1]=s},data:()=>{const n=sl(s),a=r.length>n?r.subarray(0,n):r;return{type:t,length:e,buffers:[i,a]}}}}(t,e.length,n);return e.forEach(i.set),function(t){return new $a([ol(t)])}(i.data())}function yl(t,e,n=!0){let i;switch(t.typeId){case ci.Int:i=t.bitWidth<64?ll:null;break;case ci.Float:i=t.precision>0?ll:null;break;case ci.Dictionary:i=t.dictionary.typeId===ci.Utf8&&t.indices.typeId===ci.Int&&t.indices.bitWidth<64?fl:null;break;case ci.Bool:i=hl;break;case ci.Date:i=t.unit?dl:pl}return null==i?function(t){const e=ou({type:t,nullValues:[null,void 0]});return{set(t,n){e.set(n,t)},data:()=>e.finish().flush()}}(t):n?function(t,e){const n=al(Uint8Array,e/8);let i=0;return{set(e,r){null==e?++i:(t.set(e,r),n[r>>3]|=1<<r%8)},data:()=>{const e=t.data();return i&&(e.nulls=i,e.buffers[2]=n),e}}}(i(t,e),e):i(t,e)}function gl(t,e,n,i,r=!0){const s=yl(i,t,r);return e(n,s.set),ol(s.data())}function bl(t){if(t instanceof Hi||null==t)return t;switch(t){case ci.Binary:return new sr;case ci.Bool:return new or;case ci.DateDay:return new lr;case ci.DateMillisecond:case ci.Date:return new hr;case ci.Dictionary:return new Er(new ar,new Ki);case ci.Float16:return new nr;case ci.Float32:return new ir;case ci.Float64:case ci.Float:return new rr;case ci.Int8:return new Gi;case ci.Int16:return new Wi;case ci.Int32:case ci.Int:return new Ki;case ci.Int64:return new Qi;case ci.IntervalDayTime:return new vr;case ci.Interval:case ci.IntervalYearMonth:return new _r;case ci.Null:return new qi;case ci.TimeMicrosecond:return new mr;case ci.TimeMillisecond:case ci.Time:return new fr;case ci.TimeNanosecond:return new yr;case ci.TimeSecond:return new dr;case ci.Uint8:return new Ji;case ci.Uint16:return new Zi;case ci.Uint32:return new Xi;case ci.Uint64:return new tr;case ci.Utf8:return new ar;default:St(`Unsupported type code: ${be(t)}. Use a data type constructor instead?`)}}function vl(t,e){const n=_l();return t(e,n.add),n}function _l(){const t={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(e){if(++t.count,null==e)return void++t.nulls;const n=typeof e;if("string"===n)++t.strings;else if("number"===n)++t.nums,e<t.min&&(t.min=e),e>t.max&&(t.max=e),Number.isInteger(e)&&++t.ints;else if("boolean"===n)++t.bools;else if("object"===n)if(Et(e))++t.dates,0===(i=e).getUTCHours()&&0===i.getUTCMinutes()&&0===i.getUTCSeconds()&&0===i.getUTCMilliseconds()&&++t.utcdays;else if(zt(e)){++t.arrays,e.length<t.minlen&&(t.minlen=e.length),e.length>t.maxlen&&(t.maxlen=e.length);const n=t.array_prof||(t.array_prof=_l());e.forEach(n.add)}else{++t.structs;const n=t.struct_prof||(t.struct_prof={});for(const t in e){(n[t]||(n[t]=_l())).add(e[t])}}else"bigint"===n&&(++t.bigints,e<t.min&&(t.min=e),e>t.max&&(t.max=e));var i},type:()=>bl(function(t){const e=t.count-t.nulls;if(0===e)return ci.Null;if(t.ints===e){const e=Math.max(Math.abs(t.min)-1,t.max);return t.min<0?e>=2**31?ci.Float64:e<128?ci.Int8:e<32768?ci.Int16:ci.Int32:e>=2**32?ci.Float64:e<256?ci.Uint8:e<65536?ci.Uint16:ci.Uint32}if(t.nums===e)return ci.Float64;if(t.bigints===e){const e=-t.min>t.max?-t.min-1n:t.max;return t.min<0?e<2**63?ci.Int64:St(`BigInt exceeds 64 bits: ${e}`):t.max<2**64?ci.Uint64:St(`BigInt exceeds 64 bits: ${t.max}`)}if(t.bools===e)return ci.Bool;if(t.utcdays===e)return ci.DateDay;if(t.dates===e)return ci.DateMillisecond;if(t.arrays===e){const e=jo.new("value",t.array_prof.type(),!0);return t.minlen===t.maxlen?new Tr(t.minlen,e):new wr(e)}if(t.structs===e){const e=t.struct_prof;return new Sr(Object.keys(e).map((t=>jo.new(t,e[t].type(),!0))))}if(t.strings>0)return ci.Dictionary;St("Type inference failure")}(t))};return t}function xl(t,e,n,i,r,s=!0){if(!(r=bl(r))){const t=vl(i,e);s=t.nulls>0,r=t.type()}return gl(n,i,e,r,s)}function wl(t,e,n,i,r,s=!0){r=bl(r);const a=t.column(e),o=!(t.isFiltered()||t.isOrdered()),c=(u=a)instanceof $a?u:u.vector instanceof $a?u.vector:null;var u;if(c&&o&&Sl(c.type,r))return c;const l=a.data;if($t(l)){const t=function(t){const e={Float32Array:ir,Float64Array:rr,Int8Array:Gi,Int16Array:Wi,Int32Array:Ki,Uint8Array:Ji,Uint16Array:Zi,Uint32Array:Xi,BigInt64Array:Qi,BigUint64Array:tr},n=e[t.constructor.name];return n?new n:null}(l);if(o&&t&&Sl(t,r))return function(t,e){const n=t.length,i=sl(n,t.BYTES_PER_ELEMENT);let r=t;return n!==i&&(r=new t.constructor(i),r.set(t)),ol({type:e,length:n,buffers:[null,r]})}(l,t);r=r||t,s=!1}if(!r){const t=vl(i,a);s=t.nulls>0,r=t.type()}return gl(n,i,a,r,s)}function Sl(t,e){return!t||!e||t.compareTo(e)}function Il(t,e,n){const i=Math.min(t.length,n+e);return(e,r)=>{for(let s=n;s<i;++s)r(t[s][e],s)}}function Al(t,e,n){const i=0===n&&t.numRows()<=e&&!t.isFiltered()&&!t.isOrdered();return(r,s)=>{let a=-1;i&&zt(r.data)?r.data.forEach(s):t.scan((t=>s(r.get(t),++a)),!0,e,n)}}const Tl=()=>St("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function kl(t,e={}){const{types:n={}}=e,{dataFrom:i,names:r,nrows:s,scan:a}=function(t,e){const{columns:n,limit:i=1/0,offset:r=0}=e,s=At(n)?n(t):vt(n)?n:null;if(vt(t))return{dataFrom:xl,names:s||Object.keys(t[0]),nrows:Math.min(i,t.length-r),scan:Il(t,i,r)};if(function(t){return t&&At(t.reify)}(t))return{dataFrom:wl,names:s||t.columnNames(),nrows:Math.min(i,t.numRows()-r),scan:Al(t,i,r)};St("Unsupported input data type")}(t,e),o={};r.forEach((e=>{const r=i(t,e,s,a,n[e]);r.length!==s&&St("Column length mismatch"),o[e]=r}));return new(function(){try{return pu}catch(t){Tl()}}())(o)}function Cl(t,e={}){const{format:n,...i}=e;if(!["stream","file"].includes(n||"stream"))throw Error("Unrecognised output format");return function(t,e="stream"){return("stream"===e?el:nl).writeAll(t).toUint8Array(!0)}(kl(t,i),n)}function Ml(t,e){return At(e)?e(t):e||t.columnNames()}function El(t,e,n){const i=n.format||{},r=n.align||{},s={},a={};return e.forEach((e=>{const o=function(t,e={}){let n=0,i=0,r=0,s=0,a=0,o=0;return t((t=>{if(++n,null==t)return void++i;const e=typeof t;if("object"===e&&Et(t))++r,0===(c=t).getUTCHours()&&0===c.getUTCMinutes()&&0===c.getUTCSeconds()&&0===c.getUTCMilliseconds()&&++s;else if("number"===e&&(++a,t==t&&(0|t)!==t)){const e=t+"",n=e.indexOf(".");if(n>=0){const t=e.indexOf("e"),i=t>0?t:e.length;o=Math.max(o,i-n-1)}}var c})),{align:(i+a+r)/n>.5?"r":"l",format:{utc:r===s,digits:Math.min(o,e.maxdigits||6)}}}(function(t,e){const n=t.column(e);return e=>t.scan((t=>e(n.get(t))))}(t,e),n);a[e]=r[e]||o.align,s[e]=i[e]||o.format})),{align:a,format:s}}function Nl(t,e,n=100,i,r){const s=t.data(),a=e.length;t.scan((t=>{r.row(t);for(let n=0;n<a;++n){const i=e[n];r.cell(s[e[n]].get(t),i,n)}}),!0,n,i)}function Dl(t,e={}){if(At(e))return e(t)+"";const n=typeof t;if("object"===n){if(Et(t))return e.utc?Zt(t):Jt(t);{const n=JSON.stringify(t,((t,e)=>$t(e)?Array.from(e):e)),i=e.maxlen||30;return n.length>i?n.slice(0,28)+""+("["===n[0]?"]":"}"):n}}if("number"===n){const n=e.digits||0;let i;return 0!==t&&((i=Math.abs(t))>=1e18||i<Math.pow(10,-n))?t.toExponential(n):t.toFixed(n)}return t+""}function Ol(t,e,n={}){for(const i in t)n[i]=e(t[i],i);return n}function Bl(t,e={}){const n=Ml(t,e.columns),{align:i,format:r}=El(t,n,e),s=function(t){return Ol(t.style,(t=>At(t)?t:()=>t))}(e),a=e.null,o=(t,e)=>Dl(t,e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),c=a?(t,e)=>null==t?a(t):o(t,e):o;let u=-1,l=-1;const h=(t,e,n)=>{const r=n?(t=>"c"===t?"center":"r"===t?"right":"left")(i[e]):"",a=s[t]&&s[t](e,l,u)||"",o=(r?`text-align: ${r};`+(a?" ":""):"")+a;return`<${t}${o?` style="${o}"`:""}>`};let p=h("table")+h("thead")+h("tr",u)+n.map((t=>`${h("th",t,1)}${t}</th>`)).join("")+"</tr></thead>"+h("tbody");return Nl(t,n,e.limit,e.offset,{row(t){u=t,p+=(++l?"</tr>":"")+h("tr")},cell(t,e){p+=h("td",e,1)+c(t,r[e])+"</td>"}}),p+"</tr></tbody></table>"}function Ll(t,e=!0,n=!1){return void 0===t||t?e:n}const Fl=t=>Et(t)?Zt(t,!0):t;function Vl(t,e){for(const[n,i]of gn(e))t.set(n,i);return t}function Ul(t,e,n=new Map){return Ot(e=It(e)?t.columnName(e):e)?n.set(e,e):vt(e)?e.forEach((e=>Ul(t,e,n))):At(e)?Ul(t,e(t),n):Nt(e)?Vl(n,e):St(`Invalid column selection: ${be(e)}`),n}function Pl(t,e){return t.toObject=e,t}function Rl(t){return vt(t)?t.map(Rl):t&&t.toObject?t.toObject():t}function jl(){return Pl((t=>t.columnNames()),(()=>({all:[]})))}function $l(...t){return t=t.flat(),Pl((e=>{const n=Ul(e,t);return e.columnNames((t=>!n.has(t)))}),(()=>({not:Rl(t)})))}class zl extends kt{static from(t,e){return new zl(Bt(t,e),e)}static new(t,e){if(t instanceof zl)return t;const n={},i=[];for(const[e,r]of gn(t))n[e]=r,i.push(e);return new zl(n,e||i)}constructor(t,e,n,i,r,s){Ol(t,Mt,t);super(e=e||Object.keys(t),e.length?t[e[0]].length:0,t,n,i,r,s)}create({data:t,names:e,filter:n,groups:i,order:r}){const s=void 0!==n?n:this.mask();return new zl(t||this._data,e||(t?null:this._names),s,void 0!==i?i:function(t,e){if(!t||!e)return t;const{keys:n,rows:i,size:r}=t,s=new Int32Array(r);e.scan((t=>s[n[t]]=1));const a=s.reduce(((t,e)=>t+e),0);if(a===r)return t;const o=Array(a);let c=0;for(let t=0;t<r;++t)s[t]&&(o[s[t]=c++]=i[t]);const u=new Uint32Array(n.length);return e.scan((t=>u[t]=s[n[t]])),{...t,keys:u,rows:o,size:c}}(this._group,n&&s),void 0!==r?r:this._order,this._params)}assign(...t){const e=this.numRows(),n=this.reify(),i=Ut(n).groupby(n.groups());return t.forEach((t=>{(t=zl.new(t)).numRows()!==e&&St("Assign row counts do not match"),(t=t.reify()).columnNames((e=>i.add(e,t.column(e))))})),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,e=Array){const n=this.column(t),i=new e(this.numRows());let r=-1;return this.scan((t=>i[++r]=n.get(t)),!0),i}get(t,e=0){const n=this.column(t);return this.isFiltered()||this.isOrdered()?n.get(this.indices()[e]):n.get(e)}getter(t){const e=this.column(t),n=this.isFiltered()||this.isOrdered()?this.indices():null;return n?t=>e.get(n[t]):e?t=>e.get(t):St(`Unrecognized column: ${t}`)}object(t=0){return Hl(this)(t)}objects(t={}){const{grouped:e,limit:n,offset:i}=t,r=xn(Ul(this,t.columns||jl())),s=[];if(this.scan(((t,e)=>s.push(r(t,e))),!0,n,i),e&&this.isGrouped()){const t=[];return this.scan((e=>t.push(e)),!0,n,i),Me(this,t,s,e)}return s}*[Symbol.iterator](){const t=Hl(this),e=this.numRows();for(let n=0;n<e;++n)yield t(n)}reify(t){const e=t?t.length:this.numRows(),n=this._names;let i,r;if(!t&&!this.isOrdered()){if(!this.isFiltered())return this;e===this.totalRows()&&(i=this.data())}if(!i){const a=t?e=>t.forEach(e):t=>this.scan(t,!0),o=n.length;i={};for(let t=0;t<o;++t){const r=n[t],o=this.column(r),c=i[r]=new($t((s=o).data)?s.data.constructor:Array)(e);let u=-1;a((t=>c[++u]=o.get(t)))}this.isGrouped()&&(r=function(t,e,n,i){const{keys:r,rows:s,size:a}=t;let o=s,c=a,u=null;if(n){u=new Int32Array(a),e((t=>u[r[t]]=1));const t=u.reduce(((t,e)=>t+e),0);if(t!==a){o=Array(t),c=0;for(let t=0;t<a;++t)u[t]&&(o[u[t]=c++]=s[t])}}let l=-1;const h=new Uint32Array(i);return e(c!==a?t=>h[++l]=u[r[t]]:t=>h[++l]=r[t]),{...t,keys:h,rows:o,size:c}}(this.groups(),a,!!t,e))}var s;return this.create({data:i,names:n,groups:r,filter:null,order:null})}transform(...t){return t.flat().reduce(((t,e)=>e(t)),this)}toArrow(t){return kl(this,t)}toArrowBuffer(t){return Cl(this,t)}toCSV(t){return function(t,e={}){const n=Ml(t,e.columns),i=e.format||{},r=e.delimiter||",",s=new RegExp(`["${r}\n\r]`),a=t=>null==t?"":Et(t)?Zt(t,!0):s.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t,o=n.map(a);let c="";return Nl(t,n,e.limit||1/0,e.offset,{row(){c+=o.join(r)+"\n"},cell(t,e,n){o[n]=a(i[e]?i[e](t):t)}}),c+o.join(r)}(this,t)}toHTML(t){return Bl(this,t)}toJSON(t){return function(t,e={}){const n=Ll(e.schema),i=e.format||{},r=Ml(t,e.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(r.map((t=>({name:t}))))+'},"data":{'),r.forEach(((n,r)=>{s+=(r?",":"")+JSON.stringify(n)+":[";const a=t.column(n),o=i[n]||Fl;let c=-1;t.scan((t=>{const e=a.get(t);s+=(++c?",":"")+JSON.stringify(o(e))}),!0,e.limit,e.offset),s+="]"})),s+"}"+(n?"}":"")}(this,t)}toMarkdown(t){return function(t,e={}){const n=Ml(t,e.columns),{align:i,format:r}=El(t,n,e),s=t=>t.replace(/\|/g,"\\|");let a="|"+n.map(s).join("|")+"|\n|"+n.map((t=>{return"c"===(e=i[t])?":-:":"r"===e?"-:":":-";var e})).join("|")+"|";return Nl(t,n,e.limit,e.offset,{row(){a+="\n|"},cell(t,e){a+=s(Dl(t,r[e]))+"|"}}),a+"\n"}(this,t)}}function Hl(t){let e=t._builder;if(!e){const n=xn(t.columnNames()),i=t.data();if(t.isOrdered()||t.isFiltered()){const r=t.indices();e=t=>n(r[t],i)}else e=t=>n(t,i);t._builder=e}return e}class ql{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function Yl(t,e,n,i){const r=n[t.type]||n.Default;if(r&&!1===r(t,e,i))return;const s=Xl[t.type];s&&s(t,e,n)}const Gl=(t,e,n)=>{Yl(t.argument,e,n,t)},Wl=(t,e,n)=>{Yl(t.left,e,n,t),Yl(t.right,e,n,t)},Kl=(t,e,n)=>{Yl(t.test,e,n,t),Yl(t.consequent,e,n,t),t.alternate&&Yl(t.alternate,e,n,t)},Ql=(t,e,n)=>{Zl(t.params,e,n,t),Yl(t.body,e,n,t)},Jl=(t,e,n)=>{Yl(t.callee,e,n,t),Zl(t.arguments,e,n,t)},Zl=(t,e,n,i)=>{t.forEach((t=>Yl(t,e,n,i)))},Xl={TemplateLiteral:(t,e,n)=>{Zl(t.expressions,e,n,t),Zl(t.quasis,e,n,t)},MemberExpression:(t,e,n)=>{Yl(t.object,e,n,t),Yl(t.property,e,n,t)},CallExpression:Jl,NewExpression:Jl,ArrayExpression:(t,e,n)=>{Zl(t.elements,e,n,t)},AssignmentExpression:Wl,AwaitExpression:Gl,BinaryExpression:Wl,LogicalExpression:Wl,UnaryExpression:Gl,UpdateExpression:Gl,ConditionalExpression:Kl,ObjectExpression:(t,e,n)=>{Zl(t.properties,e,n,t)},Property:(t,e,n)=>{Yl(t.key,e,n,t),Yl(t.value,e,n,t)},ArrowFunctionExpression:Ql,FunctionExpression:Ql,FunctionDeclaration:Ql,VariableDeclaration:(t,e,n)=>{Zl(t.declarations,e,n,t)},VariableDeclarator:(t,e,n)=>{Yl(t.id,e,n,t),Yl(t.init,e,n,t)},SpreadElement:(t,e,n)=>{Yl(t.argument,e,n,t)},BlockStatement:(t,e,n)=>{Zl(t.body,e,n,t)},ExpressionStatement:(t,e,n)=>{Yl(t.expression,e,n,t)},IfStatement:Kl,ForStatement:(t,e,n)=>{Yl(t.init,e,n,t),Yl(t.test,e,n,t),Yl(t.update,e,n,t),Yl(t.body,e,n,t)},WhileStatement:(t,e,n)=>{Yl(t.test,e,n,t),Yl(t.body,e,n,t)},DoWhileStatement:(t,e,n)=>{Yl(t.body,e,n,t),Yl(t.test,e,n,t)},SwitchStatement:(t,e,n)=>{Yl(t.discriminant,e,n,t),Zl(t.cases,e,n,t)},SwitchCase:(t,e,n)=>{t.test&&Yl(t.test,e,n,t),Zl(t.consequent,e,n,t)},ReturnStatement:Gl,Program:(t,e,n)=>{Yl(t.body[0],e,n,t)}};function th(t){delete t.start,delete t.end,delete t.optional}function eh(t){th(t),delete t.object,delete t.property,delete t.computed,t.table||delete t.table}function nh(t,e){return e&&e.type===t}const ih="Escaped functions are not valid as rollup or pivot values.";function rh(t,e,n){t.aggronly&&St(ih);const i="(row,data)=>fn("+_n(t.table.columnNames())+",$)";return{escape:fn.escape(i,(r=e.expr,At(r)?r:()=>r),n)};var r}var sh=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],ah=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],oh="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",ch={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},uh="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",lh={5:uh,"5module":uh+" export import",6:uh+" const class extends export import super"},hh=/^in(stanceof)?$/,ph=new RegExp("["+oh+"]"),dh=new RegExp("["+oh+"-----------------------------------------------------------------------------------------------------------------------------------------------------]");function fh(t,e){for(var n=65536,i=0;i<e.length;i+=2){if((n+=e[i])>t)return!1;if((n+=e[i+1])>=t)return!0}return!1}function mh(t,e){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&ph.test(String.fromCharCode(t)):!1!==e&&fh(t,ah)))}function yh(t,e){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&dh.test(String.fromCharCode(t)):!1!==e&&(fh(t,ah)||fh(t,sh)))))}var gh=function(t,e){void 0===e&&(e={}),this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null};function bh(t,e){return new gh(t,{beforeExpr:!0,binop:e})}var vh={beforeExpr:!0},_h={startsExpr:!0},xh={};function wh(t,e){return void 0===e&&(e={}),e.keyword=t,xh[t]=new gh(t,e)}var Sh={num:new gh("num",_h),regexp:new gh("regexp",_h),string:new gh("string",_h),name:new gh("name",_h),privateId:new gh("privateId",_h),eof:new gh("eof"),bracketL:new gh("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new gh("]"),braceL:new gh("{",{beforeExpr:!0,startsExpr:!0}),braceR:new gh("}"),parenL:new gh("(",{beforeExpr:!0,startsExpr:!0}),parenR:new gh(")"),comma:new gh(",",vh),semi:new gh(";",vh),colon:new gh(":",vh),dot:new gh("."),question:new gh("?",vh),questionDot:new gh("?."),arrow:new gh("=>",vh),template:new gh("template"),invalidTemplate:new gh("invalidTemplate"),ellipsis:new gh("...",vh),backQuote:new gh("`",_h),dollarBraceL:new gh("${",{beforeExpr:!0,startsExpr:!0}),eq:new gh("=",{beforeExpr:!0,isAssign:!0}),assign:new gh("_=",{beforeExpr:!0,isAssign:!0}),incDec:new gh("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new gh("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:bh("||",1),logicalAND:bh("&&",2),bitwiseOR:bh("|",3),bitwiseXOR:bh("^",4),bitwiseAND:bh("&",5),equality:bh("==/!=/===/!==",6),relational:bh("</>/<=/>=",7),bitShift:bh("<</>>/>>>",8),plusMin:new gh("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:bh("%",10),star:bh("*",10),slash:bh("/",10),starstar:new gh("**",{beforeExpr:!0}),coalesce:bh("??",1),_break:wh("break"),_case:wh("case",vh),_catch:wh("catch"),_continue:wh("continue"),_debugger:wh("debugger"),_default:wh("default",vh),_do:wh("do",{isLoop:!0,beforeExpr:!0}),_else:wh("else",vh),_finally:wh("finally"),_for:wh("for",{isLoop:!0}),_function:wh("function",_h),_if:wh("if"),_return:wh("return",vh),_switch:wh("switch"),_throw:wh("throw",vh),_try:wh("try"),_var:wh("var"),_const:wh("const"),_while:wh("while",{isLoop:!0}),_with:wh("with"),_new:wh("new",{beforeExpr:!0,startsExpr:!0}),_this:wh("this",_h),_super:wh("super",_h),_class:wh("class",_h),_extends:wh("extends",vh),_export:wh("export"),_import:wh("import",_h),_null:wh("null",_h),_true:wh("true",_h),_false:wh("false",_h),_in:wh("in",{beforeExpr:!0,binop:7}),_instanceof:wh("instanceof",{beforeExpr:!0,binop:7}),_typeof:wh("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:wh("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:wh("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Ih=/\r\n?|\n|\u2028|\u2029/,Ah=new RegExp(Ih.source,"g");function Th(t){return 10===t||13===t||8232===t||8233===t}function kh(t,e,n){void 0===n&&(n=t.length);for(var i=e;i<n;i++){var r=t.charCodeAt(i);if(Th(r))return i<n-1&&13===r&&10===t.charCodeAt(i+1)?i+2:i+1}return-1}var Ch=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Mh=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,Eh=Object.prototype,Nh=Eh.hasOwnProperty,Dh=Eh.toString,Oh=Object.hasOwn||function(t,e){return Nh.call(t,e)},Bh=Array.isArray||function(t){return"[object Array]"===Dh.call(t)},Lh=Object.create(null);function Fh(t){return Lh[t]||(Lh[t]=new RegExp("^(?:"+t.replace(/ /g,"|")+")$"))}function Vh(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}var Uh=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Ph=function(t,e){this.line=t,this.column=e};Ph.prototype.offset=function(t){return new Ph(this.line,this.column+t)};var Rh=function(t,e,n){this.start=e,this.end=n,null!==t.sourceFile&&(this.source=t.sourceFile)};function jh(t,e){for(var n=1,i=0;;){var r=kh(t,i,e);if(r<0)return new Ph(n,e-i);++n,i=r}}var $h={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},zh=!1;function Hh(t){var e={};for(var n in $h)e[n]=t&&Oh(t,n)?t[n]:$h[n];if("latest"===e.ecmaVersion?e.ecmaVersion=1e8:null==e.ecmaVersion?(!zh&&"object"==typeof console&&console.warn&&(zh=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),e.ecmaVersion=11):e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),null==e.allowReserved&&(e.allowReserved=e.ecmaVersion<5),t&&null!=t.allowHashBang||(e.allowHashBang=e.ecmaVersion>=14),Bh(e.onToken)){var i=e.onToken;e.onToken=function(t){return i.push(t)}}return Bh(e.onComment)&&(e.onComment=function(t,e){return function(n,i,r,s,a,o){var c={type:n?"Block":"Line",value:i,start:r,end:s};t.locations&&(c.loc=new Rh(this,a,o)),t.ranges&&(c.range=[r,s]),e.push(c)}}(e,e.onComment)),e}var qh=256;function Yh(t,e){return 2|(t?4:0)|(e?8:0)}var Gh=function(t,e,n){this.options=t=Hh(t),this.sourceFile=t.sourceFile,this.keywords=Fh(lh[t.ecmaVersion>=6?6:"module"===t.sourceType?"5module":5]);var i="";!0!==t.allowReserved&&(i=ch[t.ecmaVersion>=6?6:5===t.ecmaVersion?5:3],"module"===t.sourceType&&(i+=" await")),this.reservedWords=Fh(i);var r=(i?i+" ":"")+ch.strict;this.reservedWordsStrict=Fh(r),this.reservedWordsStrictBind=Fh(r+" "+ch.strictBind),this.input=String(e),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Ih).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=Sh.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null,this.privateNameStack=[]},Wh={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Gh.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)},Wh.inFunction.get=function(){return(2&this.currentVarScope().flags)>0},Wh.inGenerator.get=function(){return(8&this.currentVarScope().flags)>0&&!this.currentVarScope().inClassFieldInit},Wh.inAsync.get=function(){return(4&this.currentVarScope().flags)>0&&!this.currentVarScope().inClassFieldInit},Wh.canAwait.get=function(){for(var t=this.scopeStack.length-1;t>=0;t--){var e=this.scopeStack[t];if(e.inClassFieldInit||e.flags&qh)return!1;if(2&e.flags)return(4&e.flags)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},Wh.allowSuper.get=function(){var t=this.currentThisScope(),e=t.flags,n=t.inClassFieldInit;return(64&e)>0||n||this.options.allowSuperOutsideMethod},Wh.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},Wh.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},Wh.allowNewDotTarget.get=function(){var t=this.currentThisScope(),e=t.flags,n=t.inClassFieldInit;return(258&e)>0||n},Wh.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&qh)>0},Gh.extend=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var n=this,i=0;i<t.length;i++)n=t[i](n);return n},Gh.parse=function(t,e){return new this(e,t).parse()},Gh.parseExpressionAt=function(t,e,n){var i=new this(n,t,e);return i.nextToken(),i.parseExpression()},Gh.tokenizer=function(t,e){return new this(e,t)},Object.defineProperties(Gh.prototype,Wh);var Kh=Gh.prototype,Qh=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Kh.strictDirective=function(t){if(this.options.ecmaVersion<5)return!1;for(;;){Mh.lastIndex=t,t+=Mh.exec(this.input)[0].length;var e=Qh.exec(this.input.slice(t));if(!e)return!1;if("use strict"===(e[1]||e[2])){Mh.lastIndex=t+e[0].length;var n=Mh.exec(this.input),i=n.index+n[0].length,r=this.input.charAt(i);return";"===r||"}"===r||Ih.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(r)||"!"===r&&"="===this.input.charAt(i+1))}t+=e[0].length,Mh.lastIndex=t,t+=Mh.exec(this.input)[0].length,";"===this.input[t]&&t++}},Kh.eat=function(t){return this.type===t&&(this.next(),!0)},Kh.isContextual=function(t){return this.type===Sh.name&&this.value===t&&!this.containsEsc},Kh.eatContextual=function(t){return!!this.isContextual(t)&&(this.next(),!0)},Kh.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},Kh.canInsertSemicolon=function(){return this.type===Sh.eof||this.type===Sh.braceR||Ih.test(this.input.slice(this.lastTokEnd,this.start))},Kh.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},Kh.semicolon=function(){this.eat(Sh.semi)||this.insertSemicolon()||this.unexpected()},Kh.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},Kh.expect=function(t){this.eat(t)||this.unexpected()},Kh.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")};var Jh=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};Kh.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var n=e?t.parenthesizedAssign:t.parenthesizedBind;n>-1&&this.raiseRecoverable(n,e?"Assigning to rvalue":"Parenthesized pattern")}},Kh.checkExpressionErrors=function(t,e){if(!t)return!1;var n=t.shorthandAssign,i=t.doubleProto;if(!e)return n>=0||i>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),i>=0&&this.raiseRecoverable(i,"Redefinition of __proto__ property")},Kh.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},Kh.isSimpleAssignTarget=function(t){return"ParenthesizedExpression"===t.type?this.isSimpleAssignTarget(t.expression):"Identifier"===t.type||"MemberExpression"===t.type};var Zh=Gh.prototype;Zh.parseTopLevel=function(t){var e=Object.create(null);for(t.body||(t.body=[]);this.type!==Sh.eof;){var n=this.parseStatement(null,!0,e);t.body.push(n)}if(this.inModule)for(var i=0,r=Object.keys(this.undefinedExports);i<r.length;i+=1){var s=r[i];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),t.sourceType=this.options.sourceType,this.finishNode(t,"Program")};var Xh={kind:"loop"},tp={kind:"switch"};Zh.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Mh.lastIndex=this.pos;var e=Mh.exec(this.input),n=this.pos+e[0].length,i=this.input.charCodeAt(n);if(91===i||92===i)return!0;if(t)return!1;if(123===i||i>55295&&i<56320)return!0;if(mh(i,!0)){for(var r=n+1;yh(i=this.input.charCodeAt(r),!0);)++r;if(92===i||i>55295&&i<56320)return!0;var s=this.input.slice(n,r);if(!hh.test(s))return!0}return!1},Zh.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Mh.lastIndex=this.pos;var t,e=Mh.exec(this.input),n=this.pos+e[0].length;return!(Ih.test(this.input.slice(this.pos,n))||"function"!==this.input.slice(n,n+8)||n+8!==this.input.length&&(yh(t=this.input.charCodeAt(n+8))||t>55295&&t<56320))},Zh.parseStatement=function(t,e,n){var i,r=this.type,s=this.startNode();switch(this.isLet(t)&&(r=Sh._var,i="let"),r){case Sh._break:case Sh._continue:return this.parseBreakContinueStatement(s,r.keyword);case Sh._debugger:return this.parseDebuggerStatement(s);case Sh._do:return this.parseDoStatement(s);case Sh._for:return this.parseForStatement(s);case Sh._function:return t&&(this.strict||"if"!==t&&"label"!==t)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(s,!1,!t);case Sh._class:return t&&this.unexpected(),this.parseClass(s,!0);case Sh._if:return this.parseIfStatement(s);case Sh._return:return this.parseReturnStatement(s);case Sh._switch:return this.parseSwitchStatement(s);case Sh._throw:return this.parseThrowStatement(s);case Sh._try:return this.parseTryStatement(s);case Sh._const:case Sh._var:return i=i||this.value,t&&"var"!==i&&this.unexpected(),this.parseVarStatement(s,i);case Sh._while:return this.parseWhileStatement(s);case Sh._with:return this.parseWithStatement(s);case Sh.braceL:return this.parseBlock(!0,s);case Sh.semi:return this.parseEmptyStatement(s);case Sh._export:case Sh._import:if(this.options.ecmaVersion>10&&r===Sh._import){Mh.lastIndex=this.pos;var a=Mh.exec(this.input),o=this.pos+a[0].length,c=this.input.charCodeAt(o);if(40===c||46===c)return this.parseExpressionStatement(s,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===Sh._import?this.parseImport(s):this.parseExport(s,n);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(s,!0,!t);var u=this.value,l=this.parseExpression();return r===Sh.name&&"Identifier"===l.type&&this.eat(Sh.colon)?this.parseLabeledStatement(s,u,l,t):this.parseExpressionStatement(s,l)}},Zh.parseBreakContinueStatement=function(t,e){var n="break"===e;this.next(),this.eat(Sh.semi)||this.insertSemicolon()?t.label=null:this.type!==Sh.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var i=0;i<this.labels.length;++i){var r=this.labels[i];if(null==t.label||r.name===t.label.name){if(null!=r.kind&&(n||"loop"===r.kind))break;if(t.label&&n)break}}return i===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,n?"BreakStatement":"ContinueStatement")},Zh.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},Zh.parseDoStatement=function(t){return this.next(),this.labels.push(Xh),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(Sh._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(Sh.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},Zh.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(Xh),this.enterScope(0),this.expect(Sh.parenL),this.type===Sh.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var n=this.isLet();if(this.type===Sh._var||this.type===Sh._const||n){var i=this.startNode(),r=n?"let":this.value;return this.next(),this.parseVar(i,!0,r),this.finishNode(i,"VariableDeclaration"),(this.type===Sh._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===i.declarations.length?(this.options.ecmaVersion>=9&&(this.type===Sh._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,i)):(e>-1&&this.unexpected(e),this.parseFor(t,i))}var s=this.isContextual("let"),a=!1,o=new Jh,c=this.parseExpression(!(e>-1)||"await",o);return this.type===Sh._in||(a=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===Sh._in?e>-1&&this.unexpected(e):t.await=e>-1),s&&a&&this.raise(c.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(c,!1,o),this.checkLValPattern(c),this.parseForIn(t,c)):(this.checkExpressionErrors(o,!0),e>-1&&this.unexpected(e),this.parseFor(t,c))},Zh.parseFunctionStatement=function(t,e,n){return this.next(),this.parseFunction(t,np|(n?0:ip),!1,e)},Zh.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(Sh._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")},Zh.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(Sh.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},Zh.parseSwitchStatement=function(t){var e;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(Sh.braceL),this.labels.push(tp),this.enterScope(0);for(var n=!1;this.type!==Sh.braceR;)if(this.type===Sh._case||this.type===Sh._default){var i=this.type===Sh._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),i?e.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,e.test=null),this.expect(Sh.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},Zh.parseThrowStatement=function(t){return this.next(),Ih.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var ep=[];Zh.parseCatchClauseParam=function(){var t=this.parseBindingAtom(),e="Identifier"===t.type;return this.enterScope(e?32:0),this.checkLValPattern(t,e?4:2),this.expect(Sh.parenR),t},Zh.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===Sh._catch){var e=this.startNode();this.next(),this.eat(Sh.parenL)?e.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0)),e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(Sh._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},Zh.parseVarStatement=function(t,e,n){return this.next(),this.parseVar(t,!1,e,n),this.semicolon(),this.finishNode(t,"VariableDeclaration")},Zh.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(Xh),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")},Zh.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")},Zh.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},Zh.parseLabeledStatement=function(t,e,n,i){for(var r=0,s=this.labels;r<s.length;r+=1){s[r].name===e&&this.raise(n.start,"Label '"+e+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===Sh._switch?"switch":null,o=this.labels.length-1;o>=0;o--){var c=this.labels[o];if(c.statementStart!==t.start)break;c.statementStart=this.start,c.kind=a}return this.labels.push({name:e,kind:a,statementStart:this.start}),t.body=this.parseStatement(i?-1===i.indexOf("label")?i+"label":i:"label"),this.labels.pop(),t.label=n,this.finishNode(t,"LabeledStatement")},Zh.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")},Zh.parseBlock=function(t,e,n){for(void 0===t&&(t=!0),void 0===e&&(e=this.startNode()),e.body=[],this.expect(Sh.braceL),t&&this.enterScope(0);this.type!==Sh.braceR;){var i=this.parseStatement(null);e.body.push(i)}return n&&(this.strict=!1),this.next(),t&&this.exitScope(),this.finishNode(e,"BlockStatement")},Zh.parseFor=function(t,e){return t.init=e,this.expect(Sh.semi),t.test=this.type===Sh.semi?null:this.parseExpression(),this.expect(Sh.semi),t.update=this.type===Sh.parenR?null:this.parseExpression(),this.expect(Sh.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")},Zh.parseForIn=function(t,e){var n=this.type===Sh._in;return this.next(),"VariableDeclaration"===e.type&&null!=e.declarations[0].init&&(!n||this.options.ecmaVersion<8||this.strict||"var"!==e.kind||"Identifier"!==e.declarations[0].id.type)&&this.raise(e.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),t.left=e,t.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(Sh.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,n?"ForInStatement":"ForOfStatement")},Zh.parseVar=function(t,e,n,i){for(t.declarations=[],t.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(Sh.eq)?r.init=this.parseMaybeAssign(e):i||"const"!==n||this.type===Sh._in||this.options.ecmaVersion>=6&&this.isContextual("of")?i||"Identifier"===r.id.type||e&&(this.type===Sh._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),t.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(Sh.comma))break}return t},Zh.parseVarId=function(t,e){t.id=this.parseBindingAtom(),this.checkLValPattern(t.id,"var"===e?1:2,!1)};var np=1,ip=2;function rp(t,e){var n=e.key.name,i=t[n],r="true";return"MethodDefinition"!==e.type||"get"!==e.kind&&"set"!==e.kind||(r=(e.static?"s":"i")+e.kind),"iget"===i&&"iset"===r||"iset"===i&&"iget"===r||"sget"===i&&"sset"===r||"sset"===i&&"sget"===r?(t[n]="true",!1):!!i||(t[n]=r,!1)}function sp(t,e){var n=t.computed,i=t.key;return!n&&("Identifier"===i.type&&i.name===e||"Literal"===i.type&&i.value===e)}Zh.parseFunction=function(t,e,n,i,r){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!i)&&(this.type===Sh.star&&e&ip&&this.unexpected(),t.generator=this.eat(Sh.star)),this.options.ecmaVersion>=8&&(t.async=!!i),e&np&&(t.id=4&e&&this.type!==Sh.name?null:this.parseIdent(),!t.id||e&ip||this.checkLValSimple(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?1:2:3));var s=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Yh(t.async,t.generator)),e&np||(t.id=this.type===Sh.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,n,!1,r),this.yieldPos=s,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(t,e&np?"FunctionDeclaration":"FunctionExpression")},Zh.parseFunctionParams=function(t){this.expect(Sh.parenL),t.params=this.parseBindingList(Sh.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},Zh.parseClass=function(t,e){this.next();var n=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var i=this.enterClassBody(),r=this.startNode(),s=!1;for(r.body=[],this.expect(Sh.braceL);this.type!==Sh.braceR;){var a=this.parseClassElement(null!==t.superClass);a&&(r.body.push(a),"MethodDefinition"===a.type&&"constructor"===a.kind?(s&&this.raiseRecoverable(a.start,"Duplicate constructor in the same class"),s=!0):a.key&&"PrivateIdentifier"===a.key.type&&rp(i,a)&&this.raiseRecoverable(a.key.start,"Identifier '#"+a.key.name+"' has already been declared"))}return this.strict=n,this.next(),t.body=this.finishNode(r,"ClassBody"),this.exitClassBody(),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},Zh.parseClassElement=function(t){if(this.eat(Sh.semi))return null;var e=this.options.ecmaVersion,n=this.startNode(),i="",r=!1,s=!1,a="method",o=!1;if(this.eatContextual("static")){if(e>=13&&this.eat(Sh.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===Sh.star?o=!0:i="static"}if(n.static=o,!i&&e>=8&&this.eatContextual("async")&&(!this.isClassElementNameStart()&&this.type!==Sh.star||this.canInsertSemicolon()?i="async":s=!0),!i&&(e>=9||!s)&&this.eat(Sh.star)&&(r=!0),!i&&!s&&!r){var c=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?a=c:i=c)}if(i?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=i,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),e<13||this.type===Sh.parenL||"method"!==a||r||s){var u=!n.static&&sp(n,"constructor"),l=u&&t;u&&"method"!==a&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=u?"constructor":a,this.parseClassMethod(n,r,s,l)}else this.parseClassField(n);return n},Zh.isClassElementNameStart=function(){return this.type===Sh.name||this.type===Sh.privateId||this.type===Sh.num||this.type===Sh.string||this.type===Sh.bracketL||this.type.keyword},Zh.parseClassElementName=function(t){this.type===Sh.privateId?("constructor"===this.value&&this.raise(this.start,"Classes can't have an element named '#constructor'"),t.computed=!1,t.key=this.parsePrivateIdent()):this.parsePropertyName(t)},Zh.parseClassMethod=function(t,e,n,i){var r=t.key;"constructor"===t.kind?(e&&this.raise(r.start,"Constructor can't be a generator"),n&&this.raise(r.start,"Constructor can't be an async method")):t.static&&sp(t,"prototype")&&this.raise(r.start,"Classes may not have a static property named prototype");var s=t.value=this.parseMethod(e,n,i);return"get"===t.kind&&0!==s.params.length&&this.raiseRecoverable(s.start,"getter should have no params"),"set"===t.kind&&1!==s.params.length&&this.raiseRecoverable(s.start,"setter should have exactly one param"),"set"===t.kind&&"RestElement"===s.params[0].type&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(t,"MethodDefinition")},Zh.parseClassField=function(t){if(sp(t,"constructor")?this.raise(t.key.start,"Classes can't have a field named 'constructor'"):t.static&&sp(t,"prototype")&&this.raise(t.key.start,"Classes can't have a static field named 'prototype'"),this.eat(Sh.eq)){var e=this.currentThisScope(),n=e.inClassFieldInit;e.inClassFieldInit=!0,t.value=this.parseMaybeAssign(),e.inClassFieldInit=n}else t.value=null;return this.semicolon(),this.finishNode(t,"PropertyDefinition")},Zh.parseClassStaticBlock=function(t){t.body=[];var e=this.labels;for(this.labels=[],this.enterScope(320);this.type!==Sh.braceR;){var n=this.parseStatement(null);t.body.push(n)}return this.next(),this.exitScope(),this.labels=e,this.finishNode(t,"StaticBlock")},Zh.parseClassId=function(t,e){this.type===Sh.name?(t.id=this.parseIdent(),e&&this.checkLValSimple(t.id,2,!1)):(!0===e&&this.unexpected(),t.id=null)},Zh.parseClassSuper=function(t){t.superClass=this.eat(Sh._extends)?this.parseExprSubscripts(null,!1):null},Zh.enterClassBody=function(){var t={declared:Object.create(null),used:[]};return this.privateNameStack.push(t),t.declared},Zh.exitClassBody=function(){var t=this.privateNameStack.pop(),e=t.declared,n=t.used;if(this.options.checkPrivateFields)for(var i=this.privateNameStack.length,r=0===i?null:this.privateNameStack[i-1],s=0;s<n.length;++s){var a=n[s];Oh(e,a.name)||(r?r.used.push(a):this.raiseRecoverable(a.start,"Private field '#"+a.name+"' must be declared in an enclosing class"))}},Zh.parseExportAllDeclaration=function(t,e){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(t.exported=this.parseModuleExportName(),this.checkExport(e,t.exported,this.lastTokStart)):t.exported=null),this.expectContextual("from"),this.type!==Sh.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration")},Zh.parseExport=function(t,e){if(this.next(),this.eat(Sh.star))return this.parseExportAllDeclaration(t,e);if(this.eat(Sh._default))return this.checkExport(e,"default",this.lastTokStart),t.declaration=this.parseExportDefaultDeclaration(),this.finishNode(t,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())t.declaration=this.parseExportDeclaration(t),"VariableDeclaration"===t.declaration.type?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==Sh.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var n=0,i=t.specifiers;n<i.length;n+=1){var r=i[n];this.checkUnreserved(r.local),this.checkLocalExport(r.local),"Literal"===r.local.type&&this.raise(r.local.start,"A string literal cannot be used as an exported binding without `from`.")}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},Zh.parseExportDeclaration=function(t){return this.parseStatement(null)},Zh.parseExportDefaultDeclaration=function(){var t;if(this.type===Sh._function||(t=this.isAsyncFunction())){var e=this.startNode();return this.next(),t&&this.next(),this.parseFunction(e,4|np,!1,t)}if(this.type===Sh._class){var n=this.startNode();return this.parseClass(n,"nullableID")}var i=this.parseMaybeAssign();return this.semicolon(),i},Zh.checkExport=function(t,e,n){t&&("string"!=typeof e&&(e="Identifier"===e.type?e.name:e.value),Oh(t,e)&&this.raiseRecoverable(n,"Duplicate export '"+e+"'"),t[e]=!0)},Zh.checkPatternExport=function(t,e){var n=e.type;if("Identifier"===n)this.checkExport(t,e,e.start);else if("ObjectPattern"===n)for(var i=0,r=e.properties;i<r.length;i+=1){var s=r[i];this.checkPatternExport(t,s)}else if("ArrayPattern"===n)for(var a=0,o=e.elements;a<o.length;a+=1){var c=o[a];c&&this.checkPatternExport(t,c)}else"Property"===n?this.checkPatternExport(t,e.value):"AssignmentPattern"===n?this.checkPatternExport(t,e.left):"RestElement"===n&&this.checkPatternExport(t,e.argument)},Zh.checkVariableExport=function(t,e){if(t)for(var n=0,i=e;n<i.length;n+=1){var r=i[n];this.checkPatternExport(t,r.id)}},Zh.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},Zh.parseExportSpecifier=function(t){var e=this.startNode();return e.local=this.parseModuleExportName(),e.exported=this.eatContextual("as")?this.parseModuleExportName():e.local,this.checkExport(t,e.exported,e.exported.start),this.finishNode(e,"ExportSpecifier")},Zh.parseExportSpecifiers=function(t){var e=[],n=!0;for(this.expect(Sh.braceL);!this.eat(Sh.braceR);){if(n)n=!1;else if(this.expect(Sh.comma),this.afterTrailingComma(Sh.braceR))break;e.push(this.parseExportSpecifier(t))}return e},Zh.parseImport=function(t){return this.next(),this.type===Sh.string?(t.specifiers=ep,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===Sh.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},Zh.parseImportSpecifier=function(){var t=this.startNode();return t.imported=this.parseModuleExportName(),this.eatContextual("as")?t.local=this.parseIdent():(this.checkUnreserved(t.imported),t.local=t.imported),this.checkLValSimple(t.local,2),this.finishNode(t,"ImportSpecifier")},Zh.parseImportDefaultSpecifier=function(){var t=this.startNode();return t.local=this.parseIdent(),this.checkLValSimple(t.local,2),this.finishNode(t,"ImportDefaultSpecifier")},Zh.parseImportNamespaceSpecifier=function(){var t=this.startNode();return this.next(),this.expectContextual("as"),t.local=this.parseIdent(),this.checkLValSimple(t.local,2),this.finishNode(t,"ImportNamespaceSpecifier")},Zh.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===Sh.name&&(t.push(this.parseImportDefaultSpecifier()),!this.eat(Sh.comma)))return t;if(this.type===Sh.star)return t.push(this.parseImportNamespaceSpecifier()),t;for(this.expect(Sh.braceL);!this.eat(Sh.braceR);){if(e)e=!1;else if(this.expect(Sh.comma),this.afterTrailingComma(Sh.braceR))break;t.push(this.parseImportSpecifier())}return t},Zh.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===Sh.string){var t=this.parseLiteral(this.value);return Uh.test(t.value)&&this.raise(t.start,"An export name cannot include a lone surrogate."),t}return this.parseIdent(!0)},Zh.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)},Zh.isDirectiveCandidate=function(t){return this.options.ecmaVersion>=5&&"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"string"==typeof t.expression.value&&('"'===this.input[t.start]||"'"===this.input[t.start])};var ap=Gh.prototype;ap.toAssignable=function(t,e,n){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&"await"===t.name&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var i=0,r=t.properties;i<r.length;i+=1){var s=r[i];this.toAssignable(s,e),"RestElement"!==s.type||"ArrayPattern"!==s.argument.type&&"ObjectPattern"!==s.argument.type||this.raise(s.argument.start,"Unexpected token")}break;case"Property":"init"!==t.kind&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),"AssignmentPattern"===t.argument.type&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==t.operator&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);break;case"ParenthesizedExpression":this.toAssignable(t.expression,e,n);break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return t},ap.toAssignableList=function(t,e){for(var n=t.length,i=0;i<n;i++){var r=t[i];r&&this.toAssignable(r,e)}if(n){var s=t[n-1];6===this.options.ecmaVersion&&e&&s&&"RestElement"===s.type&&"Identifier"!==s.argument.type&&this.unexpected(s.argument.start)}return t},ap.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")},ap.parseRestBinding=function(){var t=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==Sh.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")},ap.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case Sh.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(Sh.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case Sh.braceL:return this.parseObj(!0)}return this.parseIdent()},ap.parseBindingList=function(t,e,n,i){for(var r=[],s=!0;!this.eat(t);)if(s?s=!1:this.expect(Sh.comma),e&&this.type===Sh.comma)r.push(null);else{if(n&&this.afterTrailingComma(t))break;if(this.type===Sh.ellipsis){var a=this.parseRestBinding();this.parseBindingListItem(a),r.push(a),this.type===Sh.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}r.push(this.parseAssignableListItem(i))}return r},ap.parseAssignableListItem=function(t){var e=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(e),e},ap.parseBindingListItem=function(t){return t},ap.parseMaybeDefault=function(t,e,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(Sh.eq))return n;var i=this.startNodeAt(t,e);return i.left=n,i.right=this.parseMaybeAssign(),this.finishNode(i,"AssignmentPattern")},ap.checkLValSimple=function(t,e,n){void 0===e&&(e=0);var i=0!==e;switch(t.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(i?"Binding ":"Assigning to ")+t.name+" in strict mode"),i&&(2===e&&"let"===t.name&&this.raiseRecoverable(t.start,"let is disallowed as a lexically bound name"),n&&(Oh(n,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),n[t.name]=!0),5!==e&&this.declareName(t.name,e,t.start));break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":i&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ParenthesizedExpression":return i&&this.raiseRecoverable(t.start,"Binding parenthesized expression"),this.checkLValSimple(t.expression,e,n);default:this.raise(t.start,(i?"Binding":"Assigning to")+" rvalue")}},ap.checkLValPattern=function(t,e,n){switch(void 0===e&&(e=0),t.type){case"ObjectPattern":for(var i=0,r=t.properties;i<r.length;i+=1){var s=r[i];this.checkLValInnerPattern(s,e,n)}break;case"ArrayPattern":for(var a=0,o=t.elements;a<o.length;a+=1){var c=o[a];c&&this.checkLValInnerPattern(c,e,n)}break;default:this.checkLValSimple(t,e,n)}},ap.checkLValInnerPattern=function(t,e,n){switch(void 0===e&&(e=0),t.type){case"Property":this.checkLValInnerPattern(t.value,e,n);break;case"AssignmentPattern":this.checkLValPattern(t.left,e,n);break;case"RestElement":this.checkLValPattern(t.argument,e,n);break;default:this.checkLValPattern(t,e,n)}};var op=function(t,e,n,i,r){this.token=t,this.isExpr=!!e,this.preserveSpace=!!n,this.override=i,this.generator=!!r},cp={b_stat:new op("{",!1),b_expr:new op("{",!0),b_tmpl:new op("${",!1),p_stat:new op("(",!1),p_expr:new op("(",!0),q_tmpl:new op("`",!0,!0,(function(t){return t.tryReadTemplateToken()})),f_stat:new op("function",!1),f_expr:new op("function",!0),f_expr_gen:new op("function",!0,!1,null,!0),f_gen:new op("function",!1,!1,null,!0)},up=Gh.prototype;up.initialContext=function(){return[cp.b_stat]},up.curContext=function(){return this.context[this.context.length-1]},up.braceIsBlock=function(t){var e=this.curContext();return e===cp.f_expr||e===cp.f_stat||(t!==Sh.colon||e!==cp.b_stat&&e!==cp.b_expr?t===Sh._return||t===Sh.name&&this.exprAllowed?Ih.test(this.input.slice(this.lastTokEnd,this.start)):t===Sh._else||t===Sh.semi||t===Sh.eof||t===Sh.parenR||t===Sh.arrow||(t===Sh.braceL?e===cp.b_stat:t!==Sh._var&&t!==Sh._const&&t!==Sh.name&&!this.exprAllowed):!e.isExpr)},up.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if("function"===e.token)return e.generator}return!1},up.updateContext=function(t){var e,n=this.type;n.keyword&&t===Sh.dot?this.exprAllowed=!1:(e=n.updateContext)?e.call(this,t):this.exprAllowed=n.beforeExpr},up.overrideContext=function(t){this.curContext()!==t&&(this.context[this.context.length-1]=t)},Sh.parenR.updateContext=Sh.braceR.updateContext=function(){if(1!==this.context.length){var t=this.context.pop();t===cp.b_stat&&"function"===this.curContext().token&&(t=this.context.pop()),this.exprAllowed=!t.isExpr}else this.exprAllowed=!0},Sh.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?cp.b_stat:cp.b_expr),this.exprAllowed=!0},Sh.dollarBraceL.updateContext=function(){this.context.push(cp.b_tmpl),this.exprAllowed=!0},Sh.parenL.updateContext=function(t){var e=t===Sh._if||t===Sh._for||t===Sh._with||t===Sh._while;this.context.push(e?cp.p_stat:cp.p_expr),this.exprAllowed=!0},Sh.incDec.updateContext=function(){},Sh._function.updateContext=Sh._class.updateContext=function(t){!t.beforeExpr||t===Sh._else||t===Sh.semi&&this.curContext()!==cp.p_stat||t===Sh._return&&Ih.test(this.input.slice(this.lastTokEnd,this.start))||(t===Sh.colon||t===Sh.braceL)&&this.curContext()===cp.b_stat?this.context.push(cp.f_stat):this.context.push(cp.f_expr),this.exprAllowed=!1},Sh.colon.updateContext=function(){"function"===this.curContext().token&&this.context.pop(),this.exprAllowed=!0},Sh.backQuote.updateContext=function(){this.curContext()===cp.q_tmpl?this.context.pop():this.context.push(cp.q_tmpl),this.exprAllowed=!1},Sh.star.updateContext=function(t){if(t===Sh._function){var e=this.context.length-1;this.context[e]===cp.f_expr?this.context[e]=cp.f_expr_gen:this.context[e]=cp.f_gen}this.exprAllowed=!0},Sh.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==Sh.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var lp=Gh.prototype;function hp(t){return"MemberExpression"===t.type&&"PrivateIdentifier"===t.property.type||"ChainExpression"===t.type&&hp(t.expression)}lp.checkPropClash=function(t,e,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===t.type||this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var i,r=t.key;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=t.kind;if(this.options.ecmaVersion>=6)"__proto__"===i&&"init"===s&&(e.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),e.proto=!0);else{var a=e[i="$"+i];if(a)("init"===s?this.strict&&a.init||a.get||a.set:a.init||a[s])&&this.raiseRecoverable(r.start,"Redefinition of property");else a=e[i]={init:!1,get:!1,set:!1};a[s]=!0}}},lp.parseExpression=function(t,e){var n=this.start,i=this.startLoc,r=this.parseMaybeAssign(t,e);if(this.type===Sh.comma){var s=this.startNodeAt(n,i);for(s.expressions=[r];this.eat(Sh.comma);)s.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(s,"SequenceExpression")}return r},lp.parseMaybeAssign=function(t,e,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var i=!1,r=-1,s=-1,a=-1;e?(r=e.parenthesizedAssign,s=e.trailingComma,a=e.doubleProto,e.parenthesizedAssign=e.trailingComma=-1):(e=new Jh,i=!0);var o=this.start,c=this.startLoc;this.type!==Sh.parenL&&this.type!==Sh.name||(this.potentialArrowAt=this.start,this.potentialArrowInForAwait="await"===t);var u=this.parseMaybeConditional(t,e);if(n&&(u=n.call(this,u,o,c)),this.type.isAssign){var l=this.startNodeAt(o,c);return l.operator=this.value,this.type===Sh.eq&&(u=this.toAssignable(u,!1,e)),i||(e.parenthesizedAssign=e.trailingComma=e.doubleProto=-1),e.shorthandAssign>=u.start&&(e.shorthandAssign=-1),this.type===Sh.eq?this.checkLValPattern(u):this.checkLValSimple(u),l.left=u,this.next(),l.right=this.parseMaybeAssign(t),a>-1&&(e.doubleProto=a),this.finishNode(l,"AssignmentExpression")}return i&&this.checkExpressionErrors(e,!0),r>-1&&(e.parenthesizedAssign=r),s>-1&&(e.trailingComma=s),u},lp.parseMaybeConditional=function(t,e){var n=this.start,i=this.startLoc,r=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return r;if(this.eat(Sh.question)){var s=this.startNodeAt(n,i);return s.test=r,s.consequent=this.parseMaybeAssign(),this.expect(Sh.colon),s.alternate=this.parseMaybeAssign(t),this.finishNode(s,"ConditionalExpression")}return r},lp.parseExprOps=function(t,e){var n=this.start,i=this.startLoc,r=this.parseMaybeUnary(e,!1,!1,t);return this.checkExpressionErrors(e)||r.start===n&&"ArrowFunctionExpression"===r.type?r:this.parseExprOp(r,n,i,-1,t)},lp.parseExprOp=function(t,e,n,i,r){var s=this.type.binop;if(null!=s&&(!r||this.type!==Sh._in)&&s>i){var a=this.type===Sh.logicalOR||this.type===Sh.logicalAND,o=this.type===Sh.coalesce;o&&(s=Sh.logicalAND.binop);var c=this.value;this.next();var u=this.start,l=this.startLoc,h=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,r),u,l,s,r),p=this.buildBinary(e,n,t,h,c,a||o);return(a&&this.type===Sh.coalesce||o&&(this.type===Sh.logicalOR||this.type===Sh.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(p,e,n,i,r)}return t},lp.buildBinary=function(t,e,n,i,r,s){"PrivateIdentifier"===i.type&&this.raise(i.start,"Private identifier can only be left side of binary expression");var a=this.startNodeAt(t,e);return a.left=n,a.operator=r,a.right=i,this.finishNode(a,s?"LogicalExpression":"BinaryExpression")},lp.parseMaybeUnary=function(t,e,n,i){var r,s=this.start,a=this.startLoc;if(this.isContextual("await")&&this.canAwait)r=this.parseAwait(i),e=!0;else if(this.type.prefix){var o=this.startNode(),c=this.type===Sh.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0,c,i),this.checkExpressionErrors(t,!0),c?this.checkLValSimple(o.argument):this.strict&&"delete"===o.operator&&"Identifier"===o.argument.type?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):"delete"===o.operator&&hp(o.argument)?this.raiseRecoverable(o.start,"Private fields can not be deleted"):e=!0,r=this.finishNode(o,c?"UpdateExpression":"UnaryExpression")}else if(e||this.type!==Sh.privateId){if(r=this.parseExprSubscripts(t,i),this.checkExpressionErrors(t))return r;for(;this.type.postfix&&!this.canInsertSemicolon();){var u=this.startNodeAt(s,a);u.operator=this.value,u.prefix=!1,u.argument=r,this.checkLValSimple(r),this.next(),r=this.finishNode(u,"UpdateExpression")}}else(i||0===this.privateNameStack.length)&&this.options.checkPrivateFields&&this.unexpected(),r=this.parsePrivateIdent(),this.type!==Sh._in&&this.unexpected();return n||!this.eat(Sh.starstar)?r:e?void this.unexpected(this.lastTokStart):this.buildBinary(s,a,r,this.parseMaybeUnary(null,!1,!1,i),"**",!1)},lp.parseExprSubscripts=function(t,e){var n=this.start,i=this.startLoc,r=this.parseExprAtom(t,e);if("ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return r;var s=this.parseSubscripts(r,n,i,!1,e);return t&&"MemberExpression"===s.type&&(t.parenthesizedAssign>=s.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=s.start&&(t.parenthesizedBind=-1),t.trailingComma>=s.start&&(t.trailingComma=-1)),s},lp.parseSubscripts=function(t,e,n,i,r){for(var s=this.options.ecmaVersion>=8&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&t.end-t.start==5&&this.potentialArrowAt===t.start,a=!1;;){var o=this.parseSubscript(t,e,n,i,s,a,r);if(o.optional&&(a=!0),o===t||"ArrowFunctionExpression"===o.type){if(a){var c=this.startNodeAt(e,n);c.expression=o,o=this.finishNode(c,"ChainExpression")}return o}t=o}},lp.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(Sh.arrow)},lp.parseSubscriptAsyncArrow=function(t,e,n,i){return this.parseArrowExpression(this.startNodeAt(t,e),n,!0,i)},lp.parseSubscript=function(t,e,n,i,r,s,a){var o=this.options.ecmaVersion>=11,c=o&&this.eat(Sh.questionDot);i&&c&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var u=this.eat(Sh.bracketL);if(u||c&&this.type!==Sh.parenL&&this.type!==Sh.backQuote||this.eat(Sh.dot)){var l=this.startNodeAt(e,n);l.object=t,u?(l.property=this.parseExpression(),this.expect(Sh.bracketR)):this.type===Sh.privateId&&"Super"!==t.type?l.property=this.parsePrivateIdent():l.property=this.parseIdent("never"!==this.options.allowReserved),l.computed=!!u,o&&(l.optional=c),t=this.finishNode(l,"MemberExpression")}else if(!i&&this.eat(Sh.parenL)){var h=new Jh,p=this.yieldPos,d=this.awaitPos,f=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(Sh.parenR,this.options.ecmaVersion>=8,!1,h);if(r&&!c&&this.shouldParseAsyncArrow())return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=p,this.awaitPos=d,this.awaitIdentPos=f,this.parseSubscriptAsyncArrow(e,n,m,a);this.checkExpressionErrors(h,!0),this.yieldPos=p||this.yieldPos,this.awaitPos=d||this.awaitPos,this.awaitIdentPos=f||this.awaitIdentPos;var y=this.startNodeAt(e,n);y.callee=t,y.arguments=m,o&&(y.optional=c),t=this.finishNode(y,"CallExpression")}else if(this.type===Sh.backQuote){(c||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var g=this.startNodeAt(e,n);g.tag=t,g.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(g,"TaggedTemplateExpression")}return t},lp.parseExprAtom=function(t,e,n){this.type===Sh.slash&&this.readRegexp();var i,r=this.potentialArrowAt===this.start;switch(this.type){case Sh._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),i=this.startNode(),this.next(),this.type!==Sh.parenL||this.allowDirectSuper||this.raise(i.start,"super() call outside constructor of a subclass"),this.type!==Sh.dot&&this.type!==Sh.bracketL&&this.type!==Sh.parenL&&this.unexpected(),this.finishNode(i,"Super");case Sh._this:return i=this.startNode(),this.next(),this.finishNode(i,"ThisExpression");case Sh.name:var s=this.start,a=this.startLoc,o=this.containsEsc,c=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!o&&"async"===c.name&&!this.canInsertSemicolon()&&this.eat(Sh._function))return this.overrideContext(cp.f_expr),this.parseFunction(this.startNodeAt(s,a),0,!1,!0,e);if(r&&!this.canInsertSemicolon()){if(this.eat(Sh.arrow))return this.parseArrowExpression(this.startNodeAt(s,a),[c],!1,e);if(this.options.ecmaVersion>=8&&"async"===c.name&&this.type===Sh.name&&!o&&(!this.potentialArrowInForAwait||"of"!==this.value||this.containsEsc))return c=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(Sh.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,a),[c],!0,e)}return c;case Sh.regexp:var u=this.value;return(i=this.parseLiteral(u.value)).regex={pattern:u.pattern,flags:u.flags},i;case Sh.num:case Sh.string:return this.parseLiteral(this.value);case Sh._null:case Sh._true:case Sh._false:return(i=this.startNode()).value=this.type===Sh._null?null:this.type===Sh._true,i.raw=this.type.keyword,this.next(),this.finishNode(i,"Literal");case Sh.parenL:var l=this.start,h=this.parseParenAndDistinguishExpression(r,e);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(h)&&(t.parenthesizedAssign=l),t.parenthesizedBind<0&&(t.parenthesizedBind=l)),h;case Sh.bracketL:return i=this.startNode(),this.next(),i.elements=this.parseExprList(Sh.bracketR,!0,!0,t),this.finishNode(i,"ArrayExpression");case Sh.braceL:return this.overrideContext(cp.b_expr),this.parseObj(!1,t);case Sh._function:return i=this.startNode(),this.next(),this.parseFunction(i,0);case Sh._class:return this.parseClass(this.startNode(),!1);case Sh._new:return this.parseNew();case Sh.backQuote:return this.parseTemplate();case Sh._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}},lp.parseExprAtomDefault=function(){this.unexpected()},lp.parseExprImport=function(t){var e=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===Sh.parenL&&!t)return this.parseDynamicImport(e);if(this.type===Sh.dot){var n=this.startNodeAt(e.start,e.loc&&e.loc.start);return n.name="import",e.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(e)}this.unexpected()},lp.parseDynamicImport=function(t){if(this.next(),t.source=this.parseMaybeAssign(),!this.eat(Sh.parenR)){var e=this.start;this.eat(Sh.comma)&&this.eat(Sh.parenR)?this.raiseRecoverable(e,"Trailing comma is not allowed in import()"):this.unexpected(e)}return this.finishNode(t,"ImportExpression")},lp.parseImportMeta=function(t){this.next();var e=this.containsEsc;return t.property=this.parseIdent(!0),"meta"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for import is 'import.meta'"),e&&this.raiseRecoverable(t.start,"'import.meta' must not contain escaped characters"),"module"===this.options.sourceType||this.options.allowImportExportEverywhere||this.raiseRecoverable(t.start,"Cannot use 'import.meta' outside a module"),this.finishNode(t,"MetaProperty")},lp.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),110===e.raw.charCodeAt(e.raw.length-1)&&(e.bigint=e.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(e,"Literal")},lp.parseParenExpression=function(){this.expect(Sh.parenL);var t=this.parseExpression();return this.expect(Sh.parenR),t},lp.shouldParseArrow=function(t){return!this.canInsertSemicolon()},lp.parseParenAndDistinguishExpression=function(t,e){var n,i=this.start,r=this.startLoc,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a,o=this.start,c=this.startLoc,u=[],l=!0,h=!1,p=new Jh,d=this.yieldPos,f=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==Sh.parenR;){if(l?l=!1:this.expect(Sh.comma),s&&this.afterTrailingComma(Sh.parenR,!0)){h=!0;break}if(this.type===Sh.ellipsis){a=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===Sh.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}u.push(this.parseMaybeAssign(!1,p,this.parseParenItem))}var m=this.lastTokEnd,y=this.lastTokEndLoc;if(this.expect(Sh.parenR),t&&this.shouldParseArrow(u)&&this.eat(Sh.arrow))return this.checkPatternErrors(p,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=f,this.parseParenArrowList(i,r,u,e);u.length&&!h||this.unexpected(this.lastTokStart),a&&this.unexpected(a),this.checkExpressionErrors(p,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=f||this.awaitPos,u.length>1?((n=this.startNodeAt(o,c)).expressions=u,this.finishNodeAt(n,"SequenceExpression",m,y)):n=u[0]}else n=this.parseParenExpression();if(this.options.preserveParens){var g=this.startNodeAt(i,r);return g.expression=n,this.finishNode(g,"ParenthesizedExpression")}return n},lp.parseParenItem=function(t){return t},lp.parseParenArrowList=function(t,e,n,i){return this.parseArrowExpression(this.startNodeAt(t,e),n,!1,i)};var pp=[];lp.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var t=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===Sh.dot){var e=this.startNodeAt(t.start,t.loc&&t.loc.start);e.name="new",t.meta=this.finishNode(e,"Identifier"),this.next();var n=this.containsEsc;return t.property=this.parseIdent(!0),"target"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(t.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(t.start,"'new.target' can only be used in functions and class static block"),this.finishNode(t,"MetaProperty")}var i=this.start,r=this.startLoc;return t.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),i,r,!0,!1),this.eat(Sh.parenL)?t.arguments=this.parseExprList(Sh.parenR,this.options.ecmaVersion>=8,!1):t.arguments=pp,this.finishNode(t,"NewExpression")},lp.parseTemplateElement=function(t){var e=t.isTagged,n=this.startNode();return this.type===Sh.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===Sh.backQuote,this.finishNode(n,"TemplateElement")},lp.parseTemplate=function(t){void 0===t&&(t={});var e=t.isTagged;void 0===e&&(e=!1);var n=this.startNode();this.next(),n.expressions=[];var i=this.parseTemplateElement({isTagged:e});for(n.quasis=[i];!i.tail;)this.type===Sh.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(Sh.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(Sh.braceR),n.quasis.push(i=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(n,"TemplateLiteral")},lp.isAsyncProp=function(t){return!t.computed&&"Identifier"===t.key.type&&"async"===t.key.name&&(this.type===Sh.name||this.type===Sh.num||this.type===Sh.string||this.type===Sh.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===Sh.star)&&!Ih.test(this.input.slice(this.lastTokEnd,this.start))},lp.parseObj=function(t,e){var n=this.startNode(),i=!0,r={};for(n.properties=[],this.next();!this.eat(Sh.braceR);){if(i)i=!1;else if(this.expect(Sh.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(Sh.braceR))break;var s=this.parseProperty(t,e);t||this.checkPropClash(s,r,e),n.properties.push(s)}return this.finishNode(n,t?"ObjectPattern":"ObjectExpression")},lp.parseProperty=function(t,e){var n,i,r,s,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(Sh.ellipsis))return t?(a.argument=this.parseIdent(!1),this.type===Sh.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(a.argument=this.parseMaybeAssign(!1,e),this.type===Sh.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(t||e)&&(r=this.start,s=this.startLoc),t||(n=this.eat(Sh.star)));var o=this.containsEsc;return this.parsePropertyName(a),!t&&!o&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(a)?(i=!0,n=this.options.ecmaVersion>=9&&this.eat(Sh.star),this.parsePropertyName(a)):i=!1,this.parsePropertyValue(a,t,n,i,r,s,e,o),this.finishNode(a,"Property")},lp.parseGetterSetter=function(t){t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var e="get"===t.kind?0:1;if(t.value.params.length!==e){var n=t.value.start;"get"===t.kind?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")},lp.parsePropertyValue=function(t,e,n,i,r,s,a,o){(n||i)&&this.type===Sh.colon&&this.unexpected(),this.eat(Sh.colon)?(t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),t.kind="init"):this.options.ecmaVersion>=6&&this.type===Sh.parenL?(e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(n,i)):e||o||!(this.options.ecmaVersion>=5)||t.computed||"Identifier"!==t.key.type||"get"!==t.key.name&&"set"!==t.key.name||this.type===Sh.comma||this.type===Sh.braceR||this.type===Sh.eq?this.options.ecmaVersion>=6&&!t.computed&&"Identifier"===t.key.type?((n||i)&&this.unexpected(),this.checkUnreserved(t.key),"await"!==t.key.name||this.awaitIdentPos||(this.awaitIdentPos=r),t.kind="init",e?t.value=this.parseMaybeDefault(r,s,this.copyNode(t.key)):this.type===Sh.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),t.value=this.parseMaybeDefault(r,s,this.copyNode(t.key))):t.value=this.copyNode(t.key),t.shorthand=!0):this.unexpected():((n||i)&&this.unexpected(),this.parseGetterSetter(t))},lp.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(Sh.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(Sh.bracketR),t.key;t.computed=!1}return t.key=this.type===Sh.num||this.type===Sh.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},lp.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},lp.parseMethod=function(t,e,n){var i=this.startNode(),r=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(i),this.options.ecmaVersion>=6&&(i.generator=t),this.options.ecmaVersion>=8&&(i.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|Yh(e,i.generator)|(n?128:0)),this.expect(Sh.parenL),i.params=this.parseBindingList(Sh.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(i,!1,!0,!1),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(i,"FunctionExpression")},lp.parseArrowExpression=function(t,e,n,i){var r=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(16|Yh(n,!1)),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1,i),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(t,"ArrowFunctionExpression")},lp.parseFunctionBody=function(t,e,n,i){var r=e&&this.type!==Sh.braceL,s=this.strict,a=!1;if(r)t.body=this.parseMaybeAssign(i),t.expression=!0,this.checkParams(t,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);s&&!o||(a=this.strictDirective(this.end))&&o&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list");var c=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(t,!s&&!a&&!e&&!n&&this.isSimpleParamList(t.params)),this.strict&&t.id&&this.checkLValSimple(t.id,5),t.body=this.parseBlock(!1,void 0,a&&!s),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=c}this.exitScope()},lp.isSimpleParamList=function(t){for(var e=0,n=t;e<n.length;e+=1){if("Identifier"!==n[e].type)return!1}return!0},lp.checkParams=function(t,e){for(var n=Object.create(null),i=0,r=t.params;i<r.length;i+=1){var s=r[i];this.checkLValInnerPattern(s,1,e?null:n)}},lp.parseExprList=function(t,e,n,i){for(var r=[],s=!0;!this.eat(t);){if(s)s=!1;else if(this.expect(Sh.comma),e&&this.afterTrailingComma(t))break;var a=void 0;n&&this.type===Sh.comma?a=null:this.type===Sh.ellipsis?(a=this.parseSpread(i),i&&this.type===Sh.comma&&i.trailingComma<0&&(i.trailingComma=this.start)):a=this.parseMaybeAssign(!1,i),r.push(a)}return r},lp.checkUnreserved=function(t){var e=t.start,n=t.end,i=t.name;(this.inGenerator&&"yield"===i&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===i&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&"arguments"===i&&this.raiseRecoverable(e,"Cannot use 'arguments' in class field initializer"),!this.inClassStaticBlock||"arguments"!==i&&"await"!==i||this.raise(e,"Cannot use "+i+" in class static initialization block"),this.keywords.test(i)&&this.raise(e,"Unexpected keyword '"+i+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(e,n).indexOf("\\"))||(this.strict?this.reservedWordsStrict:this.reservedWords).test(i)&&(this.inAsync||"await"!==i||this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+i+"' is reserved"))},lp.parseIdent=function(t){var e=this.parseIdentNode();return this.next(!!t),this.finishNode(e,"Identifier"),t||(this.checkUnreserved(e),"await"!==e.name||this.awaitIdentPos||(this.awaitIdentPos=e.start)),e},lp.parseIdentNode=function(){var t=this.startNode();return this.type===Sh.name?t.name=this.value:this.type.keyword?(t.name=this.type.keyword,"class"!==t.name&&"function"!==t.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop(),this.type=Sh.name):this.unexpected(),t},lp.parsePrivateIdent=function(){var t=this.startNode();return this.type===Sh.privateId?t.name=this.value:this.unexpected(),this.next(),this.finishNode(t,"PrivateIdentifier"),this.options.checkPrivateFields&&(0===this.privateNameStack.length?this.raise(t.start,"Private field '#"+t.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(t)),t},lp.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===Sh.semi||this.canInsertSemicolon()||this.type!==Sh.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(Sh.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")},lp.parseAwait=function(t){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0,!1,t),this.finishNode(e,"AwaitExpression")};var dp=Gh.prototype;dp.raise=function(t,e){var n=jh(this.input,t);e+=" ("+n.line+":"+n.column+")";var i=new SyntaxError(e);throw i.pos=t,i.loc=n,i.raisedAt=this.pos,i},dp.raiseRecoverable=dp.raise,dp.curPosition=function(){if(this.options.locations)return new Ph(this.curLine,this.pos-this.lineStart)};var fp=Gh.prototype,mp=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};fp.enterScope=function(t){this.scopeStack.push(new mp(t))},fp.exitScope=function(){this.scopeStack.pop()},fp.treatFunctionsAsVarInScope=function(t){return 2&t.flags||!this.inModule&&1&t.flags},fp.declareName=function(t,e,n){var i=!1;if(2===e){var r=this.currentScope();i=r.lexical.indexOf(t)>-1||r.functions.indexOf(t)>-1||r.var.indexOf(t)>-1,r.lexical.push(t),this.inModule&&1&r.flags&&delete this.undefinedExports[t]}else if(4===e){this.currentScope().lexical.push(t)}else if(3===e){var s=this.currentScope();i=this.treatFunctionsAsVar?s.lexical.indexOf(t)>-1:s.lexical.indexOf(t)>-1||s.var.indexOf(t)>-1,s.functions.push(t)}else for(var a=this.scopeStack.length-1;a>=0;--a){var o=this.scopeStack[a];if(o.lexical.indexOf(t)>-1&&!(32&o.flags&&o.lexical[0]===t)||!this.treatFunctionsAsVarInScope(o)&&o.functions.indexOf(t)>-1){i=!0;break}if(o.var.push(t),this.inModule&&1&o.flags&&delete this.undefinedExports[t],259&o.flags)break}i&&this.raiseRecoverable(n,"Identifier '"+t+"' has already been declared")},fp.checkLocalExport=function(t){-1===this.scopeStack[0].lexical.indexOf(t.name)&&-1===this.scopeStack[0].var.indexOf(t.name)&&(this.undefinedExports[t.name]=t)},fp.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},fp.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(259&e.flags)return e}},fp.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(259&e.flags&&!(16&e.flags))return e}};var yp=function(t,e,n){this.type="",this.start=e,this.end=0,t.options.locations&&(this.loc=new Rh(t,n)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])},gp=Gh.prototype;function bp(t,e,n,i){return t.type=e,t.end=n,this.options.locations&&(t.loc.end=i),this.options.ranges&&(t.range[1]=n),t}gp.startNode=function(){return new yp(this,this.start,this.startLoc)},gp.startNodeAt=function(t,e){return new yp(this,t,e)},gp.finishNode=function(t,e){return bp.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},gp.finishNodeAt=function(t,e,n,i){return bp.call(this,t,e,n,i)},gp.copyNode=function(t){var e=new yp(this,t.start,this.startLoc);for(var n in t)e[n]=t[n];return e};var vp="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",_p=vp+" Extended_Pictographic",xp=_p+" EBase EComp EMod EPres ExtPict",wp={9:vp,10:_p,11:_p,12:xp,13:xp,14:xp},Sp={9:"",10:"",11:"",12:"",13:"",14:"Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji"},Ip="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Ap="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Tp=Ap+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",kp=Tp+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Cp=kp+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",Mp=Cp+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",Ep={9:Ap,10:Tp,11:kp,12:Cp,13:Mp,14:Mp+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz"},Np={};function Dp(t){var e=Np[t]={binary:Fh(wp[t]+" "+Ip),binaryOfStrings:Fh(Sp[t]),nonBinary:{General_Category:Fh(Ip),Script:Fh(Ep[t])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}for(var Op=0,Bp=[9,10,11,12,13,14];Op<Bp.length;Op+=1){Dp(Bp[Op])}var Lp=Gh.prototype,Fp=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=Np[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function Vp(t){return 36===t||t>=40&&t<=43||46===t||63===t||t>=91&&t<=94||t>=123&&t<=125}function Up(t){return t>=65&&t<=90||t>=97&&t<=122}Fp.prototype.reset=function(t,e,n){var i=-1!==n.indexOf("v"),r=-1!==n.indexOf("u");this.start=0|t,this.source=e+"",this.flags=n,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=r&&this.parser.options.ecmaVersion>=9)},Fp.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)},Fp.prototype.at=function(t,e){void 0===e&&(e=!1);var n=this.source,i=n.length;if(t>=i)return-1;var r=n.charCodeAt(t);if(!e&&!this.switchU||r<=55295||r>=57344||t+1>=i)return r;var s=n.charCodeAt(t+1);return s>=56320&&s<=57343?(r<<10)+s-56613888:r},Fp.prototype.nextIndex=function(t,e){void 0===e&&(e=!1);var n=this.source,i=n.length;if(t>=i)return i;var r,s=n.charCodeAt(t);return!e&&!this.switchU||s<=55295||s>=57344||t+1>=i||(r=n.charCodeAt(t+1))<56320||r>57343?t+1:t+2},Fp.prototype.current=function(t){return void 0===t&&(t=!1),this.at(this.pos,t)},Fp.prototype.lookahead=function(t){return void 0===t&&(t=!1),this.at(this.nextIndex(this.pos,t),t)},Fp.prototype.advance=function(t){void 0===t&&(t=!1),this.pos=this.nextIndex(this.pos,t)},Fp.prototype.eat=function(t,e){return void 0===e&&(e=!1),this.current(e)===t&&(this.advance(e),!0)},Fp.prototype.eatChars=function(t,e){void 0===e&&(e=!1);for(var n=this.pos,i=0,r=t;i<r.length;i+=1){var s=r[i],a=this.at(n,e);if(-1===a||a!==s)return!1;n=this.nextIndex(n,e)}return this.pos=n,!0},Lp.validateRegExpFlags=function(t){for(var e=t.validFlags,n=t.flags,i=!1,r=!1,s=0;s<n.length;s++){var a=n.charAt(s);-1===e.indexOf(a)&&this.raise(t.start,"Invalid regular expression flag"),n.indexOf(a,s+1)>-1&&this.raise(t.start,"Duplicate regular expression flag"),"u"===a&&(i=!0),"v"===a&&(r=!0)}this.options.ecmaVersion>=15&&i&&r&&this.raise(t.start,"Invalid regular expression flag")},Lp.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))},Lp.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,n=t.backReferenceNames;e<n.length;e+=1){var i=n[e];-1===t.groupNames.indexOf(i)&&t.raise("Invalid named capture referenced")}},Lp.regexp_disjunction=function(t){for(this.regexp_alternative(t);t.eat(124);)this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")},Lp.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););},Lp.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):!!(t.switchU?this.regexp_eatAtom(t):this.regexp_eatExtendedAtom(t))&&(this.regexp_eatQuantifier(t),!0)},Lp.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!n,!0}return t.pos=e,!1},Lp.regexp_eatQuantifier=function(t,e){return void 0===e&&(e=!1),!!this.regexp_eatQuantifierPrefix(t,e)&&(t.eat(63),!0)},Lp.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)},Lp.regexp_eatBracedQuantifier=function(t,e){var n=t.pos;if(t.eat(123)){var i=0,r=-1;if(this.regexp_eatDecimalDigits(t)&&(i=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(r=t.lastIntValue),t.eat(125)))return-1!==r&&r<i&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=n}return!1},Lp.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)},Lp.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1},Lp.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=e}return!1},Lp.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):63===t.current()&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1},Lp.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)},Lp.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1},Lp.regexp_eatSyntaxCharacter=function(t){var e=t.current();return!!Vp(e)&&(t.lastIntValue=e,t.advance(),!0)},Lp.regexp_eatPatternCharacters=function(t){for(var e=t.pos,n=0;-1!==(n=t.current())&&!Vp(n);)t.advance();return t.pos!==e},Lp.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return!(-1===e||36===e||e>=40&&e<=43||46===e||63===e||91===e||94===e||124===e)&&(t.advance(),!0)},Lp.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t))return-1!==t.groupNames.indexOf(t.lastStringValue)&&t.raise("Duplicate capture group name"),void t.groupNames.push(t.lastStringValue);t.raise("Invalid group")}},Lp.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1},Lp.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=Vh(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=Vh(t.lastIntValue);return!0}return!1},Lp.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,n=this.options.ecmaVersion>=11,i=t.current(n);return t.advance(n),92===i&&this.regexp_eatRegExpUnicodeEscapeSequence(t,n)&&(i=t.lastIntValue),function(t){return mh(t,!0)||36===t||95===t}(i)?(t.lastIntValue=i,!0):(t.pos=e,!1)},Lp.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,n=this.options.ecmaVersion>=11,i=t.current(n);return t.advance(n),92===i&&this.regexp_eatRegExpUnicodeEscapeSequence(t,n)&&(i=t.lastIntValue),function(t){return yh(t,!0)||36===t||95===t||8204===t||8205===t}(i)?(t.lastIntValue=i,!0):(t.pos=e,!1)},Lp.regexp_eatAtomEscape=function(t){return!!(this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t))||(t.switchU&&(99===t.current()&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)},Lp.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var n=t.lastIntValue;if(t.switchU)return n>t.maxBackReference&&(t.maxBackReference=n),!0;if(n<=t.numCapturingParens)return!0;t.pos=e}return!1},Lp.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1},Lp.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t,!1)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)},Lp.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1},Lp.regexp_eatZero=function(t){return 48===t.current()&&!jp(t.lookahead())&&(t.lastIntValue=0,t.advance(),!0)},Lp.regexp_eatControlEscape=function(t){var e=t.current();return 116===e?(t.lastIntValue=9,t.advance(),!0):110===e?(t.lastIntValue=10,t.advance(),!0):118===e?(t.lastIntValue=11,t.advance(),!0):102===e?(t.lastIntValue=12,t.advance(),!0):114===e&&(t.lastIntValue=13,t.advance(),!0)},Lp.regexp_eatControlLetter=function(t){var e=t.current();return!!Up(e)&&(t.lastIntValue=e%32,t.advance(),!0)},Lp.regexp_eatRegExpUnicodeEscapeSequence=function(t,e){void 0===e&&(e=!1);var n,i=t.pos,r=e||t.switchU;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var s=t.lastIntValue;if(r&&s>=55296&&s<=56319){var a=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var o=t.lastIntValue;if(o>=56320&&o<=57343)return t.lastIntValue=1024*(s-55296)+(o-56320)+65536,!0}t.pos=a,t.lastIntValue=s}return!0}if(r&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&((n=t.lastIntValue)>=0&&n<=1114111))return!0;r&&t.raise("Invalid unicode escape"),t.pos=i}return!1},Lp.regexp_eatIdentityEscape=function(t){if(t.switchU)return!!this.regexp_eatSyntaxCharacter(t)||!!t.eat(47)&&(t.lastIntValue=47,!0);var e=t.current();return!(99===e||t.switchN&&107===e)&&(t.lastIntValue=e,t.advance(),!0)},Lp.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do{t.lastIntValue=10*t.lastIntValue+(e-48),t.advance()}while((e=t.current())>=48&&e<=57);return!0}return!1};function Pp(t){return Up(t)||95===t}function Rp(t){return Pp(t)||jp(t)}function jp(t){return t>=48&&t<=57}function $p(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function zp(t){return t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:t-48}function Hp(t){return t>=48&&t<=55}Lp.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(function(t){return 100===t||68===t||115===t||83===t||119===t||87===t}(e))return t.lastIntValue=-1,t.advance(),1;var n=!1;if(t.switchU&&this.options.ecmaVersion>=9&&((n=80===e)||112===e)){var i;if(t.lastIntValue=-1,t.advance(),t.eat(123)&&(i=this.regexp_eatUnicodePropertyValueExpression(t))&&t.eat(125))return n&&2===i&&t.raise("Invalid property name"),i;t.raise("Invalid property name")}return 0},Lp.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var n=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var i=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,n,i),1}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var r=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,r)}return 0},Lp.regexp_validateUnicodePropertyNameAndValue=function(t,e,n){Oh(t.unicodeProperties.nonBinary,e)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[e].test(n)||t.raise("Invalid property value")},Lp.regexp_validateUnicodePropertyNameOrValue=function(t,e){return t.unicodeProperties.binary.test(e)?1:t.switchV&&t.unicodeProperties.binaryOfStrings.test(e)?2:void t.raise("Invalid property name")},Lp.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";Pp(e=t.current());)t.lastStringValue+=Vh(e),t.advance();return""!==t.lastStringValue},Lp.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";Rp(e=t.current());)t.lastStringValue+=Vh(e),t.advance();return""!==t.lastStringValue},Lp.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)},Lp.regexp_eatCharacterClass=function(t){if(t.eat(91)){var e=t.eat(94),n=this.regexp_classContents(t);return t.eat(93)||t.raise("Unterminated character class"),e&&2===n&&t.raise("Negated character class may contain strings"),!0}return!1},Lp.regexp_classContents=function(t){return 93===t.current()?1:t.switchV?this.regexp_classSetExpression(t):(this.regexp_nonEmptyClassRanges(t),1)},Lp.regexp_nonEmptyClassRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var n=t.lastIntValue;!t.switchU||-1!==e&&-1!==n||t.raise("Invalid character class"),-1!==e&&-1!==n&&e>n&&t.raise("Range out of order in character class")}}},Lp.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var n=t.current();(99===n||Hp(n))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var i=t.current();return 93!==i&&(t.lastIntValue=i,t.advance(),!0)},Lp.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)},Lp.regexp_classSetExpression=function(t){var e,n=1;if(this.regexp_eatClassSetRange(t));else if(e=this.regexp_eatClassSetOperand(t)){2===e&&(n=2);for(var i=t.pos;t.eatChars([38,38]);)38!==t.current()&&(e=this.regexp_eatClassSetOperand(t))?2!==e&&(n=1):t.raise("Invalid character in character class");if(i!==t.pos)return n;for(;t.eatChars([45,45]);)this.regexp_eatClassSetOperand(t)||t.raise("Invalid character in character class");if(i!==t.pos)return n}else t.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(t)){if(!(e=this.regexp_eatClassSetOperand(t)))return n;2===e&&(n=2)}},Lp.regexp_eatClassSetRange=function(t){var e=t.pos;if(this.regexp_eatClassSetCharacter(t)){var n=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassSetCharacter(t)){var i=t.lastIntValue;return-1!==n&&-1!==i&&n>i&&t.raise("Range out of order in character class"),!0}t.pos=e}return!1},Lp.regexp_eatClassSetOperand=function(t){return this.regexp_eatClassSetCharacter(t)?1:this.regexp_eatClassStringDisjunction(t)||this.regexp_eatNestedClass(t)},Lp.regexp_eatNestedClass=function(t){var e=t.pos;if(t.eat(91)){var n=t.eat(94),i=this.regexp_classContents(t);if(t.eat(93))return n&&2===i&&t.raise("Negated character class may contain strings"),i;t.pos=e}if(t.eat(92)){var r=this.regexp_eatCharacterClassEscape(t);if(r)return r;t.pos=e}return null},Lp.regexp_eatClassStringDisjunction=function(t){var e=t.pos;if(t.eatChars([92,113])){if(t.eat(123)){var n=this.regexp_classStringDisjunctionContents(t);if(t.eat(125))return n}else t.raise("Invalid escape");t.pos=e}return null},Lp.regexp_classStringDisjunctionContents=function(t){for(var e=this.regexp_classString(t);t.eat(124);)2===this.regexp_classString(t)&&(e=2);return e},Lp.regexp_classString=function(t){for(var e=0;this.regexp_eatClassSetCharacter(t);)e++;return 1===e?1:2},Lp.regexp_eatClassSetCharacter=function(t){var e=t.pos;if(t.eat(92))return!(!this.regexp_eatCharacterEscape(t)&&!this.regexp_eatClassSetReservedPunctuator(t))||(t.eat(98)?(t.lastIntValue=8,!0):(t.pos=e,!1));var n=t.current();return!(n<0||n===t.lookahead()&&function(t){return 33===t||t>=35&&t<=38||t>=42&&t<=44||46===t||t>=58&&t<=64||94===t||96===t||126===t}(n))&&(!function(t){return 40===t||41===t||45===t||47===t||t>=91&&t<=93||t>=123&&t<=125}(n)&&(t.advance(),t.lastIntValue=n,!0))},Lp.regexp_eatClassSetReservedPunctuator=function(t){var e=t.current();return!!function(t){return 33===t||35===t||37===t||38===t||44===t||45===t||t>=58&&t<=62||64===t||96===t||126===t}(e)&&(t.lastIntValue=e,t.advance(),!0)},Lp.regexp_eatClassControlLetter=function(t){var e=t.current();return!(!jp(e)&&95!==e)&&(t.lastIntValue=e%32,t.advance(),!0)},Lp.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1},Lp.regexp_eatDecimalDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;jp(n=t.current());)t.lastIntValue=10*t.lastIntValue+(n-48),t.advance();return t.pos!==e},Lp.regexp_eatHexDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;$p(n=t.current());)t.lastIntValue=16*t.lastIntValue+zp(n),t.advance();return t.pos!==e},Lp.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var n=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=64*e+8*n+t.lastIntValue:t.lastIntValue=8*e+n}else t.lastIntValue=e;return!0}return!1},Lp.regexp_eatOctalDigit=function(t){var e=t.current();return Hp(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)},Lp.regexp_eatFixedHexDigits=function(t,e){var n=t.pos;t.lastIntValue=0;for(var i=0;i<e;++i){var r=t.current();if(!$p(r))return t.pos=n,!1;t.lastIntValue=16*t.lastIntValue+zp(r),t.advance()}return!0};var qp=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new Rh(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Yp=Gh.prototype;function Gp(t){return"function"!=typeof BigInt?null:BigInt(t.replace(/_/g,""))}Yp.next=function(t){!t&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new qp(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Yp.getToken=function(){return this.next(),new qp(this)},"undefined"!=typeof Symbol&&(Yp[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===Sh.eof,value:e}}}}),Yp.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(Sh.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},Yp.readToken=function(t){return mh(t,this.options.ecmaVersion>=6)||92===t?this.readWord():this.getTokenFromCode(t)},Yp.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);if(t<=55295||t>=56320)return t;var e=this.input.charCodeAt(this.pos+1);return e<=56319||e>=57344?t:(t<<10)+e-56613888},Yp.skipBlockComment=function(){var t=this.options.onComment&&this.curPosition(),e=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(-1===n&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var i=void 0,r=e;(i=kh(this.input,r,this.pos))>-1;)++this.curLine,r=this.lineStart=i;this.options.onComment&&this.options.onComment(!0,this.input.slice(e+2,n),e,this.pos,t,this.curPosition())},Yp.skipLineComment=function(t){for(var e=this.pos,n=this.options.onComment&&this.curPosition(),i=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!Th(i);)i=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,n,this.curPosition())},Yp.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!(t>8&&t<14||t>=5760&&Ch.test(String.fromCharCode(t))))break t;++this.pos}}},Yp.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=t,this.value=e,this.updateContext(n)},Yp.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===t&&46===e?(this.pos+=3,this.finishToken(Sh.ellipsis)):(++this.pos,this.finishToken(Sh.dot))},Yp.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(Sh.assign,2):this.finishOp(Sh.slash,1)},Yp.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),n=1,i=42===t?Sh.star:Sh.modulo;return this.options.ecmaVersion>=7&&42===t&&42===e&&(++n,i=Sh.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(Sh.assign,n+1):this.finishOp(i,n)},Yp.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);if(e===t){if(this.options.ecmaVersion>=12)if(61===this.input.charCodeAt(this.pos+2))return this.finishOp(Sh.assign,3);return this.finishOp(124===t?Sh.logicalOR:Sh.logicalAND,2)}return 61===e?this.finishOp(Sh.assign,2):this.finishOp(124===t?Sh.bitwiseOR:Sh.bitwiseAND,1)},Yp.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(Sh.assign,2):this.finishOp(Sh.bitwiseXOR,1)},Yp.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45!==e||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!Ih.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(Sh.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===e?this.finishOp(Sh.assign,2):this.finishOp(Sh.plusMin,1)},Yp.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),n=1;return e===t?(n=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(Sh.assign,n+1):this.finishOp(Sh.bitShift,n)):33!==e||60!==t||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===e&&(n=2),this.finishOp(Sh.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},Yp.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(Sh.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(Sh.arrow)):this.finishOp(61===t?Sh.eq:Sh.prefix,1)},Yp.readToken_question=function(){var t=this.options.ecmaVersion;if(t>=11){var e=this.input.charCodeAt(this.pos+1);if(46===e){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(Sh.questionDot,2)}if(63===e){if(t>=12)if(61===this.input.charCodeAt(this.pos+2))return this.finishOp(Sh.assign,3);return this.finishOp(Sh.coalesce,2)}}return this.finishOp(Sh.question,1)},Yp.readToken_numberSign=function(){var t=35;if(this.options.ecmaVersion>=13&&(++this.pos,mh(t=this.fullCharCodeAtPos(),!0)||92===t))return this.finishToken(Sh.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Vh(t)+"'")},Yp.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(Sh.parenL);case 41:return++this.pos,this.finishToken(Sh.parenR);case 59:return++this.pos,this.finishToken(Sh.semi);case 44:return++this.pos,this.finishToken(Sh.comma);case 91:return++this.pos,this.finishToken(Sh.bracketL);case 93:return++this.pos,this.finishToken(Sh.bracketR);case 123:return++this.pos,this.finishToken(Sh.braceL);case 125:return++this.pos,this.finishToken(Sh.braceR);case 58:return++this.pos,this.finishToken(Sh.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(Sh.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(120===e||88===e)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===e||79===e)return this.readRadixNumber(8);if(98===e||66===e)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 63:return this.readToken_question();case 126:return this.finishOp(Sh.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Vh(t)+"'")},Yp.finishOp=function(t,e){var n=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,n)},Yp.readRegexp=function(){for(var t,e,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var i=this.input.charAt(this.pos);if(Ih.test(i)&&this.raise(n,"Unterminated regular expression"),t)t=!1;else{if("["===i)e=!0;else if("]"===i&&e)e=!1;else if("/"===i&&!e)break;t="\\"===i}++this.pos}var r=this.input.slice(n,this.pos);++this.pos;var s=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(s);var o=this.regexpState||(this.regexpState=new Fp(this));o.reset(n,r,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var c=null;try{c=new RegExp(r,a)}catch(t){}return this.finishToken(Sh.regexp,{pattern:r,flags:a,value:c})},Yp.readInt=function(t,e,n){for(var i=this.options.ecmaVersion>=12&&void 0===e,r=n&&48===this.input.charCodeAt(this.pos),s=this.pos,a=0,o=0,c=0,u=null==e?1/0:e;c<u;++c,++this.pos){var l=this.input.charCodeAt(this.pos),h=void 0;if(i&&95===l)r&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===o&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===c&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),o=l;else{if((h=l>=97?l-97+10:l>=65?l-65+10:l>=48&&l<=57?l-48:1/0)>=t)break;o=l,a=a*t+h}}return i&&95===o&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||null!=e&&this.pos-s!==e?null:a},Yp.readRadixNumber=function(t){var e=this.pos;this.pos+=2;var n=this.readInt(t);return null==n&&this.raise(this.start+2,"Expected number in radix "+t),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(n=Gp(this.input.slice(e,this.pos)),++this.pos):mh(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Sh.num,n)},Yp.readNumber=function(t){var e=this.pos;t||null!==this.readInt(10,void 0,!0)||this.raise(e,"Invalid number");var n=this.pos-e>=2&&48===this.input.charCodeAt(e);n&&this.strict&&this.raise(e,"Invalid number");var i=this.input.charCodeAt(this.pos);if(!n&&!t&&this.options.ecmaVersion>=11&&110===i){var r=Gp(this.input.slice(e,this.pos));return++this.pos,mh(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Sh.num,r)}n&&/[89]/.test(this.input.slice(e,this.pos))&&(n=!1),46!==i||n||(++this.pos,this.readInt(10),i=this.input.charCodeAt(this.pos)),69!==i&&101!==i||n||(43!==(i=this.input.charCodeAt(++this.pos))&&45!==i||++this.pos,null===this.readInt(10)&&this.raise(e,"Invalid number")),mh(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s,a=(s=this.input.slice(e,this.pos),n?parseInt(s,8):parseFloat(s.replace(/_/g,"")));return this.finishToken(Sh.num,a)},Yp.readCodePoint=function(){var t;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var e=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(e,"Code point out of bounds")}else t=this.readHexChar(4);return t},Yp.readString=function(t){for(var e="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var i=this.input.charCodeAt(this.pos);if(i===t)break;92===i?(e+=this.input.slice(n,this.pos),e+=this.readEscapedChar(!1),n=this.pos):8232===i||8233===i?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Th(i)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(n,this.pos++),this.finishToken(Sh.string,e)};var Wp={};Yp.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t!==Wp)throw t;this.readInvalidTemplateToken()}this.inTemplateElement=!1},Yp.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Wp;this.raise(t,e)},Yp.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==Sh.template&&this.type!==Sh.invalidTemplate?(t+=this.input.slice(e,this.pos),this.finishToken(Sh.template,t)):36===n?(this.pos+=2,this.finishToken(Sh.dollarBraceL)):(++this.pos,this.finishToken(Sh.backQuote));if(92===n)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(Th(n)){switch(t+=this.input.slice(e,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},Yp.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(Sh.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},Yp.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Vh(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),t){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(e>=48&&e<=55){var i=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(i,8);return r>255&&(i=i.slice(0,-1),r=parseInt(i,8)),this.pos+=i.length-1,e=this.input.charCodeAt(this.pos),"0"===i&&56!==e&&57!==e||!this.strict&&!t||this.invalidStringToken(this.pos-1-i.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(r)}return Th(e)?"":String.fromCharCode(e)}},Yp.readHexChar=function(t){var e=this.pos,n=this.readInt(16,t);return null===n&&this.invalidStringToken(e,"Bad character escape sequence"),n},Yp.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,n=this.pos,i=this.options.ecmaVersion>=6;this.pos<this.input.length;){var r=this.fullCharCodeAtPos();if(yh(r,i))this.pos+=r<=65535?1:2;else{if(92!==r)break;this.containsEsc=!0,t+=this.input.slice(n,this.pos);var s=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(e?mh:yh)(a,i)||this.invalidStringToken(s,"Invalid Unicode escape"),t+=Vh(a),n=this.pos}e=!1}return t+this.input.slice(n,this.pos)},Yp.readWord=function(){var t=this.readWord1(),e=Sh.name;return this.keywords.test(t)&&(e=xh[t]),this.finishToken(e,t)};Gh.acorn={Parser:Gh,version:"8.11.3",defaultOptions:$h,Position:Ph,SourceLocation:Rh,getLineInfo:jh,Node:yp,TokenType:gh,tokTypes:Sh,keywordTypes:xh,TokContext:op,tokContexts:cp,isIdentifierChar:yh,isIdentifierStart:mh,Token:qp,isNewLine:Th,lineBreak:Ih,lineBreakG:Ah,nonASCIIwhitespace:Ch};var Kp={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"};const Qp={ecmaVersion:11},Jp="$",Zp="d",Xp="d1",td="d2",ed=t=>(e,n)=>n.error(e,t+" not allowed"),nd=ed("Aggregate function"),id=ed("Window function"),rd="Invalid argument",sd="Invalid column reference",ad=sd+" (must be input to an aggregate function)",od="Invalid function call",cd="Invalid operator parameter",ud="Unsupported destructuring pattern",ld="Table expressions do not support closures",hd="Use aq.escape(fn) to use a function as-is (including closures)",pd=`\nNote: ${ld}. ${hd}, or use table.params({ name: value }) to define dynamic parameters.`,dd=`\nNote: ${ld}. ${hd}, or use aq.addFunction(name, fn) to add new op functions.`,fd=`The ${bn} method is not valid in multi-table expressions.`;function md(t,e){const n=function(t){try{const i=t.field?function(t){const e=JSON.stringify(t+"");return t.table?`(a,b)=>b[${e}]`:`d=>d[${e}]`}(t):vt(t)?be(t):t;return(e=`expr=(${i})`,n=Qp,Gh.parse(e,n)).body[0].expression.right}catch(e){St("Expression parse error: "+(t+""))}var e,n}(e);let i=t.root=n;return t.spec=e,t.tuple=null,t.tuple1=null,t.tuple2=null,t.$param=null,t.$op=0,t.scope=new Set,t.paramsRef=new Map,t.columnRef=new Map,!function(t){return nh(Ne,t)||nh(Ee,t)}(i)?t.join?(t.scope.add(t.tuple1=Xp),t.scope.add(t.tuple2=td),t.scope.add(t.$param=Jp)):(t.scope.add(t.tuple=Zp),t.scope.add(t.$param=Jp)):(!function(t,e){t.generator&&ed("Generator functions")(t,e);t.async&&ed("Async functions")(t,e);const{params:n}=t,i=n.length,r=t=>(n,i)=>e.columnRef.set(n,[i,t]),s=(t,n)=>e.paramsRef.set(t,n);i&&(e.join?(vd(e,n[0],"tuple1",r(1)),i>1&&vd(e,n[1],"tuple2",r(2)),i>2&&vd(e,n[2],"$param",s)):(vd(e,n[0],"tuple",r(0)),i>1&&vd(e,n[1],"$param",s)));e.root=t.body}(i,t),i=i.body),Yl(i,t,yd),t.root}const yd={FunctionDeclaration:ed("Function definitions"),ForStatement:ed("For loops"),ForOfStatement:ed("For-of loops"),ForInStatement:ed("For-in loops"),WhileStatement:ed("While loops"),DoWhileStatement:ed("Do-while loops"),AwaitExpression:ed("Await expressions"),ArrowFunctionExpression:ed("Function definitions"),AssignmentExpression:ed("Assignments"),FunctionExpression:ed("Function definitions"),NewExpression:ed('Use of "new"'),UpdateExpression:ed("Update expressions"),VariableDeclarator(t,e){Md(t.id,e)},Identifier(t,e,n){wd(t,e,n)&&!e.scope.has(t.name)&&e.error(t,"Invalid variable reference",pd)},CallExpression(t,e){const n=_d(t.callee),i=hn(n)||pn(n);if(i){if((e.join||!1===e.aggregate)&&cn(n)&&nd(t,e),(e.join||!1===e.window)&&un(n)&&id(t,e),e.$op=1,e.ast)Cd(t,n,e),t.arguments.forEach((t=>Yl(t,e,bd)));else{const r=e.op(function(t,e,n,i){const r=[],s=[],a=e.param[0]||0,o=a+(e.param[1]||0);return i.forEach(((e,n)=>{n<a?(Yl(e,t,bd),r.push(t.field(e))):n<o?(Yl(e,t,bd),s.push(t.param(e))):t.error(e,cd)})),{name:n,fields:r,params:s,...t.spec.window||{}}}(e,i,n,t.arguments));Object.assign(t,{type:"Op",name:r.id})}return e.$op=0,!1}ln(n)?Cd(t,n,e):e.error(t,od,dd)},MemberExpression(t,e,n){const{object:i,property:r}=t;if(!nh(De,i))return;const{name:s}=i;if(xd(t)&&nh(De,r)&&Vt(Kp,r.name))return void kd(t,r.name);const a=s===e.tuple?0:s===e.tuple1?1:s===e.tuple2?2:-1;return a>=0?gd(t,a,e,Sd,n):s===e.$param?gd(t,a,e,Ad):void(e.paramsRef.has(s)?Td(t,e.paramsRef.get(s)):e.columnRef.has(s)?Id(i,s,e,t):Vt(e.params,s)&&Td(i,s))}};function gd(t,e,n,i,r){const{property:s,computed:a}=t;let o;if(a)if(nh(Oe,s))o=s.value;else try{Yl(s,n,yd,t),o=n.param(s)}catch(e){n.error(t,"Invalid member expression")}else o=s.name;return i(t,o,e,n,r),!1}const bd={...yd,VariableDeclarator:ed("Variable declaration in operator call"),Identifier(t,e,n){wd(t,e,n)&&e.error(t,"Variable not accessible in operator call")},CallExpression(t,e){const n=_d(t.callee);ln(n)?Cd(t,n,e):e.error(t,od,dd)}};function vd(t,e,n,i){nh(De,e)?(t.scope.add(e.name),t[n]=e.name):nh(Fe,e)&&e.properties.forEach((e=>{const n=nh(De,e.key)?e.key.name:nh(Oe,e.key)?e.key.value:t.error(e,rd);nh(De,e.value)||t.error(e.value,ud),i(e.value.name,n)}))}function _d(t){return nh(De,t)?t.name:nh(Be,t)?xd(t)?function(t){return"max"===t?"greatest":"min"===t?"least":t}(t.property.name):t.property.name:null}function xd(t){return nh(De,t.object)&&"Math"===t.object.name}function wd(t,e,n){const{name:i}=t;if(nh(Be,n)&&n.property===t);else if(nh(Ve,n)&&n.key===t);else if(e.paramsRef.has(i))Td(t,e.paramsRef.get(i));else if(e.columnRef.has(i))Id(t,i,e,n);else if(Vt(e.params,i))Td(t,i);else{if(!Vt(Kp,i))return!0;kd(t,i)}}function Sd(t,e,n,i,r){const s=0===n?i.table:n>0?i.join[n-1]:null,a=s&&s.column(e);s&&!a&&i.error(t,sd),i.aggronly&&!i.$op&&i.error(t,ad),yn(t,e,n,a,r)}function Id(t,e,n,i){const[r,s]=n.columnRef.get(e);Sd(t,r,s,n,i)}function Ad(t,e,n,i){i.params&&!Vt(i.params,e)&&i.error(t,"Invalid param reference"),Td(t,e)}function Td(t,e){t.type=je,t.name=e}function kd(t,e){t.type=Pe,t.name=e,t.raw=Kp[e]}function Cd(t,e,n){if(e===bn){const e=n.table;e||n.error(t,fd),vn(t,t.arguments.length?t.arguments.map((t=>{const i=n.param(t),r=It(i)?e.columnName(i):i;return e.column(r)||n.error(t,sd),r})):e.columnNames())}else t.callee={type:"Function",name:e}}function Md(t,e){nh(De,t)?e.scope.add(t.name):nh("ArrayPattern",t)?t.elements.forEach((t=>Md(t,e))):nh(Fe,t)?t.properties.forEach((t=>Md(t.value,e))):e.error(t.id,"Unsupported variable declaration")}const Ed={[Ue]:1,[$e]:1};function Nd(t,e={}){const n=e.generate||Je,i=e.compiler||fn,r=function(t){return(t.table?Dd(t.table):t.join?{...Dd(t.join[1]),...Dd(t.join[0])}:{})||{}}(e),s={},a={},o=[],c=[];let u=0,l=-1;const h=e.join?i.join:1==e.index?i.expr2:i.expr,p={op(t){const e=function(t){let e=`${t.name}(${t.fields.concat(t.params).join(",")})`;if(t.frame){e+=`[${t.frame.map((t=>Number.isFinite(t)?Math.abs(t):-1))},${!!t.peers}]`}return e}(t);return a[e]||(t.id=++l,a[e]=t)},field(t){const e=n(t);return s[e]||(s[e]=++u)},param:t=>nh(Oe,t)?t.value:i.param(n(t),r),value(t,i){o.push(t);const s=i.escape||(e.ast?function(t){return Yl(t,null,{Column:eh,Constant:eh,Default:th}),t}(i):h(n(i),r));c.push(s),Ed[i.type]&&s!==i&&Nt(s)&&(s.field=i.name)},error(t,e,n=""){const i=t.start-6,r=t.end-6;St(`${e}: "${String(p.spec).slice(i,r)}"${n}`)}};Object.assign(p,e,{params:r});for(const[e,n]of gn(t))p.value(e+"",n.escape?rh(p,n,r):md(p,n));if(e.ast)return{names:o,exprs:c};const d=[];for(const t in s)d[s[t]]=i.expr(t,r);const f=Object.values(a);return f.forEach((t=>t.fields=t.fields.map((t=>d[t])))),{names:o,exprs:c,ops:f}}function Dd(t){return t&&At(t.params)?t.params():{}}const Od="Expr",Bd="ExprList",Ld="ExprNumber",Fd="ExprObject",Vd="JoinKeys",Ud="JoinValues",Pd="Options",Rd="OrderKeys",jd="SelectionList",$d="TableRef",zd="TableRefList",Hd="Descending",qd="Selection",Yd="Window";function Gd(t,e){return t&&t.expr?new Wd({...t,...e}):new Wd(e,t)}class Wd{constructor(t,e){this.expr=e,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...At(this.expr)?{func:!0}:{}}}}function Kd(t,e,n=0){const i=n?{field:!0,table:n}:{field:!0};return Gd(t,e?{expr:e,...i}:i)}function Qd(t,e){return(e=e&&At(e.query)?e.query():e)&&At(e.evaluate)?e.evaluate(null,t):t(e)}function Jd(t){return Nt(t)&&(vt(t.all)||vt(t.matches)||vt(t.not)||vt(t.range))}function Zd(t){return t&&At(t.toObject)?t.toObject():At(t)?{expr:String(t),func:!0}:vt(t)?t.map(Zd):Nt(t)?Ol(t,(t=>Zd(t))):t}function Xd(t){return vt(t)?t.map(Xd):Nt(t)?vt(t.verbs)?gf.from(t):vt(t.all)?jl():vt(t.range)?function(t,e){return Pl((n=>{let i=It(t)?t:n.columnIndex(t),r=It(e)?e:n.columnIndex(e);if(r<i){const t=r;r=i,i=t}return n.columnNames().slice(i,r+1)}),(()=>({range:[t,e]})))}(...t.range):vt(t.match)?(Ot(e=RegExp(...t.match))&&(e=RegExp(e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"))),Pl((t=>t.columnNames((t=>e.test(t)))),(()=>({matches:[e.source,e.flags]})))):vt(t.not)?$l(t.not.map(Zd)):function(t){let e=t,n=t.expr;if(null!=n){if(!0===t.field?e=n=Kd(n):!0===t.func&&(e=n=function(t){const e=t=>t;return e.toString=()=>t,e}(n)),Nt(t.window)){const{frame:i,peers:r}=t.window;e=n=function(t,e,n){return Gd(t,{window:{frame:e||[-1/0,0],peers:!!n}})}(n,i,r)}!0===t.desc&&(e=function(t){return Gd(t,{desc:!0})}(n))}return t===e?Ol(t,(t=>Xd(t))):e}(t):t;var e}function tf(t){const e=[];return _t(t).forEach((t=>{It(t)?e.push(t):Ot(t)?e.push(Kd(t,null)):Nt(t)&&t.expr||At(t)?e.push(t):St("Invalid key value: "+(t+""))})),e}function ef(t,e){return e<2?_t(t):t}const nf={[Od]:lf,[Bd]:hf,[Ld]:function(t){return It(t)?t:of(t)},[Fd]:of,[Vd]:function(t){return vt(t)?t.map(hf):of(t,{join:!0})},[Ud]:function(t){return vt(t)?t.map(((t,e)=>e<2?hf(t):of(t,{join:!0}))):of(t,{join:!0})},[Rd]:hf,[jd]:function(t){return _t(t).map(uf).flat()}};function rf(t,e,n){return e===Pd?t?function(t,e={}){const n={};for(const i in t){const r=t[i];n[i]=e[i]?rf(r,e[i]):r}return n}(t,n):t:nf[e](t)}function sf(t){return{type:Ue,name:t}}function af(t){return{type:Ue,index:t}}function of(t,e){if(Ot(t))return function(t,e){return Nd({expr:t},{...e,ast:!0}).exprs[0]}(t,e);if(t.expr){let n;if(!0===t.field?n=sf(t.expr):!0===t.func&&(n=of(t.expr,e)),n)return t.desc&&(n={type:Hd,expr:n}),t.window&&(n={type:Yd,expr:n,...t.window}),n}return Object.keys(t).map((n=>({...of(t[n],e),as:n})))}function cf(t){const e=qd;return t.all?{type:e,operator:"all"}:t.not?{type:e,operator:"not",arguments:hf(t.not)}:t.range?{type:e,operator:"range",arguments:hf(t.range)}:t.matches?{type:e,operator:"matches",arguments:t.matches}:St("Invalid input")}function uf(t){return Jd(t)?cf(t):It(t)?af(t):Ot(t)?sf(t):Nt(t)?Object.keys(t).map((e=>({type:Ue,name:e,as:t[e]}))):St("Invalid input")}function lf(t){return Jd(t)?cf(t):It(t)?af(t):Ot(t)?sf(t):Nt(t)?of(t):St("Invalid input")}function hf(t){return _t(t).map(lf).flat()}function pf(t){return t&&At(t.toAST)?t.toAST():t}class df{constructor(t,e=[],n=[]){this.verb=t,this.schema=e,e.forEach(((t,e)=>{const i=t.type,r=n[e],s=i===Vd?vt(a=r)?a.map(tf):a:i===Ud?function(t){return vt(t)?t.map(ef):t}(r):i===Rd?function(t){const e=[];return t.forEach((t=>{const n=null!=t.expr?t.expr:t;if(Nt(n)&&!At(n))for(const t in n)e.push(n[t]);else t=It(n)?n:Ot(n)?Kd(t):At(n)?t:St("Invalid orderby field: "+t),e.push(t)})),e}(r):r;var a;this[t.name]=void 0!==s?s:t.default}))}static from(t){const e=mf[t.verb],n=(e.schema||[]).map((({name:e})=>Xd(t[e])));return e(...n)}evaluate(t,e){const n=this.schema.map((({name:t,type:n})=>{const i=this[t];return n===$d?Qd(e,i):n===zd?i.map((t=>Qd(e,t))):i}));return t[this.verb](...n)}toObject(){const t={verb:this.verb};return this.schema.forEach((({name:e})=>{t[e]=Zd(this[e])})),t}toAST(){const t={type:"Verb",verb:this.verb};return this.schema.forEach((({name:e,type:n,props:i})=>{t[e]=function(t,e,n){return e===$d?pf(t):e===zd?t.map(pf):rf(Zd(t),e,n)}(this[e],n,i)})),t}}function ff(t,e){return Object.assign(((...n)=>new df(t,e,n)),{schema:e})}const mf={count:ff("count",[{name:"options",type:Pd}]),derive:ff("derive",[{name:"values",type:Fd},{name:"options",type:Pd,props:{before:jd,after:jd}}]),filter:ff("filter",[{name:"criteria",type:Fd}]),groupby:ff("groupby",[{name:"keys",type:Bd}]),orderby:ff("orderby",[{name:"keys",type:Rd}]),relocate:ff("relocate",[{name:"columns",type:jd},{name:"options",type:Pd,props:{before:jd,after:jd}}]),rename:ff("rename",[{name:"columns",type:jd}]),rollup:ff("rollup",[{name:"values",type:Fd}]),sample:ff("sample",[{name:"size",type:Ld},{name:"options",type:Pd,props:{weight:Od}}]),select:ff("select",[{name:"columns",type:jd}]),ungroup:ff("ungroup"),unorder:ff("unorder"),reify:ff("reify"),dedupe:ff("dedupe",[{name:"keys",type:Bd,default:[]}]),impute:ff("impute",[{name:"values",type:Fd},{name:"options",type:Pd,props:{expand:Bd}}]),fold:ff("fold",[{name:"values",type:Bd},{name:"options",type:Pd}]),pivot:ff("pivot",[{name:"keys",type:Bd},{name:"values",type:Bd},{name:"options",type:Pd}]),spread:ff("spread",[{name:"values",type:Bd},{name:"options",type:Pd}]),unroll:ff("unroll",[{name:"values",type:Bd},{name:"options",type:Pd,props:{drop:Bd}}]),lookup:ff("lookup",[{name:"table",type:$d},{name:"on",type:Vd},{name:"values",type:Bd}]),join:ff("join",[{name:"table",type:$d},{name:"on",type:Vd},{name:"values",type:Ud},{name:"options",type:Pd}]),cross:ff("cross",[{name:"table",type:$d},{name:"values",type:Ud},{name:"options",type:Pd}]),semijoin:ff("semijoin",[{name:"table",type:$d},{name:"on",type:Vd}]),antijoin:ff("antijoin",[{name:"table",type:$d},{name:"on",type:Vd}]),concat:ff("concat",[{name:"tables",type:zd}]),union:ff("union",[{name:"tables",type:zd}]),intersect:ff("intersect",[{name:"tables",type:zd}]),except:ff("except",[{name:"tables",type:zd}])};function yf(t){return new gf(null,null,t)}class gf extends wt{constructor(t,e,n){super(e),this._verbs=t||[],this._table=n}static from({verbs:t,table:e,params:n}){return new gf(t.map(df.from),n,e)}get[Symbol.toStringTag](){if(!this._verbs)return"Object";return`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:"")}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,e){t=t||e(this._table);for(const n of this._verbs)t=n.evaluate(t.params(this._params),e);return t}toObject(){return bf(this,"toObject")}toJSON(){return this.toObject()}toAST(){return bf(this,"toAST",{type:"Query"})}}function bf(t,e,n){return{...n,verbs:t._verbs.map((t=>t[e]())),...t._params?{params:t._params}:null,...t._table?{table:t._table}:null}}function vf(t,e){return new gf(t._verbs.concat(e),t._params,t._table)}for(const t in mf){const e=mf[t];gf.prototype["__"+t]=function(t,...n){return vf(t,e(...n))}}function _f(t,e,...n){const i=["_","$"],r=i.slice(0,n.length);return r.push('"use strict"; const '+n.map(((t,e)=>t.map(((t,n)=>`${i[e]}${n} = ${i[e]}[${n}]`)).join(", "))).join(", ")+`; return (${t}) => ${e};`),Function(...r)(...n)}var xf=t=>t;const wf=[t=>"true"===t||"false"===t,t=>"false"!==t],Sf=[t=>"NaN"===t||(t=+t)===t,t=>+t],If=[te,t=>new Date(Date.parse(t))];function Af(t){const{decimal:e}=t;return e&&"."!==e?Sf.map((t=>n=>t(n&&n.replace(e,".")))):Sf}function Tf(t,e){const n=t.length;for(let i=0;i<n;++i){const n=t[i];if(null!=n&&!e(n))return!1}return!0}function kf(t,e=0){return Tt(t-e,(t=>`col${t+e+1}`))}function Cf(t,e,n){let i=t();const r=i.length,s=+n.autoMax||1e3,a=Tt(r,(()=>[]));e=e?e.length<r?[...e,kf(r,e.length)]:e:kf(r);let o=0;for(;o<s&&i;++o,i=t())for(let t=0;t<r;++t)a[t].push(""===i[t]?null:i[t]);const c=function(t,e,n){const{parse:i={}}=n,r=!1===n.autoType;return t.map(((t,s)=>At(i[t])?i[t]:r?xf:function(t,e){const n=[wf,Af(e),If],i=n.length;for(let e=0;e<i;++e){const[i,r]=n[e];if(Tf(t,i))return r}return xf}(e[s],n)))}(e,a,n);for(c.forEach(((t,e)=>{if(t===xf)return;const n=a[e];for(let e=0;e<o;++e)null!=n[e]&&(n[e]=t(n[e]))}));i;i=t())for(let t=0;t<r;++t)a[t].push(i[t]?c[t](i[t]):null);const u={};return e.forEach(((t,e)=>u[t]=a[e])),new zl(u,e)}const Mf={},Ef={},Nf=34,Df=10,Of=13;function Bf(t,e={}){const n=function(t,{delimiter:e=",",skip:n,comment:i}){1!==e.length&&St(`Text "delimiter" should be a single character, found "${e}"`);const r=e.charCodeAt(0);let s,a=t.length,o=0,c=a<=0,u=!1;function l(){if(c)return Ef;if(u)return u=!1,Mf;const e=o;let n,i;if(t.charCodeAt(e)===Nf){for(;o++<a&&t.charCodeAt(o)!==Nf||t.charCodeAt(++o)===Nf;);return(n=o)>=a?c=!0:(i=t.charCodeAt(o++))===Df?u=!0:i===Of&&(u=!0,t.charCodeAt(o)===Df&&++o),t.slice(e+1,n-1).replace(/""/g,'"')}for(;o<a;){if((i=t.charCodeAt(n=o++))===Df)u=!0;else if(i===Of)u=!0,t.charCodeAt(o)===Df&&++o;else if(i!==r)continue;return t.slice(e,n)}return c=!0,t.slice(e,a)}return t.charCodeAt(a-1)===Df&&--a,t.charCodeAt(a-1)===Of&&--a,function(t,e,n){let i=+e||0;for(;--i>=0;)t();return n?()=>{let e;for(;!e;){if(!n(e=t()))return e;e=null}}:t}((function(){if((s=l())!==Ef){const t=[];for(;s!==Mf&&s!==Ef;)t.push(s),s=l();return t}}),n,i&&(t=>(t&&t[0]||"").startsWith(i)))}(t,e);return Cf(n,!1!==e.header?n():e.names,e)}function Lf(t){const e=t.length;for(let n=0;n<e;++n){const e=t.charCodeAt(n);if(e<48||e>57)return!1}return!0}function Ff(t,e){const n=Ut();return e.forEach(((e,i)=>{const r=Ot(e)?e:i;if(r){const e=t.column(i)||St(`Unrecognized column: ${i}`);n.add(r,e)}})),t.create(n)}function Vf(t,e,{before:n,after:i}={}){const r=null!=n,s=null!=i;r||s||St("relocate requires a before or after option."),r&&s&&St("relocate accepts only one of the before or after options."),e=Ul(t,e);const a=[...Ul(t,r?n:i).keys()],o=r?a[0]:a.pop(),c=new Map;return t.columnNames().forEach((t=>{const n=!e.has(t);if(t===o){s&&n&&c.set(t,t);for(const[t,n]of e)c.set(t,n);if(s)return}n&&c.set(t,t)})),Ff(t,c)}function Uf(t,e=(t=>t),n=""){const i=t.length;if(!i)return"";let r=e(t[0],0);for(let s=1;s<i;++s)r+=n+e(t[s],s);return r}function Pf(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Rf(t){return ge(t)?t:+t}class jf{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:function(t,e=0,n=t.length){let i=n?t[e++]:Rt;for(let r=e;r<n;++r)i>t[r]&&(i=t[r]);return i}(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:function(t,e=0,n=t.length){let i=n?t[e++]:Rt;for(let r=e;r<n;++r)i<t[r]&&(i=t[r]);return i}(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(Pf)),function(t,e){const n=t.length;if(!n)return Rt;if((e=+e)<=0||n<2)return Rf(t[0]);if(e>=1)return Rf(t[n-1]);const i=(n-1)*e,r=Math.floor(i),s=Rf(t[r]);return ge(s)?s:s+(Rf(t[r+1])-s)*(i-r)}(this._sorted,t)}}const $f=(t,e,n)=>_f(e,"{"+Uf(t,((t,i)=>`_${i}.${n}(${e});`))+"}",t);function zf(t,e){const{ops:n,output:i}=function(t,e){const n={},i=[];function r(t,s=[]){const a=t+":"+s;if(n[a])return n[a];const o=hn(t),c=o.create(...s);return e<0&&o.stream&&o.stream.forEach((t=>r(t,[]))),o.req&&o.req.forEach((t=>r(t,[]))),n[a]=c,i.push(c),c}const s=t.map((t=>{const e=r(t.name,t.params);return e.output=t.id,e}));return{ops:i,output:s}}(t,e),r=t[0].fields,s=r.length;return new(0===s?Hf:1===s?qf:2===s?Yf:St("Unsupported field count: "+s))(r,n,i,e)}class Hf extends ql{constructor(t,e,n,i){super(n),this._op=e,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach((e=>e.init(t))),t.values&&(t.list=new jf),t}write(t,e,n){const i=this._outputs,r=i.length;for(let s=0;s<r;++s)e[i[s].output][n]=i[s].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class qf extends Hf{constructor(t,e,n,i){super(t,e,n,i);const r=["state","v1","v2"];this._add=$f(e,r,"add"),this._rem=$f(e,r,"rem")}add(t,e,n){const i=this._fields[0](e,n);++t.count,Ht(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,e,n){const i=this._fields[0](e,n);--t.count,Ht(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class Yf extends Hf{constructor(t,e,n,i){super(t,e,n,i);const r=["state","v1","v2"];this._add=$f(e,r,"add"),this._rem=$f(e,r,"rem")}add(t,e,n){const i=this._fields[0](e,n),r=this._fields[1](e,n);++t.count,Ht(i)&&Ht(r)&&(++t.valid,t.list&&t.list.add([i,r]),this._add(t,i,r))}rem(t,e,n){const i=this._fields[0](e,n),r=this._fields[1](e,n);--t.count,Ht(i)&&Ht(r)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,r))}}function Gf(t,e,n){if(e.length){const i=t.data(),{keys:r}=t.groups()||{},s=Wf(t,e),a=r?(t,e)=>s[t][r[e]]:t=>s[t][0];n=n.map((t=>e=>t(e,i,a)))}return n}function Wf(t,e,n){if(!e.length)return n;const i=Kf(e),r=t.groups(),s=r?r.size:1;return n=n||Tt(e.length,(()=>Array(s))),s>1?i.forEach((e=>{const i=Jf(t,e,r);for(let t=0;t<s;++t)e.write(i[t],n,t)})):i.forEach((e=>{const i=Qf(t,e);e.write(i,n,0)})),n}function Kf(t,e){const n=[],i={};for(const e of t){const t=e.fields.map((t=>t+"")).join(",");(i[t]||(i[t]=[])).push(e)}for(const t in i)n.push(zf(i[t],e));return n}function Qf(t,e){const n=e.init(),i=t.totalRows(),r=t.data(),s=t.mask();if(t.isOrdered()){const s=t.indices();for(let t=0;t<i;++t)e.add(n,s[t],r)}else if(s)for(let t=s.next(0);t>=0;t=s.next(t+1))e.add(n,t,r);else for(let t=0;t<i;++t)e.add(n,t,r);return n}function Jf(t,e,n){const{keys:i,size:r}=n,s=Tt(r,(()=>e.init())),a=t.data();if(t.isOrdered()){const n=t.indices(),r=n.length;for(let t=0;t<r;++t){const r=n[t];e.add(s[i[r]],r,a)}}else if(t.isFiltered()){const n=t.mask();for(let t=n.next(0);t>=0;t=n.next(t+1))e.add(s[i[t]],t,a)}else{const n=t.totalRows();for(let t=0;t<n;++t)e.add(s[i[t]],t,a)}return s}function Zf(t,e){const{get:n,names:i,rows:r,size:s}=e,a=i.length;for(let e=0;e<a;++e){const a=t.add(i[e],Array(s)),o=n[e];for(let t=0;t<s;++t)a[t]=o(r[t])}}function Xf(t){return{left(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){const s=i+r>>>1;t(e[s],n)<0?i=s+1:r=s}return i},right(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){const s=i+r>>>1;t(e[s],n)>0?r=s:i=s+1}return i}}}const tm=Xf(Pf);const em=t=>(t.frame||[null,null]).map((t=>Number.isFinite(t)?Math.abs(t):null)),nm=t=>!!t.peers;function im(t,e,n,i={},r){const s=t.data(),a=function(t,e){const n={};return t.forEach((t=>{const e=em(t),i=nm(t),r=`${e},${i}`,{aggOps:s,winOps:a}=n[r]||(n[r]={frame:e,peers:i,aggOps:[],winOps:[]});cn(t.name)?s.push(t):a.push(function(t){const{id:e,name:n,fields:i=[],params:r=[]}=t,s=pn(n).create(...r);return i.length&&(s.get=i[0]),s.id=e,s}(t))})),Object.values(n).map((t=>function(t,e,n,i,r){let s,a,o,c,u;const l=t=>a[t-1]===a[t],h=i.length,p=r.length,d=i.length?_f(["w","r","k"],"{"+Uf(i,((t,e)=>`r[_${e}.id][k]=_${e}.value(w,_${e}.get);`))+"}",i):()=>{},f={i0:0,i1:0,index:0,size:0,peer:l,init(t,e,n,l){f.index=f.i0=f.i1=0,f.size=e.length,s=t,a=e,c=n,u=l,o=r?r.map((t=>t.init())):null;for(let t=0;t<h;++t)i[t].init();return f},value:(e,n)=>n(s[e],t),step(i){const[h,m]=e,y=f.size,g=f.i0,b=f.i1;f.i0=null!=h?Math.max(0,i-Math.abs(h)):0,f.i1=null!=m?Math.min(y,i+Math.abs(m)+1):y,f.index=i,n&&(f.i0>0&&l(f.i0)&&(f.i0=tm.left(a,a[f.i0])),f.i1<y&&l(f.i1)&&(f.i1=tm.right(a,a[f.i1-1])));for(let e=0;e<p;++e){const n=r[e],i=o[e];for(let e=g;e<f.i0;++e)n.rem(i,s[e],t);for(let e=b;e<f.i1;++e)n.add(i,s[e],t);n.write(i,c,u)}return d(f,c,u),c}};return f}(e,t.frame,t.peers,t.winOps,Kf(t.aggOps,null!=t.frame[0]?-1:1))))}(r,s),o=a.length,c=_f(["r","d","op"],"{"+Uf(e,((t,e)=>`_${e}[r] = $${e}(r, d, op);`))+"}",e,n);t.partitions().forEach(((e,n)=>{const r=e.length,u=function(t,e){if(t.isOrdered()){const n=t.comparator(),i=t.data(),r=e.length,s=new Uint32Array(r);for(let t=1,a=0;t<r;++t)s[t]=n(e[t-1],e[t],i)?++a:a;return s}return e}(t,e);for(let t=0;t<o;++t)a[t].init(e,u,i,n);const l=t=>i[t][n];for(let t=0;t<r;++t){for(let e=0;e<o;++e)a[e].step(t);c(e[t],s,l)}}))}function rm(t){return un(t.name)||t.frame&&(Number.isFinite(t.frame[0])||Number.isFinite(t.frame[1]))}function sm(t,{names:e,exprs:n,ops:i},r={}){const s=t.totalRows(),a=Ut(r.drop?null:t),o=e.map((t=>a.add(t,Array(s)))),[c,u]=function(t){const e=[],n=[],i=t.length;for(let r=0;r<i;++r){const i=t[r];i.id=r,(rm(i)?n:e).push(i)}return[e,n]}(i),l=t.isGrouped()?t.groups().size:1,h=Wf(t,c,Tt(i.length,(()=>Array(l))));return u.length?im(t,o,n,h,u):function(t,e,n,i){const r=t.mask(),s=t.data(),{keys:a}=t.groups()||{},o=a?(t,e)=>i[t][a[e]]:t=>i[t][0],c=e.length;for(let i=0;i<c;++i){const a=n[i],c=e[i];if(r)for(let t=r.next(0);t>=0;t=r.next(t+1))c[t]=a(t,s,o);else{const e=t.totalRows();for(let t=0;t<e;++t)c[t]=a(t,s,o)}}}(t,o,n,h),t.create(a)}const am=2147483648;class om{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let e=0;for(let n=0;n<t;++n)for(let t=this._bits[n];t;++e)t&=t-1;return e}get(t){return this._bits[t>>5]&am>>>t}set(t){this._bits[t>>5]|=am>>>t}clear(t){this._bits[t>>5]&=~(am>>>t)}scan(t){for(let e=this.next(0);e>=0;e=this.next(e+1))t(e)}next(t){const e=this._bits,n=e.length;let i=t>>5,r=e[i]&4294967295>>>t;for(;i<n;r=e[++i])if(0!==r)return(i<<5)+Math.clz32(r);return-1}nth(t){let e=this.next(0);for(;t--&&e>=0;)e=this.next(e+1);return e}not(){const t=this._bits,e=t.length;for(let n=0;n<e;++n)t[n]=~t[n];const n=this._size%32;return n&&(t[e-1]&=am>>n-1),this}and(t){if(t){const e=this._bits,n=t._bits,i=e.length;for(let t=0;t<i;++t)e[t]&=n[t]}return this}or(t){if(t){const e=this._bits,n=t._bits,i=e.length;for(let t=0;t<i;++t)e[t]|=n[t]}return this}}function cm(t,{names:e=[],exprs:n=[],ops:i=[]},r={}){if(!e.length)return t;const s=r.limit>0?+r.limit:1/0,a=r.index?!0===r.index?"index":r.index+"":null,o=new Set(r.drop),c=Gf(t,i,n),u=Ut(),l=new Set(e),h=[],p=[],d=[];t.columnNames().forEach((e=>{if(!o.has(e)){const n=u.add(e,[]);l.has(e)||(h.push(t.column(e)),p.push(n))}})),e.forEach((t=>{o.has(t)||(u.has(t)||u.add(t,[]),d.push(u.data[t]))}));const f=a?u.add(a,[]):null;let m=0;const y=h.length,g=d.length,b=(t,e)=>{for(let n=0;n<y;++n)p[n].length=m+e,p[n].fill(h[n].get(t),m,m+e)},v=f?(t,e)=>{for(let n=0;n<e;++n)f[t+n]=n}:()=>{};if(1===g){const e=c[0],n=d[0];t.scan(((t,i)=>{const r=_t(e(t,i)),a=Math.min(r.length,s);b(t,a);for(let t=0;t<a;++t)n[m+t]=r[t];v(m,a),m+=a}))}else t.scan(((t,e)=>{let n=0;const i=c.map((i=>{const r=_t(i(t,e));return n=Math.min(Math.max(n,r.length),s),r}));b(t,n);for(let t=0;t<g;++t){const e=d[t],r=i[t];for(let t=0;t<n;++t)e[m+t]=r[t]}v(m,n),m+=n}));return t.create(u.new())}function um(t,e,n,i={window:!1}){const r=new Map,s=n=>{Ot(n=It(n)?e.columnName(n):n)?r.set(n,Kd(n)):At(n)?Ul(e,n).forEach(s):Nt(n)?Vl(r,n):St(`Invalid ${t} value: ${n+""}`)};return _t(n).forEach(s),i.preparse&&i.preparse(r),Nd(r,{table:e,...i})}function lm(t,e,n,i){const r=n&&n.length;return function(t,{names:e,exprs:n,ops:i},r){const s=Gf(t,i,n),a=r?null:Ut(t),o=t.totalRows();return e.forEach(((e,n)=>{const i=t.column(e),c=r?i.data:a.add(e,Array(o)),u=s[n];t.scan((t=>{const e=i.get(t);c[t]=Ht(e)?e:u(t)}))})),r?t:t.create(a)}(r?function(t,e,n){const i=t.groups(),r=t.data(),s=(i?i.names:[]).concat(e),a=(i?i.get:[]).concat(e.map((e=>t.getter(e)))),o=new Set,c=Xe(a);t.scan(((t,e)=>o.add(c(t,e))));const u=t.columnNames(),l=Ut(),h=u.map((t=>l.add(t,[])));u.forEach(((e,n)=>{const i=r[e],s=h[n];t.scan((t=>s.push(i.get(t))))}));const p=Xe(a.map(((t,e)=>t=>t[e]))),d=_f("v","{"+h.map(((t,e)=>`_${e}.push(v[$${e}]);`)).join("")+"}",h,u.map((t=>s.indexOf(t))));if(i){let t=i.keys.length;const e=n.reduce(((t,e)=>t*e.length),i.size),r=new Uint32Array(e+(t-o.size));r.set(i.keys),hm(i,n,((e,n)=>{o.has(p(e))||(d(e),r[t++]=n[0])})),l.groupby({...i,keys:r})}else hm(i,n,(t=>{o.has(p(t))||d(t)}));return t.create(l.new())}(t,n,i):t,e,r)}function hm(t,e,n){const i=t?t.get.length:0,r=t?1:0,s=r+e.length,a=new Int32Array(s),o=new Int32Array(s),c=[];if(t){const{get:e,rows:n,size:r}=t;a[0]=r,c.push(((t,r)=>{const s=n[r];for(let n=0;n<i;++n)t[n]=e[n](s)}))}e.forEach(((t,e)=>{const n=e+i;a[e+r]=t.length,c.push(((e,i)=>e[n]=t[i]))}));const u=Array(i+e.length);for(let t=0;t<s;++t)c[t](u,0);n(u,o);for(let t=s-1;t>=0;){const e=++o[t];e<a[t]?(c[t](u,e),n(u,o),t=s-1):(o[t]=0,c[t](u,0),--t)}}function pm(t,{names:e,exprs:n,ops:i}){const r=Ut(),s=t.groups();return s&&Zf(r,s),function(t,e,n,i=[],r){if(!e.length)return;const s=n?n.size:1,a=(t,e)=>i[t][e],o=t.length;for(let n=0;n<o;++n){const o=e[n];if(null!=o.field)r.add(t[n],i[o.field]);else if(s>1){const e=r.add(t[n],Array(s));for(let t=0;t<s;++t)e[t]=o(t,null,a)}else r.add(t[n],[o(0,null,a)])}}(e,n,s,Wf(t,i),r),t.create(r.new())}function dm(t){t.forEach(((e,n)=>e.field?t.set(n,Ie(e+"")):0))}function fm(t,e){const n=new Map;return t.scan(((t,i)=>{const r=e(t,i);null!=r&&r==r&&n.set(r,t)})),n}function mm(t,e,n,{names:i,exprs:r},s={}){const a=t.data(),o=t.indices(!1),c=o.length,u=new Int32Array(c),l=e.data(),h=e.indices(!1),p=h.length,d=new Int32Array(p),f=i.length,m=Ut(),y=Array(f),g=Array(f);for(let t=0;t<i.length;++t)y[t]=m.add(i[t],[]),g[t]=r[t];const b=function(t,e){const n=["i","a","j","b"];return _f(n,"{"+Uf(t,((t,e)=>`_${e}.push($${e}(${n}));`))+"}",t,e)}(y,g);if((vt(n)?gm:ym)(b,n,a,l,o,h,u,d,c,p),s.left)for(let t=0;t<c;++t)u[t]||b(o[t],a,-1,l);if(s.right)for(let t=0;t<p;++t)d[t]||b(-1,a,h[t],l);return t.create(m.new())}function ym(t,e,n,i,r,s,a,o,c,u){for(let l=0;l<c;++l){const c=r[l];for(let r=0;r<u;++r){const u=s[r];e(c,n,u,i)&&(t(c,n,u,i),a[l]=1,o[r]=1)}}}function gm(t,[e,n],i,r,s,a,o,c,u,l){let h,p,d,f,m,y,g,b,v=t;u>=l?(h=i,p=e,d=o,f=s,m=r,y=n,g=c,b=a):(h=r,p=n,d=c,f=a,m=i,y=e,g=o,b=s,v=(e,n,i,r)=>t(i,r,e,n));const _=function(t,e,n){const i=new Map,r=t.length;for(let s=0;s<r;++s){const r=n(t[s],e);null!=r&&r==r&&(i.has(r)?i.get(r).push(s):i.set(r,[s]))}return i}(b,m,y),x=f.length;for(let t=0;t<x;++t){const e=f[t],n=_.get(p(e,h));if(n){const i=n.length;for(let t=0;t<i;++t){const i=n[t];v(e,h,b[i],m),g[i]=1}d[t]=1}}}function bm(t,e,n){const i=new Map;_t(n).forEach(((n,r)=>{Ot(n=It(n)?e.columnName(n):n)?i.set(r,Kd(n)):At(n)||Nt(n)&&n.expr?i.set(r,n):St(`Invalid ${t} key value: ${n+""}`)}));return Xe(Nd(i,{table:e,aggregate:!1,window:!1}).exprs,!0)}function vm(t,e,n){if(n)Ot(n)?n=[n,n]:vt(n)&&1===n.length&&(n=[n[0],n[0]]);else{const i=function(t,e){const n=new Set(e);return t.filter((t=>n.has(t)))}(t.columnNames(),e.columnNames());i.length||St("Natural join requires shared column names."),n=[i,i]}return n}function _m(t,e,n,i){return n.length!==i.length&&St("Mismatched number of join keys"),[bm("join",t,n),bm("join",e,i)]}const xm={aggregate:!1,window:!1,index:1};function wm(t,e,n,i,r={}){n=vm(t,e,n);const s={join:[t,e]};let a;if(vt(n)){const[s,o]=n.map(_t);a=_m(t,e,s,o),i||(i=function(t,e,n,i){const r=[];e.forEach(((t,e)=>Ot(t)&&t===n[e]?r.push(t):0));const s=$l(r);if(i.left&&i.right){const e=new Set(r);return[t.columnNames().map((t=>{const n=`[${be(t)}]`;return e.has(t)?{[t]:`(a, b) => a${n} == null ? b${n} : a${n}`}:t})),s]}return i.right?[s,jl()]:[jl(),s]}(t,s,o,r))}else a=Nd({on:n},s).exprs[0],i||(i=[jl(),jl()]);return mm(t,e,a,function(t,e,n,i,r=[]){if(vt(n)){let s,a,o,c=n.length;s=a=o={names:[],exprs:[]},c--&&(s=um("join",t,n[0],i)),c--&&(a=um("join",e,n[1],xm)),c--&&(o=Nd(n[2],i));const u=new Set,l=new Set(s.names);return a.names.forEach((t=>{l.has(t)&&u.add(t)})),u.size&&(""!==r[0]&&Sm(s.names,u,r[0]||"_1"),""!==r[1]&&Sm(a.names,u,r[1]||"_2")),{names:s.names.concat(a.names,o.names),exprs:s.exprs.concat(a.exprs,o.exprs)}}return Nd(n,i)}(t,e,i,s,r&&r.suffix),r)}function Sm(t,e,n){t.forEach(((i,r)=>e.has(i)?t[r]=i+n:0))}function Im(t,e,n,[i,r]){const s=fm(n,r);e.scan(((e,n)=>{s.get(i(e,n))>=0&&t.set(e)}))}function Am(t,e,n,i){const r=e.numRows(),s=n.numRows(),a=e.data(),o=n.data();if(e.isFiltered()||n.isFiltered()){const c=e.indices(!1),u=n.indices(!1);for(let e=0;e<r;++e){const n=c[e];for(let e=0;e<s;++e)if(i(n,a,u[e],o)){t.set(n);break}}}else for(let e=0;e<r;++e)for(let n=0;n<s;++n)if(i(e,a,n,o)){t.set(e);break}}function Tm(t,e,n,i){n=vm(t,e,n);return function(t,e,n,i={}){const r=new om(t.totalRows());return(vt(n)?Im:Am)(r,t,e,n),i.anti&&r.not().and(t.mask()),t.create({filter:r})}(t,e,vt(n)?_m(t,e,...n.map(_t)):Nd({on:n},{join:[t,e]}).exprs[0],i)}const km=(t,e)=>null!=t?t:e;function Cm(t,e,n,i={}){const{keys:r,keyColumn:s}=function(t,e,n){const i=n.limit>0?+n.limit:1/0,r=km(n.sort,!0),s=km(n.keySeparator,"_"),a=Gf(t,e.ops,e.exprs),o=1===a.length?a[0]:(t,e)=>a.map((n=>n(t,e))).join(s),c=Array(t.totalRows());t.scan(((t,e)=>c[t]=o(t,e)));const u=Wf(t.ungroup(),[{id:0,name:"array_agg_distinct",fields:[t=>c[t]],params:[]}])[0][0],l=r?u.sort():u;return{keys:Number.isFinite(i)?l.slice(0,i):l,keyColumn:c}}(t,e,i),a=km(i.valueSeparator,"_"),o=n.names.length>1?(t,e)=>e+a+r[t]:t=>r[t],c=r.map((e=>Wf(t,n.ops.map((t=>{if("count"===t.name){const n=t=>e===s[t]?1:NaN;return n.toString=()=>e+":1",{...t,name:"sum",fields:[n]}}const n=t.fields.map((t=>{const n=(n,i)=>e===s[n]?t(n,i):NaN;return n.toString=()=>e+":"+t,n}));return{...t,fields:n}})))));return t.create(function({names:t,exprs:e},n,i,r){const s=i?i.size:1,a=Ut(),o=r.length,c=t.length;let u;const l=(t,e)=>u[t][e];i&&Zf(a,i);for(let i=0;i<c;++i){const c=e[i];if(null!=c.field)for(let e=0;e<o;++e)a.add(n(e,t[i]),r[e][c.field]);else if(s>1)for(let e=0;e<o;++e){u=r[e];const o=a.add(n(e,t[i]),Array(s));for(let t=0;t<s;++t)o[t]=c(t,null,l)}else for(let e=0;e<o;++e)u=r[e],a.add(n(e,t[i]),[c(0,null,l)])}return a.new()}(n,o,t.groups(),c))}function Mm(t){t.forEach(((e,n)=>e.field?t.set(n,xe(e+"")):0))}function Em(t,e){return pm(t,Nd(e,{table:t,aggronly:!0,window:!1}))}function Nm(t,e,n,i){return(e?i?Om:Dm:i?Lm:Bm)(t.length,t,n,i)}function Dm(t,e,n){const i=n.length;for(let r=0;r<t;++r)e[r]=n[i*he()|0];return e}function Om(t,e,n,i){const r=n.length,s=new Float64Array(r);let a=0;for(let t=0;t<r;++t)s[t]=a+=i(n[t]);const o=Xf(Pf).right;for(let i=0;i<t;++i)e[i]=n[o(s,a*he())];return e}function Bm(t,e,n){const i=n.length;if(t>=i)return n;for(let i=0;i<t;++i)e[i]=n[i];for(let r=t;r<i;++r){const i=r*he();i<t&&(e[0|i]=n[r])}return e}function Lm(t,e,n,i){const r=n.length;if(t>=r)return n;const s=new Float32Array(r),a=new Uint32Array(r);for(let t=0;t<r;++t)a[t]=t,s[t]=-Math.log(he())/i(n[t]);a.sort(((t,e)=>s[t]-s[e]));for(let i=0;i<t;++i)e[i]=n[a[i]];return e}function Fm(t,e,n,i={}){const{replace:r,shuffle:s}=i,a=t.partitions(!1);let o=0;e=a.map(((t,n)=>{let i=e(n);return o+=i=r?i:Math.min(t.length,i),i}));const c=new Uint32Array(o);let u=0;return a.forEach(((t,i)=>{const s=e[i],a=c.subarray(u,u+=s);r||s!==t.length?Nm(a,r,t,n):a.set(t)})),!1!==s&&(a.length>1||!r)&&function(t,e=0,n=t.length){let i=n-(e=+e);for(;i;){const n=he()*i--|0,r=t[i+e];t[i+e]=t[n+e],t[n+e]=r}}(c),t.reify(c)}const Vm=t=>e=>t.get(e)||0;function Um(t,{names:e,exprs:n,ops:i=[]},r={}){if(0===e.length)return t;const s=1===e.length&&r.as||[],a=null==r.drop||!!r.drop,o=null==r.limit?s.length||1/0:Math.max(1,+r.limit||1),c=Gf(t,i,n),u=Ut(),l=e.reduce(((t,e,n)=>t.set(e,n)),new Map),h=(e,n)=>{const i=function(t,e,n){const i=t.totalRows(),r=[];return t.scan(((t,s)=>{const a=_t(e(t,s)),o=Math.min(a.length,n);for(;r.length<o;)r.push(Array(i).fill(Rt));for(let e=0;e<o;++e)r[e][t]=a[e]})),r}(t,c[e],o),r=i.length;for(let t=0;t<r;++t)u.add(s[t]||`${n}_${t+1}`,i[t])};return t.columnNames().forEach((e=>{l.has(e)?(a||u.add(e,t.column(e)),h(l.get(e),e),l.delete(e)):u.add(e,t.column(e))})),l.forEach(h),t.create(u)}function Pm(t,{names:e=[],exprs:n=[],ops:i=[]}){const r=e.length;if(0===r)return null;if(1===r&&!t.isFiltered()&&n[0].field){const i=t.column(n[0].field);if(i.groups)return i.groups(e)}let s=Gf(t,i,n);const a=Xe(s),o=t.totalRows(),c=new Uint32Array(o),u={},l=[],h=t.data(),p=t.mask();if(p)for(let t=p.next(0);t>=0;t=p.next(t+1)){const e=a(t,h)+"",n=u[e];c[t]=null!=n?n:u[e]=l.push(t)-1}else for(let t=0;t<o;++t){const e=a(t,h)+"",n=u[e];c[t]=null!=n?n:u[e]=l.push(t)-1}return i.length||(s=s.map((t=>e=>t(e,h)))),{keys:c,get:s,names:e,rows:l,size:l.length}}const Rm=(t,e,n,i)=>`((u = ${t}) < (v = ${e}) || u == null) && v != null ? ${n}\n    : (u > v || v == null) && u != null ? ${i}\n    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}\n    : v !== v && u === u ? ${i} : `;var jm={__antijoin:(t,e,n)=>Tm(t,e,n,{anti:!0}),__count:(t,e={})=>Em(t,{[e.as||"count"]:we()}),__cross:(t,e,n,i)=>wm(t,e,(()=>!0),n,{...i,left:!0,right:!0}),__concat:function(t,e){const n=t.numRows(),i=n+e.reduce(((t,e)=>t+e.numRows()),0);if(n===i)return t;const r=[t,...e],s=Ut();return t.columnNames().forEach((t=>{const e=Array(i);let n=0;r.forEach((i=>{const r=i.column(t)||{get:()=>Rt};i.scan((t=>e[n++]=r.get(t)))})),s.add(t,e)})),t.create(s.new())},__dedupe:function(t,e=[]){return t.groupby(e.length?e:t.columnNames()).filter("row_number() === 1").ungroup().reify()},__derive:function(t,e,n={}){const i=sm(t,Nd(e,{table:t}),n);return n.drop||null==n.before&&null==n.after?i:Vf(i,Object.keys(e).filter((e=>!t.column(e))),n)},__except:function(t,e){if(0===e.length)return t;const n=t.columnNames();return e.reduce(((t,e)=>t.antijoin(e.select(n))),t).dedupe()},__filter:function(t,e){const n=Nd({p:e},{table:t});let i=n.exprs[0];if(n.ops.length){const{data:e}=sm(t,n,{drop:!0}).column("p");i=t=>e[t]}return function(t,e){const n=t.totalRows(),i=t.mask(),r=t.data(),s=new om(n);if(i)for(let t=i.next(0);t>=0;t=i.next(t+1))e(t,r)&&s.set(t);else for(let t=0;t<n;++t)e(t,r)&&s.set(t);return t.create({filter:s})}(t,i)},__fold:function(t,e,n){return function(t,{names:e=[],exprs:n=[],ops:i=[]},r={}){if(0===e.length)return t;const[s="key",a="value"]=r.as||[],o=Gf(t,i,n);return cm(t,{names:[s,a],exprs:[()=>e,(t,e)=>o.map((n=>n(t,e)))]},{...r,drop:e})}(t,um("fold",t,e),n)},__impute:function(t,e,n={}){if((e=Nd(e,{table:t})).names.forEach((e=>t.column(e)?0:St(`Invalid impute column ${be(e)}`))),n.expand){const i={preparse:dm,aggronly:!0},r=um("impute",t,n.expand,i),s=pm(t.ungroup(),r);return lm(t,e,r.names,r.names.map((t=>s.get(t,0))))}return lm(t,e)},__intersect:function(t,e){const n=t.columnNames();return e.length?e.reduce(((t,e)=>t.semijoin(e.select(n))),t).dedupe():t.reify([])},__join:wm,__lookup:function(t,e,n,i){return function(t,e,[n,i],{names:r,exprs:s,ops:a}){const o=Ut(t),c=t.totalRows();r.forEach((t=>o.add(t,Array(c).fill(Rt))));const u=fm(e,i),l=_f(["lr","rr","data"],"{"+Uf(r,((t,e)=>`_[${e}][lr] = $[${e}](rr, data);`))+"}",r.map((t=>o.data[t])),Gf(e,a,s)),h=e.data();return t.scan(((t,e)=>{const i=u.get(n(t,e));i>=0&&l(t,i,h)})),t.create(o)}(t,e,[bm("lookup",t,(n=vm(t,e,n))[0]),bm("lookup",e,n[1])],um("lookup",e,i))},__pivot:function(t,e,n,i){return Cm(t,um("fold",t,e),um("fold",t,n,{preparse:Mm,aggronly:!0}),i)},__relocate:Vf,__rename:function(t,e){const n=new Map;return t.columnNames((t=>(n.set(t,t),0))),Ff(t,Ul(t,e,n))},__rollup:Em,__sample:function(t,e,n={}){return Fm(t,function(t,e){return It(e)?()=>e:Vm(pm(t,Nd({size:e},{table:t,window:!1})).column("size"))}(t,e),function(t,e){return null==e?null:(e=It(e)?t.columnName(e):e,Vm(Ot(e)?t.column(e):sm(t,Nd({w:e},{table:t}),{drop:!0}).column("w")))}(t,n.weight),n)},__select:function(t,e){return Ff(t,Ul(t,e))},__semijoin:Tm,__spread:function(t,e,n){return Um(t,um("spread",t,e),n)},__union:function(t,e){return t.concat(e).dedupe()},__unroll:function(t,e,n){return cm(t,um("unroll",t,e),n&&n.drop?{...n,drop:um("unroll",t,n.drop).names}:n)},__groupby:function(t,e){return function(t,e){return t.create({groups:Pm(t,e)})}(t,um("groupby",t,e))},__orderby:function(t,e){return function(t,e){return t.create({order:e})}(t,function(t,e){let n=-1;const i=new Map,r=t=>i.set(++n+"",t);return e.forEach((e=>{const n=null!=e.expr?e.expr:e;if(Nt(n)&&!At(n))for(const t in n)r(n[t]);else r(It(n)?Kd(e,t.columnName(n)):Ot(n)?Kd(e):At(n)?e:St("Invalid orderby field: "+(e+"")))})),function(t,e){const n=[],i=[],r=[];let s=null,a="0",o="0";t.isGrouped()&&(s=t.groups().keys,a="ka",o="kb");const{ops:c}=Nd(e,{table:t,value:(t,e)=>{if(n.push(t),e.escape){const t=t=>`fn[${r.length}](${t}, data)`;i.push([t("a"),t("b")]),r.push(e.escape)}else i.push([Je(e,{index:"a",op:a}),Je(e,{index:"b",op:o})])},window:!1}),u=Wf(t,c),l=(t,e)=>u[t][e],h=n.length;let p="return (a, b) => {"+(l&&t.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let t=0;t<h;++t){const r=e.get(n[t]).desc?-1:1,[s,a]=i[t];p+=Rm(s,a,-r,r)}return p+="0;};",Function("op","keys","fn","data",p)(l,s,r,t.data())}(t,i)}(t,e))},__ungroup:function(t){return t.isGrouped()?t.create({groups:null}):t},__unorder:function(t){return t.isOrdered()?t.create({order:null}):t},__reduce:function(t,e){const n=Ut(),i=t.groups(),{get:r,names:s=[],rows:a,size:o=1}=i||{},c=new Uint32Array(o+1);s.forEach((t=>n.add(t,null)));const u=i?Jf(t,e,i):[Qf(t,e)];e.outputs().map((t=>n.add(t,[])));const l=c.length-1;let h=0;for(let t=0;t<l;++t)h+=c[t+1]=e.write(u[t],n.data,c[t]);if(i){const e=t.data();s.forEach(((t,i)=>{const s=n.data[t]=Array(h),u=r[i];for(let t=0,n=0;t<o;++t)s.fill(u(a[t],e),n,n+=c[t+1])}))}return t.create(n.new())}};function $m(t,e){return zl.new(t,e)}function zm(t,e={}){const n=e.using||Bf;return fetch(t,e.fetch).then((t=>t[e.as||"text"]())).then((t=>n(t,e)))}function Hm(t,e){return vt(t)?function(t,e){return zl.from(t,e)}(t):function(t,e={}){const n=Ll(e.autoType);Ot(t)&&(t=JSON.parse(t));let i,r=t.data;if(Nt(r)&&!zt(r)?t.schema&&t.schema.fields&&(i=t.schema.fields.map((t=>t.name))):r=t,n||e.parse){const t=e.parse||{};for(const e in r){const i=r[e],s=i.length;if(t[e])for(let n=0;n<s;++n)i[n]=t[e](i[n]);else if(n)for(let t=0;t<s;++t){const e=i[t];Ot(e)&&te(e)&&!Lf(e)&&(i[t]=new Date(e))}}}return new zl(r,i)}(t,e)}function qm(t){return Gd(t,{escape:!0,toString(){St("Escaped values can not be serialized.")}})}function Ym(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Gm(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Wm(t){let e,n,i;function r(t,i,r=0,s=t.length){if(r<s){if(0!==e(i,i))return s;do{const e=r+s>>>1;n(t[e],i)<0?r=e+1:s=e}while(r<s)}return r}return 2!==t.length?(e=Ym,n=(e,n)=>Ym(t(e),n),i=(e,n)=>t(e)-n):(e=t===Ym||t===Gm?t:Km,n=t,i=t),{left:r,center:function(t,e,n=0,s=t.length){const a=r(t,e,n,s-1);return a>n&&i(t[a-1],e)>-i(t[a],e)?a-1:a},right:function(t,i,r=0,s=t.length){if(r<s){if(0!==e(i,i))return s;do{const e=r+s>>>1;n(t[e],i)<=0?r=e+1:s=e}while(r<s)}return r}}}function Km(){return 0}Object.assign(zl.prototype,jm),zl.prototype;const Qm=Wm(Ym).right;Wm((function(t){return null===t?NaN:+t})).center;class Jm extends Map{constructor(t,e=Xm){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(Zm(this,t))}has(t){return super.has(Zm(this,t))}set(t,e){return super.set(function({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}(this,t),e)}delete(t){return super.delete(function({_intern:t,_key:e},n){const i=e(n);t.has(i)&&(n=t.get(i),t.delete(i));return n}(this,t))}}function Zm({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function Xm(t){return null!==t&&"object"==typeof t?t.valueOf():t}const ty=Math.sqrt(50),ey=Math.sqrt(10),ny=Math.sqrt(2);function iy(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),s=i/Math.pow(10,r),a=s>=ty?10:s>=ey?5:s>=ny?2:1;let o,c,u;return r<0?(u=Math.pow(10,-r)/a,o=Math.round(t*u),c=Math.round(e*u),o/u<t&&++o,c/u>e&&--c,u=-u):(u=Math.pow(10,r)*a,o=Math.round(t/u),c=Math.round(e/u),o*u<t&&++o,c*u>e&&--c),c<o&&.5<=n&&n<2?iy(t,e,2*n):[o,c,u]}function ry(t,e,n){return iy(t=+t,e=+e,n=+n)[2]}function sy(t,e,n){n=+n;const i=(e=+e)<(t=+t),r=i?ry(e,t,n):ry(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function ay(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let i=-1;for(let r of t)null!=(r=e(r,++i,t))&&(n<r||void 0===n&&r>=r)&&(n=r)}return n}function oy(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let i=-1;for(let r of t)null!=(r=e(r,++i,t))&&(n>r||void 0===n&&r>=r)&&(n=r)}return n}function cy(t,e){let n=0,i=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(++n,i+=e);else{let r=-1;for(let s of t)null!=(s=e(s,++r,t))&&(s=+s)>=s&&(++n,i+=s)}if(n)return i/n}function uy(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),s=new Array(r);++i<r;)s[i]=t+i*n;return s}const ly={POINT:0,RANGE:1};function hy(t){const e=[];for(const n of t){const t=Object.keys(n)[0],{value:i,cond:r,type:s}=n[t];let a;s===ly.POINT?a=yf().filter(qm((e=>e[t]===i))).reify():s===ly.RANGE&&(a=yf().filter(qm((e=>">="===r?e[t]>=i:e[t]<=i))).reify()),e.push(a)}return e}function py(t,e,n){if(n===ly.POINT)return[{[t]:{value:e[t],type:n}}];console.log("TODO")}const dy=1,fy=.1,my="__opacity__",yy="tick",gy="background",by="foreground",vy="svgPlot",_y="svg",xy="g",wy="ellipse",Sy="line",Iy="polygon",Ay="polyline",Ty="rect",ky="path",Cy="text",My="#text",Ey="style",Ny="left",Dy="right",Oy="top",By="bottom",Ly="centerX",Fy="centerY",Vy="width",Uy="height",Py="size",Ry="colorCat",jy="fill",$y="color",zy="stroke",Hy="__inferred__data__",qy="__role__",Yy="legend",Gy="axis-domain",Wy="title",Ky="orphan-tick",Qy="viewport",Jy="mark",Zy="_mark_",Xy="_I_",tg="_gI_",eg=2,ng={COUNT:"count",MIN:"min",MAX:"max",MEAN:"mean",SUM:"sum",STDEV:"stdev",MEDIAN:"median"},ig={NONE:0,DIRECT:1,SUBSET:2,AGGREGATE:3};function rg(t,e,n=eg){return"string"==typeof t&&"string"==typeof e?t.toLowerCase()===e.toLowerCase():Math.abs(t-e)<=n}function sg(t,e,n,i=eg){const r=[],s=[];let a=0,o=0;for(;a<t.length&&o<n.length;)if(rg(t[a],n[o],i)){for(;a<t.length&&o<n.length&&rg(t[a],n[o],i);)r.push(e[a++]),s.push(o++);for(;a<t.length&&o<n.length&&rg(t[a],n[o-1],i);)r.push(e[a++])}else++a;if(a<t.length)for(;a<t.length&&rg(t[a],n[o-1],i);)r.push(e[a++]);if(o<n.length)for(;o<n.length&&rg(t[a-1],n[o],i);)s.push(o++);return[r,s]}function ag(t,e=!1){const n=[Zy,Xy,tg];return e?t.columnNames():t.columnNames((t=>!n.includes(t)))}function og(t,e,n,i,r=!0){function s(){}function a(t,e,n,i){const r=t.orderby(n).array(Xy),s=e.orderby(i).array(Xy),a=Object.fromEntries(r.map(((t,e)=>[t,s[e]]))),o=Object.fromEntries(s.map(((t,e)=>[t,r[e]]))),c=ag(t).filter((t=>!n.includes(t)));let u;if(c.length){const r=t.orderby(n).select(c);u=e.orderby(i).assign(r).orderby(Xy).reify()}return{map:{fromToMap:a,toFromMap:o,mergedTable:u}}}function o(t,e,n){return{fromToQuery:yf().groupby([...t,Xy]).rollup(n),toFromQuery:yf().groupby(t).derive(n),assignTable:$m({[tg]:e})}}function c(t,e,n=!1){const r=ag(t),s=ag(e);if(!r.length||!s.length||e.numRows()>t.numRows())return null;2===r.length&&r.includes("precipitation")&&r.includes("MEAN-maximum daily temperature (c)")&&2===s.length&&s.includes("precipitation (binned)")&&s.includes("mean of temp_max");const o={},c=[],u=[],l=[];for(let n=0;n<s.length&&Object.keys(o).length<r.length&&Object.keys(o).length<s.length;++n){e=e.orderby(l.length?[...l,s[n]]:s[n]);for(let a=0;a<r.length&&Object.keys(o).length<r.length&&Object.keys(o).length<s.length;++a){if(c.includes(a))continue;const h=(t=t.orderby(u.length?[...u,r[a]]:r[a])).array(r[a]),p=t.array(Xy),d=e.array(s[n]),[f,m]=sg(h,p,d,i[s[n]]?i[s[n]]:eg);if(m.length===d.length&&f.length>=m.length){t=t.filter(qm((t=>f.includes(t[Xy])))).reify(),o[r[a]]=s[n],c.push(a),u.push(r[a]),l.push(s[n]);break}}}const h=Object.keys(o).length,p=Object.keys(o).length!==s.length;return h&&t.numRows()>e.numRows()&&(t=t.slice(0,e.numRows())),n&&h||!n&&h&&!p?{fields:o,...a(t,e,u,l)}:{}}function u(t,e,i,r){const s=ag(t),a=ag(e);if(s.length<a.length||t.numRows()<=e.numRows()||i.length>2)return null;for(let a=0;a<s.length;++a){if(r.includes(s[a]))continue;const l=yf().groupby(i);for(const[n,r]of Object.entries(ng)){const u={[n+"-"+s[a]]:Ce[r](s[a])},h=l.evaluate(t);let p=h.rollup(u);p=p.assign($m({[Xy]:uy(p.numRows())}));const d=c(p,e);if(d&&Object.keys(d).length){return{aggregation:o(i,Array.from(h._group.keys),u),...d}}}const h="string"==typeof t.column(s[a]).get(0)?[s[a]]:n.map((function(t){return{[s[a]]:qm((e=>String(Ce.bin(e[s[a]],...t)+t[2]/2)))}}));for(const n of h){const o=u(t,e,[...i,n],[...r,s[a]]);if(o)return o}}}return s.exists=function(t){return t&&Object.keys(t).length},s.direct=function(){const n=c(t,e,!1);return{link:n,type:s.exists(n)?ig.DIRECT:ig.NONE}},s.subset=function(){const n=c(t,e,!0);return{link:n,type:s.exists(n)?ig.SUBSET:ig.NONE}},s.aggregate=function(){const n=u(t,e,[],[]);return{link:n,type:s.exists(n)?ig.AGGREGATE:ig.NONE}},s.getLink=function(){const t=s.direct();if(t.type===ig.DIRECT)return t;if(r){const t=s.aggregate();if(t.type===ig.AGGREGATE)return t}const e=s.subset();return e.type===ig.SUBSET?e:{type:ig.NONE}},s}function cg(t){const{yAxis:e}=t,{scale:n,ticks:i,ordinal:r}=e,s=r.length?[]:function(t,e){const n=t.domain(),i=Math.abs(n[0]-n[1])/(e.length-1);return[...n,i]}(n,i);return[s]}function ug(t){const e={},n=.01,{xAxis:i,yAxis:r,legends:s}=t,{domain:a}=i,{domain:o}=r;i.ordinal.length||(e[i.title.innerHTML.toLowerCase()]=Math.abs(a[1]-a[0])*n),r.ordinal.length||(e[r.title.innerHTML.toLowerCase()]=Math.abs(o[1]-o[0])*n);for(const t of s)if(t.type===Py){const{scale:i}=t,r=i.domain();e[t.title.innerHTML.toLowerCase()]=Math.abs(r[0]-r[r.length-1])*n}return e}function lg(t,e,n,i,r=!1){const{aggregation:s,fields:a,map:o}=e,{fromToMap:c,toFromMap:u,mergedTable:l}=o;let h,p,d;s&&({fromToQuery:h,toFromQuery:p,assignTable:d}=s);const f={type:t,next:n,map:c,fields:a},m={type:t,next:i,map:u,fields:pg(a)};t===ig.DIRECT||t===ig.SUBSET?(i.children.push(f),n.children.push(m),r&&t===ig.SUBSET&&(n.table=l)):(i.children.push({...f,aggregation:{query:h,assignTable:d}}),n.parents.push({...m,aggregation:{query:p,assignTable:d}}))}function hg(t,e){const n=new Map;!function(t,e,n){const{table:i}=e;if(!i)return;const r=new Map;for(const n of t){const{data:t}=n;if(!t.table)continue;const s=og(i,t.table,null,ug(n)),{type:a,link:o}=s.direct(),c=[];if(a===ig.DIRECT){if(!o.map.mergedTable)return;r.set(n,!0),c.push([a,o,t])}c.forEach((t=>lg(...t,e)))}for(const s of t){const{data:t}=s;if(r.has(s))continue;if(!t.table)continue;const{type:a,link:o}=og(i,t.table,cg(s),ug(s),!0).aggregate();a===ig.AGGREGATE&&(lg(a,o,t,e),n.set(s,!0))}}(t,e,n),function(t,e){for(let n=0;n<t.length;++n){const{data:i}=t[n];if(i.table)for(let r=n+1;r<t.length;++r){const{data:s}=t[r];if(!s.table)continue;const{type:a,link:o}=og(i.table,s.table,cg(t[r]),ug(t[r]),!e.has(t[r])).getLink();if(a!==ig.NONE){if(a===ig.SUBSET)continue;lg(a,o,s,i,!0),a===ig.AGGREGATE&&e.set(t[r],!0)}else{const{type:r,link:a}=og(s.table,i.table,cg(t[n]),ug(t[n]),!e.has(t[n])).getLink();r!==ig.NONE&&(lg(r,a,i,s,!0),r===ig.AGGREGATE&&e.set(t[n],!0))}}}}(t,n)}function pg(t){return Object.fromEntries(Object.keys(t).map((e=>[t[e],e])))}function dg(t,e){return e.map((e=>t[e]))}function fg(t,e){return Object.fromEntries(Object.keys(t).filter((t=>t in e)).map((n=>[e[n],t[n]])))}function mg(t,e){return Object.fromEntries(Object.keys(t).map((n=>n in e?[n,e[n]]:[n,t[n]])))}function yg(t,e){let{table:n}=t;for(const[t,i]of e){const{query:e}=t;n=e.evaluate(n);const r=dg(pg(i),Array.from(n._group.keys)).map((t=>Number(t)));n=n.assign($m({[tg]:r}))}return n.ungroup()}function gg(t,e,n){const i=t.array(Xy).map((t=>n[t]));return[t.assign({[Xy]:i}),e.filter(qm((t=>i.includes(t[Xy])))).reify()].map((t=>t.filter(qm((t=>null!=t[Xy])))))}function bg(t,e,n=!1){const i=new Map;function r(t,e){if(i.has(t))return;i.set(t,!0);const{active:n,table:s}=t;n.selected=e;const{children:a}=t;for(const t of a){const{next:n,map:i,aggregation:a,fields:o,type:c}=t;let u,l=n.table;if(n.active.type=c,a){const{query:t,assignTable:n}=a,r=Object.fromEntries(s.array(Xy).map((t=>[t,t])));[,u]=gg(e,s.assign(n),r),u=t.evaluate(u.rename({[tg]:Xy})),[u,l]=gg(u,l,i),l=l.orderby(Xy).assign(u.rename(o).orderby(Xy)).unorder()}else[,l]=gg(e,l,i);r(n,l)}}function s(t){if(i.has(t))return;i.set(t,!0);const{active:e,children:n}=t;e.selected=e.table;for(const t of n){const{next:e}=t;e.active.type=ig.NONE,s(e)}}for(const i of t){const[t,a,o]=i,{active:c}=t;if(e){e=e.map((t=>(t=fg(t,o),ag(a,!0).includes(tg)&&Xy in t&&(t[tg]=t[Xy],delete t[Xy]),t)));let i=c.selected.numRows()<c.table.numRows()&&!n?c.selected:null;hy(e).forEach((t=>{i=t.evaluate(i||a)})),n&&(i=t.active.selected.concat(i)),r(t,i)}else s(t)}}function vg(t,e){!function(t,e){bt(t).attr("opacity",e)}(t,e)}function _g(t){vg(t,t[0][my]||dy)}function xg(t,e){!function(t){vg(t,fy)}(t),vg(e,dy)}function wg(t,e){for(const n of t){if(!n.title)continue;const t=n.title.innerHTML.toLowerCase(),i=e.array(t);if("precipitation"===t)continue;const r=n.marks.filter((e=>i.includes(e.mark[Hy][t]))).map((t=>t.mark));xg(n.marks.map((t=>t.mark)),r)}}function Sg(t,e,n){const i=e.array(Zy);bt("."+t+".AGGREGATE_LAYER").remove();const r=[];for(let s=0;s<i.length;++s){const a=i[s]._getBBox(),c=yt(i[s].parentElement).append("path").classed(t,!0).classed("AGGREGATE_LAYER",!0).attr("fill",window.getComputedStyle(i[s]).fill);if(i[s].tagName===ky){const t=i[s].contour[0].x,u=i[s].contour[0].y-i[s]._getBBox().height,l=a.height,h=n.scale(e.array(n.title.innerHTML.toLowerCase())[s])-n.range[0],p=o();p.rect(t,u,h,l),c.attr("d",p.toString()),r.push(c)}}bt([...i,...r]).raise()}function Ig(t){for(const e of t){const{data:t,legends:n,xAxis:i}=e,{table:r,active:s}=t,{selected:a,type:o}=s;let c=a.array(Zy);o===ig.AGGREGATE?c=Sg(e.svg.id,a,i):bt("."+e.svg.id+"AGGREGATE_LAYER").remove(),xg(r.array(Zy),c),wg(n,a)}}function Ag(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}const Tg=Symbol("implicit");function kg(){var t=new Jm,e=[],n=[],i=Tg;function r(r){let s=t.get(r);if(void 0===s){if(i!==Tg)return i;t.set(r,s=e.push(r)-1)}return n[s%n.length]}return r.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new Jm;for(const i of n)t.has(i)||t.set(i,e.push(i)-1);return r},r.range=function(t){return arguments.length?(n=Array.from(t),r):n.slice()},r.unknown=function(t){return arguments.length?(i=t,r):i},r.copy=function(){return kg(e,n).unknown(i)},Ag.apply(r,arguments),r}function Cg(){var t,e,n=kg().unknown(void 0),i=n.domain,r=n.range,s=0,a=1,o=!1,c=0,u=0,l=.5;function h(){var n=i().length,h=a<s,p=h?a:s,d=h?s:a;t=(d-p)/Math.max(1,n-c+2*u),o&&(t=Math.floor(t)),p+=(d-p-t*(n-c))*l,e=t*(1-c),o&&(p=Math.round(p),e=Math.round(e));var f=uy(n).map((function(e){return p+t*e}));return r(h?f.reverse():f)}return delete n.unknown,n.domain=function(t){return arguments.length?(i(t),h()):i()},n.range=function(t){return arguments.length?([s,a]=t,s=+s,a=+a,h()):[s,a]},n.rangeRound=function(t){return[s,a]=t,s=+s,a=+a,o=!0,h()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(o=!!t,h()):o},n.padding=function(t){return arguments.length?(c=Math.min(1,u=+t),h()):c},n.paddingInner=function(t){return arguments.length?(c=Math.min(1,t),h()):c},n.paddingOuter=function(t){return arguments.length?(u=+t,h()):u},n.align=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),h()):l},n.copy=function(){return Cg(i(),[s,a]).round(o).paddingInner(c).paddingOuter(u).align(l)},Ag.apply(h(),arguments)}function Mg(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Eg(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Ng(){}var Dg=.7,Og=1/Dg,Bg="\\s*([+-]?\\d+)\\s*",Lg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Vg=/^#([0-9a-f]{3,8})$/,Ug=new RegExp(`^rgb\\(${Bg},${Bg},${Bg}\\)$`),Pg=new RegExp(`^rgb\\(${Fg},${Fg},${Fg}\\)$`),Rg=new RegExp(`^rgba\\(${Bg},${Bg},${Bg},${Lg}\\)$`),jg=new RegExp(`^rgba\\(${Fg},${Fg},${Fg},${Lg}\\)$`),$g=new RegExp(`^hsl\\(${Lg},${Fg},${Fg}\\)$`),zg=new RegExp(`^hsla\\(${Lg},${Fg},${Fg},${Lg}\\)$`),Hg={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function qg(){return this.rgb().formatHex()}function Yg(){return this.rgb().formatRgb()}function Gg(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Vg.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Wg(e):3===n?new Jg(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Kg(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Kg(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Ug.exec(t))?new Jg(e[1],e[2],e[3],1):(e=Pg.exec(t))?new Jg(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Rg.exec(t))?Kg(e[1],e[2],e[3],e[4]):(e=jg.exec(t))?Kg(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=$g.exec(t))?ib(e[1],e[2]/100,e[3]/100,1):(e=zg.exec(t))?ib(e[1],e[2]/100,e[3]/100,e[4]):Hg.hasOwnProperty(t)?Wg(Hg[t]):"transparent"===t?new Jg(NaN,NaN,NaN,0):null}function Wg(t){return new Jg(t>>16&255,t>>8&255,255&t,1)}function Kg(t,e,n,i){return i<=0&&(t=e=n=NaN),new Jg(t,e,n,i)}function Qg(t,e,n,i){return 1===arguments.length?((r=t)instanceof Ng||(r=Gg(r)),r?new Jg((r=r.rgb()).r,r.g,r.b,r.opacity):new Jg):new Jg(t,e,n,null==i?1:i);var r}function Jg(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function Zg(){return`#${nb(this.r)}${nb(this.g)}${nb(this.b)}`}function Xg(){const t=tb(this.opacity);return`${1===t?"rgb(":"rgba("}${eb(this.r)}, ${eb(this.g)}, ${eb(this.b)}${1===t?")":`, ${t})`}`}function tb(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function eb(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function nb(t){return((t=eb(t))<16?"0":"")+t.toString(16)}function ib(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new sb(t,e,n,i)}function rb(t){if(t instanceof sb)return new sb(t.h,t.s,t.l,t.opacity);if(t instanceof Ng||(t=Gg(t)),!t)return new sb;if(t instanceof sb)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),s=Math.max(e,n,i),a=NaN,o=s-r,c=(s+r)/2;return o?(a=e===s?(n-i)/o+6*(n<i):n===s?(i-e)/o+2:(e-n)/o+4,o/=c<.5?s+r:2-s-r,a*=60):o=c>0&&c<1?0:a,new sb(a,o,c,t.opacity)}function sb(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function ab(t){return(t=(t||0)%360)<0?t+360:t}function ob(t){return Math.max(0,Math.min(1,t||0))}function cb(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Mg(Ng,Gg,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:qg,formatHex:qg,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return rb(this).formatHsl()},formatRgb:Yg,toString:Yg}),Mg(Jg,Qg,Eg(Ng,{brighter(t){return t=null==t?Og:Math.pow(Og,t),new Jg(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?Dg:Math.pow(Dg,t),new Jg(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Jg(eb(this.r),eb(this.g),eb(this.b),tb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Zg,formatHex:Zg,formatHex8:function(){return`#${nb(this.r)}${nb(this.g)}${nb(this.b)}${nb(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Xg,toString:Xg})),Mg(sb,(function(t,e,n,i){return 1===arguments.length?rb(t):new sb(t,e,n,null==i?1:i)}),Eg(Ng,{brighter(t){return t=null==t?Og:Math.pow(Og,t),new sb(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Dg:Math.pow(Dg,t),new sb(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Jg(cb(t>=240?t-240:t+120,r,i),cb(t,r,i),cb(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new sb(ab(this.h),ob(this.s),ob(this.l),tb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=tb(this.opacity);return`${1===t?"hsl(":"hsla("}${ab(this.h)}, ${100*ob(this.s)}%, ${100*ob(this.l)}%${1===t?")":`, ${t})`}`}}));var ub=t=>()=>t;function lb(t){return 1==(t=+t)?hb:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):ub(isNaN(e)?n:e)}}function hb(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):ub(isNaN(t)?e:t)}var pb=function t(e){var n=lb(e);function i(t,e){var i=n((t=Qg(t)).r,(e=Qg(e)).r),r=n(t.g,e.g),s=n(t.b,e.b),a=hb(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=s(e),t.opacity=a(e),t+""}}return i.gamma=t,i}(1);function db(t,e){e||(e=[]);var n,i=t?Math.min(e.length,t.length):0,r=e.slice();return function(s){for(n=0;n<i;++n)r[n]=t[n]*(1-s)+e[n]*s;return r}}function fb(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,s=new Array(r),a=new Array(i);for(n=0;n<r;++n)s[n]=xb(t[n],e[n]);for(;n<i;++n)a[n]=e[n];return function(t){for(n=0;n<r;++n)a[n]=s[n](t);return a}}function mb(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function yb(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function gb(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=xb(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}var bb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vb=new RegExp(bb.source,"g");function _b(t,e){var n,i,r,s=bb.lastIndex=vb.lastIndex=0,a=-1,o=[],c=[];for(t+="",e+="";(n=bb.exec(t))&&(i=vb.exec(e));)(r=i.index)>s&&(r=e.slice(s,r),o[a]?o[a]+=r:o[++a]=r),(n=n[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,c.push({i:a,x:yb(n,i)})),s=vb.lastIndex;return s<e.length&&(r=e.slice(s),o[a]?o[a]+=r:o[++a]=r),o.length<2?c[0]?function(t){return function(e){return t(e)+""}}(c[0].x):function(t){return function(){return t}}(e):(e=c.length,function(t){for(var n,i=0;i<e;++i)o[(n=c[i]).i]=n.x(t);return o.join("")})}function xb(t,e){var n,i,r=typeof e;return null==e||"boolean"===r?ub(e):("number"===r?yb:"string"===r?(n=Gg(e))?(e=n,pb):_b:e instanceof Gg?pb:e instanceof Date?mb:(i=e,!ArrayBuffer.isView(i)||i instanceof DataView?Array.isArray(e)?fb:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?gb:yb:db))(t,e)}function wb(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Sb(t){return+t}var Ib=[0,1];function Ab(t){return t}function Tb(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function kb(t,e,n){var i=t[0],r=t[1],s=e[0],a=e[1];return r<i?(i=Tb(r,i),s=n(a,s)):(i=Tb(i,r),s=n(s,a)),function(t){return s(i(t))}}function Cb(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),s=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<i;)r[a]=Tb(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(e){var n=Qm(t,e,1,i)-1;return s[n](r[n](e))}}function Mb(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Eb(){var t,e,n,i,r,s,a=Ib,o=Ib,c=xb,u=Ab;function l(){var t=Math.min(a.length,o.length);return u!==Ab&&(u=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(a[0],a[t-1])),i=t>2?Cb:kb,r=s=null,h}function h(e){return null==e||isNaN(e=+e)?n:(r||(r=i(a.map(t),o,c)))(t(u(e)))}return h.invert=function(n){return u(e((s||(s=i(o,a.map(t),yb)))(n)))},h.domain=function(t){return arguments.length?(a=Array.from(t,Sb),l()):a.slice()},h.range=function(t){return arguments.length?(o=Array.from(t),l()):o.slice()},h.rangeRound=function(t){return o=Array.from(t),c=wb,l()},h.clamp=function(t){return arguments.length?(u=!!t||Ab,l()):u!==Ab},h.interpolate=function(t){return arguments.length?(c=t,l()):c},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,i){return t=n,e=i,l()}}function Nb(){return Eb()(Ab,Ab)}function Db(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Ob(t){return(t=Db(Math.abs(t)))?t[1]:NaN}var Bb,Lb=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fb(t){if(!(e=Lb.exec(t)))throw new Error("invalid format: "+t);var e;return new Vb({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Vb(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Ub(t,e){var n=Db(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}Fb.prototype=Vb.prototype,Vb.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Pb={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Ub(100*t,e),r:Ub,s:function(t,e){var n=Db(t,e);if(!n)return t+"";var i=n[0],r=n[1],s=r-(Bb=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,a=i.length;return s===a?i:s>a?i+new Array(s-a+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+Db(t,Math.max(0,e+s-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Rb(t){return t}var jb,$b,zb,Hb=Array.prototype.map,qb=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Yb(t){var e,n,i=void 0===t.grouping||void 0===t.thousands?Rb:(e=Hb.call(t.grouping,Number),n=t.thousands+"",function(t,i){for(var r=t.length,s=[],a=0,o=e[0],c=0;r>0&&o>0&&(c+o+1>i&&(o=Math.max(1,i-c)),s.push(t.substring(r-=o,r+o)),!((c+=o+1)>i));)o=e[a=(a+1)%e.length];return s.reverse().join(n)}),r=void 0===t.currency?"":t.currency[0]+"",s=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",o=void 0===t.numerals?Rb:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Hb.call(t.numerals,String)),c=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=Fb(t)).fill,n=t.align,h=t.sign,p=t.symbol,d=t.zero,f=t.width,m=t.comma,y=t.precision,g=t.trim,b=t.type;"n"===b?(m=!0,b="g"):Pb[b]||(void 0===y&&(y=12),g=!0,b="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var v="$"===p?r:"#"===p&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",_="$"===p?s:/[%p]/.test(b)?c:"",x=Pb[b],w=/[defgprs%]/.test(b);function S(t){var r,s,c,p=v,S=_;if("c"===b)S=x(t)+S,t="";else{var I=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:x(Math.abs(t),y),g&&(t=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(!+t[i])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(e+1):t}(t)),I&&0==+t&&"+"!==h&&(I=!1),p=(I?"("===h?h:u:"-"===h||"("===h?"":h)+p,S=("s"===b?qb[8+Bb/3]:"")+S+(I&&"("===h?")":""),w)for(r=-1,s=t.length;++r<s;)if(48>(c=t.charCodeAt(r))||c>57){S=(46===c?a+t.slice(r+1):t.slice(r))+S,t=t.slice(0,r);break}}m&&!d&&(t=i(t,1/0));var A=p.length+t.length+S.length,T=A<f?new Array(f-A+1).join(e):"";switch(m&&d&&(t=i(T+t,T.length?f-S.length:1/0),T=""),n){case"<":t=p+t+S+T;break;case"=":t=p+T+t+S;break;case"^":t=T.slice(0,A=T.length>>1)+p+t+S+T.slice(A);break;default:t=T+p+t+S}return o(t)}return y=void 0===y?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),S.toString=function(){return t+""},S}return{format:h,formatPrefix:function(t,e){var n=h(((t=Fb(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(Ob(e)/3))),r=Math.pow(10,-i),s=qb[8+i/3];return function(t){return n(r*t)+s}}}}function Gb(t,e,n,i){var r,s=sy(t,e,n);switch((i=Fb(null==i?",f":i)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(r=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Ob(e)/3)))-Ob(Math.abs(t)))}(s,a))||(i.precision=r),zb(i,a);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ob(e)-Ob(t))+1}(s,Math.max(Math.abs(t),Math.abs(e))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=function(t){return Math.max(0,-Ob(Math.abs(t)))}(s))||(i.precision=r-2*("%"===i.type))}return $b(i)}function Wb(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){if(!((n=+n)>0))return[];if((t=+t)==(e=+e))return[t];const i=e<t,[r,s,a]=i?iy(e,t,n):iy(t,e,n);if(!(s>=r))return[];const o=s-r+1,c=new Array(o);if(i)if(a<0)for(let t=0;t<o;++t)c[t]=(s-t)/-a;else for(let t=0;t<o;++t)c[t]=(s-t)*a;else if(a<0)for(let t=0;t<o;++t)c[t]=(r+t)/-a;else for(let t=0;t<o;++t)c[t]=(r+t)*a;return c}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var i=e();return Gb(i[0],i[i.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var i,r,s=e(),a=0,o=s.length-1,c=s[a],u=s[o],l=10;for(u<c&&(r=c,c=u,u=r,r=a,a=o,o=r);l-- >0;){if((r=ry(c,u,n))===i)return s[a]=c,s[o]=u,e(s);if(r>0)c=Math.floor(c/r)*r,u=Math.ceil(u/r)*r;else{if(!(r<0))break;c=Math.ceil(c*r)/r,u=Math.floor(u*r)/r}i=r}return t},t}function Kb(){var t=Nb();return t.copy=function(){return Mb(t,Kb())},Ag.apply(t,arguments),Wb(t)}jb=Yb({thousands:",",grouping:[3],currency:["$",""]}),$b=jb.format,zb=jb.formatPrefix;const Qb=new Date,Jb=new Date;function Zb(t,e,n,i){function r(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return r.floor=e=>(t(e=new Date(+e)),e),r.ceil=n=>(t(n=new Date(n-1)),e(n,1),t(n),n),r.round=t=>{const e=r(t),n=r.ceil(t);return t-e<n-t?e:n},r.offset=(t,n)=>(e(t=new Date(+t),null==n?1:Math.floor(n)),t),r.range=(n,i,s)=>{const a=[];if(n=r.ceil(n),s=null==s?1:Math.floor(s),!(n<i&&s>0))return a;let o;do{a.push(o=new Date(+n)),e(n,s),t(n)}while(o<n&&n<i);return a},r.filter=n=>Zb((e=>{if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),((t,i)=>{if(t>=t)if(i<0)for(;++i<=0;)for(;e(t,-1),!n(t););else for(;--i>=0;)for(;e(t,1),!n(t););})),n&&(r.count=(e,i)=>(Qb.setTime(+e),Jb.setTime(+i),t(Qb),t(Jb),Math.floor(n(Qb,Jb))),r.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?r.filter(i?e=>i(e)%t==0:e=>r.count(0,e)%t==0):r:null)),r}const Xb=Zb((()=>{}),((t,e)=>{t.setTime(+t+e)}),((t,e)=>e-t));Xb.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?Zb((e=>{e.setTime(Math.floor(e/t)*t)}),((e,n)=>{e.setTime(+e+n*t)}),((e,n)=>(n-e)/t)):Xb:null),Xb.range;const tv=1e3,ev=6e4,nv=36e5,iv=864e5,rv=6048e5,sv=2592e6,av=31536e6,ov=Zb((t=>{t.setTime(t-t.getMilliseconds())}),((t,e)=>{t.setTime(+t+e*tv)}),((t,e)=>(e-t)/tv),(t=>t.getUTCSeconds()));ov.range;const cv=Zb((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*tv)}),((t,e)=>{t.setTime(+t+e*ev)}),((t,e)=>(e-t)/ev),(t=>t.getMinutes()));cv.range;const uv=Zb((t=>{t.setUTCSeconds(0,0)}),((t,e)=>{t.setTime(+t+e*ev)}),((t,e)=>(e-t)/ev),(t=>t.getUTCMinutes()));uv.range;const lv=Zb((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*tv-t.getMinutes()*ev)}),((t,e)=>{t.setTime(+t+e*nv)}),((t,e)=>(e-t)/nv),(t=>t.getHours()));lv.range;const hv=Zb((t=>{t.setUTCMinutes(0,0,0)}),((t,e)=>{t.setTime(+t+e*nv)}),((t,e)=>(e-t)/nv),(t=>t.getUTCHours()));hv.range;const pv=Zb((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ev)/iv),(t=>t.getDate()-1));pv.range;const dv=Zb((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/iv),(t=>t.getUTCDate()-1));dv.range;const fv=Zb((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/iv),(t=>Math.floor(t/iv)));function mv(t){return Zb((e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),((t,e)=>{t.setDate(t.getDate()+7*e)}),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ev)/rv))}fv.range;const yv=mv(0),gv=mv(1),bv=mv(2),vv=mv(3),_v=mv(4),xv=mv(5),wv=mv(6);function Sv(t){return Zb((e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+7*e)}),((t,e)=>(e-t)/rv))}yv.range,gv.range,bv.range,vv.range,_v.range,xv.range,wv.range;const Iv=Sv(0),Av=Sv(1),Tv=Sv(2),kv=Sv(3),Cv=Sv(4),Mv=Sv(5),Ev=Sv(6);Iv.range,Av.range,Tv.range,kv.range,Cv.range,Mv.range,Ev.range;const Nv=Zb((t=>{t.setDate(1),t.setHours(0,0,0,0)}),((t,e)=>{t.setMonth(t.getMonth()+e)}),((t,e)=>e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())),(t=>t.getMonth()));Nv.range;const Dv=Zb((t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)}),((t,e)=>e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())),(t=>t.getUTCMonth()));Dv.range;const Ov=Zb((t=>{t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,e)=>{t.setFullYear(t.getFullYear()+e)}),((t,e)=>e.getFullYear()-t.getFullYear()),(t=>t.getFullYear()));Ov.every=t=>isFinite(t=Math.floor(t))&&t>0?Zb((e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,n)=>{e.setFullYear(e.getFullYear()+n*t)})):null,Ov.range;const Bv=Zb((t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)}),((t,e)=>e.getUTCFullYear()-t.getUTCFullYear()),(t=>t.getUTCFullYear()));Bv.every=t=>isFinite(t=Math.floor(t))&&t>0?Zb((e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null,Bv.range;const[Lv,Fv]=function(t,e,n,i,r,s){const a=[[ov,1,tv],[ov,5,5e3],[ov,15,15e3],[ov,30,3e4],[s,1,ev],[s,5,3e5],[s,15,9e5],[s,30,18e5],[r,1,nv],[r,3,108e5],[r,6,216e5],[r,12,432e5],[i,1,iv],[i,2,1728e5],[n,1,rv],[e,1,sv],[e,3,7776e6],[t,1,av]];function o(e,n,i){const r=Math.abs(n-e)/i,s=Wm((([,,t])=>t)).right(a,r);if(s===a.length)return t.every(sy(e/av,n/av,i));if(0===s)return Xb.every(Math.max(sy(e,n,i),1));const[o,c]=a[r/a[s-1][2]<a[s][2]/r?s-1:s];return o.every(c)}return[function(t,e,n){const i=e<t;i&&([t,e]=[e,t]);const r=n&&"function"==typeof n.range?n:o(t,e,n),s=r?r.range(t,+e+1):[];return i?s.reverse():s},o]}(Ov,Nv,yv,pv,lv,cv);function Vv(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Uv(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Pv(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}var Rv,jv,$v,zv={"-":"",_:" ",0:"0"},Hv=/^\s*\d+/,qv=/^%/,Yv=/[\\^$*+?|[\]().{}]/g;function Gv(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(e)+r:r)}function Wv(t){return t.replace(Yv,"\\$&")}function Kv(t){return new RegExp("^(?:"+t.map(Wv).join("|")+")","i")}function Qv(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function Jv(t,e,n){var i=Hv.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Zv(t,e,n){var i=Hv.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function Xv(t,e,n){var i=Hv.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function t_(t,e,n){var i=Hv.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function e_(t,e,n){var i=Hv.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function n_(t,e,n){var i=Hv.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function i_(t,e,n){var i=Hv.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function r_(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function s_(t,e,n){var i=Hv.exec(e.slice(n,n+1));return i?(t.q=3*i[0]-3,n+i[0].length):-1}function a_(t,e,n){var i=Hv.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function o_(t,e,n){var i=Hv.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function c_(t,e,n){var i=Hv.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function u_(t,e,n){var i=Hv.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function l_(t,e,n){var i=Hv.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function h_(t,e,n){var i=Hv.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function p_(t,e,n){var i=Hv.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function d_(t,e,n){var i=Hv.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function f_(t,e,n){var i=qv.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function m_(t,e,n){var i=Hv.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function y_(t,e,n){var i=Hv.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function g_(t,e){return Gv(t.getDate(),e,2)}function b_(t,e){return Gv(t.getHours(),e,2)}function v_(t,e){return Gv(t.getHours()%12||12,e,2)}function __(t,e){return Gv(1+pv.count(Ov(t),t),e,3)}function x_(t,e){return Gv(t.getMilliseconds(),e,3)}function w_(t,e){return x_(t,e)+"000"}function S_(t,e){return Gv(t.getMonth()+1,e,2)}function I_(t,e){return Gv(t.getMinutes(),e,2)}function A_(t,e){return Gv(t.getSeconds(),e,2)}function T_(t){var e=t.getDay();return 0===e?7:e}function k_(t,e){return Gv(yv.count(Ov(t)-1,t),e,2)}function C_(t){var e=t.getDay();return e>=4||0===e?_v(t):_v.ceil(t)}function M_(t,e){return t=C_(t),Gv(_v.count(Ov(t),t)+(4===Ov(t).getDay()),e,2)}function E_(t){return t.getDay()}function N_(t,e){return Gv(gv.count(Ov(t)-1,t),e,2)}function D_(t,e){return Gv(t.getFullYear()%100,e,2)}function O_(t,e){return Gv((t=C_(t)).getFullYear()%100,e,2)}function B_(t,e){return Gv(t.getFullYear()%1e4,e,4)}function L_(t,e){var n=t.getDay();return Gv((t=n>=4||0===n?_v(t):_v.ceil(t)).getFullYear()%1e4,e,4)}function F_(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Gv(e/60|0,"0",2)+Gv(e%60,"0",2)}function V_(t,e){return Gv(t.getUTCDate(),e,2)}function U_(t,e){return Gv(t.getUTCHours(),e,2)}function P_(t,e){return Gv(t.getUTCHours()%12||12,e,2)}function R_(t,e){return Gv(1+dv.count(Bv(t),t),e,3)}function j_(t,e){return Gv(t.getUTCMilliseconds(),e,3)}function $_(t,e){return j_(t,e)+"000"}function z_(t,e){return Gv(t.getUTCMonth()+1,e,2)}function H_(t,e){return Gv(t.getUTCMinutes(),e,2)}function q_(t,e){return Gv(t.getUTCSeconds(),e,2)}function Y_(t){var e=t.getUTCDay();return 0===e?7:e}function G_(t,e){return Gv(Iv.count(Bv(t)-1,t),e,2)}function W_(t){var e=t.getUTCDay();return e>=4||0===e?Cv(t):Cv.ceil(t)}function K_(t,e){return t=W_(t),Gv(Cv.count(Bv(t),t)+(4===Bv(t).getUTCDay()),e,2)}function Q_(t){return t.getUTCDay()}function J_(t,e){return Gv(Av.count(Bv(t)-1,t),e,2)}function Z_(t,e){return Gv(t.getUTCFullYear()%100,e,2)}function X_(t,e){return Gv((t=W_(t)).getUTCFullYear()%100,e,2)}function tx(t,e){return Gv(t.getUTCFullYear()%1e4,e,4)}function ex(t,e){var n=t.getUTCDay();return Gv((t=n>=4||0===n?Cv(t):Cv.ceil(t)).getUTCFullYear()%1e4,e,4)}function nx(){return"+0000"}function ix(){return"%"}function rx(t){return+t}function sx(t){return Math.floor(+t/1e3)}function ax(t){return new Date(t)}function ox(t){return t instanceof Date?+t:+new Date(+t)}function cx(t,e,n,i,r,s,a,o,c,u){var l=Nb(),h=l.invert,p=l.domain,d=u(".%L"),f=u(":%S"),m=u("%I:%M"),y=u("%I %p"),g=u("%a %d"),b=u("%b %d"),v=u("%B"),_=u("%Y");function x(t){return(c(t)<t?d:o(t)<t?f:a(t)<t?m:s(t)<t?y:i(t)<t?r(t)<t?g:b:n(t)<t?v:_)(t)}return l.invert=function(t){return new Date(h(t))},l.domain=function(t){return arguments.length?p(Array.from(t,ox)):p().map(ax)},l.ticks=function(e){var n=p();return t(n[0],n[n.length-1],null==e?10:e)},l.tickFormat=function(t,e){return null==e?x:u(e)},l.nice=function(t){var n=p();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?p(function(t,e){var n,i=0,r=(t=t.slice()).length-1,s=t[i],a=t[r];return a<s&&(n=i,i=r,r=n,n=s,s=a,a=n),t[i]=e.floor(s),t[r]=e.ceil(a),t}(n,t)):l},l.copy=function(){return Mb(l,cx(t,e,n,i,r,s,a,o,c,u))},l}function ux(){return Ag.apply(cx(Lv,Fv,Ov,Nv,yv,pv,lv,cv,ov,jv).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function lx(t){return t}function hx(t){return t.metaKey||t.ctrlKey||t.altKey||t.shiftKey}function px(t){const e=t.cloneNode(!0);for(const[n,i]of Object.entries(t))e[n]=i;return e}function dx(t,e){const n=t._getBBox(),i=e===Dy||e===Ny?n.width/2:n.height/2;return n[e]+(e===Ny||e===Oy?i:-i)}function fx(t){return t&&t.includes("pt")?4*+t.split("pt")[0]/3:t}function mx(t,e,n,i){const r=t.createSVGPoint();return r.x=n,r.y=i,r.matrixTransform(e.getScreenCTM())}function yx(t,e,n=!1){const i=e=>(i,r)=>null==t?i._getBBox()[e]-r._getBBox()[e]:n?i[t]-r[t]:(i[t]?i[t]:i.marks[0])._getBBox()[e]-(r[t]?r[t]:r.marks[0])._getBBox()[e];e.sort(i(Ly)),e.sort(i(Fy))}!function(t){Rv=function(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,s=t.days,a=t.shortDays,o=t.months,c=t.shortMonths,u=Kv(r),l=Qv(r),h=Kv(s),p=Qv(s),d=Kv(a),f=Qv(a),m=Kv(o),y=Qv(o),g=Kv(c),b=Qv(c),v={a:function(t){return a[t.getDay()]},A:function(t){return s[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return o[t.getMonth()]},c:null,d:g_,e:g_,f:w_,g:O_,G:L_,H:b_,I:v_,j:__,L:x_,m:S_,M:I_,p:function(t){return r[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:rx,s:sx,S:A_,u:T_,U:k_,V:M_,w:E_,W:N_,x:null,X:null,y:D_,Y:B_,Z:F_,"%":ix},_={a:function(t){return a[t.getUTCDay()]},A:function(t){return s[t.getUTCDay()]},b:function(t){return c[t.getUTCMonth()]},B:function(t){return o[t.getUTCMonth()]},c:null,d:V_,e:V_,f:$_,g:X_,G:ex,H:U_,I:P_,j:R_,L:j_,m:z_,M:H_,p:function(t){return r[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:rx,s:sx,S:q_,u:Y_,U:G_,V:K_,w:Q_,W:J_,x:null,X:null,y:Z_,Y:tx,Z:nx,"%":ix},x={a:function(t,e,n){var i=d.exec(e.slice(n));return i?(t.w=f.get(i[0].toLowerCase()),n+i[0].length):-1},A:function(t,e,n){var i=h.exec(e.slice(n));return i?(t.w=p.get(i[0].toLowerCase()),n+i[0].length):-1},b:function(t,e,n){var i=g.exec(e.slice(n));return i?(t.m=b.get(i[0].toLowerCase()),n+i[0].length):-1},B:function(t,e,n){var i=m.exec(e.slice(n));return i?(t.m=y.get(i[0].toLowerCase()),n+i[0].length):-1},c:function(t,n,i){return I(t,e,n,i)},d:o_,e:o_,f:d_,g:i_,G:n_,H:u_,I:u_,j:c_,L:p_,m:a_,M:l_,p:function(t,e,n){var i=u.exec(e.slice(n));return i?(t.p=l.get(i[0].toLowerCase()),n+i[0].length):-1},q:s_,Q:m_,s:y_,S:h_,u:Zv,U:Xv,V:t_,w:Jv,W:e_,x:function(t,e,i){return I(t,n,e,i)},X:function(t,e,n){return I(t,i,e,n)},y:i_,Y:n_,Z:r_,"%":f_};function w(t,e){return function(n){var i,r,s,a=[],o=-1,c=0,u=t.length;for(n instanceof Date||(n=new Date(+n));++o<u;)37===t.charCodeAt(o)&&(a.push(t.slice(c,o)),null!=(r=zv[i=t.charAt(++o)])?i=t.charAt(++o):r="e"===i?" ":"0",(s=e[i])&&(i=s(n,r)),a.push(i),c=o+1);return a.push(t.slice(c,o)),a.join("")}}function S(t,e){return function(n){var i,r,s=Pv(1900,void 0,1);if(I(s,t,n+="",0)!=n.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(1e3*s.s+("L"in s?s.L:0));if(e&&!("Z"in s)&&(s.Z=0),"p"in s&&(s.H=s.H%12+12*s.p),void 0===s.m&&(s.m="q"in s?s.q:0),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(r=(i=Uv(Pv(s.y,0,1))).getUTCDay(),i=r>4||0===r?Av.ceil(i):Av(i),i=dv.offset(i,7*(s.V-1)),s.y=i.getUTCFullYear(),s.m=i.getUTCMonth(),s.d=i.getUTCDate()+(s.w+6)%7):(r=(i=Vv(Pv(s.y,0,1))).getDay(),i=r>4||0===r?gv.ceil(i):gv(i),i=pv.offset(i,7*(s.V-1)),s.y=i.getFullYear(),s.m=i.getMonth(),s.d=i.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),r="Z"in s?Uv(Pv(s.y,0,1)).getUTCDay():Vv(Pv(s.y,0,1)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(r+5)%7:s.w+7*s.U-(r+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,Uv(s)):Vv(s)}}function I(t,e,n,i){for(var r,s,a=0,o=e.length,c=n.length;a<o;){if(i>=c)return-1;if(37===(r=e.charCodeAt(a++))){if(r=e.charAt(a++),!(s=x[r in zv?e.charAt(a++):r])||(i=s(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}return v.x=w(n,v),v.X=w(i,v),v.c=w(e,v),_.x=w(n,_),_.X=w(i,_),_.c=w(e,_),{format:function(t){var e=w(t+="",v);return e.toString=function(){return t},e},parse:function(t){var e=S(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",_);return e.toString=function(){return t},e},utcParse:function(t){var e=S(t+="",!0);return e.toString=function(){return t},e}}}(t),jv=Rv.format,$v=Rv.parse,Rv.utcFormat,Rv.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});class gx{constructor(...t){if(t[0]instanceof gx){const[e]=t;this.translate={...e.translate},this.scale={...e.scale},this.rotate=e.rotate}else{const[e,n,i,r,s]=t;this.translate={x:e||0,y:n||0},this.scale={x:i||1,y:r||1},this.rotate=s||0}}addTransform(t){return this.translate.x+=t.translate.x,this.translate.y+=t.translate.y,this.scale.x*=t.scale.x,this.scale.y*=t.scale.y,this.rotate+=t.rotate,this}getTransform(t=new gx){return"translate("+(this.translate.x+t.translate.x)+","+(this.translate.y+t.translate.y)+") scale("+this.scale.x*t.scale.x+","+this.scale.y*t.scale.y+") rotate("+(this.rotate+t.rotate)+")"}}const bx=1,vx=2,_x=3,xx=4;function wx(t){return e=>+t(e)}function Sx(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Ix(t,e,n){let i=[],r=null,s=null,a=6,o=6,c=3,u="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5;const l=t===bx||t===_x?n.xAxis:n.yAxis,h=l.ticks;function p(){let n=null==r?e.ticks?e.ticks.apply(e,i):e.domain():r;const a=null==s?e.tickFormat?e.tickFormat.apply(e,i):lx:s,o=(e.bandwidth?Sx:wx)(e.copy(),u);function c(e,n){e.value=n;const i=e.label,r=e.marks;i.innerHTML=l.ordinal.length||i.value===a(n)?i.value:a(n);const s=i.globalPosition.translate.x,c=i.globalPosition.translate.y,u=t===_x?o(n)-s:0,h=t===xx?o(n)-c:0;i.setAttribute("transform",i.localTransform.getTransform(new gx(u,h)));for(const e of r){const i=e.globalPosition.translate.x,r=e.globalPosition.translate.y,s=t===_x?o(n)-i:0,a=t===xx?o(n)-r:0;e.setAttribute("transform",e.localTransform.getTransform(new gx(s,a)))}}let p;for(n=t===xx||t===vx?n.reverse():n,p=0;p<n.length&&p<h.length;++p)c(h[p],l.ordinal.length?l.ordinal[p]:n[p]);for(;p<n.length;++p){const t={label:px(h[0].label),marks:h[0].marks.map((t=>px(t))),value:0};c(t,n[p]),h[0].label.parentElement.appendChild(t.label),h[0].marks.forEach(((e,n)=>e.parentElement.insertBefore(t.marks[n],e))),h.push(t)}const d=h.length;for(;p<d;++p){const t=h.length-1;h[t].label&&h[t].label.remove(),h[t].marks.forEach((t=>t.remove())),h.pop()}}return p.applyTransform=function(t){return arguments.length?(scale_transform=t,p):p},p.scale=function(t){return arguments.length?(e=t,p):e},p.ticks=function(){return i=Array.from(arguments),p},p.tickArguments=function(t){return arguments.length?(i=null==t?[]:Array.from(t),p):i.slice()},p.tickValues=function(t){return arguments.length?(r=null==t?null:Array.from(t),p):r&&r.slice()},p.tickFormat=function(t){return arguments.length?(s=t,p):s},p.tickSize=function(t){return arguments.length?(a=o=+t,p):a},p.tickSizeInner=function(t){return arguments.length?(a=+t,p):a},p.tickSizeOuter=function(t){return arguments.length?(o=+t,p):o},p.tickPadding=function(t){return arguments.length?(c=+t,p):c},p.offset=function(t){return arguments.length?(u=+t,p):u},p}function Ax(t,e){const n=t.step(),i=t(t.domain()[0])+t.paddingOuter()*n,r=t.bandwidth();let s=Math.round(Math.abs(e-i-r/2)/n);return s=ay([0,oy([t.domain().length-1,s])]),t.domain()[t.domain().length-1-s]}function Tx(t,e){return t.domain()[t.range().indexOf(e)]}function kx(t,e=new gx){if(!t.transform)return;const n=t.transform.baseVal;for(let t=0;t<n.numberOfItems;++t){const i=n.getItem(t),r=i.matrix;e.translate.x+=r.e,e.translate.y+=r.f,e.scale.x*=r.a,e.scale.y*=r.d,e.rotate+=i.angle}return e}function Cx(t,e){if(!t)return null;const n=t.innerHTML.replace(//g,"-").replace(//g,"-").replace(/,/g,""),i=parseFloat(n),r=function(t){const e=["%d"],n=["%a","%A"],i=["%b","%B","%m"],r=["%Y","'%y"],s=[[r,i,e],[i,e,r],[i,r],[e,i,r],[n,i,e,r],[n,e,i,r]],a=["%Y-%m-%d","%Y %m %d %H:%M:%S","%Y-%m-%d% %H:%M:%S","%Y %m %d %H:%M","%Y-%m-%d% %H:%M","%H:%M:%S","%H:%M"];for(const e of a){const n=$v(e)(t);if(n)return{format:jv(e),value:n}}return function(e){function n(e,i){if(!e||!e.length)return null;for(const r of e[0]){const s=i.length?i+" "+r:r,a=$v(s)(t);if("%m"!==s&&"%d"!==s&&a)return{format:jv(s),value:a};const o=n(e.slice(1),s);if(o)return o}return null}for(const t of e){const e=n(t,"");if(e)return e}}(s)}(n);return isNaN(i)||n.includes("-")&&"-"!==n.charAt(0)||n.includes("/")?r&&e?r:n:i}const Mx=3;let Ex=25;function Nx(t){let[e,n,i]=function(t,e){function n(t,e=!0){const n={[Ny]:[],[Dy]:[],[Oy]:[],[By]:[]};e&&(n[Ly]=[],n[Fy]=[]);for(const e of t){const t=e._getBBox();for(const[i,r]of Object.entries(n)){const n=t[i];r.push([n,e])}}return n}function i(t,e=!1){const n=[];if(e){const e=[Ly,Fy];for(const i of e){const e=t[i],r={};e.forEach((([t,e])=>{const n=e._getBBox(),i=window.getComputedStyle(e),s=[n.width,n.height,i.fill,i.color,i.stroke].join(",");s in r?r[s].push([t,e]):r[s]=[[t,e]]})),Object.values(r).forEach((t=>n.push([i,a(t)])))}}else for(const[e,i]of Object.entries(t))n.push([e,a(i)]);return n}function r(t,e){const n=new Map,i=new Map;for(const[t,r]of e)for(const e of r)for(const r of e){const s=n.get(r);(!s||e.length>s.length)&&(n.set(r,e),i.set(e,t))}const r=[];for(let e=0;e<t.length;++e){const i=t[e],s=n.get(i);r.includes(s)||r.push(s)}for(let t=0;t<r.length;++t)for(const e of[...r[t]])n.get(e)!==r[t]&&r[t].splice(r[t].indexOf(e),1);return r.map((t=>({alignment:i.get(t),marks:t})))}const s=r(t,i(n(t,!1))),o=n(e),c=r(e,i(o,!0)),u=i(o).map((([t,e])=>e.map((e=>({alignment:t,marks:e}))))).flat();return[s,c,u]}(t.textMarks,t.svgMarks),r=o(e,n);r=r.sort(((t,e)=>t.text[0]._getBBox()[Ly]-e.text[0]._getBBox()[Fy])),r.length>=2&&(r=[r[0],r[1]],function(e){const n=new Map,i=[];function r(e,n,i){n===Oy||n===By?t.xAxis.ticks.push({label:e,marks:i}):t.yAxis.ticks.push({label:e,marks:i}),i.forEach((t=>{t[qy]=e?yy:Ky}))}for(const{alignment:t,group:r}of e)for(const e of r){const[r,s]=e,a=new Map;for(const[e,i]of r)a.set(i,!0),n.has(e)?n.get(e).ticks.push(i):n.set(e,{alignment:t,ticks:[i]});s.filter((t=>!a.has(t))).forEach((e=>{i.push({alignment:t,tick:e})}))}for(const[t,{alignment:e,ticks:i}]of n)r(t,e,i);for(const{alignment:t,tick:e}of i)r(null,t,[e]);[t.xAxis,t.yAxis].forEach((t=>yx("label",t.ticks)))}(r),e=e.filter((t=>!r.map((t=>t.text)).includes(t.marks))));const s=o(e,i,!1).filter((t=>t.dist<5*Ex));function a(t){t.sort(((t,e)=>t[0]-e[0]));const e=[[t[0][0],[t[0][1]]]];for(let n=1;n<t.length;++n){const i=e[e.length-1][0];Math.abs(i-t[n][0])<Mx?e[e.length-1][1].push(t[n][1]):e.push([t[n][0],[t[n][1]]])}return e.map((t=>t[1]))}function o(t,e,n=!0){function i(t,e){e.sort(((e,n)=>{const i=e._getBBox(),r=n._getBBox();return c.includes(t)?i[Ly]-r[Ly]:i[Fy]-r[Fy]}))}function r(t,e,n){const i=[0,0,0],r=[0,0,0];function s(t,e,i){const r=e._getBBox(),s=o.includes(n)?o:c;for(let e=0;e<s.length;++e)t[e]=t[e]+r[s[e]]/i}return t.forEach((e=>s(i,e,t.length))),e.forEach((t=>s(r,t,e.length))),oy([oy(i)-oy(r),oy(i)-ay(r),ay(i)-oy(r),ay(i)-ay(r)].map((t=>Math.abs(t))))}function s(t,e,n){let i=0,r=0;const s=new Map;for(const a of e){const e=a._getBBox();let o=Number.MAX_SAFE_INTEGER;if(i===n.length)return[Number.MAX_SAFE_INTEGER,null];for(;i<=n.length;){const u=n[oy([i,n.length-1])]._getBBox(),l=c.includes(t)?Ly:Fy,h=Math.abs(u[l]-e[l]);if(h>=o){s.set(a,n[i-1]),r+=o;break}o=h,++i}}return[r/e.length,s]}const a=[],o=[Ny,Dy,Ly],c=[Oy,By,Fy];for(const{alignment:u,marks:l}of t){if(1===l.length)continue;let t={dist:Number.MAX_SAFE_INTEGER,group:null};i(u,l);for(const{alignment:a,marks:h}of e){if(h.length<l.length)continue;if(o.includes(u)&&!o.includes(a)||c.includes(u)&&!c.includes(a))continue;if(r(l,h,u)>Ex)continue;i(u,h);const[e,p]=s(u,l,h);if(e===Number.MAX_SAFE_INTEGER)continue;const d=Math.abs(e-t.dist)<Mx;n&&d?t.group.push([p,h]):(!n&&d&&h.length<t.group[0][1].length||e<t.dist)&&(t={alignment:u,dist:e,group:[[p,h]],text:l})}t.group&&a.push(t)}return a.sort(((t,e)=>t.dist-e.dist)),a}s.length&&(!function(t,e){let n;function i(t){if(t.type===Ry){const e=t.marks.map((t=>t.label.innerHTML)),i=t.marks.map((e=>window.getComputedStyle(e.mark)[t.matchingAttr]));n=kg().domain(e).range(i)}else{const e=t.marks.map((t=>+t.label.innerHTML)),i=t.marks.map((t=>t.mark._getBBox().width**2));n=Kb().domain(e).range(i)}t.scale=n}function r(t){return{title:null,marks:Array.from(t.group[0][0]).map((([t,e])=>({label:t,mark:e})))}}for(let n of e){n=r(n);const s=window.getComputedStyle(n.marks[0].mark),a=window.getComputedStyle(n.marks[1].mark);let o=null;if(s.stroke!==a.stroke?o=zy:s.color!==a.color?o=$y:s.fill!==a.fill&&(o=jy),o)n.type=Ry,n.matchingAttr=o;else{const t=[],i=[];for(let e=1;e<n.marks.length;++e){const r=n.marks[e-1].mark._getBBox(),s=n.marks[e].mark._getBBox();t.push(Math.abs(r.width-s.width)),i.push(Math.abs(r.height-s.height))}if(!(cy(t)>2||cy(i)>2))return void e.splice(e.indexOf(n),1);n.type=Py}for(const{label:t,mark:e}of n.marks)t[qy]=e[qy]=Yy,e.style["pointer-events"]="fill",e.legend=n,e[my]=e.hasAttribute("opacity")?+e.getAttribute("opacity"):window.getComputedStyle(e).opacity||dy;i(n),yx("label",n.marks,n.type===Py),t.legends.push(n)}}(t,s),e=e.filter((t=>!s.map((t=>t.text)).includes(t.marks)))),function(e){const n=new Map;function i(t){const e=t._getBBox();return[e.centerX,e.centerY]}function r(t,n){let r={title:null,dist:Number.MAX_SAFE_INTEGER};for(const s of e){const[e,a]=i(s),o=Math.abs(e-t)+Math.abs(a-n);o<r.dist&&(r={title:s,dist:o})}return r}const s=[t.xAxis,t.yAxis,...t.legends];for(const t of s){const e=("ticks"in t?t.ticks:t.marks).filter((t=>t.label)).map((t=>i(t.label))),s=r(cy(e.map((t=>t[0]))),cy(e.map((t=>t[1])))),{title:a,dist:o}=s;a&&((!n.has(a)||o<n.get(a).dist)&&(t.title=a,a[qy]=Wy,n.set(a,s)))}t.title=e.filter((t=>!t[qy]))[0]}(e.map((t=>t.marks)).flat()),t.legends.forEach((t=>function(t){const{scale:e,title:n,type:i,matchingAttr:r}=t;for(const{mark:s}of t.marks){const t=Tx(e,i===Ry?window.getComputedStyle(s)[r]:s._getBBox().width**2);s[Hy]={[n?n.innerHTML.toLowerCase():"legend-0"]:t}}}(t)))}function Dx(t){for(const e of t.svgMarks){const n=e._getBBox();if(n.width>=t.xAxis.range[1]-t.xAxis.range[0]&&n.height>=t.yAxis.range[0]-t.yAxis.range[1]){e[qy]=Qy;continue}const i=t.svg._getBBox(),[r,s]=t.xAxis.range,[a,o]=t.yAxis.range.map((t=>t+i.top));(n.left<=r&&n.right>=s&&n.bottom<=o||n.left<=r&&n.right>=s&&n.top>=a)&&(e[qy]=Gy);for(const e of t.legends)for(const{mark:t}of e.marks)t[qy]=Yy}t.svgMarks=t.svgMarks.filter((t=>!t[qy])),t.svgMarks.forEach((t=>{t[qy]=Jy})),yx(null,t.svgMarks,!1)}function Ox(t){let e=!0;for(const[,n]of Object.entries(t.ticks))if(null!=n.label&&"[object Date]"!==Object.prototype.toString.call(Cx(n.label,!0).value)){e=!1;break}for(const[,n]of Object.entries(t.ticks)){if(!n.label)continue;let i=Cx(n.label,e);i.value&&(t.formatter={format:i.format},i=i.value),n.value=i,"string"==typeof i?t.ordinal.push(i):(t.domain[0]=null===t.domain[0]?i:oy([t.domain[0],i]),t.domain[1]=null===t.domain[1]?i:ay([t.domain[1],i]))}}function Bx(t){Ex=.1*ay([t.svg._getBBox().width,t.svg._getBBox().height]),Nx(t),Ox(t.xAxis),Ox(t.yAxis);let e=+fx(t.svg.getAttribute("width")),n=+fx(t.svg.getAttribute("height"));e||(e=t.svg._getBBox().width),n||(n=t.svg._getBBox().height);const i=t.svg._getBBox();if(!t.xAxis.ticks.length&&!t.yAxis.ticks.length)return t.xAxis.range=[0,e],t.yAxis.range=[n,0],void Dx(t);const r=t.yAxis.ticks[0].marks[0]._getBBox(),s=t.xAxis.ticks[0].marks[0]._getBBox(),a=[r.left,r.left+r.width],o=[s.top+s.height,s.top],c=ay([(r.width<10?a[1]:a[0])-i.left,0]),u=ay([oy([a[1]-i.left,e]),t.xAxis.ticks[t.xAxis.ticks.length-1].marks[0]._getBBox().right-i.left]),l=ay([(s.height<10?t.yAxis.ticks[t.yAxis.ticks.length-1].marks[0]._getBBox().top:o[1])-i.top,0]),h=oy([o[0]-i.top,n]);var p,d;t.xAxis.range=[c,u],t.yAxis.range=[h,l],t.xAxis.scale=(t.xAxis.domain[0]instanceof Date?ux():t.xAxis.ordinal.length?Cg():Kb()).domain(t.xAxis.ordinal.length?t.xAxis.ordinal:t.xAxis.domain).range(t.xAxis.range),t.xAxis.axis=(p=t.xAxis.scale,d=t,Ix(_x,p,d)).ticks(t.xAxis.ticks.length),t.xAxis.domain[0]instanceof Date&&(t.xAxis.axis=t.xAxis.axis.tickFormat(t.xAxis.formatter.format)),t.yAxis.scale=(t.yAxis.domain[0]instanceof Date?ux():t.yAxis.ordinal.length?Cg():Kb()).domain(t.yAxis.ordinal.length?t.yAxis.ordinal:t.yAxis.domain).range(t.yAxis.range),t.yAxis.axis=function(t,e){return Ix(xx,t,e)}(t.yAxis.scale,t).ticks(t.yAxis.ticks.length),function(t){const e=t.svg._getBBox();if(t.xAxis.scale&&!t.xAxis.ordinal.length){const n=[dx(t.xAxis.ticks.filter((e=>e.value===t.xAxis.domain[0]))[0].marks[0],Ny),dx(t.xAxis.ticks.filter((e=>e.value===t.xAxis.domain[1]))[0].marks[0],Ny)].map((t=>t-e.left)),i=t.xAxis.range.map(t.xAxis.scale.copy().range(n).invert,t.xAxis.scale);t.xAxis.scale.domain(i)}if(t.yAxis.scale&&!t.yAxis.ordinal.length){const n=[dx(t.yAxis.ticks.filter((e=>e.value===t.yAxis.domain[0]))[0].marks[0],Oy),dx(t.yAxis.ticks.filter((e=>e.value===t.yAxis.domain[1]))[0].marks[0],Oy)].map((t=>t-e.top)),i=t.yAxis.range.map(t.yAxis.scale.copy().range(n).invert,t.yAxis.scale);t.yAxis.scale.domain(i)}}(t),Dx(t)}class Lx{constructor(t){this.table=t,this.active={table:t,selected:t,filtered:null,type:ig.NONE},this.children=[],this.parents=[]}}async function Fx(t){if(!t||!Object.keys(t).length)return{};const{url:e}=t,n=e.split(".").pop(),i=await("json"===n?function(t,e){return zm(t,{...e,as:"json",using:Hm})}(e):function(t,e){return zm(t,{...e,as:"text",using:Bf})}(e));return new Lx(i.assign($m({[Xy]:uy(i.numRows())})))}function Vx(t){const e={};let n=t.map((t=>t[Hy]));n=n.flat();const i=Object.keys(n[0]);return t.forEach(((t,e)=>{t[Xy]=e})),i.forEach((t=>{e[t.toLowerCase()]=function(t,e){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof e)throw new TypeError("mapper is not a function");return Array.from(t,((n,i)=>e(n,i,t)))}(n,(e=>e[t.toLowerCase()]))})),e[Zy]=t,e[Xy]=uy(t.length),new Lx($m(e))}class Ux{constructor(){this.hasDomain=!1,this.svg=null,this.svgMarks=[],this.textMarks=[],this.data=null,this.xAxis={domain:[null,null],ordinal:[],range:[null,null],ticks:[],scale:null,axis:null,title:null},this.yAxis={domain:[null,null],ordinal:[],range:[null,null],ticks:[],scale:null,axis:null,title:null},this.legends=[],this.title=null,this.interactions={selection:!0,brush:!0,navigate:!1,filter:!1,sort:!1,annotate:!1}}}function Px(t,e,n,i){this.message=t,this.expected=e,this.found=n,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,Px)}!function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}(Px,Error),Px.buildMessage=function(t,e){var n={literal:function(t){return'"'+r(t.text)+'"'},class:function(t){var e,n="";for(e=0;e<t.parts.length;e++)n+=t.parts[e]instanceof Array?s(t.parts[e][0])+"-"+s(t.parts[e][1]):s(t.parts[e]);return"["+(t.inverted?"^":"")+n+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function i(t){return t.charCodeAt(0).toString(16).toUpperCase()}function r(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+i(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+i(t)}))}function s(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+i(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+i(t)}))}return"Expected "+function(t){var e,i,r,s=new Array(t.length);for(e=0;e<t.length;e++)s[e]=(r=t[e],n[r.type](r));if(s.sort(),s.length>0){for(e=1,i=1;e<s.length;e++)s[e-1]!==s[e]&&(s[i]=s[e],i++);s.length=i}switch(s.length){case 1:return s[0];case 2:return s[0]+" or "+s[1];default:return s.slice(0,-1).join(", ")+", or "+s[s.length-1]}}(t)+" but "+function(t){return t?'"'+r(t)+'"':"end of input"}(e)+" found."};var Rx=function(t,e){e=void 0!==e?e:{};var n,i={},r={svg_path:dt},s=dt,a=function(t){if(!t)return[];for(var e=[],n=0;n<t.length;n++)e=e.concat.apply(e,t[n]);var i=e[0];return i&&"m"==i.code&&(delete i.relative,i.code="M"),e},o=function(t,e){return function(t,e){if(!e)return[t];for(var n=[t],i=0,r=e.length;i<r;i++)n[i+1]=e[i][1];return n}(t,e)},c=/^[Mm]/,u=ut(["M","m"],!1,!1),l=function(t,e,n){var i=Ut(t,[e]);return n&&(i=i.concat(Ut("M"==t?"L":"l",n[1]))),i},h=/^[Zz]/,p=ut(["Z","z"],!1,!1),d=function(){return Ut("Z")},f=/^[Ll]/,m=ut(["L","l"],!1,!1),y=function(t,e){return Ut(t,e)},g=/^[Hh]/,b=ut(["H","h"],!1,!1),v=function(t,e){return Ut(t,e.map((function(t){return{x:t}})))},_=/^[Vv]/,x=ut(["V","v"],!1,!1),w=function(t,e){return Ut(t,e.map((function(t){return{y:t}})))},S=/^[Cc]/,I=ut(["C","c"],!1,!1),A=function(t,e,n){return{x1:t.x,y1:t.y,x2:e.x,y2:e.y,x:n.x,y:n.y}},T=/^[Ss]/,k=ut(["S","s"],!1,!1),C=function(t,e){return{x2:t.x,y2:t.y,x:e.x,y:e.y}},M=/^[Qq]/,E=ut(["Q","q"],!1,!1),N=function(t,e){return{x1:t.x,y1:t.y,x:e.x,y:e.y}},D=/^[Tt]/,O=ut(["T","t"],!1,!1),B=/^[Aa]/,L=ut(["A","a"],!1,!1),F=function(t,e,n,i,r,s){return{rx:t,ry:e,xAxisRotation:n,largeArc:i,sweep:r,x:s.x,y:s.y}},V=function(t,e){return{x:t,y:e}},U=function(t){return 1*t},P=function(t){return 1*t.join("")},R=/^[01]/,j=ut(["0","1"],!1,!1),$=function(t){return"1"==t},z=function(){return""},H=",",q=ct(",",!1),Y=function(t){return t.join("")},G=".",W=ct(".",!1),K=/^[eE]/,Q=ut(["e","E"],!1,!1),J=/^[+\-]/,Z=ut(["+","-"],!1,!1),X=/^[0-9]/,tt=ut([["0","9"]],!1,!1),et=function(t){return t.join("")},nt=/^[ \t\n\r]/,it=ut([" ","\t","\n","\r"],!1,!1),rt=0,st=[{line:1,column:1}],at=0,ot=[];if("startRule"in e){if(!(e.startRule in r))throw new Error("Can't start parsing from rule \""+e.startRule+'".');s=r[e.startRule]}function ct(t,e){return{type:"literal",text:t,ignoreCase:e}}function ut(t,e,n){return{type:"class",parts:t,inverted:e,ignoreCase:n}}function lt(e){var n,i=st[e];if(i)return i;for(n=e-1;!st[n];)n--;for(i={line:(i=st[n]).line,column:i.column};n<e;)10===t.charCodeAt(n)?(i.line++,i.column=1):i.column++,n++;return st[e]=i,i}function ht(t,e){var n=lt(t),i=lt(e);return{start:{offset:t,line:n.line,column:n.column},end:{offset:e,line:i.line,column:i.column}}}function pt(t){rt<at||(rt>at&&(at=rt,ot=[]),ot.push(t))}function dt(){var t,e,n,r,s;for(t=rt,e=[],n=Dt();n!==i;)e.push(n),n=Dt();if(e!==i)if(n=function(){var t,e,n,r,s,a;if(t=rt,e=ft(),e!==i){for(n=[],r=rt,s=[],a=Dt();a!==i;)s.push(a),a=Dt();for(s!==i&&(a=ft())!==i?r=s=[s,a]:(rt=r,r=i);r!==i;){for(n.push(r),r=rt,s=[],a=Dt();a!==i;)s.push(a),a=Dt();s!==i&&(a=ft())!==i?r=s=[s,a]:(rt=r,r=i)}n!==i?t=e=o(e,n):(rt=t,t=i)}else rt=t,t=i;return t}(),n===i&&(n=null),n!==i){for(r=[],s=Dt();s!==i;)r.push(s),s=Dt();r!==i?t=e=a(n):(rt=t,t=i)}else rt=t,t=i;else rt=t,t=i;return t}function ft(){var e,n,r,s,a,h;if(e=rt,n=function(){var e,n,r,s,a,o,h;e=rt,c.test(t.charAt(rt))?(n=t.charAt(rt),rt++):(n=i,pt(u));if(n!==i){for(r=[],s=Dt();s!==i;)r.push(s),s=Dt();r!==i&&(s=wt())!==i?(a=rt,(o=Tt())===i&&(o=null),o!==i&&(h=yt())!==i?a=o=[o,h]:(rt=a,a=i),a===i&&(a=null),a!==i?e=n=l(n,s,a):(rt=e,e=i)):(rt=e,e=i)}else rt=e,e=i;return e}(),n!==i){for(r=[],s=rt,a=[],h=Dt();h!==i;)a.push(h),h=Dt();for(a!==i&&(h=mt())!==i?s=a=[a,h]:(rt=s,s=i);s!==i;){for(r.push(s),s=rt,a=[],h=Dt();h!==i;)a.push(h),h=Dt();a!==i&&(h=mt())!==i?s=a=[a,h]:(rt=s,s=i)}r!==i?e=n=o(n,r):(rt=e,e=i)}else rt=e,e=i;return e}function mt(){var e;return(e=function(){var e,n;e=rt,h.test(t.charAt(rt))?(n=t.charAt(rt),rt++):(n=i,pt(p));n!==i&&(n=d());return e=n,e}())===i&&(e=function(){var e,n,r,s;e=rt,f.test(t.charAt(rt))?(n=t.charAt(rt),rt++):(n=i,pt(m));if(n!==i){for(r=[],s=Dt();s!==i;)r.push(s),s=Dt();r!==i&&(s=yt())!==i?e=n=y(n,s):(rt=e,e=i)}else rt=e,e=i;return e}())===i&&(e=function(){var e,n,r,s;e=rt,g.test(t.charAt(rt))?(n=t.charAt(rt),rt++):(n=i,pt(b));if(n!==i){for(r=[],s=Dt();s!==i;)r.push(s),s=Dt();r!==i&&(s=gt())!==i?e=n=v(n,s):(rt=e,e=i)}else rt=e,e=i;return e}())===i&&(e=function(){var e,n,r,s;e=rt,_.test(t.charAt(rt))?(n=t.charAt(rt),rt++):(n=i,pt(x));if(n!==i){for(r=[],s=Dt();s!==i;)r.push(s),s=Dt();r!==i&&(s=gt())!==i?e=n=w(n,s):(rt=e,e=i)}else rt=e,e=i;return e}())===i&&(e=function(){var e,n,r,s;e=rt,S.test(t.charAt(rt))?(n=t.charAt(rt),rt++):(n=i,pt(I));if(n!==i){for(r=[],s=Dt();s!==i;)r.push(s),s=Dt();r!==i?(s=function(){var t,e,n,r,s,a;if(t=rt,e=bt(),e!==i){for(n=[],r=rt,(s=Tt())===i&&(s=null),s!==i&&(a=bt())!==i?r=s=[s,a]:(rt=r,r=i);r!==i;)n.push(r),r=rt,(s=Tt())===i&&(s=null),s!==i&&(a=bt())!==i?r=s=[s,a]:(rt=r,r=i);n!==i?t=e=o(e,n):(rt=t,t=i)}else rt=t,t=i;return t}(),s!==i?e=n=y(n,s):(rt=e,e=i)):(rt=e,e=i)}else rt=e,e=i;return e}())===i&&(e=function(){var e,n,r,s;e=rt,T.test(t.charAt(rt))?(n=t.charAt(rt),rt++):(n=i,pt(k));if(n!==i){for(r=[],s=Dt();s!==i;)r.push(s),s=Dt();r!==i?(s=function(){var t,e,n,r,s,a;if(t=rt,e=vt(),e!==i){for(n=[],r=rt,(s=Tt())===i&&(s=null),s!==i&&(a=vt())!==i?r=s=[s,a]:(rt=r,r=i);r!==i;)n.push(r),r=rt,(s=Tt())===i&&(s=null),s!==i&&(a=vt())!==i?r=s=[s,a]:(rt=r,r=i);n!==i?t=e=o(e,n):(rt=t,t=i)}else rt=t,t=i;return t}(),s!==i?e=n=y(n,s):(rt=e,e=i)):(rt=e,e=i)}else rt=e,e=i;return e}())===i&&(e=function(){var e,n,r,s;e=rt,M.test(t.charAt(rt))?(n=t.charAt(rt),rt++):(n=i,pt(E));if(n!==i){for(r=[],s=Dt();s!==i;)r.push(s),s=Dt();r!==i?(s=function(){var t,e,n,r,s,a;if(t=rt,e=_t(),e!==i){for(n=[],r=rt,(s=Tt())===i&&(s=null),s!==i&&(a=_t())!==i?r=s=[s,a]:(rt=r,r=i);r!==i;)n.push(r),r=rt,(s=Tt())===i&&(s=null),s!==i&&(a=_t())!==i?r=s=[s,a]:(rt=r,r=i);n!==i?t=e=o(e,n):(rt=t,t=i)}else rt=t,t=i;return t}(),s!==i?e=n=y(n,s):(rt=e,e=i)):(rt=e,e=i)}else rt=e,e=i;return e}())===i&&(e=function(){var e,n,r,s;e=rt,D.test(t.charAt(rt))?(n=t.charAt(rt),rt++):(n=i,pt(O));if(n!==i){for(r=[],s=Dt();s!==i;)r.push(s),s=Dt();r!==i?(s=function(){var t,e,n,r,s,a;if(t=rt,e=wt(),e!==i){for(n=[],r=rt,(s=Tt())===i&&(s=null),s!==i&&(a=wt())!==i?r=s=[s,a]:(rt=r,r=i);r!==i;)n.push(r),r=rt,(s=Tt())===i&&(s=null),s!==i&&(a=wt())!==i?r=s=[s,a]:(rt=r,r=i);n!==i?t=e=o(e,n):(rt=t,t=i)}else rt=t,t=i;return t}(),s!==i?e=n=y(n,s):(rt=e,e=i)):(rt=e,e=i)}else rt=e,e=i;return e}())===i&&(e=function(){var e,n,r,s;e=rt,B.test(t.charAt(rt))?(n=t.charAt(rt),rt++):(n=i,pt(L));if(n!==i){for(r=[],s=Dt();s!==i;)r.push(s),s=Dt();r!==i?(s=function(){var t,e,n,r,s,a;if(t=rt,e=xt(),e!==i){for(n=[],r=rt,(s=Tt())===i&&(s=null),s!==i&&(a=xt())!==i?r=s=[s,a]:(rt=r,r=i);r!==i;)n.push(r),r=rt,(s=Tt())===i&&(s=null),s!==i&&(a=xt())!==i?r=s=[s,a]:(rt=r,r=i);n!==i?t=e=o(e,n):(rt=t,t=i)}else rt=t,t=i;return t}(),s!==i?e=n=y(n,s):(rt=e,e=i)):(rt=e,e=i)}else rt=e,e=i;return e}()),e}function yt(){var t,e,n,r,s,a;if(t=rt,(e=wt())!==i){for(n=[],r=rt,(s=Tt())===i&&(s=null),s!==i&&(a=wt())!==i?r=s=[s,a]:(rt=r,r=i);r!==i;)n.push(r),r=rt,(s=Tt())===i&&(s=null),s!==i&&(a=wt())!==i?r=s=[s,a]:(rt=r,r=i);n!==i?t=e=o(e,n):(rt=t,t=i)}else rt=t,t=i;return t}function gt(){var t,e,n,r,s,a;if(t=rt,(e=It())!==i){for(n=[],r=rt,(s=Tt())===i&&(s=null),s!==i&&(a=It())!==i?r=s=[s,a]:(rt=r,r=i);r!==i;)n.push(r),r=rt,(s=Tt())===i&&(s=null),s!==i&&(a=It())!==i?r=s=[s,a]:(rt=r,r=i);n!==i?t=e=o(e,n):(rt=t,t=i)}else rt=t,t=i;return t}function bt(){var t,e,n,r,s,a;return t=rt,(e=wt())!==i?((n=Tt())===i&&(n=null),n!==i&&(r=wt())!==i?((s=Tt())===i&&(s=null),s!==i&&(a=wt())!==i?t=e=A(e,r,a):(rt=t,t=i)):(rt=t,t=i)):(rt=t,t=i),t}function vt(){var t,e,n,r;return t=rt,(e=wt())!==i?((n=Tt())===i&&(n=null),n!==i&&(r=wt())!==i?t=e=C(e,r):(rt=t,t=i)):(rt=t,t=i),t}function _t(){var t,e,n,r;return t=rt,(e=wt())!==i?((n=Tt())===i&&(n=null),n!==i&&(r=wt())!==i?t=e=N(e,r):(rt=t,t=i)):(rt=t,t=i),t}function xt(){var t,e,n,r,s,a,o,c,u,l,h;return t=rt,(e=St())!==i?((n=Tt())===i&&(n=null),n!==i&&(r=St())!==i?((s=Tt())===i&&(s=null),s!==i&&(a=It())!==i&&Tt()!==i&&(o=At())!==i?((c=Tt())===i&&(c=null),c!==i&&(u=At())!==i?((l=Tt())===i&&(l=null),l!==i&&(h=wt())!==i?t=e=F(e,r,a,o,u,h):(rt=t,t=i)):(rt=t,t=i)):(rt=t,t=i)):(rt=t,t=i)):(rt=t,t=i),t}function wt(){var t,e,n,r;return t=rt,(e=It())!==i?((n=Tt())===i&&(n=null),n!==i&&(r=It())!==i?t=e=V(e,r):(rt=t,t=i)):(rt=t,t=i),t}function St(){var t;return rt,(t=Ct())===i&&(t=Nt()),t!==i&&(t=U(t)),t}function It(){var t,e,n;return rt,t=rt,(e=Et())===i&&(e=null),e!==i&&(n=Ct())!==i?t=e=[e,n]:(rt=t,t=i),t===i&&(t=rt,(e=Et())===i&&(e=null),e!==i&&(n=Nt())!==i?t=e=[e,n]:(rt=t,t=i)),t!==i&&(t=P(t)),t}function At(){var e;return rt,R.test(t.charAt(rt))?(e=t.charAt(rt),rt++):(e=i,pt(j)),e!==i&&(e=$(e)),e}function Tt(){var t,e,n,r,s;if(t=rt,e=[],(n=Dt())!==i)for(;n!==i;)e.push(n),n=Dt();else e=i;if(e!==i)if((n=kt())===i&&(n=null),n!==i){for(r=[],s=Dt();s!==i;)r.push(s),s=Dt();r!==i?t=e=[e,n,r]:(rt=t,t=i)}else rt=t,t=i;else rt=t,t=i;if(t===i){if(t=rt,e=rt,(n=kt())!==i){for(r=[],s=Dt();s!==i;)r.push(s),s=Dt();r!==i?e=n=[n,r]:(rt=e,e=i)}else rt=e,e=i;e!==i&&(e=z()),t=e}return t}function kt(){var e;return 44===t.charCodeAt(rt)?(e=H,rt++):(e=i,pt(q)),e}function Ct(){var e,n,r;return rt,e=rt,n=function(){var e,n,r,s,a;e=rt,n=rt,r=Nt(),r===i&&(r=null);r!==i?(46===t.charCodeAt(rt)?(s=G,rt++):(s=i,pt(W)),s!==i&&(a=Nt())!==i?n=r=[r,s,a]:(rt=n,n=i)):(rt=n,n=i);n===i&&(n=rt,(r=Nt())!==i?(46===t.charCodeAt(rt)?(s=G,rt++):(s=i,pt(W)),s!==i?n=r=[r,s]:(rt=n,n=i)):(rt=n,n=i));n!==i&&(n=Y(n));return e=n,e}(),n!==i?((r=Mt())===i&&(r=null),r!==i?e=n=[n,r]:(rt=e,e=i)):(rt=e,e=i),e===i&&(e=rt,(n=Nt())!==i&&(r=Mt())!==i?e=n=[n,r]:(rt=e,e=i)),e!==i&&(e=Y(e)),e}function Mt(){var e,n,r,s;return rt,e=rt,K.test(t.charAt(rt))?(n=t.charAt(rt),rt++):(n=i,pt(Q)),n!==i?((r=Et())===i&&(r=null),r!==i&&(s=Nt())!==i?e=n=[n,r,s]:(rt=e,e=i)):(rt=e,e=i),e!==i&&(e=Y(e)),e}function Et(){var e;return J.test(t.charAt(rt))?(e=t.charAt(rt),rt++):(e=i,pt(Z)),e}function Nt(){var e,n;if(rt,e=[],X.test(t.charAt(rt))?(n=t.charAt(rt),rt++):(n=i,pt(tt)),n!==i)for(;n!==i;)e.push(n),X.test(t.charAt(rt))?(n=t.charAt(rt),rt++):(n=i,pt(tt));else e=i;return e!==i&&(e=et(e)),e}function Dt(){var e;return rt,nt.test(t.charAt(rt))?(e=t.charAt(rt),rt++):(e=i,pt(it)),e!==i&&(e=z()),e}var Ot,Bt,Lt,Ft={m:"moveto",l:"lineto",h:"horizontal lineto",v:"vertical lineto",c:"curveto",s:"smooth curveto",q:"quadratic curveto",t:"smooth quadratic curveto",a:"elliptical arc",z:"closepath"};for(var Vt in Ft)Ft[Vt.toUpperCase()]=Ft[Vt];function Ut(t,e){e||(e=[{}]);for(var n=e.length;n--;){var i={code:t,command:Ft[t]};for(var r in t==t.toLowerCase()&&(i.relative=!0),e[n])i[r]=e[n][r];e[n]=i}return e}if((n=s())!==i&&rt===t.length)return n;throw n!==i&&rt<t.length&&pt({type:"end"}),Ot=ot,Bt=at<t.length?t.charAt(at):null,Lt=at<t.length?ht(at,at+1):ht(at,at),new Px(Px.buildMessage(Ot,Bt),Ot,Bt,Lt)},jx=Rx;jx.parseSVG=jx,jx.makeAbsolute=function(t){var e,n={x:0,y:0},i={x:"x0",y:"y0",x1:"x0",y1:"y0",x2:"x0",y2:"y0"};return t.forEach((function(t){for(var r in"moveto"===t.command&&(e=t),t.x0=n.x,t.y0=n.y,i)r in t&&(t[r]+=t.relative?t[i[r]]:0);"x"in t||(t.x=n.x),"y"in t||(t.y=n.y),t.relative=!1,t.code=t.code.toUpperCase(),"closepath"==t.command&&(t.x=e.x,t.y=e.y),n=t})),t};var $x=jx;const zx=["circle",wy,Sy,Iy,Ay,Ty,ky,"use"];let Hx,qx=1;function Yx(t,e,n,i=!1){e._getBBox=i?function(){return this.getBoundingClientRect()}:function(){const e=this.getBoundingClientRect(),n=this.getBBox?this.getBBox():e,i=this.getBBox?mx(t,this,n.x,n.y):{x:n.x,y:n.y},r=this.getBBox?mx(t,this,n.x+n.width,n.y+n.height):{x:n.x+n.width,y:n.y+n.height},s=Math.abs(i.x-r.x),a=Math.abs(i.y-r.y),o=e.left+e.width/2-s/2,c=e.top+e.height/2-a/2;return{[Vy]:s,[Uy]:a,[Ny]:o,[Dy]:o+s,[Oy]:c,[By]:c+a,[Ly]:o+s/2,[Fy]:c+a/2}},e.globalPosition=new gx(e._getBBox()[Ly]-t._getBBox()[Ny],e._getBBox()[Fy]-t._getBBox()[Oy]),e.localTransform=kx(e)}function Gx(t,e,n,i=!1){if(t&&t.nodeName.toLowerCase()!==Ey&&(!t.className||t.className.baseVal!==gy&&t.className.baseVal!==by)){if(i||t.nodeName===_y)e.svg=t,Yx(e.svg,t,0,i),t.id||(t.id=vy+"-"+qx++);else if(t.nodeName===xy)kx(t,n);else if(t.nodeName===My&&""!==t.textContent.trim()){let n=t.parentElement;n.nodeName!==Cy&&(n=yt(n).append("text").html(t.textContent).node(),yt(t).remove()),Yx(e.svg,n),n.removeAttribute("textLength"),e.textMarks.push(n),n.style["pointer-events"]="none",n.style["user-select"]="none"}else if(zx.includes(t.nodeName)){const i=t.nodeName;i===ky?(!function(t,e,n){const i=$x.parseSVG(t.getAttribute("d"));if(!i.length)return;t.contour=i;const r=i[i.length-1],s=["v","h"],a=function(t){if(t.length<=2||t.length%2!=0)return[];const e=[];for(let n=0;n<t.length;n+=2){if("M"!==t[n].code||"L"!==t[n+1].code)return[];const i=o();i.moveTo(t[n].x,t[n].y),i.lineTo(t[n+1].x,t[n+1].y),e.push(i.toString())}return e}(i);if(3===i.length&&"A"===i[1].code&&"A"===r.code)t.type=wy;else if(a.length){const i=yt(t.parentElement);a.forEach((r=>{const s=window.getComputedStyle(t);Gx(i.append("path").attr("d",r).style("fill",s.fill).style("color",s.color).style("stroke",s.stroke).style("stroke-width",s.strokeWidth).attr("id","test").node(),e,n)})),yt(t).remove()}else"Z"!==r.code?t.type=Sy:5===i.length&&s.includes(i[1].code)&&s.includes(i[2].code)&&s.includes(i[3].code)?t.type=Ty:t.type=Iy}(t,e,n),t.setAttribute("vector-effect","non-scaling-stroke")):i!==Ay&&i!==Iy&&i!==Sy||(t.type=i,t.setAttribute("vector-effect","non-scaling-stroke")),Yx(e.svg,t),t.setAttribute(Jy,"true"),e.svgMarks.includes(t)||e.svgMarks.push(t)}for(const i of t.childNodes)Gx(i,e,new gx(n))}}function Wx(t,e){var n;n=t.svg,Hx=yt(n).append("rect").attr("opacity",.35).attr("x",0).attr("y",0).attr("width",0).attr("height",0).attr("id",n.id+"-brush-rect").style("fill","gray").style("stroke","#fff");const[i,r]=gt(e,t.svg);Hx.attr("x",i).attr("y",r)}function Kx(t,e){const n=t.map((t=>{return e=function(t){const e=new Ux;return Gx(t,e,new gx,!0),e.svg=t,console.log(e),e}(t),e.svg.style.cursor="crosshair",Bx(e),function(t){t.svgMarks=t.svgMarks.filter((t=>t.type!==Sy));for(let e=0;e<t.svgMarks.length;++e){const n=t.svgMarks[e],i=t.svg._getBBox(),r=n._getBBox();if(n.type===Sy)continue;if(n.type===Ay){const e=n.getAttribute("points").split(" ").map((t=>t.split(",").map((t=>Number(t)))));n[Hy]=[];for(const s of e){let[e,a]=s;e-=i.left,a-=i.top;const o={};o[t.xAxis.title?t.xAxis.title.innerHTML.toLowerCase():"x"]=t.xAxis.scale.invert(e),o[t.yAxis.title?t.yAxis.title.innerHTML.toLowerCase():"y"]=t.yAxis.scale.invert(a);for(let e=0;e<t.legends.length;++e){const i=t.legends[e],s=i.type===Ry?i.scale.domain()[i.scale.range().indexOf(window.getComputedStyle(n)[i.matchingAttr])]:i.scale.invert(r.width**2);o[i.title?i.title.innerHTML.toLowerCase():"legend-"+e]=s}n[Hy].push(o)}continue}const s=t.xAxis.ordinal.length?e:t.yAxis.ordinal.length||n.type===Ty?r.right-i.left:r.centerX-i.left,a=t.yAxis.ordinal.length?e:t.xAxis.ordinal.length?r.top-i.top:r.centerY-i.top,o={};o[t.xAxis.title?t.xAxis.title.innerHTML.toLowerCase():"x"]=t.xAxis.ordinal.length?Ax(t.xAxis.scale,r.centerX-i.left):t.xAxis.scale.invert(s),o[t.yAxis.title?t.yAxis.title.innerHTML.toLowerCase():"y"]=t.yAxis.ordinal.length?Ax(t.yAxis.scale,r.centerY-i.top):"rect"===n.type?String(Math.round(t.yAxis.scale.invert(a))):t.yAxis.scale.invert(a);for(let e=0;e<t.legends.length;++e){const i=t.legends[e],s=i.type===Ry?i.scale.domain()[i.scale.range().indexOf(window.getComputedStyle(n)[i.matchingAttr])]:i.scale.invert(r.width**2);o[i.title?i.title.innerHTML.toLowerCase():"legend-"+e]=s}n.style["pointer-events"]="fill",n[Hy]=o,n[my]=n.hasAttribute("opacity")?+n.getAttribute("opacity"):window.getComputedStyle(n).opacity||dy}}(e),e.data=Vx(e.svgMarks),e;var e}));return hg(n,e),n.forEach((t=>function(t){const{data:e}=t,i=function(t){const e=new Map,n=function t(n,i,r){if(e.has(n))return[];e.set(n,!0);const{parents:s}=n;if(!s.length)return[[n,i,r]];let a=[];for(const e of s){const{next:n,aggregation:s,map:o,fields:c}=e;a=[...a,...t(n,[...i,[s,o]],mg(r,c))]}return a}(t,[],Object.fromEntries(ag(t.table,!0).map((t=>[t,t]))));return n.map((([t,e,n])=>[t,yg(t,e),n]))}(e);let r=!1;function s(e){if(r)return;const{target:s}=e;bg(i,function(t,e){return e[qy]===Jy?py(Xy,e,ly.POINT):e[qy]===Yy?py(Object.keys(e[Hy])[0],e[Hy],ly.POINT):(_g(t.svgMarks),t.legends.forEach((t=>_g(t.marks.map((t=>t.mark))))),null)}(t,s),hx(e)),Ig(n)}function a(e){let s,a,o,c;function u(e){e.stopPropagation(),e.preventDefault();const n=gt(e);if(Math.hypot(h[0]-n[0],h[1]-n[1])<5)return;r=!0;const[i,u,l,p]=function(t,e){e.preventDefault();const[n,i]=gt(e,t.svg),r=+Hx.node().getAttribute("x"),s=+Hx.node().getAttribute("y"),a=n-r,o=i-s,c=a<0?a:0,u=o<0?o:0;return Hx.attr("width",Math.abs(a)).attr("height",Math.abs(o)).attr("transform","translate("+c+","+u+")"),[r,s,a,o]}(t,e);s=t.xAxis.scale.invert(i),a=t.xAxis.scale.invert(i+l),o=t.yAxis.scale.invert(u),c=t.yAxis.scale.invert(u+p)}function l(e){if(Hx.remove(),r){const r=(h=t.xAxis.title.innerHTML.toLowerCase(),p=t.yAxis.title.innerHTML.toLowerCase(),d=[s,a],f=[o,c],[{[h]:{value:d[0],cond:">=",type:ly.RANGE}},{[h]:{value:d[1],cond:"<=",type:ly.RANGE}},{[p]:{value:f[0],cond:"<=",type:ly.RANGE}},{[p]:{value:f[1],cond:">=",type:ly.RANGE}}]);bg(i,r,hx(e)),Ig(n)}var h,p,d,f;t.svg.removeEventListener("mousemove",u),t.svg.removeEventListener("mouseup",l)}r=!1;const h=gt(e);t.interactions.brush&&(Wx(t,e),t.svg.addEventListener("mousemove",u),t.svg.addEventListener("mouseup",l))}t.svg.addEventListener("click",s),t.svg.addEventListener("mousedown",a)}(t))),n}t.hydrate=async function(t,e={}){if(t)return Array.isArray(t)||(t=[t]),Kx(t=t.map((t=>"string"==typeof t?document.querySelector(t):t)),await Fx(e))}}));
//# sourceMappingURL=divi.min.js.map
