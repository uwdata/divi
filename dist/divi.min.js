!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).divi={})}(this,(function(t){"use strict";const e=Math.PI,n=2*e,i=1e-6,r=n-i;function s(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}let a=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?s:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return s;const n=10**e;return function(t){this._+=t[0];for(let e=1,i=t.length;e<i;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,i){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,e,n,i,r,s){this._append`C${+t},${+e},${+n},${+i},${this._x1=+r},${this._y1=+s}`}arcTo(t,n,r,s,a){if(t=+t,n=+n,r=+r,s=+s,(a=+a)<0)throw new Error(`negative radius: ${a}`);let o=this._x1,c=this._y1,l=r-t,u=s-n,h=o-t,p=c-n,d=h*h+p*p;if(null===this._x1)this._append`M${this._x1=t},${this._y1=n}`;else if(d>i)if(Math.abs(p*l-u*h)>i&&a){let f=r-o,m=s-c,y=l*l+u*u,g=f*f+m*m,b=Math.sqrt(y),v=Math.sqrt(d),_=a*Math.tan((e-Math.acos((y+d-g)/(2*b*v)))/2),x=_/v,w=_/b;Math.abs(x-1)>i&&this._append`L${t+x*h},${n+x*p}`,this._append`A${a},${a},0,0,${+(p*f>h*m)},${this._x1=t+w*l},${this._y1=n+w*u}`}else this._append`L${this._x1=t},${this._y1=n}`;else;}arc(t,s,a,o,c,l){if(t=+t,s=+s,l=!!l,(a=+a)<0)throw new Error(`negative radius: ${a}`);let u=a*Math.cos(o),h=a*Math.sin(o),p=t+u,d=s+h,f=1^l,m=l?o-c:c-o;null===this._x1?this._append`M${p},${d}`:(Math.abs(this._x1-p)>i||Math.abs(this._y1-d)>i)&&this._append`L${p},${d}`,a&&(m<0&&(m=m%n+n),m>r?this._append`A${a},${a},0,1,${f},${t-u},${s-h}A${a},${a},0,1,${f},${this._x1=p},${this._y1=d}`:m>i&&this._append`A${a},${a},0,${+(m>=e)},${f},${this._x1=t+a*Math.cos(c)},${this._y1=s+a*Math.sin(c)}`)}rect(t,e,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}};function o(){return new a}o.prototype=a.prototype;var c="http://www.w3.org/1999/xhtml",l={svg:"http://www.w3.org/2000/svg",xhtml:c,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function u(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),l.hasOwnProperty(e)?{space:l[e],local:t}:t}function h(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===c&&e.documentElement.namespaceURI===c?e.createElement(t):e.createElementNS(n,t)}}function p(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function d(t){var e=u(t);return(e.local?p:h)(e)}function f(){}function m(t){return null==t?f:function(){return this.querySelector(t)}}function y(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function g(){return[]}function b(t){return function(e){return e.matches(t)}}var v=Array.prototype.find;function _(){return this.firstElementChild}var x=Array.prototype.filter;function w(){return Array.from(this.children)}function S(t){return new Array(t.length)}function I(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function A(t,e,n,i,r,s){for(var a,o=0,c=e.length,l=s.length;o<l;++o)(a=e[o])?(a.__data__=s[o],i[o]=a):n[o]=new I(t,s[o]);for(;o<c;++o)(a=e[o])&&(r[o]=a)}function T(t,e,n,i,r,s,a){var o,c,l,u=new Map,h=e.length,p=s.length,d=new Array(h);for(o=0;o<h;++o)(c=e[o])&&(d[o]=l=a.call(c,c.__data__,o,e)+"",u.has(l)?r[o]=c:u.set(l,c));for(o=0;o<p;++o)l=a.call(t,s[o],o,s)+"",(c=u.get(l))?(i[o]=c,c.__data__=s[o],u.delete(l)):n[o]=new I(t,s[o]);for(o=0;o<h;++o)(c=e[o])&&u.get(d[o])===c&&(r[o]=c)}function k(t){return t.__data__}function M(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function E(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function C(t){return function(){this.removeAttribute(t)}}function N(t){return function(){this.removeAttributeNS(t.space,t.local)}}function O(t,e){return function(){this.setAttribute(t,e)}}function L(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function B(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function D(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function F(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function V(t){return function(){this.style.removeProperty(t)}}function U(t,e,n){return function(){this.style.setProperty(t,e,n)}}function P(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function R(t){return function(){delete this[t]}}function j(t,e){return function(){this[t]=e}}function $(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function z(t){return t.trim().split(/^|\s+/)}function H(t){return t.classList||new q(t)}function q(t){this._node=t,this._names=z(t.getAttribute("class")||"")}function Y(t,e){for(var n=H(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function W(t,e){for(var n=H(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function G(t){return function(){Y(this,t)}}function K(t){return function(){W(this,t)}}function Q(t,e){return function(){(e.apply(this,arguments)?Y:W)(this,t)}}function J(){this.textContent=""}function Z(t){return function(){this.textContent=t}}function X(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function tt(){this.innerHTML=""}function et(t){return function(){this.innerHTML=t}}function nt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function it(){this.nextSibling&&this.parentNode.appendChild(this)}function rt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function st(){return null}function at(){var t=this.parentNode;t&&t.removeChild(this)}function ot(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ct(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function lt(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,s=e.length;i<s;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?e.length=r:delete this.__on}}}function ut(t,e,n){return function(){var i,r=this.__on,s=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(r)for(var a=0,o=r.length;a<o;++a)if((i=r[a]).type===t.type&&i.name===t.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),void(i.value=e);this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function ht(t,e,n){var i=F(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function pt(t,e){return function(){return ht(this,t,e)}}function dt(t,e){return function(){return ht(this,t,e.apply(this,arguments))}}I.prototype={constructor:I,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},q.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var ft=[null];function mt(t,e){this._groups=t,this._parents=e}function yt(t){return"string"==typeof t?new mt([[document.querySelector(t)]],[document.documentElement]):new mt([[t]],ft)}function gt(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}function bt(t){return"string"==typeof t?new mt([document.querySelectorAll(t)],[document.documentElement]):new mt([y(t)],ft)}mt.prototype={constructor:mt,select:function(t){"function"!=typeof t&&(t=m(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s,a,o=e[r],c=o.length,l=i[r]=new Array(c),u=0;u<c;++u)(s=o[u])&&(a=t.call(s,s.__data__,u,o))&&("__data__"in s&&(a.__data__=s.__data__),l[u]=a);return new mt(i,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return y(t.apply(this,arguments))}}(t):function(t){return null==t?g:function(){return this.querySelectorAll(t)}}(t);for(var e=this._groups,n=e.length,i=[],r=[],s=0;s<n;++s)for(var a,o=e[s],c=o.length,l=0;l<c;++l)(a=o[l])&&(i.push(t.call(a,a.__data__,l,o)),r.push(a));return new mt(i,r)},selectChild:function(t){return this.select(null==t?_:function(t){return function(){return v.call(this.children,t)}}("function"==typeof t?t:b(t)))},selectChildren:function(t){return this.selectAll(null==t?w:function(t){return function(){return x.call(this.children,t)}}("function"==typeof t?t:b(t)))},filter:function(t){"function"!=typeof t&&(t=function(t){return function(){return this.matches(t)}}(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s,a=e[r],o=a.length,c=i[r]=[],l=0;l<o;++l)(s=a[l])&&t.call(s,s.__data__,l,a)&&c.push(s);return new mt(i,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,k);var n,i=e?T:A,r=this._parents,s=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var a=s.length,o=new Array(a),c=new Array(a),l=new Array(a),u=0;u<a;++u){var h=r[u],p=s[u],d=p.length,f=M(t.call(h,h&&h.__data__,u,r)),m=f.length,y=c[u]=new Array(m),g=o[u]=new Array(m);i(h,p,y,g,l[u]=new Array(d),f,e);for(var b,v,_=0,x=0;_<m;++_)if(b=y[_]){for(_>=x&&(x=_+1);!(v=g[x])&&++x<m;);b._next=v||null}}return(o=new mt(o,r))._enter=c,o._exit=l,o},enter:function(){return new mt(this._enter||this._groups.map(S),this._parents)},exit:function(){return new mt(this._exit||this._groups.map(S),this._parents)},join:function(t,e,n){var i=this.enter(),r=this,s=this.exit();return"function"==typeof t?(i=t(i))&&(i=i.selection()):i=i.append(t+""),null!=e&&(r=e(r))&&(r=r.selection()),null==n?s.remove():n(s),i&&r?i.merge(r).order():r},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,s=i.length,a=Math.min(r,s),o=new Array(r),c=0;c<a;++c)for(var l,u=n[c],h=i[c],p=u.length,d=o[c]=new Array(p),f=0;f<p;++f)(l=u[f]||h[f])&&(d[f]=l);for(;c<r;++c)o[c]=n[c];return new mt(o,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],s=r.length-1,a=r[s];--s>=0;)(i=r[s])&&(a&&4^i.compareDocumentPosition(a)&&a.parentNode.insertBefore(i,a),a=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=E);for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var a,o=n[s],c=o.length,l=r[s]=new Array(c),u=0;u<c;++u)(a=o[u])&&(l[u]=a);l.sort(e)}return new mt(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,s=i.length;r<s;++r){var a=i[r];if(a)return a}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,s=e[n],a=0,o=s.length;a<o;++a)(r=s[a])&&t.call(r,r.__data__,a,s);return this},attr:function(t,e){var n=u(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?N:C:"function"==typeof e?n.local?D:B:n.local?L:O)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?V:"function"==typeof e?P:U)(t,e,null==n?"":n)):function(t,e){return t.style.getPropertyValue(e)||F(t).getComputedStyle(t,null).getPropertyValue(e)}(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?R:"function"==typeof e?$:j)(t,e)):this.node()[t]},classed:function(t,e){var n=z(t+"");if(arguments.length<2){for(var i=H(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?Q:e?G:K)(n,e))},text:function(t){return arguments.length?this.each(null==t?J:("function"==typeof t?X:Z)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?tt:("function"==typeof t?nt:et)(t)):this.node().innerHTML},raise:function(){return this.each(it)},lower:function(){return this.each(rt)},append:function(t){var e="function"==typeof t?t:d(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:d(t),i=null==e?st:"function"==typeof e?e:m(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(at)},clone:function(t){return this.select(t?ct:ot)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,s=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),a=s.length;if(!(arguments.length<2)){for(o=e?ut:lt,i=0;i<a;++i)this.each(o(s[i],e,n));return this}var o=this.node().__on;if(o)for(var c,l=0,u=o.length;l<u;++l)for(i=0,c=o[l];i<a;++i)if((r=s[i]).type===c.type&&r.name===c.name)return c.value},dispatch:function(t,e){return this.each(("function"==typeof e?dt:pt)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i,r=t[e],s=0,a=r.length;s<a;++s)(i=r[s])&&(yield i)}};var vt=Array.isArray;function _t(t){return null!=t?vt(t)?t:[t]:[]}function xt(t){return t<0?`count() + ${t}`:t}class wt{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,e){return this.__derive(this,t,e)}filter(t){return this.__filter(this,t)}slice(t,e){return this.filter(function(t=0,e=1/0){return`${xt(t)} < row_number() && row_number() <= ${xt(e)}`}(t,e)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,e){return this.__relocate(this,_t(t),e)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,e){return this.__sample(this,t,e)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,e){return this.__impute(this,t,e)}fold(t,e){return this.__fold(this,t,e)}pivot(t,e,n){return this.__pivot(this,t,e,n)}spread(t,e){return this.__spread(this,t,e)}unroll(t,e){return this.__unroll(this,t,e)}lookup(t,e,...n){return this.__lookup(this,t,e,n.flat())}join(t,e,n,i){return this.__join(this,t,e,n,i)}join_left(t,e,n,i){const r={...i,left:!0,right:!1};return this.__join(this,t,e,n,r)}join_right(t,e,n,i){const r={...i,left:!1,right:!0};return this.__join(this,t,e,n,r)}join_full(t,e,n,i){const r={...i,left:!0,right:!0};return this.__join(this,t,e,n,r)}cross(t,e,n){return this.__cross(this,t,e,n)}semijoin(t,e){return this.__semijoin(this,t,e)}antijoin(t,e){return this.__antijoin(this,t,e)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function St(t){throw Error(t)}function It(t){return"number"==typeof t}function At(t){return"function"==typeof t}function Tt(t,e){const n=Array(t);if(At(e))for(let i=0;i<t;++i)n[i]=e(i);else n.fill(e);return n}let kt=class extends wt{constructor(t,e,n,i,r,s,a){super(a),this._names=Object.freeze(t),this._data=n,this._total=e,this._nrows=i?i.count():e,this._mask=e!==this._nrows&&i||null,this._group=r||null,this._order=s||null}create(t){St("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(1!==this.numRows()?"s":"");return`Table: ${this.numCols()+" col"+(1!==this.numCols()?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,e){return this.array(t,e)}array(t,e){St("Not implemented")}*values(t){const e=this.getter(t),n=this.numRows();for(let t=0;t<n;++t)yield e(t)}get(t,e=0){St("Not implemented")}getter(t){St("Not implemented")}objects(t){St("Not implemented")}object(t){St("Not implemented")}[Symbol.iterator](){St("Not implemented")}print(t={}){It(t)?t={limit:t}:null==t.limit&&(t.limit=10);const e=this.objects({...t,grouped:!1}),n=`${this[Symbol.toStringTag]}. Showing ${e.length} rows.`;return console.log(n),console.table(e),this}indices(t=!0){if(this._index)return this._index;const e=this.numRows(),n=new Uint32Array(e),i=this.isOrdered(),r=this.mask();let s=-1;if(r)for(let t=r.next(0);t>=0;t=r.next(t+1))n[++s]=t;else for(let t=0;t<e;++t)n[++s]=t;if(t&&i){const t=this._order,e=this._data;n.sort(((n,i)=>t(n,i,e)))}return!t&&i||(this._index=n),n}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:e,size:n}=this._group,i=Tt(n,(()=>[])),r=this._index,s=this.mask(),a=this.numRows();if(r&&this.isOrdered())for(let t,n=0;n<a;++n)t=r[n],i[e[t]].push(t);else if(s)for(let t=s.next(0);t>=0;t=s.next(t+1))i[e[t]].push(t);else for(let t=0;t<a;++t)i[e[t]].push(t);if(t&&!r&&this.isOrdered()){const t=this._order,e=this._data;for(let r=0;r<n;++r)i[r].sort(((n,i)=>t(n,i,e)))}return!t&&this.isOrdered()||(this._partitions=i),i}scan(t,e,n=1/0,i=0){const r=this._mask,s=this._nrows,a=this._data;let o=i||0;if(o>s)return;const c=Math.min(s,o+n),l=()=>o=this._total;if(e&&this.isOrdered()||r&&this._index){const e=this.indices(),n=this._data;for(;o<c;++o)t(e[o],n,l)}else if(r){let e=c-o+1;for(o=r.nth(o);--e&&o>-1;o=r.next(o+1))t(o,a,l)}else for(;o<c;++o)t(o,a,l)}slice(t=0,e=1/0){if(this.isGrouped())return super.slice(t,e);const n=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),e=Math.min(i,Math.max(0,e+(e<0?i:0))),this.scan((t=>n.push(t)),!0,e-t,t),this.reify(n)}reduce(t){return this.__reduce(this,t)}},Mt=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},Et=function(t){return t&&At(t.get)?t:new Mt(t)};function Ct(t){return t instanceof Date}function Nt(t){return t===Object(t)}function Ot(t){return t instanceof RegExp}function Lt(t){return"string"==typeof t}function Bt(t,e){const n=e=>St(`Illegal argument type: ${e||typeof t}`);return t instanceof Map?Dt(t.entries(),e):Ct(t)?n("Date"):Ot(t)?n("RegExp"):Lt(t)?n():vt(t)?function(t,e){const n=t.length,i={},r=t=>i[t]=Array(n);if(n){const i=(e=e||Object.keys(t[0])).map(r),s=i.length;for(let r=0;r<n;++r){const n=t[r];for(let t=0;t<s;++t)i[t][r]=n[e[t]]}}else e&&e.forEach(r);return i}(t,e):At(t[Symbol.iterator])?function(t,e){const n={},i=t=>n[t]=[];let r,s;for(const n of t){r||(r=(e=e||Object.keys(n)).map(i),s=r.length);for(let t=0;t<s;++t)r[t].push(n[e[t]])}!r&&e&&e.forEach(i);return n}(t,e):Nt(t)?Dt(Object.entries(t),e):n()}function Dt(t,e=["key","value"]){const n=[],i=[];for(const[e,r]of t)n.push(e),i.push(r);const r={};return e[0]&&(r[e[0]]=n),e[1]&&(r[e[1]]=i),r}const{hasOwnProperty:Ft}=Object.prototype;function Vt(t,e){return Ft.call(t,e)}function Ut(t){return t?new Pt({...t.data()},t.columnNames()):new Pt}class Pt{constructor(t,e){this.data=t||{},this.names=e||[]}add(t,e){return this.has(t)||this.names.push(t+""),this.data[t]=e}has(t){return Vt(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}var Rt=void 0;const jt=Object.getPrototypeOf(Int8Array);function $t(t){return t instanceof jt}function zt(t){return vt(t)||$t(t)}function Ht(t){return null!=t&&t==t}const qt=t=>zt(t)||Lt(t);var Yt={compact:t=>zt(t)?t.filter((t=>Ht(t))):t,concat:(...t)=>[].concat(...t),includes:(t,e,n)=>!!qt(t)&&t.includes(e,n),indexof:(t,e)=>qt(t)?t.indexOf(e):-1,join:(t,e)=>zt(t)?t.join(e):Rt,lastindexof:(t,e)=>qt(t)?t.lastIndexOf(e):-1,length:t=>qt(t)?t.length:0,pluck:(t,e)=>zt(t)?t.map((t=>Ht(t)?t[e]:Rt)):Rt,reverse:t=>zt(t)?t.slice().reverse():Lt(t)?t.split("").reverse().join(""):Rt,slice:(t,e,n)=>qt(t)?t.slice(e,n):Rt};function Wt(t,e,n="0"){const i=t+"",r=i.length;return r<e?Array(e-r+1).join(n)+i:i}const Gt=t=>(t<10?"0":"")+t,Kt=t=>t<0?"-"+Wt(-t,6):t>9999?"+"+Wt(t,6):Wt(t,4);function Qt(t,e,n,i,r,s,a,o,c){const l=o?"Z":"";return Kt(t)+"-"+Gt(e+1)+"-"+Gt(n)+(!c||a?"T"+Gt(i)+":"+Gt(r)+":"+Gt(s)+"."+Wt(a,3)+l:s?"T"+Gt(i)+":"+Gt(r)+":"+Gt(s)+l:r||i||!o?"T"+Gt(i)+":"+Gt(r)+l:"")}function Jt(t,e){return isNaN(t)?"Invalid Date":Qt(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds(),!1,e)}function Zt(t,e){return isNaN(t)?"Invalid Date":Qt(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds(),!0,e)}const Xt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function te(t){return t.match(Xt)}const ee=864e5,ne=6048e5,ie=new Date,re=new Date,se=t=>(ie.setTime("string"==typeof t?function(t,e=Date.parse){return te(t)?e(t):t}(t):t),ie);var ae={format_date:(t,e)=>Jt(se(t),!e),format_utcdate:(t,e)=>Zt(se(t),!e),timestamp:t=>+se(t),year:t=>se(t).getFullYear(),quarter:t=>Math.floor(se(t).getMonth()/3),month:t=>se(t).getMonth(),date:t=>se(t).getDate(),dayofweek:t=>se(t).getDay(),hours:t=>se(t).getHours(),minutes:t=>se(t).getMinutes(),seconds:t=>se(t).getSeconds(),milliseconds:t=>se(t).getMilliseconds(),utcyear:t=>se(t).getUTCFullYear(),utcquarter:t=>Math.floor(se(t).getUTCMonth()/3),utcmonth:t=>se(t).getUTCMonth(),utcdate:t=>se(t).getUTCDate(),utcdayofweek:t=>se(t).getUTCDay(),utchours:t=>se(t).getUTCHours(),utcminutes:t=>se(t).getUTCMinutes(),utcseconds:t=>se(t).getUTCSeconds(),utcmilliseconds:t=>se(t).getUTCMilliseconds(),datetime:function(t,e,n,i,r,s,a){return arguments.length?new Date(t,e||0,null==n?1:n,i||0,r||0,s||0,a||0):new Date(Date.now())},dayofyear:function(t){re.setTime(+t),re.setHours(0,0,0,0),ie.setTime(+re),ie.setMonth(0),ie.setDate(1);const e=6e4*(re.getTimezoneOffset()-ie.getTimezoneOffset());return Math.floor(1+(re-ie-e)/ee)},week:function(t,e){const n=e||0;re.setTime(+t),re.setDate(re.getDate()-(re.getDay()+7-n)%7),re.setHours(0,0,0,0),ie.setTime(+t),ie.setMonth(0),ie.setDate(1),ie.setDate(1-(ie.getDay()+7-n)%7),ie.setHours(0,0,0,0);const i=6e4*(re.getTimezoneOffset()-ie.getTimezoneOffset());return Math.floor((re-ie+1-i)/ne)},utcdatetime:function(t,e,n,i,r,s,a){return arguments.length?new Date(Date.UTC(t,e||0,null==n?1:n,i||0,r||0,s||0,a||0)):new Date(Date.now())},utcdayofyear:function(t){re.setTime(+t),re.setUTCHours(0,0,0,0);const e=Date.UTC(re.getUTCFullYear(),0,1);return Math.floor(1+(re-e)/ee)},utcweek:function(t,e){const n=e||0;return re.setTime(+t),re.setUTCDate(re.getUTCDate()-(re.getUTCDay()+7-n)%7),re.setUTCHours(0,0,0,0),ie.setTime(+t),ie.setUTCMonth(0),ie.setUTCDate(1),ie.setUTCDate(1-(ie.getUTCDay()+7-n)%7),ie.setUTCHours(0,0,0,0),Math.floor((re-ie+1)/ne)},now:Date.now};function oe(t,e){return null!=t&&null!=e&&t==t&&e==e&&(t===e||(Ct(t)||Ct(e)?+t==+e:Ot(t)&&Ot(e)?t+""==e+"":!(!Nt(t)||!Nt(e))&&function(t,e){if(Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;if(t.length||e.length)return ce(t,e);const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;if(n.sort(),i.sort(),!ce(n,i,((t,e)=>t===e)))return!1;const r=n.length;for(let i=0;i<r;++i){const r=n[i];if(!oe(t[r],e[r]))return!1}return!0}(t,e)))}function ce(t,e,n=oe){const i=t.length;if(i!==e.length)return!1;for(let r=0;r<i;++r)if(!n(t[r],e[r]))return!1;return!0}var le={parse_json:t=>JSON.parse(t),to_json:t=>JSON.stringify(t)};let ue=Math.random;function he(){return ue()}function pe(t){return t instanceof Map}function de(t){return pe(t)||function(t){return t instanceof Set}(t)}function fe(t){return Array.from(t)}var me={has:(t,e)=>de(t)?t.has(e):null!=t&&Vt(t,e),keys:t=>pe(t)?fe(t.keys()):null!=t?Object.keys(t):[],values:t=>de(t)?fe(t.values()):null!=t?Object.values(t):[],entries:t=>de(t)?fe(t.entries()):null!=t?Object.entries(t):[],object:t=>t?Object.fromEntries(t):Rt};var ye={bin:function(t,e,n,i,r){return null==t?null:t<e?-1/0:t>n?1/0:(t=Math.max(e,Math.min(t,n)),e+i*Math.floor(1e-14+(t-e)/i+(r||0)))},equal:oe,recode:function(t,e,n){if(e instanceof Map){if(e.has(t))return e.get(t)}else if(Vt(e,t))return e[t];return void 0!==n?n:t},sequence:function(t,e,n){let i=arguments.length;t=+t,e=+e,n=i<2?(e=t,t=0,1):i<3?1:+n,i=0|Math.max(0,Math.ceil((e-t)/n));const r=new Array(i);for(let e=0;e<i;++e)r[e]=t+e*n;return r},...Yt,...ae,...le,...{random:he,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:t=>180*t/Math.PI,radians:t=>Math.PI*t/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh},...me,...{parse_date:t=>null==t?t:new Date(t),parse_float:t=>null==t?t:Number.parseFloat(t),parse_int:(t,e)=>null==t?t:Number.parseInt(t,e),endswith:(t,e,n)=>null!=t&&String(t).endsWith(e,n),match:(t,e,n)=>{const i=null==t?t:String(t).match(e);return null==n||null==i?i:"number"==typeof n?i[n]:i.groups?i.groups[n]:null},normalize:(t,e)=>null==t?t:String(t).normalize(e),padend:(t,e,n)=>null==t?t:String(t).padEnd(e,n),padstart:(t,e,n)=>null==t?t:String(t).padStart(e,n),upper:t=>null==t?t:String(t).toUpperCase(),lower:t=>null==t?t:String(t).toLowerCase(),repeat:(t,e)=>null==t?t:String(t).repeat(e),replace:(t,e,n)=>null==t?t:String(t).replace(e,String(n)),substring:(t,e,n)=>null==t?t:String(t).substring(e,n),split:(t,e,n)=>null==t?[]:String(t).split(e,n),startswith:(t,e,n)=>null!=t&&String(t).startsWith(e,n),trim:t=>null==t?t:String(t).trim()}};function ge(t){return"bigint"==typeof t}function be(t){return void 0===t?t+"":ge(t)?t+"n":JSON.stringify(t)}function ve(t,e=[],n=[]){return new _e(t,_t(e),_t(n))}let _e=class{constructor(t,e,n){this.name=t,this.fields=e,this.params=n}toString(){const t=[...this.fields.map((t=>`d[${be(t)}]`)),...this.params.map(be)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const xe=t=>ve("any",t),we=()=>ve("count"),Se=t=>ve("array_agg",t),Ie=t=>ve("array_agg_distinct",t),Ae=(t,e)=>ve("map_agg",[t,e]),Te=(t,e)=>ve("object_agg",[t,e]),ke=(t,e)=>ve("entries_agg",[t,e]);var Me={...ye,row_object:(...t)=>ve("row_object",null,t.flat()),count:we,any:xe,array_agg:Se,array_agg_distinct:Ie,object_agg:Te,map_agg:Ae,entries_agg:ke,valid:t=>ve("valid",t),invalid:t=>ve("invalid",t),distinct:t=>ve("distinct",t),mode:t=>ve("mode",t),sum:t=>ve("sum",t),product:t=>ve("product",t),mean:t=>ve("mean",t),average:t=>ve("average",t),variance:t=>ve("variance",t),variancep:t=>ve("variancep",t),stdev:t=>ve("stdev",t),stdevp:t=>ve("stdevp",t),min:t=>ve("min",t),max:t=>ve("max",t),quantile:(t,e)=>ve("quantile",t,e),median:t=>ve("median",t),covariance:(t,e)=>ve("covariance",[t,e]),covariancep:(t,e)=>ve("covariancep",[t,e]),corr:(t,e)=>ve("corr",[t,e]),bins:(t,e,n,i)=>ve("bins",t,[e,n,i]),row_number:()=>ve("row_number"),rank:()=>ve("rank"),avg_rank:()=>ve("avg_rank"),dense_rank:()=>ve("dense_rank"),percent_rank:()=>ve("percent_rank"),cume_dist:()=>ve("cume_dist"),ntile:t=>ve("ntile",null,t),lag:(t,e,n)=>ve("lag",t,[e,n]),lead:(t,e,n)=>ve("lead",t,[e,n]),first_value:t=>ve("first_value",t),last_value:t=>ve("last_value",t),nth_value:(t,e)=>ve("nth_value",t,e),fill_down:(t,e)=>ve("fill_down",t,e),fill_up:(t,e)=>ve("fill_up",t,e)};function Ee(t,e,n,i){const r="map"===i||!0===i?Ae:"entries"===i?ke:"object"===i?Te:St('groups option must be "map", "entries", or "object".'),{names:s}=t.groups(),a=function(t,e){t=de(t)?t:new Set(t);let n=e,i=0;for(;t.has(n);)n=e+ ++i;return n}(t.columnNames(),"_");let o=t.select().reify(e).create({data:{[a]:n}}).rollup({[a]:Se(a)});for(let t=s.length;--t>=0;)o=o.groupby(s.slice(0,t)).rollup({[a]:r(s[t],a)});return o.get(a)}const Ce="ArrowFunctionExpression",Ne="FunctionExpression",Oe="Identifier",Le="Literal",Be="MemberExpression",De="ObjectExpression",Fe="ObjectPattern",Ve="Property",Ue="Column",Pe="Constant",Re="Dictionary",je="Parameter",$e=(t,e)=>{const n=Ke[t.type];return n?n(t,e):St(`Unsupported expression construct: ${t.type}`)},ze=(t,e)=>"("+$e(t.left,e)+" "+t.operator+" "+$e(t.right,e)+")",He=(t,e)=>"("+Ye(t.params,e)+")=>"+$e(t.body,e),qe=(t,e)=>$e(t.callee,e)+"("+Ye(t.arguments,e)+")",Ye=(t,e,n=",")=>t.map((t=>$e(t,e))).join(n),We=t=>t.computed?`[${be(t.name)}]`:`.${t.name}`,Ge=(t,e,n)=>{const i=t.table||"";return`data${i}${We(t)}.${n}(${e.index}${i})`},Ke={Constant:t=>t.raw,Column:(t,e)=>Ge(t,e,"get"),Dictionary:(t,e)=>Ge(t,e,"key"),Function:t=>`fn.${t.name}`,Parameter:t=>`$${We(t)}`,Op:(t,e)=>`op(${be(t.name)},${e.op||e.index})`,Literal:t=>t.raw,Identifier:t=>t.name,TemplateLiteral:(t,e)=>{const{quasis:n,expressions:i}=t,r=i.length;let s=n[0].value.raw;for(let t=0;t<r;)s+="${"+$e(i[t],e)+"}"+n[++t].value.raw;return"`"+s+"`"},MemberExpression:(t,e)=>{const n=!t.computed,i=$e(t.object,e),r=$e(t.property,e);return i+(n?"."+r:"["+r+"]")},CallExpression:qe,NewExpression:(t,e)=>"new "+qe(t,e),ArrayExpression:(t,e)=>"["+Ye(t.elements,e)+"]",AssignmentExpression:ze,BinaryExpression:ze,LogicalExpression:ze,UnaryExpression:(t,e)=>"("+t.operator+$e(t.argument,e)+")",ConditionalExpression:(t,e)=>"("+$e(t.test,e)+"?"+$e(t.consequent,e)+":"+$e(t.alternate,e)+")",ObjectExpression:(t,e)=>"({"+Ye(t.properties,e)+"})",Property:(t,e)=>{const n=$e(t.key,e);return(t.computed?`[${n}]`:n)+":"+$e(t.value,e)},ArrowFunctionExpression:He,FunctionExpression:He,FunctionDeclaration:He,ArrayPattern:(t,e)=>"["+Ye(t.elements,e)+"]",ObjectPattern:(t,e)=>"{"+Ye(t.properties,e)+"}",VariableDeclaration:(t,e)=>t.kind+" "+Ye(t.declarations,e,","),VariableDeclarator:(t,e)=>$e(t.id,e)+"="+$e(t.init,e),SpreadElement:(t,e)=>"..."+$e(t.argument,e),BlockStatement:(t,e)=>"{"+Ye(t.body,e,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(t,e)=>$e(t.expression,e),IfStatement:(t,e)=>"if ("+$e(t.test,e)+")"+$e(t.consequent,e)+(t.alternate?" else "+$e(t.alternate,e):""),SwitchStatement:(t,e)=>"switch ("+$e(t.discriminant,e)+") {"+Ye(t.cases,e,"")+"}",SwitchCase:(t,e)=>(t.test?"case "+$e(t.test,e):"default")+": "+Ye(t.consequent,e,";")+";",ReturnStatement:(t,e)=>"return "+$e(t.argument,e),Program:(t,e)=>$e(t.body[0],e)};function Qe(t,e={index:"row"}){return $e(t,e)}function Je(t){const e=typeof t;return"string"===e?`"${t}"`:"object"===e&&t?Ct(t)?+t:vt(t)||$t(t)?`[${t.map(Je)}]`:Ot(t)?t+"":function(t){let e="{",n=-1;for(const i in t)++n>0&&(e+=","),e+=`"${i}":${Je(t[i])}`;return e+="}",e}(t):t}function Ze(t,e){const n=t.length;return 1===n?(e,n)=>Je(t[0](e,n)):(i,r)=>{let s="";for(let a=0;a<n;++a){a>0&&(s+="|");const n=t[a](i,r);if(e&&(null==n||n!=n))return null;s+=Je(n)}return s}}function Xe(){}function tn(t){return t.init=t.init||Xe,t.add=t.add||Xe,t.rem=t.rem||Xe,t}function en(t,e){return t.product_v=!1,t.product=e}var nn={count:{create:()=>tn({value:t=>t.count}),param:[]},array_agg:{create:()=>tn({init:t=>t.values=!0,value:t=>t.list.values(t.stream)}),param:[1]},object_agg:{create:()=>tn({init:t=>t.values=!0,value:t=>Object.fromEntries(t.list.values())}),param:[2]},map_agg:{create:()=>tn({init:t=>t.values=!0,value:t=>new Map(t.list.values())}),param:[2]},entries_agg:{create:()=>tn({init:t=>t.values=!0,value:t=>t.list.values(t.stream)}),param:[2]},any:{create:()=>tn({add:(t,e)=>{null==t.any&&(t.any=e)},value:t=>t.valid?t.any:Rt}),param:[1]},valid:{create:()=>tn({value:t=>t.valid}),param:[1]},invalid:{create:()=>tn({value:t=>t.count-t.valid}),param:[1]},distinct:{create:()=>({init:t=>t.distinct=function(){const t=new Map;return{count:()=>t.size,values:()=>Array.from(t.values(),(t=>t.v)),increment(e){const n=Je(e),i=t.get(n);i?++i.n:t.set(n,{v:e,n:1})},decrement(e){const n=Je(e),i=t.get(n);1===i.n?t.delete(n):--i.n},forEach(e){t.forEach((({v:t,n})=>e(t,n)))}}}(),value:t=>t.distinct.count()+(t.valid===t.count?0:1),add:(t,e)=>t.distinct.increment(e),rem:(t,e)=>t.distinct.decrement(e)}),param:[1]},array_agg_distinct:{create:()=>tn({value:t=>t.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>tn({value:t=>{let e=Rt,n=0;return t.distinct.forEach(((t,i)=>{i>n&&(n=i,e=t)})),e}}),param:[1],req:["distinct"]},sum:{create:()=>({init:t=>t.sum=0,value:t=>t.valid?t.sum:Rt,add:(t,e)=>ge(e)?0===t.sum?t.sum=e:t.sum+=e:t.sum+=+e,rem:(t,e)=>t.sum-=e}),param:[1]},product:{create:()=>({init:t=>en(t,1),value:t=>t.valid?t.product_v?en(t,function(t,e=0,n=t.length){let i=t[e++];for(let r=e;r<n;++r)i*=t[r];return i}(t.list.values())):t.product:void 0,add:(t,e)=>ge(e)&&1===t.product?t.product=e:t.product*=e,rem:(t,e)=>0==e||e===1/0||e===-1/0?t.product_v=!0:t.product/=e}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:t=>t.mean=0,value:t=>t.valid?t.mean:Rt,add:(t,e)=>{t.mean_d=e-t.mean,t.mean+=t.mean_d/t.valid},rem:(t,e)=>{t.mean_d=e-t.mean,t.mean-=t.valid?t.mean_d/t.valid:t.mean}}),param:[1]},average:{create:()=>tn({value:t=>t.valid?t.mean:Rt}),param:[1],req:["mean"]},variance:{create:()=>({init:t=>t.dev=0,value:t=>t.valid>1?t.dev/(t.valid-1):Rt,add:(t,e)=>t.dev+=t.mean_d*(e-t.mean),rem:(t,e)=>t.dev-=t.mean_d*(e-t.mean)}),param:[1],req:["mean"]},variancep:{create:()=>tn({value:t=>t.valid>1?t.dev/t.valid:Rt}),param:[1],req:["variance"]},stdev:{create:()=>tn({value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid-1)):Rt}),param:[1],req:["variance"]},stdevp:{create:()=>tn({value:t=>t.valid>1?Math.sqrt(t.dev/t.valid):Rt}),param:[1],req:["variance"]},min:{create:()=>({init:t=>t.min=Rt,value:t=>t.min=Number.isNaN(t.min)?t.list.min():t.min,add:(t,e)=>{(e<t.min||t.min===Rt)&&(t.min=e)},rem:(t,e)=>{e<=t.min&&(t.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:t=>t.max=Rt,value:t=>t.max=Number.isNaN(t.max)?t.list.max():t.max,add:(t,e)=>{(e>t.max||t.max===Rt)&&(t.max=e)},rem:(t,e)=>{e>=t.max&&(t.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:t=>tn({value:e=>e.list.quantile(t)}),param:[1,1],req:["array_agg"]},median:{create:()=>tn({value:t=>t.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:t=>{t.cov=t.mean_x=t.mean_y=t.dev_x=t.dev_y=0},value:t=>t.valid>1?t.cov/(t.valid-1):Rt,add:(t,e,n)=>{const i=e-t.mean_x,r=n-t.mean_y;t.mean_x+=i/t.valid,t.mean_y+=r/t.valid;const s=n-t.mean_y;t.dev_x+=i*(e-t.mean_x),t.dev_y+=r*s,t.cov+=i*s},rem:(t,e,n)=>{const i=e-t.mean_x,r=n-t.mean_y;t.mean_x-=t.valid?i/t.valid:t.mean_x,t.mean_y-=t.valid?r/t.valid:t.mean_y;const s=n-t.mean_y;t.dev_x-=i*(e-t.mean_x),t.dev_y-=r*s,t.cov-=i*s}}),param:[2]},covariancep:{create:()=>tn({value:t=>t.valid>1?t.cov/t.valid:Rt}),param:[2],req:["covariance"]},corr:{create:()=>tn({value:t=>t.valid>1?t.cov/(Math.sqrt(t.dev_x)*Math.sqrt(t.dev_y)):Rt}),param:[2],req:["covariance"]},bins:{create:(t,e,n,i)=>tn({value:r=>function(t,e,n=15,i=!0,r=0,s){const a=Math.LN10;if(null==s){const i=Math.ceil(Math.log(n)/a),o=e-t||Math.abs(t)||1,c=[5,2];for(s=Math.max(r,Math.pow(10,Math.round(Math.log(o)/a)-i));Math.ceil(o/s)>n;)s*=10;const l=c.length;for(let t=0;t<l;++t){const e=s/c[t];e>=r&&o/e<=n&&(s=e)}}if(i){let n=Math.log(s);const i=n>=0?0:1+~~(-n/a),r=Math.pow(10,-i-1);n=Math.floor(t/s+r)*s,t=t<n?n-s:n,e=Math.ceil(e/s)*s}return[t,e===t?t+s:e,s]}(r.min,r.max,t,e,n,i)}),param:[1,4],req:["min","max"]}};const rn={create(){let t;return{init:()=>t=1,value:e=>{const n=e.index;return n&&!e.peer(n)?t=n+1:t}}},param:[]},sn={create(){let t;return{init:()=>t=0,value:e=>{const{index:n,peer:i,size:r}=e;let s=n;if(t<s){for(;s+1<r&&i(s+1);)++s;t=s}return(1+t)/r}}},param:[]};var an={row_number:{create:()=>({init:Xe,value:t=>t.index+1}),param:[]},rank:rn,avg_rank:{create(){let t,e;return{init:()=>(t=-1,e=1),value:n=>{const i=n.index;if(i>=t){for(e=t=i+1;n.peer(t);e+=++t);e/=t-i}return e}}},param:[]},dense_rank:{create(){let t;return{init:()=>t=1,value:e=>{const n=e.index;return n&&!e.peer(n)?++t:t}}},param:[]},percent_rank:{create(){const{init:t,value:e}=rn.create();return{init:t,value:t=>(e(t)-1)/(t.size-1)}},param:[]},cume_dist:sn,ntile:{create(t){(t=+t)>0||St("ntile num must be greater than zero.");const{init:e,value:n}=sn.create();return{init:e,value:e=>Math.ceil(t*n(e))}},param:[0,1]},lag:{create:(t,e=Rt)=>(t=+t||1,{init:Xe,value:(n,i)=>{const r=n.index-t;return r>=0?n.value(r,i):e}}),param:[1,2]},lead:{create:(t,e=Rt)=>(t=+t||1,{init:Xe,value:(n,i)=>{const r=n.index+t;return r<n.size?n.value(r,i):e}}),param:[1,2]},first_value:{create:()=>({init:Xe,value:(t,e)=>t.value(t.i0,e)}),param:[1]},last_value:{create:()=>({init:Xe,value:(t,e)=>t.value(t.i1-1,e)}),param:[1]},nth_value:{create:t=>((t=+t)>0||St("nth_value nth must be greater than zero."),{init:Xe,value:(e,n)=>{const i=e.i0+(t-1);return i<e.i1?e.value(i,n):Rt}}),param:[1,1]},fill_down:{create(t=Rt){let e;return{init:()=>e=t,value:(t,n)=>{const i=t.value(t.index,n);return Ht(i)?e=i:e}}},param:[1,1]},fill_up:{create(t=Rt){let e,n;return{init:()=>(e=t,n=-1),value:(i,r)=>i.index<=n?e:(n=function(t,e,n){for(const i=t.size;n<i;++n)if(Ht(t.value(n,e)))return n;return-1}(i,r,i.index))>=0?e=i.value(n,r):(n=i.size,e=t)}},param:[1,1]}};function on(t){return Vt(nn,t)}function cn(t){return Vt(an,t)}function ln(t){return Vt(ye,t)||"row_object"===t}function un(t){return on(t)&&nn[t]}function hn(t){return cn(t)&&an[t]}function pn(t,e,n){return t=`"use strict"; return ${t};`,Function("fn","$",t)(e,n)}var dn={escape:(t,e,n)=>pn(t,e,n),expr:(t,e)=>pn(`(row,data,op)=>${t}`,ye,e),expr2:(t,e)=>pn(`(row0,data0,row,data)=>${t}`,ye,e),join:(t,e)=>pn(`(row1,data1,row2,data2)=>${t}`,ye,e),param:(t,e)=>pn(t,ye,e)};const fn={"==":1,"!=":1,"===":1,"!==":1};function mn(t,e,n=0,i,r){if(t.type=Ue,t.name=e,t.table=n,r&&i&&At(i.keyFor)){const e=fn[r.operator]?r.left===t?r.right:r.left:r.callee&&"equal"===r.callee.name?r.arguments[r.arguments[0]===t?1:0]:null;e&&e.type===Le&&function(t,e,n,i){i<0?(t.type=Le,t.value=!1,t.raw="false"):(e.type=Re,n.value=i,n.raw=i+"")}(r,t,e,i.keyFor(e.value))}return t}function yn(t){return vt(t)?t:pe(t)?t.entries():t?Object.entries(t):[]}const gn="row_object";function bn(t,e){t.type=De;const n=t.properties=[];for(const t of yn(e)){const[e,i]=vt(t)?t:[t,t];n.push({type:Ve,key:{type:Le,raw:be(i)},value:mn({computed:!0},e)})}return t}function vn(t){return Qe(bn({},t))}function _n(t){return dn.expr(vn(t))}function xn(t,e,n,i){return new(n||(n=Promise))((function(r,s){function a(t){try{c(i.next(t))}catch(t){s(t)}}function o(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,o)}c((i=i.apply(t,e||[])).next())}))}function wn(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Sn(t){return this instanceof Sn?(this.v=t,this):new Sn(t)}function In(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(t){r[t]&&(i[t]=function(e){return new Promise((function(n,i){s.push([t,e,n,i])>1||o(t,e)}))})}function o(t,e){try{(n=r[t](e)).value instanceof Sn?Promise.resolve(n.value.v).then(c,l):u(s[0][2],n)}catch(t){u(s[0][3],t)}var n}function c(t){o("next",t)}function l(t){o("throw",t)}function u(t,e){t(e),s.shift(),s.length&&o(s[0][0],s[0][1])}}function An(t){var e,n;return e={},i("next"),i("throw",(function(t){throw t})),i("return"),e[Symbol.iterator]=function(){return this},e;function i(i,r){e[i]=t[i]?function(e){return(n=!n)?{value:Sn(t[i](e)),done:!1}:r?r(e):e}:r}}function Tn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=wn(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(n){e[n]=t[n]&&function(e){return new Promise((function(i,r){(function(t,e,n,i){Promise.resolve(i).then((function(e){t({value:e,done:n})}),e)})(i,r,(e=t[n](e)).done,e.value)}))}}}const kn=new TextDecoder("utf-8"),Mn=t=>kn.decode(t),En=new TextEncoder,Cn=t=>En.encode(t),[Nn,On]=(()=>{const t=()=>{throw new Error("BigInt is not available in this environment")};function e(){throw t()}return e.asIntN=()=>{throw t()},e.asUintN=()=>{throw t()},"undefined"!=typeof BigInt?[BigInt,!0]:[e,!1]})(),[Ln,Bn]=(()=>{const t=()=>{throw new Error("BigInt64Array is not available in this environment")};return"undefined"!=typeof BigInt64Array?[BigInt64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}},!1]})(),[Dn,Fn]=(()=>{const t=()=>{throw new Error("BigUint64Array is not available in this environment")};return"undefined"!=typeof BigUint64Array?[BigUint64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}},!1]})(),Vn=t=>"function"==typeof t,Un=t=>null!=t&&Object(t)===t,Pn=t=>Un(t)&&Vn(t.then),Rn=t=>Un(t)&&Vn(t[Symbol.iterator]),jn=t=>Un(t)&&Vn(t[Symbol.asyncIterator]),$n=t=>Un(t)&&"done"in t&&"value"in t,zn=t=>"_getDOMStream"in t&&"_getNodeStream"in t,Hn=t=>Un(t)&&Vn(t.clear)&&Vn(t.bytes)&&Vn(t.position)&&Vn(t.setPosition)&&Vn(t.capacity)&&Vn(t.getBufferIdentifier)&&Vn(t.createLong),qn="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;function Yn(t,e,n=0,i=e.byteLength){const r=t.byteLength,s=new Uint8Array(t.buffer,t.byteOffset,r),a=new Uint8Array(e.buffer,e.byteOffset,Math.min(i,r));return s.set(a,n),t}function Wn(t,e){const n=function(t){const e=t[0]?[t[0]]:[];let n,i,r,s;for(let a,o,c=0,l=0,u=t.length;++c<u;)a=e[l],o=t[c],!a||!o||a.buffer!==o.buffer||o.byteOffset<a.byteOffset?o&&(e[++l]=o):(({byteOffset:n,byteLength:r}=a),({byteOffset:i,byteLength:s}=o),n+r<i||i+s<n?o&&(e[++l]=o):e[l]=new Uint8Array(a.buffer,n,i-n+s));return e}(t),i=n.reduce(((t,e)=>t+e.byteLength),0);let r,s,a,o=0,c=-1;const l=Math.min(e||Number.POSITIVE_INFINITY,i);for(const t=n.length;++c<t;){if(r=n[c],s=r.subarray(0,Math.min(r.length,l-o)),l<=o+s.length){s.length<r.length?n[c]=r.subarray(s.length):s.length===r.length&&c++,a?Yn(a,s,o):a=s;break}Yn(a||(a=new Uint8Array(l)),s,o),o+=s.length}return[a||new Uint8Array(0),n.slice(c),i-(a?a.byteLength:0)]}function Gn(t,e){let n=$n(e)?e.value:e;return n instanceof t?t===Uint8Array?new t(n.buffer,n.byteOffset,n.byteLength):n:n?("string"==typeof n&&(n=Cn(n)),n instanceof ArrayBuffer||n instanceof qn?new t(n):Hn(n)?Gn(t,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new t(0):new t(n.buffer,n.byteOffset,n.byteLength/t.BYTES_PER_ELEMENT):t.from(n)):new t(0)}const Kn=t=>Gn(Int32Array,t),Qn=t=>Gn(Uint8Array,t),Jn=t=>(t.next(),t);const Zn=t=>function*(t,e){const n=function*(t){yield t},i="string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof qn?n(e):Rn(e)?e:n(e);return yield*Jn(function*(e){let n=null;do{n=e.next(yield Gn(t,n))}while(!n.done)}(i[Symbol.iterator]())),new t}(Uint8Array,t);function Xn(t,e){return In(this,arguments,(function*(){if(Pn(e))return yield Sn(yield Sn(yield*An(Tn(Xn(t,yield Sn(e))))));const n=function(t){return In(this,arguments,(function*(){yield yield Sn(yield Sn(t))}))},i="string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof qn?n(e):Rn(e)?function(t){return In(this,arguments,(function*(){yield Sn(yield*An(Tn(Jn(function*(t){let e=null;do{e=t.next(yield null==e?void 0:e.value)}while(!e.done)}(t[Symbol.iterator]())))))}))}(e):jn(e)?e:n(e);return yield Sn(yield*An(Tn(Jn(function(e){return In(this,arguments,(function*(){let n=null;do{n=yield Sn(e.next(yield yield Sn(Gn(t,n))))}while(!n.done)}))}(i[Symbol.asyncIterator]()))))),yield Sn(new t)}))}const ti=t=>Xn(Uint8Array,t);function ei(t,e,n){if(0!==t){n=n.slice(0,e+1);for(let i=-1;++i<=e;)n[i]+=t}return n}var ni={fromIterable:t=>ii(function*(t){let e,n,i,r,s=!1,a=[],o=0;function c(){return"peek"===i?Wn(a,r)[0]:([n,a,o]=Wn(a,r),n)}({cmd:i,size:r}=yield null);const l=Zn(t)[Symbol.iterator]();try{do{if(({done:e,value:n}=Number.isNaN(r-o)?l.next():l.next(r-o)),!e&&n.byteLength>0&&(a.push(n),o+=n.byteLength),e||r<=o)do{({cmd:i,size:r}=yield c())}while(r<o)}while(!e)}catch(t){(s=!0)&&"function"==typeof l.throw&&l.throw(t)}finally{!1===s&&"function"==typeof l.return&&l.return(null)}return null}(t)),fromAsyncIterable:t=>ii(function(t){return In(this,arguments,(function*(){let e,n,i,r,s=!1,a=[],o=0;function c(){return"peek"===i?Wn(a,r)[0]:([n,a,o]=Wn(a,r),n)}({cmd:i,size:r}=yield yield Sn(null));const l=ti(t)[Symbol.asyncIterator]();try{do{if(({done:e,value:n}=Number.isNaN(r-o)?yield Sn(l.next()):yield Sn(l.next(r-o))),!e&&n.byteLength>0&&(a.push(n),o+=n.byteLength),e||r<=o)do{({cmd:i,size:r}=yield yield Sn(c()))}while(r<o)}while(!e)}catch(t){(s=!0)&&"function"==typeof l.throw&&(yield Sn(l.throw(t)))}finally{!1===s&&"function"==typeof l.return&&(yield Sn(l.return(new Uint8Array(0))))}return yield Sn(null)}))}(t)),fromDOMStream:t=>ii(function(t){return In(this,arguments,(function*(){let e,n,i,r=!1,s=!1,a=[],o=0;function c(){return"peek"===n?Wn(a,i)[0]:([e,a,o]=Wn(a,i),e)}({cmd:n,size:i}=yield yield Sn(null));const l=new ri(t);try{do{if(({done:r,value:e}=Number.isNaN(i-o)?yield Sn(l.read()):yield Sn(l.read(i-o))),!r&&e.byteLength>0&&(a.push(Qn(e)),o+=e.byteLength),r||i<=o)do{({cmd:n,size:i}=yield yield Sn(c()))}while(i<o)}while(!r)}catch(t){(s=!0)&&(yield Sn(l.cancel(t)))}finally{!1===s?yield Sn(l.cancel()):t.locked&&l.releaseLock()}return yield Sn(null)}))}(t)),fromNodeStream:t=>ii(function(t){return In(this,arguments,(function*(){const e=[];let n,i,r,s="error",a=!1,o=null,c=0,l=[];function u(){return"peek"===n?Wn(l,i)[0]:([r,l,c]=Wn(l,i),r)}if(({cmd:n,size:i}=yield yield Sn(null)),t.isTTY)return yield yield Sn(new Uint8Array(0)),yield Sn(null);try{e[0]=si(t,"end"),e[1]=si(t,"error");do{if(e[2]=si(t,"readable"),[s,o]=yield Sn(Promise.race(e.map((t=>t[2])))),"error"===s)break;if((a="end"===s)||(Number.isFinite(i-c)?(r=Qn(t.read(i-c)),r.byteLength<i-c&&(r=Qn(t.read()))):r=Qn(t.read()),r.byteLength>0&&(l.push(r),c+=r.byteLength)),a||i<=c)do{({cmd:n,size:i}=yield yield Sn(u()))}while(i<c)}while(!a)}finally{yield Sn(h(e,"error"===s?o:null))}return yield Sn(null);function h(e,n){return r=l=null,new Promise(((i,r)=>{for(const[n,i]of e)t.off(n,i);try{const e=t.destroy;e&&e.call(t,n),n=void 0}catch(t){n=t||n}finally{null!=n?r(n):i()}}))}}))}(t)),toDOMStream(t,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(t,e){throw new Error('"toNodeStream" not available in this environment')}};const ii=t=>(t.next(),t);class ri{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch((()=>{}))}get closed(){return this.reader?this.reader.closed.catch((()=>{})):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return xn(this,void 0,void 0,(function*(){const{reader:e,source:n}=this;e&&(yield e.cancel(t).catch((()=>{}))),n&&n.locked&&this.releaseLock()}))}read(t){return xn(this,void 0,void 0,(function*(){if(0===t)return{done:null==this.reader,value:new Uint8Array(0)};const e=yield this.reader.read();return!e.done&&(e.value=Qn(e)),e}))}}const si=(t,e)=>{const n=t=>i([e,t]);let i;return[e,n,new Promise((r=>(i=r)&&t.once(e,n)))]};var ai,oi,ci,li,ui,hi,pi,di,fi;!function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"}(ai||(ai={})),function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"}(oi||(oi={})),function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"}(ci||(ci={})),function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"}(li||(li={})),function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"}(ui||(ui={})),function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"}(hi||(hi={})),function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"}(pi||(pi={})),function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"}(di||(di={})),function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"}(fi||(fi={}));const mi=void 0;function yi(t){if(null===t)return"null";if(t===mi)return"undefined";switch(typeof t){case"number":case"bigint":return`${t}`;case"string":return`"${t}"`}return"function"==typeof t[Symbol.toPrimitive]?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?t instanceof Ln||t instanceof Dn?`[${[...t].map((t=>yi(t)))}]`:`[${t}]`:ArrayBuffer.isView(t)?`[${t}]`:JSON.stringify(t,((t,e)=>"bigint"==typeof e?`${e}`:e))}const gi=Symbol.for("isArrowBigNum");function bi(t,...e){return 0===e.length?Object.setPrototypeOf(Gn(this.TypedArray,t),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(t,...e),this.constructor.prototype)}function vi(...t){return bi.apply(this,t)}function _i(...t){return bi.apply(this,t)}function xi(...t){return bi.apply(this,t)}function wi(t){const{buffer:e,byteOffset:n,length:i,signed:r}=t,s=new Dn(e,n,i),a=r&&s[s.length-1]&BigInt(1)<<BigInt(63);let o=a?BigInt(1):BigInt(0),c=BigInt(0);if(a){for(const t of s)o+=~t*(BigInt(1)<<BigInt(32)*c++);o*=BigInt(-1)}else for(const t of s)o+=t*(BigInt(1)<<BigInt(32)*c++);return o}let Si,Ii;function Ai(t){let e="";const n=new Uint32Array(2);let i=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);const r=new Uint32Array((i=new Uint16Array(i).reverse()).buffer);let s=-1;const a=i.length-1;do{for(n[0]=i[s=0];s<a;)i[s++]=n[1]=n[0]/10,n[0]=(n[0]-10*n[1]<<16)+i[s];i[s]=n[1]=n[0]/10,n[0]=n[0]-10*n[1],e=`${n[0]}${e}`}while(r[0]||r[1]||r[2]||r[3]);return null!=e?e:"0"}bi.prototype[gi]=!0,bi.prototype.toJSON=function(){return`"${Si(this)}"`},bi.prototype.valueOf=function(){return wi(this)},bi.prototype.toString=function(){return Si(this)},bi.prototype[Symbol.toPrimitive]=function(t="default"){switch(t){case"number":return wi(this);case"string":return Si(this);case"default":return Ii(this)}return Si(this)},Object.setPrototypeOf(vi.prototype,Object.create(Int32Array.prototype)),Object.setPrototypeOf(_i.prototype,Object.create(Uint32Array.prototype)),Object.setPrototypeOf(xi.prototype,Object.create(Uint32Array.prototype)),Object.assign(vi.prototype,bi.prototype,{constructor:vi,signed:!0,TypedArray:Int32Array,BigIntArray:Ln}),Object.assign(_i.prototype,bi.prototype,{constructor:_i,signed:!1,TypedArray:Uint32Array,BigIntArray:Dn}),Object.assign(xi.prototype,bi.prototype,{constructor:xi,signed:!0,TypedArray:Uint32Array,BigIntArray:Dn}),On?(Ii=t=>8===t.byteLength?new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:Ai(t),Si=t=>8===t.byteLength?`${new t.BigIntArray(t.buffer,t.byteOffset,1)[0]}`:Ai(t)):(Si=Ai,Ii=Si);class Ti{static new(t,e){switch(e){case!0:return new vi(t);case!1:return new _i(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case Ln:return new vi(t)}return 16===t.byteLength?new xi(t):new _i(t)}static signed(t){return new vi(t)}static unsigned(t){return new _i(t)}static decimal(t){return new xi(t)}constructor(t,e){return Ti.new(t,e)}}var ki,Mi,Ei,Ci,Ni,Oi,Li,Bi,Di,Fi,Vi,Ui,Pi,Ri,ji,$i,zi,Hi,qi,Yi;class Wi{static isNull(t){return(null==t?void 0:t.typeId)===di.Null}static isInt(t){return(null==t?void 0:t.typeId)===di.Int}static isFloat(t){return(null==t?void 0:t.typeId)===di.Float}static isBinary(t){return(null==t?void 0:t.typeId)===di.Binary}static isUtf8(t){return(null==t?void 0:t.typeId)===di.Utf8}static isBool(t){return(null==t?void 0:t.typeId)===di.Bool}static isDecimal(t){return(null==t?void 0:t.typeId)===di.Decimal}static isDate(t){return(null==t?void 0:t.typeId)===di.Date}static isTime(t){return(null==t?void 0:t.typeId)===di.Time}static isTimestamp(t){return(null==t?void 0:t.typeId)===di.Timestamp}static isInterval(t){return(null==t?void 0:t.typeId)===di.Interval}static isList(t){return(null==t?void 0:t.typeId)===di.List}static isStruct(t){return(null==t?void 0:t.typeId)===di.Struct}static isUnion(t){return(null==t?void 0:t.typeId)===di.Union}static isFixedSizeBinary(t){return(null==t?void 0:t.typeId)===di.FixedSizeBinary}static isFixedSizeList(t){return(null==t?void 0:t.typeId)===di.FixedSizeList}static isMap(t){return(null==t?void 0:t.typeId)===di.Map}static isDictionary(t){return(null==t?void 0:t.typeId)===di.Dictionary}static isDenseUnion(t){return Wi.isUnion(t)&&t.mode===oi.Dense}static isSparseUnion(t){return Wi.isUnion(t)&&t.mode===oi.Sparse}get typeId(){return di.NONE}}ki=Symbol.toStringTag,Wi[ki]=((Yi=Wi.prototype).children=null,Yi.ArrayType=Array,Yi[Symbol.toStringTag]="DataType");let Gi=class extends Wi{toString(){return"Null"}get typeId(){return di.Null}};Mi=Symbol.toStringTag,Gi[Mi]=(t=>t[Symbol.toStringTag]="Null")(Gi.prototype);class Ki extends Wi{constructor(t,e){super(),this.isSigned=t,this.bitWidth=e}get typeId(){return di.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?Ln:Dn}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}Ei=Symbol.toStringTag,Ki[Ei]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(Ki.prototype);class Qi extends Ki{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class Ji extends Ki{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class Zi extends Ki{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class Xi extends Ki{constructor(){super(!0,64)}get ArrayType(){return Ln}}class tr extends Ki{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class er extends Ki{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class nr extends Ki{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class ir extends Ki{constructor(){super(!1,64)}get ArrayType(){return Dn}}Object.defineProperty(Qi.prototype,"ArrayType",{value:Int8Array}),Object.defineProperty(Ji.prototype,"ArrayType",{value:Int16Array}),Object.defineProperty(Zi.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(Xi.prototype,"ArrayType",{value:Ln}),Object.defineProperty(tr.prototype,"ArrayType",{value:Uint8Array}),Object.defineProperty(er.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(nr.prototype,"ArrayType",{value:Uint32Array}),Object.defineProperty(ir.prototype,"ArrayType",{value:Dn});class rr extends Wi{constructor(t){super(),this.precision=t}get typeId(){return di.Float}get ArrayType(){switch(this.precision){case ci.HALF:return Uint16Array;case ci.SINGLE:return Float32Array;case ci.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}Ci=Symbol.toStringTag,rr[Ci]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))(rr.prototype);class sr extends rr{constructor(){super(ci.HALF)}}class ar extends rr{constructor(){super(ci.SINGLE)}}class or extends rr{constructor(){super(ci.DOUBLE)}}Object.defineProperty(sr.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(ar.prototype,"ArrayType",{value:Float32Array}),Object.defineProperty(or.prototype,"ArrayType",{value:Float64Array});let cr=class extends Wi{constructor(){super()}get typeId(){return di.Binary}toString(){return"Binary"}};Ni=Symbol.toStringTag,cr[Ni]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(cr.prototype);let lr=class extends Wi{constructor(){super()}get typeId(){return di.Utf8}toString(){return"Utf8"}};Oi=Symbol.toStringTag,lr[Oi]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(lr.prototype);let ur=class extends Wi{constructor(){super()}get typeId(){return di.Bool}toString(){return"Bool"}};Li=Symbol.toStringTag,ur[Li]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(ur.prototype);let hr=class extends Wi{constructor(t,e,n=128){super(),this.scale=t,this.precision=e,this.bitWidth=n}get typeId(){return di.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};Bi=Symbol.toStringTag,hr[Bi]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))(hr.prototype);class pr extends Wi{constructor(t){super(),this.unit=t}get typeId(){return di.Date}toString(){return`Date${32*(this.unit+1)}<${li[this.unit]}>`}}Di=Symbol.toStringTag,pr[Di]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Date"))(pr.prototype);class dr extends pr{constructor(){super(li.DAY)}}class fr extends pr{constructor(){super(li.MILLISECOND)}}class mr extends Wi{constructor(t,e){super(),this.unit=t,this.bitWidth=e}get typeId(){return di.Time}toString(){return`Time${this.bitWidth}<${ui[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return Ln}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}Fi=Symbol.toStringTag,mr[Fi]=(t=>(t.unit=null,t.bitWidth=null,t[Symbol.toStringTag]="Time"))(mr.prototype);class yr extends mr{constructor(){super(ui.SECOND,32)}}class gr extends mr{constructor(){super(ui.MILLISECOND,32)}}class br extends mr{constructor(){super(ui.MICROSECOND,64)}}class vr extends mr{constructor(){super(ui.NANOSECOND,64)}}class _r extends Wi{constructor(t,e){super(),this.unit=t,this.timezone=e}get typeId(){return di.Timestamp}toString(){return`Timestamp<${ui[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}Vi=Symbol.toStringTag,_r[Vi]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Timestamp"))(_r.prototype);class xr extends Wi{constructor(t){super(),this.unit=t}get typeId(){return di.Interval}toString(){return`Interval<${hi[this.unit]}>`}}Ui=Symbol.toStringTag,xr[Ui]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(xr.prototype);class wr extends xr{constructor(){super(hi.DAY_TIME)}}class Sr extends xr{constructor(){super(hi.YEAR_MONTH)}}let Ir=class extends Wi{constructor(t){super(),this.children=[t]}get typeId(){return di.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};Pi=Symbol.toStringTag,Ir[Pi]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(Ir.prototype);class Ar extends Wi{constructor(t){super(),this.children=t}get typeId(){return di.Struct}toString(){return`Struct<{${this.children.map((t=>`${t.name}:${t.type}`)).join(", ")}}>`}}Ri=Symbol.toStringTag,Ar[Ri]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(Ar.prototype);class Tr extends Wi{constructor(t,e,n){super(),this.mode=t,this.children=n,this.typeIds=e=Int32Array.from(e),this.typeIdToChildIndex=e.reduce(((t,e,n)=>(t[e]=n)&&t||t),Object.create(null))}get typeId(){return di.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map((t=>`${t.type}`)).join(" | ")}>`}}ji=Symbol.toStringTag,Tr[ji]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(Tr.prototype);let kr=class extends Wi{constructor(t){super(),this.byteWidth=t}get typeId(){return di.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};$i=Symbol.toStringTag,kr[$i]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(kr.prototype);let Mr=class extends Wi{constructor(t,e){super(),this.listSize=t,this.children=[e]}get typeId(){return di.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};zi=Symbol.toStringTag,Mr[zi]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(Mr.prototype);class Er extends Wi{constructor(t,e=!1){super(),this.children=[t],this.keysSorted=e}get typeId(){return di.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map((t=>`${t.name}:${t.type}`)).join(", ")}}>`}}Hi=Symbol.toStringTag,Er[Hi]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))(Er.prototype);const Cr=(Nr=-1,()=>++Nr);var Nr;class Or extends Wi{constructor(t,e,n,i){super(),this.indices=e,this.dictionary=t,this.isOrdered=i||!1,this.id=null==n?Cr():"number"==typeof n?n:n.low}get typeId(){return di.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}function Lr(t){const e=t;switch(t.typeId){case di.Decimal:return t.bitWidth/32;case di.Timestamp:return 2;case di.Date:case di.Interval:return 1+e.unit;case di.FixedSizeList:return e.listSize;case di.FixedSizeBinary:return e.byteWidth;default:return 1}}qi=Symbol.toStringTag,Or[qi]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(Or.prototype);class Br{visitMany(t,...e){return t.map(((t,n)=>this.visit(t,...e.map((t=>t[n])))))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,e=!0){return function(t,e,n=!0){if("number"==typeof e)return Dr(t,e,n);if("string"==typeof e&&e in di)return Dr(t,di[e],n);if(e&&e instanceof Wi)return Dr(t,Fr(e),n);if((null==e?void 0:e.type)&&e.type instanceof Wi)return Dr(t,Fr(e.type),n);return Dr(t,di.NONE,n)}(this,t,e)}getVisitFnByTypeId(t,e=!0){return Dr(this,t,e)}visitNull(t,...e){return null}visitBool(t,...e){return null}visitInt(t,...e){return null}visitFloat(t,...e){return null}visitUtf8(t,...e){return null}visitBinary(t,...e){return null}visitFixedSizeBinary(t,...e){return null}visitDate(t,...e){return null}visitTimestamp(t,...e){return null}visitTime(t,...e){return null}visitDecimal(t,...e){return null}visitList(t,...e){return null}visitStruct(t,...e){return null}visitUnion(t,...e){return null}visitDictionary(t,...e){return null}visitInterval(t,...e){return null}visitFixedSizeList(t,...e){return null}visitMap(t,...e){return null}}function Dr(t,e,n=!0){let i=null;switch(e){case di.Null:i=t.visitNull;break;case di.Bool:i=t.visitBool;break;case di.Int:i=t.visitInt;break;case di.Int8:i=t.visitInt8||t.visitInt;break;case di.Int16:i=t.visitInt16||t.visitInt;break;case di.Int32:i=t.visitInt32||t.visitInt;break;case di.Int64:i=t.visitInt64||t.visitInt;break;case di.Uint8:i=t.visitUint8||t.visitInt;break;case di.Uint16:i=t.visitUint16||t.visitInt;break;case di.Uint32:i=t.visitUint32||t.visitInt;break;case di.Uint64:i=t.visitUint64||t.visitInt;break;case di.Float:i=t.visitFloat;break;case di.Float16:i=t.visitFloat16||t.visitFloat;break;case di.Float32:i=t.visitFloat32||t.visitFloat;break;case di.Float64:i=t.visitFloat64||t.visitFloat;break;case di.Utf8:i=t.visitUtf8;break;case di.Binary:i=t.visitBinary;break;case di.FixedSizeBinary:i=t.visitFixedSizeBinary;break;case di.Date:i=t.visitDate;break;case di.DateDay:i=t.visitDateDay||t.visitDate;break;case di.DateMillisecond:i=t.visitDateMillisecond||t.visitDate;break;case di.Timestamp:i=t.visitTimestamp;break;case di.TimestampSecond:i=t.visitTimestampSecond||t.visitTimestamp;break;case di.TimestampMillisecond:i=t.visitTimestampMillisecond||t.visitTimestamp;break;case di.TimestampMicrosecond:i=t.visitTimestampMicrosecond||t.visitTimestamp;break;case di.TimestampNanosecond:i=t.visitTimestampNanosecond||t.visitTimestamp;break;case di.Time:i=t.visitTime;break;case di.TimeSecond:i=t.visitTimeSecond||t.visitTime;break;case di.TimeMillisecond:i=t.visitTimeMillisecond||t.visitTime;break;case di.TimeMicrosecond:i=t.visitTimeMicrosecond||t.visitTime;break;case di.TimeNanosecond:i=t.visitTimeNanosecond||t.visitTime;break;case di.Decimal:i=t.visitDecimal;break;case di.List:i=t.visitList;break;case di.Struct:i=t.visitStruct;break;case di.Union:i=t.visitUnion;break;case di.DenseUnion:i=t.visitDenseUnion||t.visitUnion;break;case di.SparseUnion:i=t.visitSparseUnion||t.visitUnion;break;case di.Dictionary:i=t.visitDictionary;break;case di.Interval:i=t.visitInterval;break;case di.IntervalDayTime:i=t.visitIntervalDayTime||t.visitInterval;break;case di.IntervalYearMonth:i=t.visitIntervalYearMonth||t.visitInterval;break;case di.FixedSizeList:i=t.visitFixedSizeList;break;case di.Map:i=t.visitMap}if("function"==typeof i)return i;if(!n)return()=>null;throw new Error(`Unrecognized type '${di[e]}'`)}function Fr(t){switch(t.typeId){case di.Null:return di.Null;case di.Int:{const{bitWidth:e,isSigned:n}=t;switch(e){case 8:return n?di.Int8:di.Uint8;case 16:return n?di.Int16:di.Uint16;case 32:return n?di.Int32:di.Uint32;case 64:return n?di.Int64:di.Uint64}return di.Int}case di.Float:switch(t.precision){case ci.HALF:return di.Float16;case ci.SINGLE:return di.Float32;case ci.DOUBLE:return di.Float64}return di.Float;case di.Binary:return di.Binary;case di.Utf8:return di.Utf8;case di.Bool:return di.Bool;case di.Decimal:return di.Decimal;case di.Time:switch(t.unit){case ui.SECOND:return di.TimeSecond;case ui.MILLISECOND:return di.TimeMillisecond;case ui.MICROSECOND:return di.TimeMicrosecond;case ui.NANOSECOND:return di.TimeNanosecond}return di.Time;case di.Timestamp:switch(t.unit){case ui.SECOND:return di.TimestampSecond;case ui.MILLISECOND:return di.TimestampMillisecond;case ui.MICROSECOND:return di.TimestampMicrosecond;case ui.NANOSECOND:return di.TimestampNanosecond}return di.Timestamp;case di.Date:switch(t.unit){case li.DAY:return di.DateDay;case li.MILLISECOND:return di.DateMillisecond}return di.Date;case di.Interval:switch(t.unit){case hi.DAY_TIME:return di.IntervalDayTime;case hi.YEAR_MONTH:return di.IntervalYearMonth}return di.Interval;case di.Map:return di.Map;case di.List:return di.List;case di.Struct:return di.Struct;case di.Union:switch(t.mode){case oi.Dense:return di.DenseUnion;case oi.Sparse:return di.SparseUnion}return di.Union;case di.FixedSizeBinary:return di.FixedSizeBinary;case di.FixedSizeList:return di.FixedSizeList;case di.Dictionary:return di.Dictionary}throw new Error(`Unrecognized type '${di[t.typeId]}'`)}Br.prototype.visitInt8=null,Br.prototype.visitInt16=null,Br.prototype.visitInt32=null,Br.prototype.visitInt64=null,Br.prototype.visitUint8=null,Br.prototype.visitUint16=null,Br.prototype.visitUint32=null,Br.prototype.visitUint64=null,Br.prototype.visitFloat16=null,Br.prototype.visitFloat32=null,Br.prototype.visitFloat64=null,Br.prototype.visitDateDay=null,Br.prototype.visitDateMillisecond=null,Br.prototype.visitTimestampSecond=null,Br.prototype.visitTimestampMillisecond=null,Br.prototype.visitTimestampMicrosecond=null,Br.prototype.visitTimestampNanosecond=null,Br.prototype.visitTimeSecond=null,Br.prototype.visitTimeMillisecond=null,Br.prototype.visitTimeMicrosecond=null,Br.prototype.visitTimeNanosecond=null,Br.prototype.visitDenseUnion=null,Br.prototype.visitSparseUnion=null,Br.prototype.visitIntervalDayTime=null,Br.prototype.visitIntervalYearMonth=null;const Vr=new Float64Array(1),Ur=new Uint32Array(Vr.buffer);function Pr(t){const e=(31744&t)>>10,n=(1023&t)/1024,i=Math.pow(-1,(32768&t)>>15);switch(e){case 31:return i*(n?Number.NaN:1/0);case 0:return i*(n?6103515625e-14*n:0)}return i*Math.pow(2,e-15)*(1+n)}function Rr(t){if(t!=t)return 32256;Vr[0]=t;const e=(2147483648&Ur[1])>>16&65535;let n=2146435072&Ur[1],i=0;return n>=1089470464?Ur[0]>0?n=31744:(n=(2080374784&n)>>16,i=(1048575&Ur[1])>>10):n<=1056964608?(i=1048576+(1048575&Ur[1]),i=1048576+(i<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,i=512+(1048575&Ur[1])>>10),e|n|65535&i}class jr extends Br{}function $r(t){return(e,n,i)=>{if(e.setValid(n,null!=i))return t(e,n,i)}}const zr=(t,e,n)=>{t[e]=Math.trunc(n%4294967296),t[e+1]=Math.trunc(n/4294967296)},Hr=(t,e,n,i)=>{if(n+1<e.length){const{[n]:r,[n+1]:s}=e;t.set(i.subarray(0,s-r),r)}},qr=({values:t},e,n)=>{t[e]=n},Yr=({values:t},e,n)=>{t[e]=n},Wr=({values:t},e,n)=>{t[e]=Rr(n)},Gr=({values:t},e,n)=>{((t,e,n)=>{t[e]=Math.trunc(n/864e5)})(t,e,n.valueOf())},Kr=({values:t},e,n)=>{zr(t,2*e,n.valueOf())},Qr=({stride:t,values:e},n,i)=>{e.set(i.subarray(0,t),t*n)},Jr=(t,e,n)=>{t.type.unit===li.DAY?Gr(t,e,n):Kr(t,e,n)},Zr=({values:t},e,n)=>zr(t,2*e,n/1e3),Xr=({values:t},e,n)=>zr(t,2*e,n),ts=({values:t},e,n)=>((t,e,n)=>{t[e]=Math.trunc(1e3*n%4294967296),t[e+1]=Math.trunc(1e3*n/4294967296)})(t,2*e,n),es=({values:t},e,n)=>((t,e,n)=>{t[e]=Math.trunc(1e6*n%4294967296),t[e+1]=Math.trunc(1e6*n/4294967296)})(t,2*e,n),ns=(t,e,n)=>{switch(t.type.unit){case ui.SECOND:return Zr(t,e,n);case ui.MILLISECOND:return Xr(t,e,n);case ui.MICROSECOND:return ts(t,e,n);case ui.NANOSECOND:return es(t,e,n)}},is=({values:t},e,n)=>{t[e]=n},rs=({values:t},e,n)=>{t[e]=n},ss=({values:t},e,n)=>{t[e]=n},as=({values:t},e,n)=>{t[e]=n},os=(t,e,n)=>{switch(t.type.unit){case ui.SECOND:return is(t,e,n);case ui.MILLISECOND:return rs(t,e,n);case ui.MICROSECOND:return ss(t,e,n);case ui.NANOSECOND:return as(t,e,n)}},cs=({values:t,stride:e},n,i)=>{t.set(i.subarray(0,e),e*n)},ls=(t,e,n)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[i];fs.visit(r,t.valueOffsets[e],n)},us=(t,e,n)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[i];fs.visit(r,e,n)},hs=(t,e,n)=>{t.type.unit===hi.DAY_TIME?ps(t,e,n):ds(t,e,n)},ps=({values:t},e,n)=>{t.set(n.subarray(0,2),2*e)},ds=({values:t},e,n)=>{t[e]=12*n[0]+n[1]%12};jr.prototype.visitBool=$r((({offset:t,values:e},n,i)=>{const r=t+n;i?e[r>>3]|=1<<r%8:e[r>>3]&=~(1<<r%8)})),jr.prototype.visitInt=$r(qr),jr.prototype.visitInt8=$r(qr),jr.prototype.visitInt16=$r(qr),jr.prototype.visitInt32=$r(qr),jr.prototype.visitInt64=$r(qr),jr.prototype.visitUint8=$r(qr),jr.prototype.visitUint16=$r(qr),jr.prototype.visitUint32=$r(qr),jr.prototype.visitUint64=$r(qr),jr.prototype.visitFloat=$r(((t,e,n)=>{switch(t.type.precision){case ci.HALF:return Wr(t,e,n);case ci.SINGLE:case ci.DOUBLE:return Yr(t,e,n)}})),jr.prototype.visitFloat16=$r(Wr),jr.prototype.visitFloat32=$r(Yr),jr.prototype.visitFloat64=$r(Yr),jr.prototype.visitUtf8=$r((({values:t,valueOffsets:e},n,i)=>{Hr(t,e,n,Cn(i))})),jr.prototype.visitBinary=$r((({values:t,valueOffsets:e},n,i)=>Hr(t,e,n,i))),jr.prototype.visitFixedSizeBinary=$r(Qr),jr.prototype.visitDate=$r(Jr),jr.prototype.visitDateDay=$r(Gr),jr.prototype.visitDateMillisecond=$r(Kr),jr.prototype.visitTimestamp=$r(ns),jr.prototype.visitTimestampSecond=$r(Zr),jr.prototype.visitTimestampMillisecond=$r(Xr),jr.prototype.visitTimestampMicrosecond=$r(ts),jr.prototype.visitTimestampNanosecond=$r(es),jr.prototype.visitTime=$r(os),jr.prototype.visitTimeSecond=$r(is),jr.prototype.visitTimeMillisecond=$r(rs),jr.prototype.visitTimeMicrosecond=$r(ss),jr.prototype.visitTimeNanosecond=$r(as),jr.prototype.visitDecimal=$r(cs),jr.prototype.visitList=$r(((t,e,n)=>{const i=t.children[0],r=t.valueOffsets,s=fs.getVisitFn(i);if(Array.isArray(n))for(let t=-1,a=r[e],o=r[e+1];a<o;)s(i,a++,n[++t]);else for(let t=-1,a=r[e],o=r[e+1];a<o;)s(i,a++,n.get(++t))})),jr.prototype.visitStruct=$r(((t,e,n)=>{const i=t.type.children.map((t=>fs.getVisitFn(t.type))),r=n instanceof Map?(s=e,a=n,(t,e,n,i)=>e&&t(e,s,a.get(n.name))):n instanceof Ba?((t,e)=>(n,i,r,s)=>i&&n(i,t,e.get(s)))(e,n):Array.isArray(n)?((t,e)=>(n,i,r,s)=>i&&n(i,t,e[s]))(e,n):((t,e)=>(n,i,r,s)=>i&&n(i,t,e[r.name]))(e,n);var s,a;t.type.children.forEach(((e,n)=>r(i[n],t.children[n],e,n)))})),jr.prototype.visitUnion=$r(((t,e,n)=>{t.type.mode===oi.Dense?ls(t,e,n):us(t,e,n)})),jr.prototype.visitDenseUnion=$r(ls),jr.prototype.visitSparseUnion=$r(us),jr.prototype.visitDictionary=$r(((t,e,n)=>{var i;null===(i=t.dictionary)||void 0===i||i.set(t.values[e],n)})),jr.prototype.visitInterval=$r(hs),jr.prototype.visitIntervalDayTime=$r(ps),jr.prototype.visitIntervalYearMonth=$r(ds),jr.prototype.visitFixedSizeList=$r(((t,e,n)=>{const{stride:i}=t,r=t.children[0],s=fs.getVisitFn(r);if(Array.isArray(n))for(let t=-1,a=e*i;++t<i;)s(r,a+t,n[t]);else for(let t=-1,a=e*i;++t<i;)s(r,a+t,n.get(t))})),jr.prototype.visitMap=$r(((t,e,n)=>{const i=t.children[0],{valueOffsets:r}=t,s=fs.getVisitFn(i);let{[e]:a,[e+1]:o}=r;const c=n instanceof Map?n.entries():Object.entries(n);for(const t of c)if(s(i,a,t),++a>=o)break}));const fs=new jr,ms=Symbol.for("parent"),ys=Symbol.for("rowIndex");class gs{constructor(t,e){return this[ms]=t,this[ys]=e,new Proxy(this,new vs)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[ys],e=this[ms],n=e.type.children,i={};for(let r=-1,s=n.length;++r<s;)i[n[r].name]=js.visit(e.children[r],t);return i}toString(){return`{${[...this].map((([t,e])=>`${yi(t)}: ${yi(e)}`)).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new bs(this[ms],this[ys])}}class bs{constructor(t,e){this.childIndex=0,this.children=t.children,this.rowIndex=e,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,js.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(gs.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[ms]:{writable:!0,enumerable:!1,configurable:!1,value:null},[ys]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class vs{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[ms].type.children.map((t=>t.name))}has(t,e){return-1!==t[ms].type.children.findIndex((t=>t.name===e))}getOwnPropertyDescriptor(t,e){if(-1!==t[ms].type.children.findIndex((t=>t.name===e)))return{writable:!0,enumerable:!0,configurable:!0}}get(t,e){if(Reflect.has(t,e))return t[e];const n=t[ms].type.children.findIndex((t=>t.name===e));if(-1!==n){const i=js.visit(t[ms].children[n],t[ys]);return Reflect.set(t,e,i),i}}set(t,e,n){const i=t[ms].type.children.findIndex((t=>t.name===e));return-1!==i?(fs.visit(t[ms].children[i],t[ys],n),Reflect.set(t,e,n)):!(!Reflect.has(t,e)&&"symbol"!=typeof e)&&Reflect.set(t,e,n)}}class _s extends Br{}function xs(t){return(e,n)=>e.getValid(n)?t(e,n):null}const ws=(t,e)=>4294967296*t[e+1]+(t[e]>>>0),Ss=t=>new Date(t),Is=(t,e,n)=>{if(n+1>=e.length)return null;const i=e[n],r=e[n+1];return t.subarray(i,r)},As=({values:t},e)=>((t,e)=>Ss(((t,e)=>864e5*t[e])(t,e)))(t,e),Ts=({values:t},e)=>((t,e)=>Ss(ws(t,e)))(t,2*e),ks=({stride:t,values:e},n)=>e[t*n],Ms=({values:t},e)=>t[e],Es=({values:t},e)=>1e3*ws(t,2*e),Cs=({values:t},e)=>ws(t,2*e),Ns=({values:t},e)=>((t,e)=>t[e+1]/1e3*4294967296+(t[e]>>>0)/1e3)(t,2*e),Os=({values:t},e)=>((t,e)=>t[e+1]/1e6*4294967296+(t[e]>>>0)/1e6)(t,2*e),Ls=({values:t},e)=>t[e],Bs=({values:t},e)=>t[e],Ds=({values:t},e)=>t[e],Fs=({values:t},e)=>t[e],Vs=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[n];return js.visit(i,t.valueOffsets[e])},Us=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[n];return js.visit(i,e)},Ps=({values:t},e)=>t.subarray(2*e,2*(e+1)),Rs=({values:t},e)=>{const n=t[e],i=new Int32Array(2);return i[0]=Math.trunc(n/12),i[1]=Math.trunc(n%12),i};_s.prototype.visitNull=xs(((t,e)=>null)),_s.prototype.visitBool=xs((({offset:t,values:e},n)=>{const i=t+n;return 0!=(e[i>>3]&1<<i%8)})),_s.prototype.visitInt=xs((({values:t},e)=>t[e])),_s.prototype.visitInt8=xs(ks),_s.prototype.visitInt16=xs(ks),_s.prototype.visitInt32=xs(ks),_s.prototype.visitInt64=xs(Ms),_s.prototype.visitUint8=xs(ks),_s.prototype.visitUint16=xs(ks),_s.prototype.visitUint32=xs(ks),_s.prototype.visitUint64=xs(Ms),_s.prototype.visitFloat=xs((({type:t,values:e},n)=>t.precision!==ci.HALF?e[n]:Pr(e[n]))),_s.prototype.visitFloat16=xs((({stride:t,values:e},n)=>Pr(e[t*n]))),_s.prototype.visitFloat32=xs(ks),_s.prototype.visitFloat64=xs(ks),_s.prototype.visitUtf8=xs((({values:t,valueOffsets:e},n)=>{const i=Is(t,e,n);return null!==i?Mn(i):null})),_s.prototype.visitBinary=xs((({values:t,valueOffsets:e},n)=>Is(t,e,n))),_s.prototype.visitFixedSizeBinary=xs((({stride:t,values:e},n)=>e.subarray(t*n,t*(n+1)))),_s.prototype.visitDate=xs(((t,e)=>t.type.unit===li.DAY?As(t,e):Ts(t,e))),_s.prototype.visitDateDay=xs(As),_s.prototype.visitDateMillisecond=xs(Ts),_s.prototype.visitTimestamp=xs(((t,e)=>{switch(t.type.unit){case ui.SECOND:return Es(t,e);case ui.MILLISECOND:return Cs(t,e);case ui.MICROSECOND:return Ns(t,e);case ui.NANOSECOND:return Os(t,e)}})),_s.prototype.visitTimestampSecond=xs(Es),_s.prototype.visitTimestampMillisecond=xs(Cs),_s.prototype.visitTimestampMicrosecond=xs(Ns),_s.prototype.visitTimestampNanosecond=xs(Os),_s.prototype.visitTime=xs(((t,e)=>{switch(t.type.unit){case ui.SECOND:return Ls(t,e);case ui.MILLISECOND:return Bs(t,e);case ui.MICROSECOND:return Ds(t,e);case ui.NANOSECOND:return Fs(t,e)}})),_s.prototype.visitTimeSecond=xs(Ls),_s.prototype.visitTimeMillisecond=xs(Bs),_s.prototype.visitTimeMicrosecond=xs(Ds),_s.prototype.visitTimeNanosecond=xs(Fs),_s.prototype.visitDecimal=xs((({values:t,stride:e},n)=>Ti.decimal(t.subarray(e*n,e*(n+1))))),_s.prototype.visitList=xs(((t,e)=>{const{valueOffsets:n,stride:i,children:r}=t,{[e*i]:s,[e*i+1]:a}=n,o=r[0].slice(s,a-s);return new Ba([o])})),_s.prototype.visitStruct=xs(((t,e)=>new gs(t,e))),_s.prototype.visitUnion=xs(((t,e)=>t.type.mode===oi.Dense?Vs(t,e):Us(t,e))),_s.prototype.visitDenseUnion=xs(Vs),_s.prototype.visitSparseUnion=xs(Us),_s.prototype.visitDictionary=xs(((t,e)=>{var n;return null===(n=t.dictionary)||void 0===n?void 0:n.get(t.values[e])})),_s.prototype.visitInterval=xs(((t,e)=>t.type.unit===hi.DAY_TIME?Ps(t,e):Rs(t,e))),_s.prototype.visitIntervalDayTime=xs(Ps),_s.prototype.visitIntervalYearMonth=xs(Rs),_s.prototype.visitFixedSizeList=xs(((t,e)=>{const{stride:n,children:i}=t,r=i[0].slice(e*n,n);return new Ba([r])})),_s.prototype.visitMap=xs(((t,e)=>{const{valueOffsets:n,children:i}=t,{[e]:r,[e+1]:s}=n,a=i[0];return new Hs(a.slice(r,s-r))}));const js=new _s,$s=Symbol.for("keys"),zs=Symbol.for("vals");class Hs{constructor(t){return this[$s]=new Ba([t.children[0]]).memoize(),this[zs]=t.children[1],new Proxy(this,new Ys)}[Symbol.iterator](){return new qs(this[$s],this[zs])}get size(){return this[$s].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[$s],e=this[zs],n={};for(let i=-1,r=t.length;++i<r;)n[t.get(i)]=js.visit(e,i);return n}toString(){return`{${[...this].map((([t,e])=>`${yi(t)}: ${yi(e)}`)).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class qs{constructor(t,e){this.keys=t,this.vals=e,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),js.visit(this.vals,t)]})}}class Ys{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[$s].toArray().map(String)}has(t,e){return t[$s].includes(e)}getOwnPropertyDescriptor(t,e){if(-1!==t[$s].indexOf(e))return{writable:!0,enumerable:!0,configurable:!0}}get(t,e){if(Reflect.has(t,e))return t[e];const n=t[$s].indexOf(e);if(-1!==n){const i=js.visit(Reflect.get(t,zs),n);return Reflect.set(t,e,i),i}}set(t,e,n){const i=t[$s].indexOf(e);return-1!==i?(fs.visit(Reflect.get(t,zs),i,n),Reflect.set(t,e,n)):!!Reflect.has(t,e)&&Reflect.set(t,e,n)}}let Ws;function Gs(t,e,n,i){const{length:r=0}=t;let s="number"!=typeof e?0:e,a="number"!=typeof n?r:n;return s<0&&(s=(s%r+r)%r),a<0&&(a=(a%r+r)%r),a<s&&(Ws=s,s=a,a=Ws),a>r&&(a=r),i?i(t,s,a):[s,a]}Object.defineProperties(Hs.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[$s]:{writable:!0,enumerable:!1,configurable:!1,value:null},[zs]:{writable:!0,enumerable:!1,configurable:!1,value:null}});const Ks=t=>t!=t;function Qs(t){if("object"!==typeof t||null===t)return Ks(t)?Ks:e=>e===t;if(t instanceof Date){const e=t.valueOf();return t=>t instanceof Date&&t.valueOf()===e}return ArrayBuffer.isView(t)?e=>!!e&&function(t,e){let n=0;const i=t.length;if(i!==e.length)return!1;if(i>0)do{if(t[n]!==e[n])return!1}while(++n<i);return!0}(t,e):t instanceof Map?function(t){let e=-1;const n=[];for(const i of t.values())n[++e]=Qs(i);return Js(n)}(t):Array.isArray(t)?function(t){const e=[];for(let n=-1,i=t.length;++n<i;)e[n]=Qs(t[n]);return Js(e)}(t):t instanceof Ba?function(t){const e=[];for(let n=-1,i=t.length;++n<i;)e[n]=Qs(t.get(n));return Js(e)}(t):function(t,e=!1){const n=Object.keys(t);if(!e&&0===n.length)return()=>!1;const i=[];for(let e=-1,r=n.length;++e<r;)i[e]=Qs(t[n[e]]);return Js(i,n)}(t,!0)}function Js(t,e){return n=>{if(!n||"object"!=typeof n)return!1;switch(n.constructor){case Array:return function(t,e){const n=t.length;if(e.length!==n)return!1;for(let i=-1;++i<n;)if(!t[i](e[i]))return!1;return!0}(t,n);case Map:return Zs(t,n,n.keys());case Hs:case gs:case Object:case void 0:return Zs(t,n,e||Object.keys(n))}return n instanceof Ba&&function(t,e){const n=t.length;if(e.length!==n)return!1;for(let i=-1;++i<n;)if(!t[i](e.get(i)))return!1;return!0}(t,n)}}function Zs(t,e,n){const i=n[Symbol.iterator](),r=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),s=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let a=0;const o=t.length;let c=s.next(),l=i.next(),u=r.next();for(;a<o&&!l.done&&!u.done&&!c.done&&(l.value===u.value&&t[a](c.value));++a,l=i.next(),u=r.next(),c=s.next());return!!(a===o&&l.done&&u.done&&c.done)||(i.return&&i.return(),r.return&&r.return(),s.return&&s.return(),!1)}function Xs(t,e,n,i){return 0!=(n&1<<i)}function ta(t,e,n,i){return(n&1<<i)>>i}function ea(t,e,n){const i=n.byteLength+7&-8;if(t>0||n.byteLength<i){const r=new Uint8Array(i);return r.set(t%8==0?n.subarray(t>>3):na(new ia(n,t,e,null,Xs)).subarray(0,i)),r}return n}function na(t){const e=[];let n=0,i=0,r=0;for(const s of t)s&&(r|=1<<i),8==++i&&(e[n++]=r,r=i=0);(0===n||i>0)&&(e[n++]=r);const s=new Uint8Array(e.length+7&-8);return s.set(e),s}class ia{constructor(t,e,n,i,r){this.bytes=t,this.length=n,this.context=i,this.get=r,this.bit=e%8,this.byteIndex=e>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(8===this.bit&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function ra(t,e,n){if(n-e<=0)return 0;if(n-e<8){let i=0;for(const r of new ia(t,e,n-e,t,ta))i+=r;return i}const i=n>>3<<3,r=e+(e%8==0?0:8-e%8);return ra(t,e,r)+ra(t,i,n)+function(t,e,n){let i=0,r=Math.trunc(e);const s=new DataView(t.buffer,t.byteOffset,t.byteLength),a=void 0===n?t.byteLength:r+n;for(;a-r>=4;)i+=sa(s.getUint32(r)),r+=4;for(;a-r>=2;)i+=sa(s.getUint16(r)),r+=2;for(;a-r>=1;)i+=sa(s.getUint8(r)),r+=1;return i}(t,r>>3,i-r>>3)}function sa(t){let e=Math.trunc(t);return e-=e>>>1&1431655765,e=(858993459&e)+(e>>>2&858993459),16843009*(e+(e>>>4)&252645135)>>>24}class aa{constructor(t,e,n,i,r,s=[],a){let o;this.type=t,this.children=s,this.dictionary=a,this.offset=Math.floor(Math.max(e||0,0)),this.length=Math.floor(Math.max(n||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1)),r instanceof aa?(this.stride=r.stride,this.values=r.values,this.typeIds=r.typeIds,this.nullBitmap=r.nullBitmap,this.valueOffsets=r.valueOffsets):(this.stride=Lr(t),r&&((o=r[0])&&(this.valueOffsets=o),(o=r[1])&&(this.values=o),(o=r[2])&&(this.nullBitmap=o),(o=r[3])&&(this.typeIds=o))),this.nullable=0!==this._nullCount&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0;const{valueOffsets:e,values:n,nullBitmap:i,typeIds:r}=this;return e&&(t+=e.byteLength),n&&(t+=n.byteLength),i&&(t+=i.byteLength),r&&(t+=r.byteLength),this.children.reduce(((t,e)=>t+e.byteLength),t)}get nullCount(){let t,e=this._nullCount;return e<=-1&&(t=this.nullBitmap)&&(this._nullCount=e=this.length-ra(t,this.offset,this.offset+this.length)),e}getValid(t){if(this.nullable&&this.nullCount>0){const e=this.offset+t;return 0!=(this.nullBitmap[e>>3]&1<<e%8)}return!0}setValid(t,e){if(!this.nullable)return e;if(!this.nullBitmap||this.nullBitmap.byteLength<=t>>3){const{nullBitmap:t}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:t,_nullCount:0})}const{nullBitmap:n,offset:i}=this,r=i+t>>3,s=(i+t)%8,a=n[r]>>s&1;return e?0===a&&(n[r]|=1<<s,this._nullCount=this.nullCount+1):1===a&&(n[r]&=~(1<<s),this._nullCount=this.nullCount-1),e}clone(t=this.type,e=this.offset,n=this.length,i=this._nullCount,r=this,s=this.children){return new aa(t,e,n,i,r,s,this.dictionary)}slice(t,e){const{stride:n,typeId:i,children:r}=this,s=+(0===this._nullCount)-1,a=16===i?n:1,o=this._sliceBuffers(t,e,n,i);return this.clone(this.type,this.offset+t,e,s,o,0===r.length||this.valueOffsets?r:this._sliceChildren(r,a*t,a*e))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===di.Null)return this.clone(this.type,0,t,0);const{length:e,nullCount:n}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,e>>3);i[e>>3]=(1<<e-(-8&e))-1,n>0&&i.set(ea(this.offset,e,this.nullBitmap),0);const r=this.buffers;return r[fi.VALIDITY]=i,this.clone(this.type,0,t,n+(t-e),r)}_sliceBuffers(t,e,n,i){let r;const{buffers:s}=this;return(r=s[fi.TYPE])&&(s[fi.TYPE]=r.subarray(t,t+e)),(r=s[fi.OFFSET])&&(s[fi.OFFSET]=r.subarray(t,t+e+1))||(r=s[fi.DATA])&&(s[fi.DATA]=6===i?r:r.subarray(n*t,n*(t+e))),s}_sliceChildren(t,e,n){return t.map((t=>t.slice(e,n)))}}aa.prototype.children=Object.freeze([]);class oa extends Br{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{type:e,offset:n=0,length:i=0}=t;return new aa(e,n,i,0)}visitBool(t){const{type:e,offset:n=0}=t,i=Qn(t.nullBitmap),r=Gn(e.ArrayType,t.data),{length:s=r.length>>3,nullCount:a=(t.nullBitmap?-1:0)}=t;return new aa(e,n,s,a,[void 0,r,i])}visitInt(t){const{type:e,offset:n=0}=t,i=Qn(t.nullBitmap),r=Gn(e.ArrayType,t.data),{length:s=r.length,nullCount:a=(t.nullBitmap?-1:0)}=t;return new aa(e,n,s,a,[void 0,r,i])}visitFloat(t){const{type:e,offset:n=0}=t,i=Qn(t.nullBitmap),r=Gn(e.ArrayType,t.data),{length:s=r.length,nullCount:a=(t.nullBitmap?-1:0)}=t;return new aa(e,n,s,a,[void 0,r,i])}visitUtf8(t){const{type:e,offset:n=0}=t,i=Qn(t.data),r=Qn(t.nullBitmap),s=Kn(t.valueOffsets),{length:a=s.length-1,nullCount:o=(t.nullBitmap?-1:0)}=t;return new aa(e,n,a,o,[s,i,r])}visitBinary(t){const{type:e,offset:n=0}=t,i=Qn(t.data),r=Qn(t.nullBitmap),s=Kn(t.valueOffsets),{length:a=s.length-1,nullCount:o=(t.nullBitmap?-1:0)}=t;return new aa(e,n,a,o,[s,i,r])}visitFixedSizeBinary(t){const{type:e,offset:n=0}=t,i=Qn(t.nullBitmap),r=Gn(e.ArrayType,t.data),{length:s=r.length/Lr(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new aa(e,n,s,a,[void 0,r,i])}visitDate(t){const{type:e,offset:n=0}=t,i=Qn(t.nullBitmap),r=Gn(e.ArrayType,t.data),{length:s=r.length/Lr(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new aa(e,n,s,a,[void 0,r,i])}visitTimestamp(t){const{type:e,offset:n=0}=t,i=Qn(t.nullBitmap),r=Gn(e.ArrayType,t.data),{length:s=r.length/Lr(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new aa(e,n,s,a,[void 0,r,i])}visitTime(t){const{type:e,offset:n=0}=t,i=Qn(t.nullBitmap),r=Gn(e.ArrayType,t.data),{length:s=r.length/Lr(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new aa(e,n,s,a,[void 0,r,i])}visitDecimal(t){const{type:e,offset:n=0}=t,i=Qn(t.nullBitmap),r=Gn(e.ArrayType,t.data),{length:s=r.length/Lr(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new aa(e,n,s,a,[void 0,r,i])}visitList(t){const{type:e,offset:n=0,child:i}=t,r=Qn(t.nullBitmap),s=Kn(t.valueOffsets),{length:a=s.length-1,nullCount:o=(t.nullBitmap?-1:0)}=t;return new aa(e,n,a,o,[s,void 0,r],[i])}visitStruct(t){const{type:e,offset:n=0,children:i=[]}=t,r=Qn(t.nullBitmap),{length:s=i.reduce(((t,{length:e})=>Math.max(t,e)),0),nullCount:a=(t.nullBitmap?-1:0)}=t;return new aa(e,n,s,a,[void 0,void 0,r],i)}visitUnion(t){const{type:e,offset:n=0,children:i=[]}=t,r=Qn(t.nullBitmap),s=Gn(e.ArrayType,t.typeIds),{length:a=s.length,nullCount:o=(t.nullBitmap?-1:0)}=t;if(Wi.isSparseUnion(e))return new aa(e,n,a,o,[void 0,void 0,r,s],i);const c=Kn(t.valueOffsets);return new aa(e,n,a,o,[c,void 0,r,s],i)}visitDictionary(t){const{type:e,offset:n=0}=t,i=Qn(t.nullBitmap),r=Gn(e.indices.ArrayType,t.data),{dictionary:s=new Ba([(new oa).visit({type:e.dictionary})])}=t,{length:a=r.length,nullCount:o=(t.nullBitmap?-1:0)}=t;return new aa(e,n,a,o,[void 0,r,i],[],s)}visitInterval(t){const{type:e,offset:n=0}=t,i=Qn(t.nullBitmap),r=Gn(e.ArrayType,t.data),{length:s=r.length/Lr(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new aa(e,n,s,a,[void 0,r,i])}visitFixedSizeList(t){const{type:e,offset:n=0,child:i=(new oa).visit({type:e.valueType})}=t,r=Qn(t.nullBitmap),{length:s=i.length/Lr(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new aa(e,n,s,a,[void 0,void 0,r],[i])}visitMap(t){const{type:e,offset:n=0,child:i=(new oa).visit({type:e.childType})}=t,r=Qn(t.nullBitmap),s=Kn(t.valueOffsets),{length:a=s.length-1,nullCount:o=(t.nullBitmap?-1:0)}=t;return new aa(e,n,a,o,[s,void 0,r],[i])}}function ca(t){return(new oa).visit(t)}class la{constructor(t=0,e){this.numChunks=t,this.getChunkIterator=e,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function ua(t){return t.reduce(((t,e)=>t+e.nullCount),0)}function ha(t){return t.reduce(((t,e,n)=>(t[n+1]=t[n]+e.length,t)),new Uint32Array(t.length+1))}function pa(t,e,n,i){const r=[];for(let s=-1,a=t.length;++s<a;){const a=t[s],o=e[s],{length:c}=a;if(o>=i)break;if(n>=o+c)continue;if(o>=n&&o+c<=i){r.push(a);continue}const l=Math.max(0,n-o),u=Math.min(i-o,c);r.push(a.slice(l,u-l))}return 0===r.length&&r.push(t[0].slice(0,0)),r}function da(t,e,n,i){let r=0,s=0,a=e.length-1;do{if(r>=a-1)return n<e[a]?i(t,r,n-e[r]):null;s=r+Math.trunc(.5*(a-r)),n<e[s]?a=s:r=s}while(r<a)}function fa(t,e){return t.getValid(e)}function ma(t){function e(e,n,i){return t(e[n],i)}return function(t){return da(this.data,this._offsets,t,e)}}function ya(t){let e;function n(n,i,r){return t(n[i],r,e)}return function(t,i){const r=this.data;e=i;const s=da(r,this._offsets,t,n);return e=void 0,s}}function ga(t){let e;function n(n,i,r){let s=r,a=0,o=0;for(let r=i-1,c=n.length;++r<c;){const i=n[r];if(~(a=t(i,e,s)))return o+a;s=0,o+=i.length}return-1}return function(t,i){e=t;const r=this.data,s="number"!=typeof i?n(r,0,0):da(r,this._offsets,i,n);return e=void 0,s}}class ba extends Br{}function va(t,e,n){if(void 0===e)return-1;if(null===e)return function(t,e){const{nullBitmap:n}=t;if(!n||t.nullCount<=0)return-1;let i=0;for(const r of new ia(n,t.offset+(e||0),t.length,n,Xs)){if(!r)return i;++i}return-1}(t,n);const i=js.getVisitFn(t),r=Qs(e);for(let e=(n||0)-1,s=t.length;++e<s;)if(r(i(t,e)))return e;return-1}function _a(t,e,n){const i=js.getVisitFn(t),r=Qs(e);for(let e=(n||0)-1,s=t.length;++e<s;)if(r(i(t,e)))return e;return-1}ba.prototype.visitNull=function(t,e){return null===e&&t.length>0?0:-1},ba.prototype.visitBool=va,ba.prototype.visitInt=va,ba.prototype.visitInt8=va,ba.prototype.visitInt16=va,ba.prototype.visitInt32=va,ba.prototype.visitInt64=va,ba.prototype.visitUint8=va,ba.prototype.visitUint16=va,ba.prototype.visitUint32=va,ba.prototype.visitUint64=va,ba.prototype.visitFloat=va,ba.prototype.visitFloat16=va,ba.prototype.visitFloat32=va,ba.prototype.visitFloat64=va,ba.prototype.visitUtf8=va,ba.prototype.visitBinary=va,ba.prototype.visitFixedSizeBinary=va,ba.prototype.visitDate=va,ba.prototype.visitDateDay=va,ba.prototype.visitDateMillisecond=va,ba.prototype.visitTimestamp=va,ba.prototype.visitTimestampSecond=va,ba.prototype.visitTimestampMillisecond=va,ba.prototype.visitTimestampMicrosecond=va,ba.prototype.visitTimestampNanosecond=va,ba.prototype.visitTime=va,ba.prototype.visitTimeSecond=va,ba.prototype.visitTimeMillisecond=va,ba.prototype.visitTimeMicrosecond=va,ba.prototype.visitTimeNanosecond=va,ba.prototype.visitDecimal=va,ba.prototype.visitList=va,ba.prototype.visitStruct=va,ba.prototype.visitUnion=va,ba.prototype.visitDenseUnion=_a,ba.prototype.visitSparseUnion=_a,ba.prototype.visitDictionary=va,ba.prototype.visitInterval=va,ba.prototype.visitIntervalDayTime=va,ba.prototype.visitIntervalYearMonth=va,ba.prototype.visitFixedSizeList=va,ba.prototype.visitMap=va;const xa=new ba;class wa extends Br{}function Sa(t){const{type:e}=t;if(0===t.nullCount&&1===t.stride&&(e.typeId===di.Timestamp||e instanceof Ki&&64!==e.bitWidth||e instanceof mr&&64!==e.bitWidth||e instanceof rr&&e.precision!==ci.HALF))return new la(t.data.length,(e=>{const n=t.data[e];return n.values.subarray(0,n.length)[Symbol.iterator]()}));let n=0;return new la(t.data.length,(e=>{const i=t.data[e].length,r=t.slice(n,n+i);return n+=i,new Ia(r)}))}class Ia{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}wa.prototype.visitNull=Sa,wa.prototype.visitBool=Sa,wa.prototype.visitInt=Sa,wa.prototype.visitInt8=Sa,wa.prototype.visitInt16=Sa,wa.prototype.visitInt32=Sa,wa.prototype.visitInt64=Sa,wa.prototype.visitUint8=Sa,wa.prototype.visitUint16=Sa,wa.prototype.visitUint32=Sa,wa.prototype.visitUint64=Sa,wa.prototype.visitFloat=Sa,wa.prototype.visitFloat16=Sa,wa.prototype.visitFloat32=Sa,wa.prototype.visitFloat64=Sa,wa.prototype.visitUtf8=Sa,wa.prototype.visitBinary=Sa,wa.prototype.visitFixedSizeBinary=Sa,wa.prototype.visitDate=Sa,wa.prototype.visitDateDay=Sa,wa.prototype.visitDateMillisecond=Sa,wa.prototype.visitTimestamp=Sa,wa.prototype.visitTimestampSecond=Sa,wa.prototype.visitTimestampMillisecond=Sa,wa.prototype.visitTimestampMicrosecond=Sa,wa.prototype.visitTimestampNanosecond=Sa,wa.prototype.visitTime=Sa,wa.prototype.visitTimeSecond=Sa,wa.prototype.visitTimeMillisecond=Sa,wa.prototype.visitTimeMicrosecond=Sa,wa.prototype.visitTimeNanosecond=Sa,wa.prototype.visitDecimal=Sa,wa.prototype.visitList=Sa,wa.prototype.visitStruct=Sa,wa.prototype.visitUnion=Sa,wa.prototype.visitDenseUnion=Sa,wa.prototype.visitSparseUnion=Sa,wa.prototype.visitDictionary=Sa,wa.prototype.visitInterval=Sa,wa.prototype.visitIntervalDayTime=Sa,wa.prototype.visitIntervalYearMonth=Sa,wa.prototype.visitFixedSizeList=Sa,wa.prototype.visitMap=Sa;const Aa=new wa,Ta=(t,e)=>t+e;class ka extends Br{visitNull(t,e){return 0}visitInt(t,e){return t.type.bitWidth/8}visitFloat(t,e){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,e){return 1/8}visitDecimal(t,e){return t.type.bitWidth/8}visitDate(t,e){return 4*(t.type.unit+1)}visitTime(t,e){return t.type.bitWidth/8}visitTimestamp(t,e){return t.type.unit===ui.SECOND?4:8}visitInterval(t,e){return 4*(t.type.unit+1)}visitStruct(t,e){return t.children.reduce(((t,n)=>t+Ca.visit(n,e)),0)}visitFixedSizeBinary(t,e){return t.type.byteWidth}visitMap(t,e){return 8+t.children.reduce(((t,n)=>t+Ca.visit(n,e)),0)}visitDictionary(t,e){var n;return t.type.indices.bitWidth/8+((null===(n=t.dictionary)||void 0===n?void 0:n.getByteLength(t.values[e]))||0)}}const Ma=({type:t,children:e,typeIds:n,valueOffsets:i},r)=>{const s=t.typeIdToChildIndex[n[r]];return 8+Ca.visit(e[s],i[r])},Ea=({children:t},e)=>4+Ca.visitMany(t,t.map((()=>e))).reduce(Ta,0);ka.prototype.visitUtf8=({valueOffsets:t},e)=>t[e+1]-t[e]+8,ka.prototype.visitBinary=({valueOffsets:t},e)=>t[e+1]-t[e]+8,ka.prototype.visitList=({valueOffsets:t,stride:e,children:n},i)=>{const r=n[0],{[i*e]:s}=t,{[i*e+1]:a}=t,o=Ca.getVisitFn(r.type),c=r.slice(s,a-s);let l=8;for(let t=-1,e=a-s;++t<e;)l+=o(c,t);return l},ka.prototype.visitFixedSizeList=({stride:t,children:e},n)=>{const i=e[0],r=i.slice(n*t,t),s=Ca.getVisitFn(i.type);let a=0;for(let t=-1,e=r.length;++t<e;)a+=s(r,t);return a},ka.prototype.visitUnion=(t,e)=>t.type.mode===oi.Dense?Ma(t,e):Ea(t,e),ka.prototype.visitDenseUnion=Ma,ka.prototype.visitSparseUnion=Ea;const Ca=new ka;var Na;const Oa={},La={};class Ba{constructor(t){var e,n,i;const r=t[0]instanceof Ba?t.flatMap((t=>t.data)):t;if(0===r.length||r.some((t=>!(t instanceof aa))))throw new TypeError("Vector constructor expects an Array of Data instances.");const s=null===(e=r[0])||void 0===e?void 0:e.type;switch(r.length){case 0:this._offsets=[0];break;case 1:{const{get:t,set:e,indexOf:n,byteLength:i}=Oa[s.typeId],a=r[0];this.isValid=t=>fa(a,t),this.get=e=>t(a,e),this.set=(t,n)=>e(a,t,n),this.indexOf=t=>n(a,t),this.getByteLength=t=>i(a,t),this._offsets=[0,a.length];break}default:Object.setPrototypeOf(this,La[s.typeId]),this._offsets=ha(r)}this.data=r,this.type=s,this.stride=Lr(s),this.numChildren=null!==(i=null===(n=s.children)||void 0===n?void 0:n.length)&&void 0!==i?i:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return-1===this._byteLength&&(this._byteLength=this.data.reduce(((t,e)=>t+e.byteLength),0)),this._byteLength}get nullCount(){return-1===this._nullCount&&(this._nullCount=ua(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${di[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,e){}indexOf(t,e){return-1}includes(t,e){return this.indexOf(t,e)>0}getByteLength(t){return 0}[Symbol.iterator](){return Aa.visit(this)}concat(...t){return new Ba(this.data.concat(t.flatMap((t=>t.data)).flat(Number.POSITIVE_INFINITY)))}slice(t,e){return new Ba(Gs(this,t,e,(({data:t,_offsets:e},n,i)=>pa(t,e,n,i))))}toJSON(){return[...this]}toArray(){const{type:t,data:e,length:n,stride:i,ArrayType:r}=this;switch(t.typeId){case di.Int:case di.Float:case di.Decimal:case di.Time:case di.Timestamp:switch(e.length){case 0:return new r;case 1:return e[0].values.subarray(0,n*i);default:return e.reduce(((t,{values:e,length:n})=>(t.array.set(e.subarray(0,n*i),t.offset),t.offset+=n*i,t)),{array:new r(n*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var e;return this.getChildAt(null===(e=this.type.children)||void 0===e?void 0:e.findIndex((e=>e.name===t)))}getChildAt(t){return t>-1&&t<this.numChildren?new Ba(this.data.map((({children:e})=>e[t]))):null}get isMemoized(){return!!Wi.isDictionary(this.type)&&this.data[0].dictionary.isMemoized}memoize(){if(Wi.isDictionary(this.type)){const t=new Da(this.data[0].dictionary),e=this.data.map((e=>{const n=e.clone();return n.dictionary=t,n}));return new Ba(e)}return new Da(this)}unmemoize(){if(Wi.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),e=this.data.map((e=>{const n=e.clone();return n.dictionary=t,n}));return new Ba(e)}return this}}Na=Symbol.toStringTag,Ba[Na]=(t=>{t.type=Wi.prototype,t.data=[],t.length=0,t.stride=1,t.numChildren=0,t._nullCount=-1,t._byteLength=-1,t._offsets=new Uint32Array([0]),t[Symbol.isConcatSpreadable]=!0;const e=Object.keys(di).map((t=>di[t])).filter((t=>"number"==typeof t&&t!==di.NONE));for(const n of e){const e=js.getVisitFnByTypeId(n),i=fs.getVisitFnByTypeId(n),r=xa.getVisitFnByTypeId(n),s=Ca.getVisitFnByTypeId(n);Oa[n]={get:e,set:i,indexOf:r,byteLength:s},La[n]=Object.create(t,{isValid:{value:ma(fa)},get:{value:ma(js.getVisitFnByTypeId(n))},set:{value:ya(fs.getVisitFnByTypeId(n))},indexOf:{value:ga(xa.getVisitFnByTypeId(n))},getByteLength:{value:ma(Ca.getVisitFnByTypeId(n))}})}return"Vector"})(Ba.prototype);class Da extends Ba{constructor(t){super(t.data);const e=this.get,n=this.set,i=this.slice,r=new Array(this.length);Object.defineProperty(this,"get",{value(t){const n=r[t];if(void 0!==n)return n;const i=e.call(this,t);return r[t]=i,i}}),Object.defineProperty(this,"set",{value(t,e){n.call(this,t,e),r[t]=e}}),Object.defineProperty(this,"slice",{value:(t,e)=>new Da(i.call(this,t,e))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new Ba(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function Fa(t){if(!t||t.length<=0)return function(t){return!0};let e="";const n=t.filter((t=>t==t));return n.length>0&&(e=`\n    switch (x) {${n.map((t=>`\n        case ${function(t){if("bigint"!=typeof t)return yi(t);if(On)return`${yi(t)}n`;return`"${yi(t)}"`}(t)}:`)).join("")}\n            return false;\n    }`),t.length!==n.length&&(e=`if (x !== x) return false;\n${e}`),new Function("x",`${e}\nreturn true;`)}const Va=(t,e)=>(Math.ceil(t)*e+63&-64||64)/e;class Ua{constructor(t,e=1){this.buffer=t,this.stride=e,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/e))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,e){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const e=this.stride,n=this.length*e,i=this.buffer.length;n>=i&&this._resize(Va(0===i?1*n:2*n,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=Va(t*this.stride,this.BYTES_PER_ELEMENT);const e=((t,e=0)=>t.length>=e?t.subarray(0,e):Yn(new t.constructor(e),t,0))(this.buffer,t);return this.clear(),e}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=Yn(new this.ArrayType(t),this.buffer)}}Ua.prototype.offset=0;class Pa extends Ua{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,e){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=e,this}}class Ra extends Pa{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,e){const{buffer:n}=this.reserve(t-this.length+1),i=t>>3,r=t%8,s=n[i]>>r&1;return e?0===s&&(n[i]|=1<<r,++this.numValid):1===s&&(n[i]&=~(1<<r),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class ja extends Pa{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,e){const n=this.length-1,i=this.reserve(t-n+1).buffer;return n<t++&&i.fill(i[n],n,t),i[t]=i[t-1]+e,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let $a=class{constructor({type:t,nullValues:e}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=e,this.stride=Lr(t),this._nulls=new Ra,e&&e.length>0&&(this._isValid=Fa(e))}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}toVector(){return new Ba([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:e,_values:n,_nulls:i,_typeIds:r,children:s}=this;return e&&(t+=e.byteLength),n&&(t+=n.byteLength),i&&(t+=i.byteLength),r&&(t+=r.byteLength),s.reduce(((t,e)=>t+e.byteLength),t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce(((t,e)=>t+e.reservedByteLength),t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,e){return this.setValid(t,this.isValid(e))&&this.setValue(t,e),this}setValue(t,e){this._setValue(this,t,e)}setValid(t,e){return this.length=this._nulls.set(t,+e).length,e}addChild(t,e=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,e,n,i;const{type:r,length:s,nullCount:a,_typeIds:o,_offsets:c,_values:l,_nulls:u}=this;(e=null==o?void 0:o.flush(s))?i=null==c?void 0:c.flush(s):t=(i=null==c?void 0:c.flush(s))?null==l?void 0:l.flush(c.last()):null==l?void 0:l.flush(s),a>0&&(n=null==u?void 0:u.flush(s));const h=this.children.map((t=>t.flush()));return this.clear(),ca({type:r,length:s,nullCount:a,children:h,child:h[0],data:t,typeIds:e,nullBitmap:n,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,e,n,i;this.length=0,null===(t=this._nulls)||void 0===t||t.clear(),null===(e=this._values)||void 0===e||e.clear(),null===(n=this._offsets)||void 0===n||n.clear(),null===(i=this._typeIds)||void 0===i||i.clear();for(const t of this.children)t.clear();return this}};$a.prototype.length=1,$a.prototype.stride=1,$a.prototype.children=null,$a.prototype.finished=!1,$a.prototype.nullValues=null,$a.prototype._isValid=()=>!0;class za extends $a{constructor(t){super(t),this._values=new Pa(new this.ArrayType(0),this.stride)}setValue(t,e){const n=this._values;return n.reserve(t-n.length+1),super.setValue(t,e)}}class Ha extends $a{constructor(t){super(t),this._pendingLength=0,this._offsets=new ja}setValue(t,e){const n=this._pending||(this._pending=new Map),i=n.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=e instanceof Hs?e[$s].length:e.length,n.set(t,e)}setValid(t,e){return!!super.setValid(t,e)||((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,e=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,e),this}}class qa{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,e,n,i){return t.prep(8,24),t.writeInt64(i),t.pad(4),t.writeInt32(n),t.writeInt64(e),t.offset()}}const Ya=new Int32Array(2),Wa=new Float32Array(Ya.buffer),Ga=new Float64Array(Ya.buffer),Ka=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0];let Qa=class t{constructor(t,e){this.low=0|t,this.high=0|e}static create(e,n){return 0==e&&0==n?t.ZERO:new t(e,n)}toFloat64(){return(this.low>>>0)+4294967296*this.high}equals(t){return this.low==t.low&&this.high==t.high}};var Ja;Qa.ZERO=new Qa(0,0),function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"}(Ja||(Ja={}));let Za=class t{constructor(t){this.bytes_=t,this.position_=0}static allocate(e){return new t(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return new Qa(this.readInt32(t),this.readInt32(t+4))}readUint64(t){return new Qa(this.readUint32(t),this.readUint32(t+4))}readFloat32(t){return Ya[0]=this.readInt32(t),Wa[0]}readFloat64(t){return Ya[Ka?0:1]=this.readInt32(t),Ya[Ka?1:0]=this.readInt32(t+4),Ga[0]}writeInt8(t,e){this.bytes_[t]=e}writeUint8(t,e){this.bytes_[t]=e}writeInt16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeUint16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeInt32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeUint32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeInt64(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)}writeUint64(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)}writeFloat32(t,e){Wa[0]=e,this.writeInt32(t,Ya[0])}writeFloat64(t,e){Ga[0]=e,this.writeInt32(t,Ya[Ka?0:1]),this.writeInt32(t+4,Ya[Ka?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+4+4)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let e=0;e<4;e++)t+=String.fromCharCode(this.readInt8(this.position_+4+e));return t}__offset(t,e){const n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0}__union(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t}__string(t,e){t+=this.readInt32(t);const n=this.readInt32(t);let i="",r=0;if(t+=4,e===Ja.UTF8_BYTES)return this.bytes_.subarray(t,t+n);for(;r<n;){let e;const n=this.readUint8(t+r++);if(n<192)e=n;else{const i=this.readUint8(t+r++);if(n<224)e=(31&n)<<6|63&i;else{const s=this.readUint8(t+r++);if(n<240)e=(15&n)<<12|(63&i)<<6|63&s;else{e=(7&n)<<18|(63&i)<<12|(63&s)<<6|63&this.readUint8(t+r++)}}}e<65536?i+=String.fromCharCode(e):(e-=65536,i+=String.fromCharCode(55296+(e>>10),56320+(1023&e)))}return i}__union_with_string(t,e){return"string"==typeof t?this.__string(e):this.__union(t,e)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+4}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(4!=t.length)throw new Error("FlatBuffers: file identifier must be length 4");for(let e=0;e<4;e++)if(t.charCodeAt(e)!=this.readInt8(this.position()+4+e))return!1;return!0}createLong(t,e){return Qa.create(t,e)}createScalarList(t,e){const n=[];for(let i=0;i<e;++i)null!==t(i)&&n.push(t(i));return n}createObjList(t,e){const n=[];for(let i=0;i<e;++i){const e=t(i);null!==e&&n.push(e.unpack())}return n}},Xa=class t{constructor(t){let e;this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,e=t||1024,this.bb=Za.allocate(e),this.space=e}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,n){e>this.minalign&&(this.minalign=e);const i=1+~(this.bb.capacity()-this.space+n)&e-1;for(;this.space<i+e+n;){const e=this.bb.capacity();this.bb=t.growByteBuffer(this.bb),this.space+=this.bb.capacity()-e}this.pad(i)}pad(t){for(let e=0;e<t;e++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,e,n){(this.force_defaults||e!=n)&&(this.addInt8(e),this.slot(t))}addFieldInt16(t,e,n){(this.force_defaults||e!=n)&&(this.addInt16(e),this.slot(t))}addFieldInt32(t,e,n){(this.force_defaults||e!=n)&&(this.addInt32(e),this.slot(t))}addFieldInt64(t,e,n){!this.force_defaults&&e.equals(n)||(this.addInt64(e),this.slot(t))}addFieldFloat32(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat32(e),this.slot(t))}addFieldFloat64(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat64(e),this.slot(t))}addFieldOffset(t,e,n){(this.force_defaults||e!=n)&&(this.addOffset(e),this.slot(t))}addFieldStruct(t,e,n){e!=n&&(this.nested(e),this.slot(t))}nested(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(t){null!==this.vtable&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const e=t.capacity();if(3221225472&e)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const n=e<<1,i=Za.allocate(n);return i.setPosition(n-e),i.bytes().set(t.bytes(),n-e),i}addOffset(t){this.prep(4,0),this.writeInt32(this.offset()-t+4)}startObject(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(let e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let e=this.vtable_in_use-1;for(;e>=0&&0==this.vtable[e];e--);const n=e+1;for(;e>=0;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);this.addInt16(t-this.object_start);const i=2*(n+2);this.addInt16(i);let r=0;const s=this.space;t:for(e=0;e<this.vtables.length;e++){const t=this.bb.capacity()-this.vtables[e];if(i==this.bb.readInt16(t)){for(let e=2;e<i;e+=2)if(this.bb.readInt16(s+e)!=this.bb.readInt16(t+e))continue t;r=this.vtables[e];break}}return r?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,r-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,e,n){const i=n?4:0;if(e){const t=e;if(this.prep(this.minalign,8+i),4!=t.length)throw new Error("FlatBuffers: file identifier must be length 4");for(let e=3;e>=0;e--)this.writeInt8(t.charCodeAt(e))}this.prep(this.minalign,4+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,e){this.finish(t,e,!0)}requiredField(t,e){const n=this.bb.capacity()-t,i=n-this.bb.readInt32(n);if(!(0!=this.bb.readInt16(i+e)))throw new Error("FlatBuffers: field "+e+" must be set")}startVector(t,e,n){this.notNested(),this.vector_num_elems=e,this.prep(4,t*e),this.prep(n,t*e)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const e=this.createString(t);return this.string_maps.set(t,e),e}createString(t){if(!t)return 0;let e;if(t instanceof Uint8Array)e=t;else{e=[];let n=0;for(;n<t.length;){let i;const r=t.charCodeAt(n++);if(r<55296||r>=56320)i=r;else{i=(r<<10)+t.charCodeAt(n++)+-56613888}i<128?e.push(i):(i<2048?e.push(i>>6&31|192):(i<65536?e.push(i>>12&15|224):e.push(i>>18&7|240,i>>12&63|128),e.push(i>>6&63|128)),e.push(63&i|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);for(let t=0,n=this.space,i=this.bb.bytes();t<e.length;t++)i[n++]=e[t];return this.endVector()}createLong(t,e){return Qa.create(t,e)}createObjectOffset(t){return null===t?0:"string"==typeof t?this.createString(t):t.pack(this)}createObjectOffsetList(t){const e=[];for(let n=0;n<t.length;++n){const i=t[n];if(null===i)throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.");e.push(this.createObjectOffset(i))}return e}createStructOffsetList(t,e){return e(this,t.length),this.createObjectOffsetList(t),this.endVector()}};class to{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsKeyValue(t,e){return(e||new to).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,e){return t.setPosition(t.position()+4),(e||new to).__init(t.readInt32(t.position())+t.position(),t)}key(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}value(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,e){t.addFieldOffset(0,e,0)}static addValue(t,e){t.addFieldOffset(1,e,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,e,n){return to.startKeyValue(t),to.addKey(t,e),to.addValue(t,n),to.endKeyValue(t)}}var eo,no,io,ro;!function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"}(eo||(eo={})),function(t){t[t.Little=0]="Little",t[t.Big=1]="Big"}(no||(no={})),function(t){t[t.DenseArray=0]="DenseArray"}(io||(io={}));class so{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInt(t,e){return(e||new so).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,e){return t.setPosition(t.position()+4),(e||new so).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startInt(t){t.startObject(2)}static addBitWidth(t,e){t.addFieldInt32(0,e,0)}static addIsSigned(t,e){t.addFieldInt8(1,+e,0)}static endInt(t){return t.endObject()}static createInt(t,e,n){return so.startInt(t),so.addBitWidth(t,e),so.addIsSigned(t,n),so.endInt(t)}}class ao{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryEncoding(t,e){return(e||new ao).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,e){return t.setPosition(t.position()+4),(e||new ao).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new so).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):io.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addIndexType(t,e){t.addFieldOffset(1,e,0)}static addIsOrdered(t,e){t.addFieldInt8(2,+e,0)}static addDictionaryKind(t,e){t.addFieldInt16(3,e,io.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class oo{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBinary(t,e){return(e||new oo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,e){return t.setPosition(t.position()+4),(e||new oo).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return oo.startBinary(t),oo.endBinary(t)}}class co{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBool(t,e){return(e||new co).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,e){return t.setPosition(t.position()+4),(e||new co).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return co.startBool(t),co.endBool(t)}}!function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"}(ro||(ro={}));let lo=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDate(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDate(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ro.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,e){t.addFieldInt16(0,e,ro.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(e,n){return t.startDate(e),t.addUnit(e,n),t.endDate(e)}};class uo{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDecimal(t,e){return(e||new uo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,e){return t.setPosition(t.position()+4),(e||new uo).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,e){t.addFieldInt32(0,e,0)}static addScale(t,e){t.addFieldInt32(1,e,0)}static addBitWidth(t,e){t.addFieldInt32(2,e,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,e,n,i){return uo.startDecimal(t),uo.addPrecision(t,e),uo.addScale(t,n),uo.addBitWidth(t,i),uo.endDecimal(t)}}var ho,po,fo;!function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"}(ho||(ho={}));class mo{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeBinary(t,e){return(e||new mo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,e){return t.setPosition(t.position()+4),(e||new mo).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,e){return mo.startFixedSizeBinary(t),mo.addByteWidth(t,e),mo.endFixedSizeBinary(t)}}class yo{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeList(t,e){return(e||new yo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,e){return t.setPosition(t.position()+4),(e||new yo).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,e){return yo.startFixedSizeList(t),yo.addListSize(t,e),yo.endFixedSizeList(t)}}!function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"}(po||(po={}));class go{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFloatingPoint(t,e){return(e||new go).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,e){return t.setPosition(t.position()+4),(e||new go).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):po.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,e){t.addFieldInt16(0,e,po.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,e){return go.startFloatingPoint(t),go.addPrecision(t,e),go.endFloatingPoint(t)}}!function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"}(fo||(fo={}));class bo{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInterval(t,e){return(e||new bo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,e){return t.setPosition(t.position()+4),(e||new bo).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):fo.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,e){t.addFieldInt16(0,e,fo.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,e){return bo.startInterval(t),bo.addUnit(t,e),bo.endInterval(t)}}class vo{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsList(t,e){return(e||new vo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,e){return t.setPosition(t.position()+4),(e||new vo).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return vo.startList(t),vo.endList(t)}}let _o=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMap(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMap(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startMap(t){t.startObject(1)}static addKeysSorted(t,e){t.addFieldInt8(0,+e,0)}static endMap(t){return t.endObject()}static createMap(e,n){return t.startMap(e),t.addKeysSorted(e,n),t.endMap(e)}};class xo{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsNull(t,e){return(e||new xo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,e){return t.setPosition(t.position()+4),(e||new xo).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return xo.startNull(t),xo.endNull(t)}}class wo{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsStruct_(t,e){return(e||new wo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,e){return t.setPosition(t.position()+4),(e||new wo).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return wo.startStruct_(t),wo.endStruct_(t)}}class So{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTime(t,e){return(e||new So).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,e){return t.setPosition(t.position()+4),(e||new So).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ho.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,e){t.addFieldInt16(0,e,ho.MILLISECOND)}static addBitWidth(t,e){t.addFieldInt32(1,e,32)}static endTime(t){return t.endObject()}static createTime(t,e,n){return So.startTime(t),So.addUnit(t,e),So.addBitWidth(t,n),So.endTime(t)}}class Io{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTimestamp(t,e){return(e||new Io).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,e){return t.setPosition(t.position()+4),(e||new Io).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ho.SECOND}timezone(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,e){t.addFieldInt16(0,e,ho.SECOND)}static addTimezone(t,e){t.addFieldOffset(1,e,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,e,n){return Io.startTimestamp(t),Io.addUnit(t,e),Io.addTimezone(t,n),Io.endTimestamp(t)}}var Ao,To;!function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"}(Ao||(Ao={}));class ko{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUnion(t,e){return(e||new ko).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,e){return t.setPosition(t.position()+4),(e||new ko).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ao.Sparse}typeIds(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb.__vector(this.bb_pos+e)+4*t):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,e){t.addFieldInt16(0,e,Ao.Sparse)}static addTypeIds(t,e){t.addFieldOffset(1,e,0)}static createTypeIdsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()}static startTypeIdsVector(t,e){t.startVector(4,e,4)}static endUnion(t){return t.endObject()}static createUnion(t,e,n){return ko.startUnion(t),ko.addMode(t,e),ko.addTypeIds(t,n),ko.endUnion(t)}}class Mo{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUtf8(t,e){return(e||new Mo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,e){return t.setPosition(t.position()+4),(e||new Mo).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return Mo.startUtf8(t),Mo.endUtf8(t)}}!function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.FloatingPoint=3]="FloatingPoint",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct_=13]="Struct_",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.LargeList=21]="LargeList"}(To||(To={}));let Eo=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsField(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsField(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}name(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):To.NONE}type(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__union(t,this.bb_pos+e):null}dictionary(t){const e=this.bb.__offset(this.bb_pos,12);return e?(t||new ao).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}children(e,n){const i=this.bb.__offset(this.bb_pos,14);return i?(n||new t).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,16);return n?(e||new to).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,e){t.addFieldOffset(0,e,0)}static addNullable(t,e){t.addFieldInt8(1,+e,0)}static addTypeType(t,e){t.addFieldInt8(2,e,To.NONE)}static addType(t,e){t.addFieldOffset(3,e,0)}static addDictionary(t,e){t.addFieldOffset(4,e,0)}static addChildren(t,e){t.addFieldOffset(5,e,0)}static createChildrenVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startChildrenVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(6,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endField(t){return t.endObject()}},Co=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSchema(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSchema(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):no.Little}fields(t,e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new Eo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new to).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,e){t.addFieldInt16(0,e,no.Little)}static addFields(t,e){t.addFieldOffset(1,e,0)}static createFieldsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startFieldsVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(2,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static addFeatures(t,e){t.addFieldOffset(3,e,0)}static createFeaturesVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()}static startFeaturesVector(t,e){t.startVector(8,e,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,e){t.finish(e)}static finishSizePrefixedSchemaBuffer(t,e){t.finish(e,void 0,!0)}static createSchema(e,n,i,r,s){return t.startSchema(e),t.addEndianness(e,n),t.addFields(e,i),t.addCustomMetadata(e,r),t.addFeatures(e,s),t.endSchema(e)}};class No{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFooter(t,e){return(e||new No).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,e){return t.setPosition(t.position()+4),(e||new No).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):eo.V1}schema(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new Co).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}dictionaries(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new qa).__init(this.bb.__vector(this.bb_pos+n)+24*t,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,e){const n=this.bb.__offset(this.bb_pos,10);return n?(e||new qa).__init(this.bb.__vector(this.bb_pos+n)+24*t,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new to).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,eo.V1)}static addSchema(t,e){t.addFieldOffset(1,e,0)}static addDictionaries(t,e){t.addFieldOffset(2,e,0)}static startDictionariesVector(t,e){t.startVector(24,e,8)}static addRecordBatches(t,e){t.addFieldOffset(3,e,0)}static startRecordBatchesVector(t,e){t.startVector(24,e,8)}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,e){t.finish(e)}static finishSizePrefixedFooterBuffer(t,e){t.finish(e,void 0,!0)}}class Oo{constructor(t=[],e,n){this.fields=t||[],this.metadata=e||new Map,n||(n=Do(t)),this.dictionaries=n}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map((t=>t.name))}toString(){return`Schema<{ ${this.fields.map(((t,e)=>`${e}: ${t}`)).join(", ")} }>`}select(t){const e=new Set(t),n=this.fields.filter((t=>e.has(t.name)));return new Oo(n,this.metadata)}selectAt(t){const e=t.map((t=>this.fields[t])).filter(Boolean);return new Oo(e,this.metadata)}assign(...t){const e=t[0]instanceof Oo?t[0]:Array.isArray(t[0])?new Oo(t[0]):new Oo(t),n=[...this.fields],i=Bo(Bo(new Map,this.metadata),e.metadata),r=e.fields.filter((t=>{const e=n.findIndex((e=>e.name===t.name));return!~e||(n[e]=t.clone({metadata:Bo(Bo(new Map,n[e].metadata),t.metadata)}))&&!1})),s=Do(r,new Map);return new Oo([...n,...r],i,new Map([...this.dictionaries,...s]))}}Oo.prototype.fields=null,Oo.prototype.metadata=null,Oo.prototype.dictionaries=null;class Lo{constructor(t,e,n=!1,i){this.name=t,this.type=e,this.nullable=n,this.metadata=i||new Map}static new(...t){let[e,n,i,r]=t;return t[0]&&"object"==typeof t[0]&&(({name:e}=t[0]),void 0===n&&(n=t[0].type),void 0===i&&(i=t[0].nullable),void 0===r&&(r=t[0].metadata)),new Lo(`${e}`,n,i,r)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[e,n,i,r]=t;return t[0]&&"object"==typeof t[0]?({name:e=this.name,type:n=this.type,nullable:i=this.nullable,metadata:r=this.metadata}=t[0]):[e=this.name,n=this.type,i=this.nullable,r=this.metadata]=t,Lo.new(e,n,i,r)}}function Bo(t,e){return new Map([...t||new Map,...e||new Map])}function Do(t,e=new Map){for(let n=-1,i=t.length;++n<i;){const i=t[n].type;if(Wi.isDictionary(i))if(e.has(i.id)){if(e.get(i.id)!==i.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else e.set(i.id,i.dictionary);i.children&&i.children.length>0&&Do(i.children,e)}return e}Lo.prototype.type=null,Lo.prototype.name=null,Lo.prototype.nullable=null,Lo.prototype.metadata=null;var Fo=Qa,Vo=Xa,Uo=Za;class Po{constructor(t,e=ai.V4,n,i){this.schema=t,this.version=e,n&&(this._recordBatches=n),i&&(this._dictionaryBatches=i)}static decode(t){t=new Uo(Qn(t));const e=No.getRootAsFooter(t),n=Oo.decode(e.schema());return new Ro(n,e)}static encode(t){const e=new Vo,n=Oo.encode(e,t.schema);No.startRecordBatchesVector(e,t.numRecordBatches);for(const n of[...t.recordBatches()].slice().reverse())jo.encode(e,n);const i=e.endVector();No.startDictionariesVector(e,t.numDictionaries);for(const n of[...t.dictionaryBatches()].slice().reverse())jo.encode(e,n);const r=e.endVector();return No.startFooter(e),No.addSchema(e,n),No.addVersion(e,ai.V4),No.addRecordBatches(e,i),No.addDictionaries(e,r),No.finishFooterBuffer(e,No.endFooter(e)),e.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,e=-1,n=this.numRecordBatches;++e<n;)(t=this.getRecordBatch(e))&&(yield t)}*dictionaryBatches(){for(let t,e=-1,n=this.numDictionaries;++e<n;)(t=this.getDictionaryBatch(e))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class Ro extends Po{constructor(t,e){super(t,e.version()),this._footer=e}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const e=this._footer.recordBatches(t);if(e)return jo.decode(e)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const e=this._footer.dictionaries(t);if(e)return jo.decode(e)}return null}}class jo{constructor(t,e,n){this.metaDataLength=t,this.offset="number"==typeof n?n:n.low,this.bodyLength="number"==typeof e?e:e.low}static decode(t){return new jo(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,e){const{metaDataLength:n}=e,i=new Fo(e.offset,0),r=new Fo(e.bodyLength,0);return qa.createBlock(t,i,n,r)}}const $o=Object.freeze({done:!0,value:void 0});class zo{tee(){return this._getDOMStream().tee()}pipe(t,e){return this._getNodeStream().pipe(t,e)}pipeTo(t,e){return this._getDOMStream().pipeTo(t,e)}pipeThrough(t,e){return this._getDOMStream().pipeThrough(t,e)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class Ho extends zo{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise((t=>this._closedPromiseResolve=t))}get closed(){return this._closedPromise}cancel(t){return xn(this,void 0,void 0,(function*(){yield this.return(t)}))}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve($o);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return ni.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return ni.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return xn(this,void 0,void 0,(function*(){return yield this.abort(t),$o}))}return(t){return xn(this,void 0,void 0,(function*(){return yield this.close(),$o}))}read(t){return xn(this,void 0,void 0,(function*(){return(yield this.next(t,"read")).value}))}peek(t){return xn(this,void 0,void 0,(function*(){return(yield this.next(t,"peek")).value}))}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise(((t,e)=>{this.resolvers.push({resolve:t,reject:e})})):Promise.resolve($o)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class qo extends Ho{write(t){if((t=Qn(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?Mn(this.toUint8Array(!0)):this.toUint8Array(!1).then(Mn)}toUint8Array(t=!1){return t?Wn(this._values)[0]:(()=>xn(this,void 0,void 0,(function*(){var t,e;const n=[];let i=0;try{for(var r,s=Tn(this);!(r=yield s.next()).done;){const t=r.value;n.push(t),i+=t.byteLength}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=s.return)&&(yield e.call(s))}finally{if(t)throw t.error}}return Wn(n,i)[0]})))()}}class Yo extends Ha{constructor(t){super(t),this._values=new Ua(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+4*this.length;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,e){return super.setValue(t,Qn(e))}_flushPending(t,e){const n=this._offsets,i=this._values.reserve(e).buffer;let r=0;for(const[e,s]of t)if(void 0===s)n.set(e,0);else{const t=s.length;i.set(s,r),n.set(e,t),r+=t}}}class Wo extends $a{constructor(t){super(t),this._values=new Ra}setValue(t,e){this._values.set(t,+e)}}class Go extends za{}Go.prototype._setValue=Jr;class Ko extends Go{}Ko.prototype._setValue=Gr;class Qo extends Go{}Qo.prototype._setValue=Kr;class Jo extends za{}Jo.prototype._setValue=cs;class Zo extends $a{constructor({type:t,nullValues:e,dictionaryHashFunction:n}){super({type:new Or(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=Gc({type:this.type.indices,nullValues:e}),this.dictionary=Gc({type:this.type.dictionary,nullValues:null}),"function"==typeof n&&(this.valueToKey=n)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,e){const n=this.indices;return e=n.setValid(t,e),this.length=n.length,e}setValue(t,e){const n=this._keysToIndices,i=this.valueToKey(e);let r=n[i];return void 0===r&&(n[i]=r=this._dictionaryOffset+this.dictionary.append(e).length-1),this.indices.setValue(t,r)}flush(){const t=this.type,e=this._dictionary,n=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=e?e.concat(n):n,this.finished||(this._dictionaryOffset+=n.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return"string"==typeof t?t:`${t}`}}class Xo extends za{}Xo.prototype._setValue=Qr;class tc extends $a{setValue(t,e){const[n]=this.children,i=t*this.stride;for(let t=-1,r=e.length;++t<r;)n.set(i+t,e[t])}addChild(t,e="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const n=this.children.push(t);return this.type=new Mr(this.type.listSize,new Lo(e,t.type,!0)),n}}class ec extends za{setValue(t,e){this._values.set(t,e)}}class nc extends ec{setValue(t,e){super.setValue(t,Rr(e))}}class ic extends ec{}class rc extends ec{}class sc extends za{}sc.prototype._setValue=hs;class ac extends sc{}ac.prototype._setValue=ps;class oc extends sc{}oc.prototype._setValue=ds;class cc extends za{setValue(t,e){this._values.set(t,e)}}class lc extends cc{}class uc extends cc{}class hc extends cc{}class pc extends cc{}class dc extends cc{}class fc extends cc{}class mc extends cc{}class yc extends cc{}class gc extends Ha{constructor(t){super(t),this._offsets=new ja}addChild(t,e="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new Ir(new Lo(e,t.type,!0)),this.numChildren-1}_flushPending(t){const e=this._offsets,[n]=this.children;for(const[i,r]of t)if(void 0===r)e.set(i,0);else{const t=r.length,s=e.set(i,t).buffer[i];for(let e=-1;++e<t;)n.set(s+e,r[e])}}}class bc extends Ha{set(t,e){return super.set(t,e)}setValue(t,e){const n=e instanceof Map?e:new Map(Object.entries(e)),i=this._pending||(this._pending=new Map),r=i.get(t);r&&(this._pendingLength-=r.size),this._pendingLength+=n.size,i.set(t,n)}addChild(t,e=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new Er(new Lo(e,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const e=this._offsets,[n]=this.children;for(const[i,r]of t)if(void 0===r)e.set(i,0);else{let{[i]:t,[i+1]:s}=e.set(i,r.size).buffer;for(const e of r.entries())if(n.set(t,e),++t>=s)break}}}class vc extends $a{setValue(t,e){}setValid(t,e){return this.length=Math.max(t+1,this.length),e}}class _c extends $a{setValue(t,e){const{children:n,type:i}=this;switch(Array.isArray(e)||e.constructor){case!0:return i.children.forEach(((i,r)=>n[r].set(t,e[r])));case Map:return i.children.forEach(((i,r)=>n[r].set(t,e.get(i.name))));default:return i.children.forEach(((i,r)=>n[r].set(t,e[i.name])))}}setValid(t,e){return super.setValid(t,e)||this.children.forEach((n=>n.setValid(t,e))),e}addChild(t,e=`${this.numChildren}`){const n=this.children.push(t);return this.type=new Ar([...this.type.children,new Lo(e,t.type,!0)]),n}}class xc extends za{}xc.prototype._setValue=ns;class wc extends xc{}wc.prototype._setValue=Zr;class Sc extends xc{}Sc.prototype._setValue=Xr;class Ic extends xc{}Ic.prototype._setValue=ts;class Ac extends xc{}Ac.prototype._setValue=es;class Tc extends za{}Tc.prototype._setValue=os;class kc extends Tc{}kc.prototype._setValue=is;class Mc extends Tc{}Mc.prototype._setValue=rs;class Ec extends Tc{}Ec.prototype._setValue=ss;class Cc extends Tc{}Cc.prototype._setValue=as;class Nc extends $a{constructor(t){super(t),this._typeIds=new Pa(new Int8Array(0),1),"function"==typeof t.valueToChildTypeId&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,e){return this.set(this.length,t,e)}set(t,e,n){return void 0===n&&(n=this._valueToChildTypeId(this,e,t)),this.setValid(t,this.isValid(e))&&this.setValue(t,e,n),this}setValue(t,e,n){this._typeIds.set(t,n);const i=this.type.typeIdToChildIndex[n],r=this.children[i];null==r||r.set(t,e)}addChild(t,e=`${this.children.length}`){const n=this.children.push(t),{type:{children:i,mode:r,typeIds:s}}=this,a=[...i,new Lo(e,t.type)];return this.type=new Tr(r,[...s,n],a),n}_valueToChildTypeId(t,e,n){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class Oc extends Nc{}class Lc extends Nc{constructor(t){super(t),this._offsets=new Pa(new Int32Array(0))}setValue(t,e,n){const i=this._typeIds.set(t,n).buffer[t],r=this.getChildAt(this.type.typeIdToChildIndex[i]),s=this._offsets.set(t,r.length).buffer[t];null==r||r.set(s,e)}}class Bc extends Ha{constructor(t){super(t),this._values=new Ua(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+4*this.length;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,e){return super.setValue(t,Cn(e))}_flushPending(t,e){}}Bc.prototype._flushPending=Yo.prototype._flushPending;const Dc=new class extends Br{visitNull(){return vc}visitBool(){return Wo}visitInt(){return cc}visitInt8(){return lc}visitInt16(){return uc}visitInt32(){return hc}visitInt64(){return pc}visitUint8(){return dc}visitUint16(){return fc}visitUint32(){return mc}visitUint64(){return yc}visitFloat(){return ec}visitFloat16(){return nc}visitFloat32(){return ic}visitFloat64(){return rc}visitUtf8(){return Bc}visitBinary(){return Yo}visitFixedSizeBinary(){return Xo}visitDate(){return Go}visitDateDay(){return Ko}visitDateMillisecond(){return Qo}visitTimestamp(){return xc}visitTimestampSecond(){return wc}visitTimestampMillisecond(){return Sc}visitTimestampMicrosecond(){return Ic}visitTimestampNanosecond(){return Ac}visitTime(){return Tc}visitTimeSecond(){return kc}visitTimeMillisecond(){return Mc}visitTimeMicrosecond(){return Ec}visitTimeNanosecond(){return Cc}visitDecimal(){return Jo}visitList(){return gc}visitStruct(){return _c}visitUnion(){return Nc}visitDenseUnion(){return Lc}visitSparseUnion(){return Oc}visitDictionary(){return Zo}visitInterval(){return sc}visitIntervalDayTime(){return ac}visitIntervalYearMonth(){return oc}visitFixedSizeList(){return tc}visitMap(){return bc}};class Fc extends Br{compareSchemas(t,e){return t===e||e instanceof t.constructor&&this.compareManyFields(t.fields,e.fields)}compareManyFields(t,e){return t===e||Array.isArray(t)&&Array.isArray(e)&&t.length===e.length&&t.every(((t,n)=>this.compareFields(t,e[n])))}compareFields(t,e){return t===e||e instanceof t.constructor&&t.name===e.name&&t.nullable===e.nullable&&this.visit(t.type,e.type)}}function Vc(t,e){return e instanceof t.constructor}function Uc(t,e){return t===e||Vc(t,e)}function Pc(t,e){return t===e||Vc(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function Rc(t,e){return t===e||Vc(t,e)&&t.precision===e.precision}function jc(t,e){return t===e||Vc(t,e)&&t.unit===e.unit}function $c(t,e){return t===e||Vc(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function zc(t,e){return t===e||Vc(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function Hc(t,e){return t===e||Vc(t,e)&&t.mode===e.mode&&t.typeIds.every(((t,n)=>t===e.typeIds[n]))&&Yc.compareManyFields(t.children,e.children)}function qc(t,e){return t===e||Vc(t,e)&&t.unit===e.unit}Fc.prototype.visitNull=Uc,Fc.prototype.visitBool=Uc,Fc.prototype.visitInt=Pc,Fc.prototype.visitInt8=Pc,Fc.prototype.visitInt16=Pc,Fc.prototype.visitInt32=Pc,Fc.prototype.visitInt64=Pc,Fc.prototype.visitUint8=Pc,Fc.prototype.visitUint16=Pc,Fc.prototype.visitUint32=Pc,Fc.prototype.visitUint64=Pc,Fc.prototype.visitFloat=Rc,Fc.prototype.visitFloat16=Rc,Fc.prototype.visitFloat32=Rc,Fc.prototype.visitFloat64=Rc,Fc.prototype.visitUtf8=Uc,Fc.prototype.visitBinary=Uc,Fc.prototype.visitFixedSizeBinary=function(t,e){return t===e||Vc(t,e)&&t.byteWidth===e.byteWidth},Fc.prototype.visitDate=jc,Fc.prototype.visitDateDay=jc,Fc.prototype.visitDateMillisecond=jc,Fc.prototype.visitTimestamp=$c,Fc.prototype.visitTimestampSecond=$c,Fc.prototype.visitTimestampMillisecond=$c,Fc.prototype.visitTimestampMicrosecond=$c,Fc.prototype.visitTimestampNanosecond=$c,Fc.prototype.visitTime=zc,Fc.prototype.visitTimeSecond=zc,Fc.prototype.visitTimeMillisecond=zc,Fc.prototype.visitTimeMicrosecond=zc,Fc.prototype.visitTimeNanosecond=zc,Fc.prototype.visitDecimal=Uc,Fc.prototype.visitList=function(t,e){return t===e||Vc(t,e)&&t.children.length===e.children.length&&Yc.compareManyFields(t.children,e.children)},Fc.prototype.visitStruct=function(t,e){return t===e||Vc(t,e)&&t.children.length===e.children.length&&Yc.compareManyFields(t.children,e.children)},Fc.prototype.visitUnion=Hc,Fc.prototype.visitDenseUnion=Hc,Fc.prototype.visitSparseUnion=Hc,Fc.prototype.visitDictionary=function(t,e){return t===e||Vc(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&Yc.visit(t.indices,e.indices)&&Yc.visit(t.dictionary,e.dictionary)},Fc.prototype.visitInterval=qc,Fc.prototype.visitIntervalDayTime=qc,Fc.prototype.visitIntervalYearMonth=qc,Fc.prototype.visitFixedSizeList=function(t,e){return t===e||Vc(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&Yc.compareManyFields(t.children,e.children)},Fc.prototype.visitMap=function(t,e){return t===e||Vc(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&Yc.compareManyFields(t.children,e.children)};const Yc=new Fc;function Wc(t,e){return Yc.compareSchemas(t,e)}function Gc(t){const e=t.type,n=new(Dc.getVisitFn(e)())(t);if(e.children&&e.children.length>0){const i=t.children||[],r={nullValues:t.nullValues},s=Array.isArray(i)?(t,e)=>i[e]||r:({name:t})=>i[t]||r;for(const[t,i]of e.children.entries()){const{type:e}=i,r=s(i,t);n.children.push(Gc(Object.assign(Object.assign({},r),{type:e})))}}return n}function Kc(t,e){return function(t,e){const n=[...t.fields],i=[],r={numBatches:e.reduce(((t,e)=>Math.max(t,e.length)),0)};let s=0,a=0,o=-1;const c=e.length;let l,u=[];for(;r.numBatches-- >0;){for(a=Number.POSITIVE_INFINITY,o=-1;++o<c;)u[o]=l=e[o].shift(),a=Math.min(a,l?l.length:a);Number.isFinite(a)&&(u=Qc(n,a,u,e,r),a>0&&(i[s++]=ca({type:new Ar(n),length:a,nullCount:0,children:u.slice()})))}return[t=t.assign(n),i.map((e=>new tl(t,e)))]}(t,e.map((t=>t.data.concat())))}function Qc(t,e,n,i,r){var s;const a=(e+63&-64)>>3;for(let o=-1,c=i.length;++o<c;){const c=n[o],l=null==c?void 0:c.length;if(l>=e)l===e?n[o]=c:(n[o]=c.slice(0,e),r.numBatches=Math.max(r.numBatches,i[o].unshift(c.slice(e,l-e))));else{const i=t[o];t[o]=i.clone({nullable:!0}),n[o]=null!==(s=null==c?void 0:c._changeLengthAndBackfillNullBitmap(e))&&void 0!==s?s:ca({type:i.type,length:e,nullCount:e,nullBitmap:new Uint8Array(a)})}}return n}var Jc,Zc;class Xc{constructor(...t){var e,n;if(0===t.length)return this.batches=[],this.schema=new Oo([]),this._offsets=[0],this;let i,r;t[0]instanceof Oo&&(i=t.shift()),t[t.length-1]instanceof Uint32Array&&(r=t.pop());const s=t=>{if(t){if(t instanceof tl)return[t];if(t instanceof Xc)return t.batches;if(t instanceof aa){if(t.type instanceof Ar)return[new tl(new Oo(t.type.children),t)]}else{if(Array.isArray(t))return t.flatMap((t=>s(t)));if("function"==typeof t[Symbol.iterator])return[...t].flatMap((t=>s(t)));if("object"==typeof t){const e=Object.keys(t),n=e.map((e=>new Ba([t[e]]))),i=new Oo(e.map(((t,e)=>new Lo(String(t),n[e].type)))),[,r]=Kc(i,n);return 0===r.length?[new tl(t)]:r}}}return[]},a=t.flatMap((t=>s(t)));if(i=null!==(n=null!=i?i:null===(e=a[0])||void 0===e?void 0:e.schema)&&void 0!==n?n:new Oo([]),!(i instanceof Oo))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const t of a){if(!(t instanceof tl))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!Wc(i,t.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=null!=r?r:ha(this.data)}get data(){return this.batches.map((({data:t})=>t))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce(((t,e)=>t+e.length),0)}get nullCount(){return-1===this._nullCount&&(this._nullCount=ua(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,e){}indexOf(t,e){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?Aa.visit(new Ba(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[\n  ${this.toArray().join(",\n  ")}\n]`}concat(...t){const e=this.schema,n=this.data.concat(t.flatMap((({data:t})=>t)));return new Xc(e,n.map((t=>new tl(e,t))))}slice(t,e){const n=this.schema;[t,e]=Gs({length:this.numRows},t,e);const i=pa(this.data,this._offsets,t,e);return new Xc(n,i.map((t=>new tl(n,t))))}getChild(t){return this.getChildAt(this.schema.fields.findIndex((e=>e.name===t)))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const e=this.data.map((e=>e.children[t]));if(0===e.length){const{type:n}=this.schema.fields[t],i=ca({type:n,length:0,nullCount:0});e.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new Ba(e)}return null}setChild(t,e){var n;return this.setChildAt(null===(n=this.schema.fields)||void 0===n?void 0:n.findIndex((e=>e.name===t)),e)}setChildAt(t,e){let n=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){e||(e=new Ba([ca({type:new Gi,length:this.numRows})]));const r=n.fields.slice(),s=r[t].clone({type:e.type}),a=this.schema.fields.map(((t,e)=>this.getChildAt(e)));[r[t],a[t]]=[s,e],[n,i]=Kc(n,a)}return new Xc(n,i)}select(t){const e=this.schema.fields.reduce(((t,e,n)=>t.set(e.name,n)),new Map);return this.selectAt(t.map((t=>e.get(t))).filter((t=>t>-1)))}selectAt(t){const e=this.schema.selectAt(t),n=this.batches.map((e=>e.selectAt(t)));return new Xc(e,n)}assign(t){const e=this.schema.fields,[n,i]=t.schema.fields.reduce(((t,n,i)=>{const[r,s]=t,a=e.findIndex((t=>t.name===n.name));return~a?s[a]=i:r.push(i),t}),[[],[]]),r=this.schema.assign(t.schema),s=[...e.map(((t,e)=>[e,i[e]])).map((([e,n])=>void 0===n?this.getChildAt(e):t.getChildAt(n))),...n.map((e=>t.getChildAt(e)))].filter(Boolean);return new Xc(...Kc(r,s))}}Jc=Symbol.toStringTag,Xc[Jc]=(t=>(t.schema=null,t.batches=[],t._offsets=new Uint32Array([0]),t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,t.isValid=ma(fa),t.get=ma(js.getVisitFn(di.Struct)),t.set=ya(fs.getVisitFn(di.Struct)),t.indexOf=ga(xa.getVisitFn(di.Struct)),t.getByteLength=ma(Ca.getVisitFn(di.Struct)),"Table"))(Xc.prototype);let tl=class t{constructor(...t){switch(t.length){case 2:if([this.schema]=t,!(this.schema instanceof Oo))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=ca({nullCount:0,type:new Ar(this.schema.fields),children:this.schema.fields.map((t=>ca({type:t.type,nullCount:0})))})]=t,!(this.data instanceof aa))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=el(this.schema,this.data.children);break;case 1:{const[e]=t,{fields:n,children:i,length:r}=Object.keys(e).reduce(((t,n,i)=>(t.children[i]=e[n],t.length=Math.max(t.length,e[n].length),t.fields[i]=Lo.new({name:n,type:e[n].type,nullable:!0}),t)),{length:0,fields:new Array,children:new Array}),s=new Oo(n),a=ca({type:new Ar(n),length:r,children:i,nullCount:0});[this.schema,this.data]=el(s,a.children,r);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=nl(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return js.visit(this.data,t)}set(t,e){return fs.visit(this.data,t,e)}indexOf(t,e){return xa.visit(this.data,t,e)}getByteLength(t){return Ca.visit(this.data,t)}[Symbol.iterator](){return Aa.visit(new Ba([this.data]))}toArray(){return[...this]}concat(...t){return new Xc(this.schema,[this,...t])}slice(e,n){const[i]=new Ba([this.data]).slice(e,n).data;return new t(this.schema,i)}getChild(t){var e;return this.getChildAt(null===(e=this.schema.fields)||void 0===e?void 0:e.findIndex((e=>e.name===t)))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new Ba([this.data.children[t]]):null}setChild(t,e){var n;return this.setChildAt(null===(n=this.schema.fields)||void 0===n?void 0:n.findIndex((e=>e.name===t)),e)}setChildAt(e,n){let i=this.schema,r=this.data;if(e>-1&&e<this.numCols){n||(n=new Ba([ca({type:new Gi,length:this.numRows})]));const t=i.fields.slice(),s=r.children.slice(),a=t[e].clone({type:n.type});[t[e],s[e]]=[a,n.data[0]],i=new Oo(t,new Map(this.schema.metadata)),r=ca({type:new Ar(t),children:s})}return new t(i,r)}select(e){const n=this.schema.select(e),i=new Ar(n.fields),r=[];for(const t of e){const e=this.schema.fields.findIndex((e=>e.name===t));~e&&(r[e]=this.data.children[e])}return new t(n,ca({type:i,length:this.numRows,children:r}))}selectAt(e){const n=this.schema.selectAt(e),i=e.map((t=>this.data.children[t])).filter(Boolean),r=ca({type:new Ar(n.fields),length:this.numRows,children:i});return new t(n,r)}};function el(t,e,n=e.reduce(((t,e)=>Math.max(t,e.length)),0)){var i;const r=[...t.fields],s=[...e],a=(n+63&-64)>>3;for(const[o,c]of t.fields.entries()){const t=e[o];t&&t.length===n||(r[o]=c.clone({nullable:!0}),s[o]=null!==(i=null==t?void 0:t._changeLengthAndBackfillNullBitmap(n))&&void 0!==i?i:ca({type:c.type,length:n,nullCount:n,nullBitmap:new Uint8Array(a)}))}return[t.assign(r),ca({type:new Ar(r),length:n,children:s})]}function nl(t,e,n=new Map){for(let i=-1,r=t.length;++i<r;){const r=t[i].type,s=e[i];if(Wi.isDictionary(r))if(n.has(r.id)){if(n.get(r.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else s.dictionary&&n.set(r.id,s.dictionary);r.children&&r.children.length>0&&nl(r.children,s.children,n)}return n}Zc=Symbol.toStringTag,tl[Zc]=(t=>(t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(tl.prototype);class il extends tl{constructor(t){const e=t.fields.map((t=>ca({type:t.type})));super(t,ca({type:new Ar(t.fields),nullCount:0,children:e}))}}var rl,sl;!function(t){t[t.BUFFER=0]="BUFFER"}(rl||(rl={})),function(t){t[t.LZ4_FRAME=0]="LZ4_FRAME",t[t.ZSTD=1]="ZSTD"}(sl||(sl={}));class al{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBodyCompression(t,e){return(e||new al).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,e){return t.setPosition(t.position()+4),(e||new al).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):sl.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):rl.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,e){t.addFieldInt8(0,e,sl.LZ4_FRAME)}static addMethod(t,e){t.addFieldInt8(1,e,rl.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,e,n){return al.startBodyCompression(t),al.addCodec(t,e),al.addMethod(t,n),al.endBodyCompression(t)}}class ol{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,e,n){return t.prep(8,16),t.writeInt64(n),t.writeInt64(e),t.offset()}}let cl=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,e,n){return t.prep(8,16),t.writeInt64(n),t.writeInt64(e),t.offset()}},ll=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsRecordBatch(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRecordBatch(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(t,e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new cl).__init(this.bb.__vector(this.bb_pos+n)+16*t,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new ol).__init(this.bb.__vector(this.bb_pos+n)+16*t,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const e=this.bb.__offset(this.bb_pos,10);return e?(t||new al).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addNodes(t,e){t.addFieldOffset(1,e,0)}static startNodesVector(t,e){t.startVector(16,e,8)}static addBuffers(t,e){t.addFieldOffset(2,e,0)}static startBuffersVector(t,e){t.startVector(16,e,8)}static addCompression(t,e){t.addFieldOffset(3,e,0)}static endRecordBatch(t){return t.endObject()}},ul=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryBatch(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryBatch(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new ll).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startDictionaryBatch(t){t.startObject(3)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addData(t,e){t.addFieldOffset(1,e,0)}static addIsDelta(t,e){t.addFieldInt8(2,+e,0)}static endDictionaryBatch(t){return t.endObject()}};var hl;!function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"}(hl||(hl={}));let pl=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMessage(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMessage(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):eo.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):hl.NONE}header(t){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__union(t,this.bb_pos+e):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new to).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,eo.V1)}static addHeaderType(t,e){t.addFieldInt8(1,e,hl.NONE)}static addHeader(t,e){t.addFieldOffset(2,e,0)}static addBodyLength(t,e){t.addFieldInt64(3,e,t.createLong(0,0))}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,e){t.finish(e)}static finishSizePrefixedMessageBuffer(t,e){t.finish(e,void 0,!0)}static createMessage(e,n,i,r,s,a){return t.startMessage(e),t.addVersion(e,n),t.addHeaderType(e,i),t.addHeader(e,r),t.addBodyLength(e,s),t.addCustomMetadata(e,a),t.endMessage(e)}};var dl=Qa;const fl=new class extends Br{visit(t,e){return null==t||null==e?void 0:super.visit(t,e)}visitNull(t,e){return xo.startNull(e),xo.endNull(e)}visitInt(t,e){return so.startInt(e),so.addBitWidth(e,t.bitWidth),so.addIsSigned(e,t.isSigned),so.endInt(e)}visitFloat(t,e){return go.startFloatingPoint(e),go.addPrecision(e,t.precision),go.endFloatingPoint(e)}visitBinary(t,e){return oo.startBinary(e),oo.endBinary(e)}visitBool(t,e){return co.startBool(e),co.endBool(e)}visitUtf8(t,e){return Mo.startUtf8(e),Mo.endUtf8(e)}visitDecimal(t,e){return uo.startDecimal(e),uo.addScale(e,t.scale),uo.addPrecision(e,t.precision),uo.addBitWidth(e,t.bitWidth),uo.endDecimal(e)}visitDate(t,e){return lo.startDate(e),lo.addUnit(e,t.unit),lo.endDate(e)}visitTime(t,e){return So.startTime(e),So.addUnit(e,t.unit),So.addBitWidth(e,t.bitWidth),So.endTime(e)}visitTimestamp(t,e){const n=t.timezone&&e.createString(t.timezone)||void 0;return Io.startTimestamp(e),Io.addUnit(e,t.unit),void 0!==n&&Io.addTimezone(e,n),Io.endTimestamp(e)}visitInterval(t,e){return bo.startInterval(e),bo.addUnit(e,t.unit),bo.endInterval(e)}visitList(t,e){return vo.startList(e),vo.endList(e)}visitStruct(t,e){return wo.startStruct_(e),wo.endStruct_(e)}visitUnion(t,e){ko.startTypeIdsVector(e,t.typeIds.length);const n=ko.createTypeIdsVector(e,t.typeIds);return ko.startUnion(e),ko.addMode(e,t.mode),ko.addTypeIds(e,n),ko.endUnion(e)}visitDictionary(t,e){const n=this.visit(t.indices,e);return ao.startDictionaryEncoding(e),ao.addId(e,new dl(t.id,0)),ao.addIsOrdered(e,t.isOrdered),void 0!==n&&ao.addIndexType(e,n),ao.endDictionaryEncoding(e)}visitFixedSizeBinary(t,e){return mo.startFixedSizeBinary(e),mo.addByteWidth(e,t.byteWidth),mo.endFixedSizeBinary(e)}visitFixedSizeList(t,e){return yo.startFixedSizeList(e),yo.addListSize(e,t.listSize),yo.endFixedSizeList(e)}visitMap(t,e){return _o.startMap(e),_o.addKeysSorted(e,t.keysSorted),_o.endMap(e)}};function ml(t){return new Tl(t.count,gl(t.columns),bl(t.columns))}function yl(t,e){return(t.children||[]).filter(Boolean).map((t=>Lo.fromJSON(t,e)))}function gl(t){return(t||[]).reduce(((t,e)=>{return[...t,new El(e.count,(n=e.VALIDITY,(n||[]).reduce(((t,e)=>t+ +(0===e)),0))),...gl(e.children)];var n}),[])}function bl(t,e=[]){for(let n=-1,i=(t||[]).length;++n<i;){const i=t[n];i.VALIDITY&&e.push(new Ml(e.length,i.VALIDITY.length)),i.TYPE&&e.push(new Ml(e.length,i.TYPE.length)),i.OFFSET&&e.push(new Ml(e.length,i.OFFSET.length)),i.DATA&&e.push(new Ml(e.length,i.DATA.length)),e=bl(i.children,e)}return e}function vl(t){return new Map(Object.entries(t||{}))}function _l(t){return new Ki(t.isSigned,t.bitWidth)}function xl(t,e){const n=t.type.name;switch(n){case"NONE":case"null":return new Gi;case"binary":return new cr;case"utf8":return new lr;case"bool":return new ur;case"list":return new Ir((e||[])[0]);case"struct":case"struct_":return new Ar(e||[])}switch(n){case"int":{const e=t.type;return new Ki(e.isSigned,e.bitWidth)}case"floatingpoint":{const e=t.type;return new rr(ci[e.precision])}case"decimal":{const e=t.type;return new hr(e.scale,e.precision,e.bitWidth)}case"date":{const e=t.type;return new pr(li[e.unit])}case"time":{const e=t.type;return new mr(ui[e.unit],e.bitWidth)}case"timestamp":{const e=t.type;return new _r(ui[e.unit],e.timezone)}case"interval":{const e=t.type;return new xr(hi[e.unit])}case"union":{const n=t.type;return new Tr(oi[n.mode],n.typeIds||[],e||[])}case"fixedsizebinary":{const e=t.type;return new kr(e.byteWidth)}case"fixedsizelist":{const n=t.type;return new Mr(n.listSize,(e||[])[0])}case"map":{const n=t.type;return new Er((e||[])[0],n.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var wl=Qa,Sl=Xa,Il=Za;class Al{constructor(t,e,n,i){this._version=e,this._headerType=n,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength="number"==typeof t?t:t.low}static fromJSON(t,e){const n=new Al(0,ai.V4,e);return n._createHeader=function(t,e){return()=>{switch(e){case pi.Schema:return Oo.fromJSON(t);case pi.RecordBatch:return Tl.fromJSON(t);case pi.DictionaryBatch:return kl.fromJSON(t)}throw new Error(`Unrecognized Message type: { name: ${pi[e]}, type: ${e} }`)}}(t,e),n}static decode(t){t=new Il(Qn(t));const e=pl.getRootAsMessage(t),n=e.bodyLength(),i=e.version(),r=e.headerType(),s=new Al(n,i,r);return s._createHeader=function(t,e){return()=>{switch(e){case pi.Schema:return Oo.decode(t.header(new Co));case pi.RecordBatch:return Tl.decode(t.header(new ll),t.version());case pi.DictionaryBatch:return kl.decode(t.header(new ul),t.version())}throw new Error(`Unrecognized Message type: { name: ${pi[e]}, type: ${e} }`)}}(e,r),s}static encode(t){const e=new Sl;let n=-1;return t.isSchema()?n=Oo.encode(e,t.header()):t.isRecordBatch()?n=Tl.encode(e,t.header()):t.isDictionaryBatch()&&(n=kl.encode(e,t.header())),pl.startMessage(e),pl.addVersion(e,ai.V4),pl.addHeader(e,n),pl.addHeaderType(e,t.headerType),pl.addBodyLength(e,new wl(t.bodyLength,0)),pl.finishMessageBuffer(e,pl.endMessage(e)),e.asUint8Array()}static from(t,e=0){if(t instanceof Oo)return new Al(0,ai.V4,pi.Schema,t);if(t instanceof Tl)return new Al(e,ai.V4,pi.RecordBatch,t);if(t instanceof kl)return new Al(e,ai.V4,pi.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===pi.Schema}isRecordBatch(){return this.headerType===pi.RecordBatch}isDictionaryBatch(){return this.headerType===pi.DictionaryBatch}}class Tl{constructor(t,e,n){this._nodes=e,this._buffers=n,this._length="number"==typeof t?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class kl{constructor(t,e,n=!1){this._data=t,this._isDelta=n,this._id="number"==typeof e?e:e.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class Ml{constructor(t,e){this.offset="number"==typeof t?t:t.low,this.length="number"==typeof e?e:e.low}}class El{constructor(t,e){this.length="number"==typeof t?t:t.low,this.nullCount="number"==typeof e?e:e.low}}function Cl(t,e){const n=[];for(let i,r=-1,s=-1,a=t.childrenLength();++r<a;)(i=t.children(r))&&(n[++s]=Lo.decode(i,e));return n}function Nl(t){const e=new Map;if(t)for(let n,i,r=-1,s=Math.trunc(t.customMetadataLength());++r<s;)(n=t.customMetadata(r))&&null!=(i=n.key())&&e.set(i,n.value());return e}function Ol(t){return new Ki(t.isSigned(),t.bitWidth())}function Ll(t,e){const n=t.typeType();switch(n){case To.NONE:case To.Null:return new Gi;case To.Binary:return new cr;case To.Utf8:return new lr;case To.Bool:return new ur;case To.List:return new Ir((e||[])[0]);case To.Struct_:return new Ar(e||[])}switch(n){case To.Int:{const e=t.type(new so);return new Ki(e.isSigned(),e.bitWidth())}case To.FloatingPoint:{const e=t.type(new go);return new rr(e.precision())}case To.Decimal:{const e=t.type(new uo);return new hr(e.scale(),e.precision(),e.bitWidth())}case To.Date:{const e=t.type(new lo);return new pr(e.unit())}case To.Time:{const e=t.type(new So);return new mr(e.unit(),e.bitWidth())}case To.Timestamp:{const e=t.type(new Io);return new _r(e.unit(),e.timezone())}case To.Interval:{const e=t.type(new bo);return new xr(e.unit())}case To.Union:{const n=t.type(new ko);return new Tr(n.mode(),n.typeIdsArray()||[],e||[])}case To.FixedSizeBinary:{const e=t.type(new mo);return new kr(e.byteWidth())}case To.FixedSizeList:{const n=t.type(new yo);return new Mr(n.listSize(),(e||[])[0])}case To.Map:{const n=t.type(new _o);return new Er((e||[])[0],n.keysSorted())}}throw new Error(`Unrecognized type: "${To[n]}" (${n})`)}Lo.encode=function(t,e){let n=-1,i=-1,r=-1;const s=e.type;let a=e.typeId;Wi.isDictionary(s)?(a=s.dictionary.typeId,r=fl.visit(s,t),i=fl.visit(s.dictionary,t)):i=fl.visit(s,t);const o=(s.children||[]).map((e=>Lo.encode(t,e))),c=Eo.createChildrenVector(t,o),l=e.metadata&&e.metadata.size>0?Eo.createCustomMetadataVector(t,[...e.metadata].map((([e,n])=>{const i=t.createString(`${e}`),r=t.createString(`${n}`);return to.startKeyValue(t),to.addKey(t,i),to.addValue(t,r),to.endKeyValue(t)}))):-1;e.name&&(n=t.createString(e.name));Eo.startField(t),Eo.addType(t,i),Eo.addTypeType(t,a),Eo.addChildren(t,c),Eo.addNullable(t,!!e.nullable),-1!==n&&Eo.addName(t,n);-1!==r&&Eo.addDictionary(t,r);-1!==l&&Eo.addCustomMetadata(t,l);return Eo.endField(t)},Lo.decode=function(t,e){let n,i,r,s,a,o;e&&(o=t.dictionary())?e.has(n=o.id().low)?(s=(s=o.indexType())?Ol(s):new Zi,a=new Or(e.get(n),s,n,o.isOrdered()),i=new Lo(t.name(),a,t.nullable(),Nl(t))):(s=(s=o.indexType())?Ol(s):new Zi,e.set(n,r=Ll(t,Cl(t,e))),a=new Or(r,s,n,o.isOrdered()),i=new Lo(t.name(),a,t.nullable(),Nl(t))):(r=Ll(t,Cl(t,e)),i=new Lo(t.name(),r,t.nullable(),Nl(t)));return i||null},Lo.fromJSON=function(t,e){let n,i,r,s,a,o;return e&&(s=t.dictionary)?e.has(n=s.id)?(i=(i=s.indexType)?_l(i):new Zi,o=new Or(e.get(n),i,n,s.isOrdered),r=new Lo(t.name,o,t.nullable,vl(t.customMetadata))):(i=(i=s.indexType)?_l(i):new Zi,e.set(n,a=xl(t,yl(t,e))),o=new Or(a,i,n,s.isOrdered),r=new Lo(t.name,o,t.nullable,vl(t.customMetadata))):(a=xl(t,yl(t,e)),r=new Lo(t.name,a,t.nullable,vl(t.customMetadata))),r||null},Oo.encode=function(t,e){const n=e.fields.map((e=>Lo.encode(t,e)));Co.startFieldsVector(t,n.length);const i=Co.createFieldsVector(t,n),r=e.metadata&&e.metadata.size>0?Co.createCustomMetadataVector(t,[...e.metadata].map((([e,n])=>{const i=t.createString(`${e}`),r=t.createString(`${n}`);return to.startKeyValue(t),to.addKey(t,i),to.addValue(t,r),to.endKeyValue(t)}))):-1;Co.startSchema(t),Co.addFields(t,i),Co.addEndianness(t,Bl?no.Little:no.Big),-1!==r&&Co.addCustomMetadata(t,r);return Co.endSchema(t)},Oo.decode=function(t,e=new Map){const n=function(t,e){const n=[];for(let i,r=-1,s=-1,a=t.fieldsLength();++r<a;)(i=t.fields(r))&&(n[++s]=Lo.decode(i,e));return n}(t,e);return new Oo(n,Nl(t),e)},Oo.fromJSON=function(t,e=new Map){return new Oo(function(t,e){return(t.fields||[]).filter(Boolean).map((t=>Lo.fromJSON(t,e)))}(t,e),vl(t.customMetadata),e)},Tl.encode=function(t,e){const n=e.nodes||[],i=e.buffers||[];ll.startNodesVector(t,n.length);for(const e of n.slice().reverse())El.encode(t,e);const r=t.endVector();ll.startBuffersVector(t,i.length);for(const e of i.slice().reverse())Ml.encode(t,e);const s=t.endVector();return ll.startRecordBatch(t),ll.addLength(t,new wl(e.length,0)),ll.addNodes(t,r),ll.addBuffers(t,s),ll.endRecordBatch(t)},Tl.decode=function(t,e=ai.V4){if(null!==t.compression())throw new Error("Record batch compression not implemented");return new Tl(t.length(),function(t){const e=[];for(let n,i=-1,r=-1,s=t.nodesLength();++i<s;)(n=t.nodes(i))&&(e[++r]=El.decode(n));return e}(t),function(t,e){const n=[];for(let i,r=-1,s=-1,a=t.buffersLength();++r<a;)(i=t.buffers(r))&&(e<ai.V4&&(i.bb_pos+=8*(r+1)),n[++s]=Ml.decode(i));return n}(t,e))},Tl.fromJSON=ml,kl.encode=function(t,e){const n=Tl.encode(t,e.data);return ul.startDictionaryBatch(t),ul.addId(t,new wl(e.id,0)),ul.addIsDelta(t,e.isDelta),ul.addData(t,n),ul.endDictionaryBatch(t)},kl.decode=function(t,e=ai.V4){return new kl(Tl.decode(t.data(),e),t.id(),t.isDelta())},kl.fromJSON=function(t){return new kl(ml(t.data),t.id,t.isDelta)},El.encode=function(t,e){return cl.createFieldNode(t,new wl(e.length,0),new wl(e.nullCount,0))},El.decode=function(t){return new El(t.length(),t.nullCount())},Ml.encode=function(t,e){return ol.createBuffer(t,new wl(e.offset,0),new wl(e.length,0))},Ml.decode=function(t){return new Ml(t.offset(),t.length())};const Bl=(()=>{const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),256===new Int16Array(t)[0]})(),Dl="ARROW1",Fl=new Uint8Array(6);for(let t=0;t<6;t+=1)Fl[t]=Dl.codePointAt(t);Fl.length;class Vl extends Br{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...t){const e=t=>t.flatMap((t=>Array.isArray(t)?e(t):t instanceof tl?t.data.children:t.data)),n=new Vl;return n.visitMany(e(t)),n}visit(t){if(t instanceof Ba)return this.visitMany(t.data),this;const{type:e}=t;if(!Wi.isDictionary(e)){const{length:n,nullCount:i}=t;if(n>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");Wi.isNull(e)||Ul.call(this,i<=0?new Uint8Array(0):ea(t.offset,n,t.nullBitmap)),this.nodes.push(new El(n,i))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Ul(t){const e=t.byteLength+7&-8;return this.buffers.push(t),this.bufferRegions.push(new Ml(this._byteLength,e)),this._byteLength+=e,this}function Pl(t){return Ul.call(this,t.values.subarray(0,t.length*t.stride))}function Rl(t){const{length:e,values:n,valueOffsets:i}=t,r=i[0],s=i[e],a=Math.min(s-r,n.byteLength-r);return Ul.call(this,ei(-i[0],e,i)),Ul.call(this,n.subarray(r,r+a)),this}function jl(t){const{length:e,valueOffsets:n}=t;return n&&Ul.call(this,ei(n[0],e,n)),this.visit(t.children[0])}function $l(t){return this.visitMany(t.type.children.map(((e,n)=>t.children[n])).filter(Boolean))[0]}Vl.prototype.visitBool=function(t){let e;return t.nullCount>=t.length?Ul.call(this,new Uint8Array(0)):(e=t.values)instanceof Uint8Array?Ul.call(this,ea(t.offset,t.length,e)):Ul.call(this,na(t.values))},Vl.prototype.visitInt=Pl,Vl.prototype.visitFloat=Pl,Vl.prototype.visitUtf8=Rl,Vl.prototype.visitBinary=Rl,Vl.prototype.visitFixedSizeBinary=Pl,Vl.prototype.visitDate=Pl,Vl.prototype.visitTimestamp=Pl,Vl.prototype.visitTime=Pl,Vl.prototype.visitDecimal=Pl,Vl.prototype.visitList=jl,Vl.prototype.visitStruct=$l,Vl.prototype.visitUnion=function(t){const{type:e,length:n,typeIds:i,valueOffsets:r}=t;if(Ul.call(this,i),e.mode===oi.Sparse)return $l.call(this,t);if(e.mode===oi.Dense){if(t.offset<=0)return Ul.call(this,r),$l.call(this,t);{const s=i.reduce(((t,e)=>Math.max(t,e)),i[0]),a=new Int32Array(s+1),o=new Int32Array(s+1).fill(-1),c=new Int32Array(n),l=ei(-r[0],n,r);for(let t,e,r=-1;++r<n;)-1===(e=o[t=i[r]])&&(e=o[t]=l[t]),c[r]=l[r]-e,++a[t];Ul.call(this,c);for(let i,r=-1,s=e.children.length;++r<s;)if(i=t.children[r]){const t=e.typeIds[r],s=Math.min(n,a[t]);this.visit(i.slice(o[t],s))}}}return this},Vl.prototype.visitInterval=Pl,Vl.prototype.visitFixedSizeList=jl,Vl.prototype.visitMap=jl;class zl extends zo{constructor(t){super(),this._position=0,this._started=!1,this._sink=new qo,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Un(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy="boolean"!=typeof t.autoDestroy||t.autoDestroy,this._writeLegacyIpcFormat="boolean"==typeof t.writeLegacyIpcFormat&&t.writeLegacyIpcFormat}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return Pn(t)?t.then((t=>this.writeAll(t))):jn(t)?Wl(this,t):Yl(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,e=null){var n;return t===this._sink||t instanceof qo?this._sink=t:(this._sink=new qo,t&&(Un(n=t)&&Vn(n.abort)&&Vn(n.getWriter)&&!zn(n))?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&(t=>Un(t)&&Vn(t.end)&&Vn(t.write)&&(t=>"boolean"==typeof t)(t.writable)&&!zn(t))(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,e&&Wc(e,this._schema)||(null==e?(this._position=0,this._schema=null):(this._started=!0,this._schema=e,this._writeSchema(e))),this}write(t){let e=null;if(!this._sink)throw new Error("RecordBatchWriter is closed");if(null==t)return this.finish()&&void 0;if(t instanceof Xc&&!(e=t.schema))return this.finish()&&void 0;if(t instanceof tl&&!(e=t.schema))return this.finish()&&void 0;if(e&&!Wc(e,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,e)}t instanceof tl?t instanceof il||this._writeRecordBatch(t):t instanceof Xc?this.writeAll(t.batches):Rn(t)&&this.writeAll(t)}_writeMessage(t,e=8){const n=e-1,i=Al.encode(t),r=i.byteLength,s=this._writeLegacyIpcFormat?4:8,a=r+s+n&~n,o=a-r-s;return t.headerType===pi.RecordBatch?this._recordBatchBlocks.push(new jo(a,t.bodyLength,this._position)):t.headerType===pi.DictionaryBatch&&this._dictionaryBlocks.push(new jo(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-s)),r>0&&this._write(i),this._writePadding(o)}_write(t){if(this._started){const e=Qn(t);e&&e.byteLength>0&&(this._sink.write(e),this._position+=e.byteLength)}return this}_writeSchema(t){return this._writeMessage(Al.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Fl)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:e,nodes:n,bufferRegions:i,buffers:r}=Vl.assemble(t),s=new Tl(t.numRows,n,i),a=Al.from(s,e);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(r)}_writeDictionaryBatch(t,e,n=!1){this._dictionaryDeltaOffsets.set(e,t.length+(this._dictionaryDeltaOffsets.get(e)||0));const{byteLength:i,nodes:r,bufferRegions:s,buffers:a}=Vl.assemble(new Ba([t])),o=new Tl(t.length,r,s),c=new kl(o,e,n),l=Al.from(c,i);return this._writeMessage(l)._writeBodyBuffers(a)}_writeBodyBuffers(t){let e,n,i;for(let r=-1,s=t.length;++r<s;)(e=t[r])&&(n=e.byteLength)>0&&(this._write(e),(i=(n+7&-8)-n)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[e,n]of t.dictionaries){let t=this._dictionaryDeltaOffsets.get(e)||0;if(0===t||(n=null==n?void 0:n.slice(t)).length>0)for(const i of n.data)this._writeDictionaryBatch(i,e,t>0),t+=i.length}return this}}class Hl extends zl{static writeAll(t,e){const n=new Hl(e);return Pn(t)?t.then((t=>n.writeAll(t))):jn(t)?Wl(n,t):Yl(n,t)}}class ql extends zl{static writeAll(t){const e=new ql;return Pn(t)?t.then((t=>e.writeAll(t))):jn(t)?Wl(e,t):Yl(e,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const e=Po.encode(new Po(t,ai.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(e)._write(Int32Array.of(e.byteLength))._writeMagic()}}function Yl(t,e){let n=e;e instanceof Xc&&(n=e.batches,t.reset(void 0,e.schema));for(const e of n)t.write(e);return t.finish()}function Wl(t,e){var n,i,r,s;return xn(this,void 0,void 0,(function*(){try{for(n=Tn(e);!(i=yield n.next()).done;){const e=i.value;t.write(e)}}catch(t){r={error:t}}finally{try{i&&!i.done&&(s=n.return)&&(yield s.call(n))}finally{if(r)throw r.error}}return t.finish()}))}function Gl(t,e=1){return(t*e+63&-64||64)/e}function Kl(t,e,n=t.BYTES_PER_ELEMENT){return new t(Gl(e,n))}function Ql(t){return t instanceof aa?t:new aa(t.type,0,t.length,t.nulls,t.buffers,null,t.dict)}const Jl=new TextEncoder;const Zl=Jl.encodeInto?function(t,e,n){return Jl.encodeInto(n,t.subarray(e)).written}:function(t,e,n){const i=Jl.encode(n);return t.set(i,e),i.length};function Xl(t,e){const n=Kl(t.ArrayType,e);return{set(t,e){n[e]=t},data:()=>({type:t,length:e,buffers:[null,n]})}}function tu(t,e){const n=Kl(t.ArrayType,e/8);return{set(t,e){t&&(n[e>>3]|=1<<e%8)},data:()=>({type:t,length:e,buffers:[null,n]})}}function eu(t,e){const n=Kl(t.ArrayType,e);return{set(t,e){n[e]=t/864e5|0},data:()=>({type:t,length:e,buffers:[null,n]})}}function nu(t,e){const n=Kl(t.ArrayType,e<<1);return{set(t,e){const i=e<<1;n[i]=t%4294967296|0,n[i+1]=t/4294967296|0},data:()=>({type:t,length:e,buffers:[null,n]})}}function iu(t,e){const n=[],i=Kl(t.indices.ArrayType,e),r=Object.create(null);let s=-1,a=0;return{set(t,e){const o=String(t);let c=r[o];void 0===c&&(a+=o.length,r[o]=c=++s,n.push(o)),i[e]=c},data:()=>({type:t,length:e,buffers:[null,i],dict:ru(t.dictionary,n,a)})}}function ru(t,e,n){const i=function(t,e,n){const i=Kl(Int32Array,e+1),r=Kl(Uint8Array,3*n);let s=0;return{set(t,e){s+=Zl(r,s,t),i[e+1]=s},data:()=>{const n=Gl(s),a=r.length>n?r.subarray(0,n):r;return{type:t,length:e,buffers:[i,a]}}}}(t,e.length,n);return e.forEach(i.set),function(t){return new Ba([Ql(t)])}(i.data())}function su(t,e,n=!0){let i;switch(t.typeId){case di.Int:i=t.bitWidth<64?Xl:null;break;case di.Float:i=t.precision>0?Xl:null;break;case di.Dictionary:i=t.dictionary.typeId===di.Utf8&&t.indices.typeId===di.Int&&t.indices.bitWidth<64?iu:null;break;case di.Bool:i=tu;break;case di.Date:i=t.unit?nu:eu}return null==i?function(t){const e=Gc({type:t,nullValues:[null,void 0]});return{set(t,n){e.set(n,t)},data:()=>e.finish().flush()}}(t):n?function(t,e){const n=Kl(Uint8Array,e/8);let i=0;return{set(e,r){null==e?++i:(t.set(e,r),n[r>>3]|=1<<r%8)},data:()=>{const e=t.data();return i&&(e.nulls=i,e.buffers[2]=n),e}}}(i(t,e),e):i(t,e)}function au(t,e,n,i,r=!0){const s=su(i,t,r);return e(n,s.set),Ql(s.data())}function ou(t){if(t instanceof Wi||null==t)return t;switch(t){case di.Binary:return new cr;case di.Bool:return new ur;case di.DateDay:return new dr;case di.DateMillisecond:case di.Date:return new fr;case di.Dictionary:return new Or(new lr,new Zi);case di.Float16:return new sr;case di.Float32:return new ar;case di.Float64:case di.Float:return new or;case di.Int8:return new Qi;case di.Int16:return new Ji;case di.Int32:case di.Int:return new Zi;case di.Int64:return new Xi;case di.IntervalDayTime:return new wr;case di.Interval:case di.IntervalYearMonth:return new Sr;case di.Null:return new Gi;case di.TimeMicrosecond:return new br;case di.TimeMillisecond:case di.Time:return new gr;case di.TimeNanosecond:return new vr;case di.TimeSecond:return new yr;case di.Uint8:return new tr;case di.Uint16:return new er;case di.Uint32:return new nr;case di.Uint64:return new ir;case di.Utf8:return new lr;default:St(`Unsupported type code: ${be(t)}. Use a data type constructor instead?`)}}function cu(t,e){const n=lu();return t(e,n.add),n}function lu(){const t={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(e){if(++t.count,null==e)return void++t.nulls;const n=typeof e;if("string"===n)++t.strings;else if("number"===n)++t.nums,e<t.min&&(t.min=e),e>t.max&&(t.max=e),Number.isInteger(e)&&++t.ints;else if("boolean"===n)++t.bools;else if("object"===n)if(Ct(e))++t.dates,0===(i=e).getUTCHours()&&0===i.getUTCMinutes()&&0===i.getUTCSeconds()&&0===i.getUTCMilliseconds()&&++t.utcdays;else if(zt(e)){++t.arrays,e.length<t.minlen&&(t.minlen=e.length),e.length>t.maxlen&&(t.maxlen=e.length);const n=t.array_prof||(t.array_prof=lu());e.forEach(n.add)}else{++t.structs;const n=t.struct_prof||(t.struct_prof={});for(const t in e){(n[t]||(n[t]=lu())).add(e[t])}}else"bigint"===n&&(++t.bigints,e<t.min&&(t.min=e),e>t.max&&(t.max=e));var i},type:()=>ou(function(t){const e=t.count-t.nulls;if(0===e)return di.Null;if(t.ints===e){const e=Math.max(Math.abs(t.min)-1,t.max);return t.min<0?e>=2**31?di.Float64:e<128?di.Int8:e<32768?di.Int16:di.Int32:e>=2**32?di.Float64:e<256?di.Uint8:e<65536?di.Uint16:di.Uint32}if(t.nums===e)return di.Float64;if(t.bigints===e){const e=-t.min>t.max?-t.min-1n:t.max;return t.min<0?e<2**63?di.Int64:St(`BigInt exceeds 64 bits: ${e}`):t.max<2**64?di.Uint64:St(`BigInt exceeds 64 bits: ${t.max}`)}if(t.bools===e)return di.Bool;if(t.utcdays===e)return di.DateDay;if(t.dates===e)return di.DateMillisecond;if(t.arrays===e){const e=Lo.new("value",t.array_prof.type(),!0);return t.minlen===t.maxlen?new Mr(t.minlen,e):new Ir(e)}if(t.structs===e){const e=t.struct_prof;return new Ar(Object.keys(e).map((t=>Lo.new(t,e[t].type(),!0))))}if(t.strings>0)return di.Dictionary;St("Type inference failure")}(t))};return t}function uu(t,e,n,i,r,s=!0){if(!(r=ou(r))){const t=cu(i,e);s=t.nulls>0,r=t.type()}return au(n,i,e,r,s)}function hu(t,e,n,i,r,s=!0){r=ou(r);const a=t.column(e),o=!(t.isFiltered()||t.isOrdered()),c=(l=a)instanceof Ba?l:l.vector instanceof Ba?l.vector:null;var l;if(c&&o&&pu(c.type,r))return c;const u=a.data;if($t(u)){const t=function(t){const e={Float32Array:ar,Float64Array:or,Int8Array:Qi,Int16Array:Ji,Int32Array:Zi,Uint8Array:tr,Uint16Array:er,Uint32Array:nr,BigInt64Array:Xi,BigUint64Array:ir},n=e[t.constructor.name];return n?new n:null}(u);if(o&&t&&pu(t,r))return function(t,e){const n=t.length,i=Gl(n,t.BYTES_PER_ELEMENT);let r=t;return n!==i&&(r=new t.constructor(i),r.set(t)),Ql({type:e,length:n,buffers:[null,r]})}(u,t);r=r||t,s=!1}if(!r){const t=cu(i,a);s=t.nulls>0,r=t.type()}return au(n,i,a,r,s)}function pu(t,e){return!t||!e||t.compareTo(e)}function du(t,e,n){const i=Math.min(t.length,n+e);return(e,r)=>{for(let s=n;s<i;++s)r(t[s][e],s)}}function fu(t,e,n){const i=0===n&&t.numRows()<=e&&!t.isFiltered()&&!t.isOrdered();return(r,s)=>{let a=-1;i&&zt(r.data)?r.data.forEach(s):t.scan((t=>s(r.get(t),++a)),!0,e,n)}}const mu=()=>St("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function yu(t,e={}){const{types:n={}}=e,{dataFrom:i,names:r,nrows:s,scan:a}=function(t,e){const{columns:n,limit:i=1/0,offset:r=0}=e,s=At(n)?n(t):vt(n)?n:null;if(vt(t))return{dataFrom:uu,names:s||Object.keys(t[0]),nrows:Math.min(i,t.length-r),scan:du(t,i,r)};if(function(t){return t&&At(t.reify)}(t))return{dataFrom:hu,names:s||t.columnNames(),nrows:Math.min(i,t.numRows()-r),scan:fu(t,i,r)};St("Unsupported input data type")}(t,e),o={};r.forEach((e=>{const r=i(t,e,s,a,n[e]);r.length!==s&&St("Column length mismatch"),o[e]=r}));return new(function(){try{return Xc}catch(t){mu()}}())(o)}function gu(t,e={}){const{format:n,...i}=e;if(!["stream","file"].includes(n||"stream"))throw Error("Unrecognised output format");return function(t,e="stream"){return("stream"===e?Hl:ql).writeAll(t).toUint8Array(!0)}(yu(t,i),n)}function bu(t,e){return At(e)?e(t):e||t.columnNames()}function vu(t,e,n){const i=n.format||{},r=n.align||{},s={},a={};return e.forEach((e=>{const o=function(t,e={}){let n=0,i=0,r=0,s=0,a=0,o=0;return t((t=>{if(++n,null==t)return void++i;const e=typeof t;if("object"===e&&Ct(t))++r,0===(c=t).getUTCHours()&&0===c.getUTCMinutes()&&0===c.getUTCSeconds()&&0===c.getUTCMilliseconds()&&++s;else if("number"===e&&(++a,t==t&&(0|t)!==t)){const e=t+"",n=e.indexOf(".");if(n>=0){const t=e.indexOf("e"),i=t>0?t:e.length;o=Math.max(o,i-n-1)}}var c})),{align:(i+a+r)/n>.5?"r":"l",format:{utc:r===s,digits:Math.min(o,e.maxdigits||6)}}}(function(t,e){const n=t.column(e);return e=>t.scan((t=>e(n.get(t))))}(t,e),n);a[e]=r[e]||o.align,s[e]=i[e]||o.format})),{align:a,format:s}}function _u(t,e,n=100,i,r){const s=t.data(),a=e.length;t.scan((t=>{r.row(t);for(let n=0;n<a;++n){const i=e[n];r.cell(s[e[n]].get(t),i,n)}}),!0,n,i)}function xu(t,e={}){if(At(e))return e(t)+"";const n=typeof t;if("object"===n){if(Ct(t))return e.utc?Zt(t):Jt(t);{const n=JSON.stringify(t,((t,e)=>$t(e)?Array.from(e):e)),i=e.maxlen||30;return n.length>i?n.slice(0,28)+""+("["===n[0]?"]":"}"):n}}if("number"===n){const n=e.digits||0;let i;return 0!==t&&((i=Math.abs(t))>=1e18||i<Math.pow(10,-n))?t.toExponential(n):t.toFixed(n)}return t+""}function wu(t,e,n={}){for(const i in t)n[i]=e(t[i],i);return n}function Su(t,e={}){const n=bu(t,e.columns),{align:i,format:r}=vu(t,n,e),s=function(t){return wu(t.style,(t=>At(t)?t:()=>t))}(e),a=e.null,o=(t,e)=>xu(t,e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),c=a?(t,e)=>null==t?a(t):o(t,e):o;let l=-1,u=-1;const h=(t,e,n)=>{const r=n?(t=>"c"===t?"center":"r"===t?"right":"left")(i[e]):"",a=s[t]&&s[t](e,u,l)||"",o=(r?`text-align: ${r};`+(a?" ":""):"")+a;return`<${t}${o?` style="${o}"`:""}>`};let p=h("table")+h("thead")+h("tr",l)+n.map((t=>`${h("th",t,1)}${t}</th>`)).join("")+"</tr></thead>"+h("tbody");return _u(t,n,e.limit,e.offset,{row(t){l=t,p+=(++u?"</tr>":"")+h("tr")},cell(t,e){p+=h("td",e,1)+c(t,r[e])+"</td>"}}),p+"</tr></tbody></table>"}function Iu(t,e=!0,n=!1){return void 0===t||t?e:n}const Au=t=>Ct(t)?Zt(t,!0):t;function Tu(t,e){for(const[n,i]of yn(e))t.set(n,i);return t}function ku(t,e,n=new Map){return Lt(e=It(e)?t.columnName(e):e)?n.set(e,e):vt(e)?e.forEach((e=>ku(t,e,n))):At(e)?ku(t,e(t),n):Nt(e)?Tu(n,e):St(`Invalid column selection: ${be(e)}`),n}function Mu(t,e){return t.toObject=e,t}function Eu(t){return vt(t)?t.map(Eu):t&&t.toObject?t.toObject():t}function Cu(){return Mu((t=>t.columnNames()),(()=>({all:[]})))}function Nu(...t){return t=t.flat(),Mu((e=>{const n=ku(e,t);return e.columnNames((t=>!n.has(t)))}),(()=>({not:Eu(t)})))}class Ou extends kt{static from(t,e){return new Ou(Bt(t,e),e)}static new(t,e){if(t instanceof Ou)return t;const n={},i=[];for(const[e,r]of yn(t))n[e]=r,i.push(e);return new Ou(n,e||i)}constructor(t,e,n,i,r,s){wu(t,Et,t);super(e=e||Object.keys(t),e.length?t[e[0]].length:0,t,n,i,r,s)}create({data:t,names:e,filter:n,groups:i,order:r}){const s=void 0!==n?n:this.mask();return new Ou(t||this._data,e||(t?null:this._names),s,void 0!==i?i:function(t,e){if(!t||!e)return t;const{keys:n,rows:i,size:r}=t,s=new Int32Array(r);e.scan((t=>s[n[t]]=1));const a=s.reduce(((t,e)=>t+e),0);if(a===r)return t;const o=Array(a);let c=0;for(let t=0;t<r;++t)s[t]&&(o[s[t]=c++]=i[t]);const l=new Uint32Array(n.length);return e.scan((t=>l[t]=s[n[t]])),{...t,keys:l,rows:o,size:c}}(this._group,n&&s),void 0!==r?r:this._order,this._params)}assign(...t){const e=this.numRows(),n=this.reify(),i=Ut(n).groupby(n.groups());return t.forEach((t=>{(t=Ou.new(t)).numRows()!==e&&St("Assign row counts do not match"),(t=t.reify()).columnNames((e=>i.add(e,t.column(e))))})),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,e=Array){const n=this.column(t),i=new e(this.numRows());let r=-1;return this.scan((t=>i[++r]=n.get(t)),!0),i}get(t,e=0){const n=this.column(t);return this.isFiltered()||this.isOrdered()?n.get(this.indices()[e]):n.get(e)}getter(t){const e=this.column(t),n=this.isFiltered()||this.isOrdered()?this.indices():null;return n?t=>e.get(n[t]):e?t=>e.get(t):St(`Unrecognized column: ${t}`)}object(t=0){return Lu(this)(t)}objects(t={}){const{grouped:e,limit:n,offset:i}=t,r=_n(ku(this,t.columns||Cu())),s=[];if(this.scan(((t,e)=>s.push(r(t,e))),!0,n,i),e&&this.isGrouped()){const t=[];return this.scan((e=>t.push(e)),!0,n,i),Ee(this,t,s,e)}return s}*[Symbol.iterator](){const t=Lu(this),e=this.numRows();for(let n=0;n<e;++n)yield t(n)}reify(t){const e=t?t.length:this.numRows(),n=this._names;let i,r;if(!t&&!this.isOrdered()){if(!this.isFiltered())return this;e===this.totalRows()&&(i=this.data())}if(!i){const a=t?e=>t.forEach(e):t=>this.scan(t,!0),o=n.length;i={};for(let t=0;t<o;++t){const r=n[t],o=this.column(r),c=i[r]=new($t((s=o).data)?s.data.constructor:Array)(e);let l=-1;a((t=>c[++l]=o.get(t)))}this.isGrouped()&&(r=function(t,e,n,i){const{keys:r,rows:s,size:a}=t;let o=s,c=a,l=null;if(n){l=new Int32Array(a),e((t=>l[r[t]]=1));const t=l.reduce(((t,e)=>t+e),0);if(t!==a){o=Array(t),c=0;for(let t=0;t<a;++t)l[t]&&(o[l[t]=c++]=s[t])}}let u=-1;const h=new Uint32Array(i);return e(c!==a?t=>h[++u]=l[r[t]]:t=>h[++u]=r[t]),{...t,keys:h,rows:o,size:c}}(this.groups(),a,!!t,e))}var s;return this.create({data:i,names:n,groups:r,filter:null,order:null})}transform(...t){return t.flat().reduce(((t,e)=>e(t)),this)}toArrow(t){return yu(this,t)}toArrowBuffer(t){return gu(this,t)}toCSV(t){return function(t,e={}){const n=bu(t,e.columns),i=e.format||{},r=e.delimiter||",",s=new RegExp(`["${r}\n\r]`),a=t=>null==t?"":Ct(t)?Zt(t,!0):s.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t,o=n.map(a);let c="";return _u(t,n,e.limit||1/0,e.offset,{row(){c+=o.join(r)+"\n"},cell(t,e,n){o[n]=a(i[e]?i[e](t):t)}}),c+o.join(r)}(this,t)}toHTML(t){return Su(this,t)}toJSON(t){return function(t,e={}){const n=Iu(e.schema),i=e.format||{},r=bu(t,e.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(r.map((t=>({name:t}))))+'},"data":{'),r.forEach(((n,r)=>{s+=(r?",":"")+JSON.stringify(n)+":[";const a=t.column(n),o=i[n]||Au;let c=-1;t.scan((t=>{const e=a.get(t);s+=(++c?",":"")+JSON.stringify(o(e))}),!0,e.limit,e.offset),s+="]"})),s+"}"+(n?"}":"")}(this,t)}toMarkdown(t){return function(t,e={}){const n=bu(t,e.columns),{align:i,format:r}=vu(t,n,e),s=t=>t.replace(/\|/g,"\\|");let a="|"+n.map(s).join("|")+"|\n|"+n.map((t=>{return"c"===(e=i[t])?":-:":"r"===e?"-:":":-";var e})).join("|")+"|";return _u(t,n,e.limit,e.offset,{row(){a+="\n|"},cell(t,e){a+=s(xu(t,r[e]))+"|"}}),a+"\n"}(this,t)}}function Lu(t){let e=t._builder;if(!e){const n=_n(t.columnNames()),i=t.data();if(t.isOrdered()||t.isFiltered()){const r=t.indices();e=t=>n(r[t],i)}else e=t=>n(t,i);t._builder=e}return e}class Bu{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function Du(t,e,n,i){const r=n[t.type]||n.Default;if(r&&!1===r(t,e,i))return;const s=$u[t.type];s&&s(t,e,n)}const Fu=(t,e,n)=>{Du(t.argument,e,n,t)},Vu=(t,e,n)=>{Du(t.left,e,n,t),Du(t.right,e,n,t)},Uu=(t,e,n)=>{Du(t.test,e,n,t),Du(t.consequent,e,n,t),t.alternate&&Du(t.alternate,e,n,t)},Pu=(t,e,n)=>{ju(t.params,e,n,t),Du(t.body,e,n,t)},Ru=(t,e,n)=>{Du(t.callee,e,n,t),ju(t.arguments,e,n,t)},ju=(t,e,n,i)=>{t.forEach((t=>Du(t,e,n,i)))},$u={TemplateLiteral:(t,e,n)=>{ju(t.expressions,e,n,t),ju(t.quasis,e,n,t)},MemberExpression:(t,e,n)=>{Du(t.object,e,n,t),Du(t.property,e,n,t)},CallExpression:Ru,NewExpression:Ru,ArrayExpression:(t,e,n)=>{ju(t.elements,e,n,t)},AssignmentExpression:Vu,AwaitExpression:Fu,BinaryExpression:Vu,LogicalExpression:Vu,UnaryExpression:Fu,UpdateExpression:Fu,ConditionalExpression:Uu,ObjectExpression:(t,e,n)=>{ju(t.properties,e,n,t)},Property:(t,e,n)=>{Du(t.key,e,n,t),Du(t.value,e,n,t)},ArrowFunctionExpression:Pu,FunctionExpression:Pu,FunctionDeclaration:Pu,VariableDeclaration:(t,e,n)=>{ju(t.declarations,e,n,t)},VariableDeclarator:(t,e,n)=>{Du(t.id,e,n,t),Du(t.init,e,n,t)},SpreadElement:(t,e,n)=>{Du(t.argument,e,n,t)},BlockStatement:(t,e,n)=>{ju(t.body,e,n,t)},ExpressionStatement:(t,e,n)=>{Du(t.expression,e,n,t)},IfStatement:Uu,ForStatement:(t,e,n)=>{Du(t.init,e,n,t),Du(t.test,e,n,t),Du(t.update,e,n,t),Du(t.body,e,n,t)},WhileStatement:(t,e,n)=>{Du(t.test,e,n,t),Du(t.body,e,n,t)},DoWhileStatement:(t,e,n)=>{Du(t.body,e,n,t),Du(t.test,e,n,t)},SwitchStatement:(t,e,n)=>{Du(t.discriminant,e,n,t),ju(t.cases,e,n,t)},SwitchCase:(t,e,n)=>{t.test&&Du(t.test,e,n,t),ju(t.consequent,e,n,t)},ReturnStatement:Fu,Program:(t,e,n)=>{Du(t.body[0],e,n,t)}};function zu(t){delete t.start,delete t.end,delete t.optional}function Hu(t){zu(t),delete t.object,delete t.property,delete t.computed,t.table||delete t.table}function qu(t,e){return e&&e.type===t}const Yu="Escaped functions are not valid as rollup or pivot values.";function Wu(t,e,n){t.aggronly&&St(Yu);const i="(row,data)=>fn("+vn(t.table.columnNames())+",$)";return{escape:dn.escape(i,(r=e.expr,At(r)?r:()=>r),n)};var r}var Gu=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],Ku=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,3104,541,1507,4938,6,4191],Qu="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",Ju={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},Zu="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",Xu={5:Zu,"5module":Zu+" export import",6:Zu+" const class extends export import super"},th=/^in(stanceof)?$/,eh=new RegExp("["+Qu+"]"),nh=new RegExp("["+Qu+"-----------------------------------------------------------------------------------------------------------------------------------------------------]");function ih(t,e){for(var n=65536,i=0;i<e.length;i+=2){if((n+=e[i])>t)return!1;if((n+=e[i+1])>=t)return!0}return!1}function rh(t,e){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&eh.test(String.fromCharCode(t)):!1!==e&&ih(t,Ku)))}function sh(t,e){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&nh.test(String.fromCharCode(t)):!1!==e&&(ih(t,Ku)||ih(t,Gu)))))}var ah=function(t,e){void 0===e&&(e={}),this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null};function oh(t,e){return new ah(t,{beforeExpr:!0,binop:e})}var ch={beforeExpr:!0},lh={startsExpr:!0},uh={};function hh(t,e){return void 0===e&&(e={}),e.keyword=t,uh[t]=new ah(t,e)}var ph={num:new ah("num",lh),regexp:new ah("regexp",lh),string:new ah("string",lh),name:new ah("name",lh),privateId:new ah("privateId",lh),eof:new ah("eof"),bracketL:new ah("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new ah("]"),braceL:new ah("{",{beforeExpr:!0,startsExpr:!0}),braceR:new ah("}"),parenL:new ah("(",{beforeExpr:!0,startsExpr:!0}),parenR:new ah(")"),comma:new ah(",",ch),semi:new ah(";",ch),colon:new ah(":",ch),dot:new ah("."),question:new ah("?",ch),questionDot:new ah("?."),arrow:new ah("=>",ch),template:new ah("template"),invalidTemplate:new ah("invalidTemplate"),ellipsis:new ah("...",ch),backQuote:new ah("`",lh),dollarBraceL:new ah("${",{beforeExpr:!0,startsExpr:!0}),eq:new ah("=",{beforeExpr:!0,isAssign:!0}),assign:new ah("_=",{beforeExpr:!0,isAssign:!0}),incDec:new ah("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new ah("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:oh("||",1),logicalAND:oh("&&",2),bitwiseOR:oh("|",3),bitwiseXOR:oh("^",4),bitwiseAND:oh("&",5),equality:oh("==/!=/===/!==",6),relational:oh("</>/<=/>=",7),bitShift:oh("<</>>/>>>",8),plusMin:new ah("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:oh("%",10),star:oh("*",10),slash:oh("/",10),starstar:new ah("**",{beforeExpr:!0}),coalesce:oh("??",1),_break:hh("break"),_case:hh("case",ch),_catch:hh("catch"),_continue:hh("continue"),_debugger:hh("debugger"),_default:hh("default",ch),_do:hh("do",{isLoop:!0,beforeExpr:!0}),_else:hh("else",ch),_finally:hh("finally"),_for:hh("for",{isLoop:!0}),_function:hh("function",lh),_if:hh("if"),_return:hh("return",ch),_switch:hh("switch"),_throw:hh("throw",ch),_try:hh("try"),_var:hh("var"),_const:hh("const"),_while:hh("while",{isLoop:!0}),_with:hh("with"),_new:hh("new",{beforeExpr:!0,startsExpr:!0}),_this:hh("this",lh),_super:hh("super",lh),_class:hh("class",lh),_extends:hh("extends",ch),_export:hh("export"),_import:hh("import",lh),_null:hh("null",lh),_true:hh("true",lh),_false:hh("false",lh),_in:hh("in",{beforeExpr:!0,binop:7}),_instanceof:hh("instanceof",{beforeExpr:!0,binop:7}),_typeof:hh("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:hh("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:hh("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},dh=/\r\n?|\n|\u2028|\u2029/,fh=new RegExp(dh.source,"g");function mh(t){return 10===t||13===t||8232===t||8233===t}function yh(t,e,n){void 0===n&&(n=t.length);for(var i=e;i<n;i++){var r=t.charCodeAt(i);if(mh(r))return i<n-1&&13===r&&10===t.charCodeAt(i+1)?i+2:i+1}return-1}var gh=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,bh=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,vh=Object.prototype,_h=vh.hasOwnProperty,xh=vh.toString,wh=Object.hasOwn||function(t,e){return _h.call(t,e)},Sh=Array.isArray||function(t){return"[object Array]"===xh.call(t)};function Ih(t){return new RegExp("^(?:"+t.replace(/ /g,"|")+")$")}function Ah(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}var Th=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,kh=function(t,e){this.line=t,this.column=e};kh.prototype.offset=function(t){return new kh(this.line,this.column+t)};var Mh=function(t,e,n){this.start=e,this.end=n,null!==t.sourceFile&&(this.source=t.sourceFile)};function Eh(t,e){for(var n=1,i=0;;){var r=yh(t,i,e);if(r<0)return new kh(n,e-i);++n,i=r}}var Ch={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Nh=!1;function Oh(t){var e={};for(var n in Ch)e[n]=t&&wh(t,n)?t[n]:Ch[n];if("latest"===e.ecmaVersion?e.ecmaVersion=1e8:null==e.ecmaVersion?(!Nh&&"object"==typeof console&&console.warn&&(Nh=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),e.ecmaVersion=11):e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),null==e.allowReserved&&(e.allowReserved=e.ecmaVersion<5),t&&null!=t.allowHashBang||(e.allowHashBang=e.ecmaVersion>=14),Sh(e.onToken)){var i=e.onToken;e.onToken=function(t){return i.push(t)}}return Sh(e.onComment)&&(e.onComment=function(t,e){return function(n,i,r,s,a,o){var c={type:n?"Block":"Line",value:i,start:r,end:s};t.locations&&(c.loc=new Mh(this,a,o)),t.ranges&&(c.range=[r,s]),e.push(c)}}(e,e.onComment)),e}var Lh=256;function Bh(t,e){return 2|(t?4:0)|(e?8:0)}var Dh=function(t,e,n){this.options=t=Oh(t),this.sourceFile=t.sourceFile,this.keywords=Ih(Xu[t.ecmaVersion>=6?6:"module"===t.sourceType?"5module":5]);var i="";!0!==t.allowReserved&&(i=Ju[t.ecmaVersion>=6?6:5===t.ecmaVersion?5:3],"module"===t.sourceType&&(i+=" await")),this.reservedWords=Ih(i);var r=(i?i+" ":"")+Ju.strict;this.reservedWordsStrict=Ih(r),this.reservedWordsStrictBind=Ih(r+" "+Ju.strictBind),this.input=String(e),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(dh).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=ph.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null,this.privateNameStack=[]},Fh={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Dh.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)},Fh.inFunction.get=function(){return(2&this.currentVarScope().flags)>0},Fh.inGenerator.get=function(){return(8&this.currentVarScope().flags)>0&&!this.currentVarScope().inClassFieldInit},Fh.inAsync.get=function(){return(4&this.currentVarScope().flags)>0&&!this.currentVarScope().inClassFieldInit},Fh.canAwait.get=function(){for(var t=this.scopeStack.length-1;t>=0;t--){var e=this.scopeStack[t];if(e.inClassFieldInit||e.flags&Lh)return!1;if(2&e.flags)return(4&e.flags)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},Fh.allowSuper.get=function(){var t=this.currentThisScope(),e=t.flags,n=t.inClassFieldInit;return(64&e)>0||n||this.options.allowSuperOutsideMethod},Fh.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},Fh.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},Fh.allowNewDotTarget.get=function(){var t=this.currentThisScope(),e=t.flags,n=t.inClassFieldInit;return(258&e)>0||n},Fh.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&Lh)>0},Dh.extend=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var n=this,i=0;i<t.length;i++)n=t[i](n);return n},Dh.parse=function(t,e){return new this(e,t).parse()},Dh.parseExpressionAt=function(t,e,n){var i=new this(n,t,e);return i.nextToken(),i.parseExpression()},Dh.tokenizer=function(t,e){return new this(e,t)},Object.defineProperties(Dh.prototype,Fh);var Vh=Dh.prototype,Uh=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Vh.strictDirective=function(t){if(this.options.ecmaVersion<5)return!1;for(;;){bh.lastIndex=t,t+=bh.exec(this.input)[0].length;var e=Uh.exec(this.input.slice(t));if(!e)return!1;if("use strict"===(e[1]||e[2])){bh.lastIndex=t+e[0].length;var n=bh.exec(this.input),i=n.index+n[0].length,r=this.input.charAt(i);return";"===r||"}"===r||dh.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(r)||"!"===r&&"="===this.input.charAt(i+1))}t+=e[0].length,bh.lastIndex=t,t+=bh.exec(this.input)[0].length,";"===this.input[t]&&t++}},Vh.eat=function(t){return this.type===t&&(this.next(),!0)},Vh.isContextual=function(t){return this.type===ph.name&&this.value===t&&!this.containsEsc},Vh.eatContextual=function(t){return!!this.isContextual(t)&&(this.next(),!0)},Vh.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},Vh.canInsertSemicolon=function(){return this.type===ph.eof||this.type===ph.braceR||dh.test(this.input.slice(this.lastTokEnd,this.start))},Vh.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},Vh.semicolon=function(){this.eat(ph.semi)||this.insertSemicolon()||this.unexpected()},Vh.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},Vh.expect=function(t){this.eat(t)||this.unexpected()},Vh.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")};var Ph=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};Vh.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var n=e?t.parenthesizedAssign:t.parenthesizedBind;n>-1&&this.raiseRecoverable(n,e?"Assigning to rvalue":"Parenthesized pattern")}},Vh.checkExpressionErrors=function(t,e){if(!t)return!1;var n=t.shorthandAssign,i=t.doubleProto;if(!e)return n>=0||i>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),i>=0&&this.raiseRecoverable(i,"Redefinition of __proto__ property")},Vh.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},Vh.isSimpleAssignTarget=function(t){return"ParenthesizedExpression"===t.type?this.isSimpleAssignTarget(t.expression):"Identifier"===t.type||"MemberExpression"===t.type};var Rh=Dh.prototype;Rh.parseTopLevel=function(t){var e=Object.create(null);for(t.body||(t.body=[]);this.type!==ph.eof;){var n=this.parseStatement(null,!0,e);t.body.push(n)}if(this.inModule)for(var i=0,r=Object.keys(this.undefinedExports);i<r.length;i+=1){var s=r[i];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),t.sourceType=this.options.sourceType,this.finishNode(t,"Program")};var jh={kind:"loop"},$h={kind:"switch"};Rh.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;bh.lastIndex=this.pos;var e=bh.exec(this.input),n=this.pos+e[0].length,i=this.input.charCodeAt(n);if(91===i||92===i)return!0;if(t)return!1;if(123===i||i>55295&&i<56320)return!0;if(rh(i,!0)){for(var r=n+1;sh(i=this.input.charCodeAt(r),!0);)++r;if(92===i||i>55295&&i<56320)return!0;var s=this.input.slice(n,r);if(!th.test(s))return!0}return!1},Rh.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;bh.lastIndex=this.pos;var t,e=bh.exec(this.input),n=this.pos+e[0].length;return!(dh.test(this.input.slice(this.pos,n))||"function"!==this.input.slice(n,n+8)||n+8!==this.input.length&&(sh(t=this.input.charCodeAt(n+8))||t>55295&&t<56320))},Rh.parseStatement=function(t,e,n){var i,r=this.type,s=this.startNode();switch(this.isLet(t)&&(r=ph._var,i="let"),r){case ph._break:case ph._continue:return this.parseBreakContinueStatement(s,r.keyword);case ph._debugger:return this.parseDebuggerStatement(s);case ph._do:return this.parseDoStatement(s);case ph._for:return this.parseForStatement(s);case ph._function:return t&&(this.strict||"if"!==t&&"label"!==t)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(s,!1,!t);case ph._class:return t&&this.unexpected(),this.parseClass(s,!0);case ph._if:return this.parseIfStatement(s);case ph._return:return this.parseReturnStatement(s);case ph._switch:return this.parseSwitchStatement(s);case ph._throw:return this.parseThrowStatement(s);case ph._try:return this.parseTryStatement(s);case ph._const:case ph._var:return i=i||this.value,t&&"var"!==i&&this.unexpected(),this.parseVarStatement(s,i);case ph._while:return this.parseWhileStatement(s);case ph._with:return this.parseWithStatement(s);case ph.braceL:return this.parseBlock(!0,s);case ph.semi:return this.parseEmptyStatement(s);case ph._export:case ph._import:if(this.options.ecmaVersion>10&&r===ph._import){bh.lastIndex=this.pos;var a=bh.exec(this.input),o=this.pos+a[0].length,c=this.input.charCodeAt(o);if(40===c||46===c)return this.parseExpressionStatement(s,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===ph._import?this.parseImport(s):this.parseExport(s,n);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(s,!0,!t);var l=this.value,u=this.parseExpression();return r===ph.name&&"Identifier"===u.type&&this.eat(ph.colon)?this.parseLabeledStatement(s,l,u,t):this.parseExpressionStatement(s,u)}},Rh.parseBreakContinueStatement=function(t,e){var n="break"===e;this.next(),this.eat(ph.semi)||this.insertSemicolon()?t.label=null:this.type!==ph.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var i=0;i<this.labels.length;++i){var r=this.labels[i];if(null==t.label||r.name===t.label.name){if(null!=r.kind&&(n||"loop"===r.kind))break;if(t.label&&n)break}}return i===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,n?"BreakStatement":"ContinueStatement")},Rh.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},Rh.parseDoStatement=function(t){return this.next(),this.labels.push(jh),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(ph._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(ph.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},Rh.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(jh),this.enterScope(0),this.expect(ph.parenL),this.type===ph.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var n=this.isLet();if(this.type===ph._var||this.type===ph._const||n){var i=this.startNode(),r=n?"let":this.value;return this.next(),this.parseVar(i,!0,r),this.finishNode(i,"VariableDeclaration"),(this.type===ph._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===i.declarations.length?(this.options.ecmaVersion>=9&&(this.type===ph._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,i)):(e>-1&&this.unexpected(e),this.parseFor(t,i))}var s=this.isContextual("let"),a=!1,o=new Ph,c=this.parseExpression(!(e>-1)||"await",o);return this.type===ph._in||(a=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===ph._in?e>-1&&this.unexpected(e):t.await=e>-1),s&&a&&this.raise(c.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(c,!1,o),this.checkLValPattern(c),this.parseForIn(t,c)):(this.checkExpressionErrors(o,!0),e>-1&&this.unexpected(e),this.parseFor(t,c))},Rh.parseFunctionStatement=function(t,e,n){return this.next(),this.parseFunction(t,Hh|(n?0:qh),!1,e)},Rh.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(ph._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")},Rh.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(ph.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},Rh.parseSwitchStatement=function(t){var e;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(ph.braceL),this.labels.push($h),this.enterScope(0);for(var n=!1;this.type!==ph.braceR;)if(this.type===ph._case||this.type===ph._default){var i=this.type===ph._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),i?e.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,e.test=null),this.expect(ph.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},Rh.parseThrowStatement=function(t){return this.next(),dh.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var zh=[];Rh.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===ph._catch){var e=this.startNode();if(this.next(),this.eat(ph.parenL)){e.param=this.parseBindingAtom();var n="Identifier"===e.param.type;this.enterScope(n?32:0),this.checkLValPattern(e.param,n?4:2),this.expect(ph.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0);e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(ph._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},Rh.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,"VariableDeclaration")},Rh.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(jh),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")},Rh.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")},Rh.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},Rh.parseLabeledStatement=function(t,e,n,i){for(var r=0,s=this.labels;r<s.length;r+=1){s[r].name===e&&this.raise(n.start,"Label '"+e+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===ph._switch?"switch":null,o=this.labels.length-1;o>=0;o--){var c=this.labels[o];if(c.statementStart!==t.start)break;c.statementStart=this.start,c.kind=a}return this.labels.push({name:e,kind:a,statementStart:this.start}),t.body=this.parseStatement(i?-1===i.indexOf("label")?i+"label":i:"label"),this.labels.pop(),t.label=n,this.finishNode(t,"LabeledStatement")},Rh.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")},Rh.parseBlock=function(t,e,n){for(void 0===t&&(t=!0),void 0===e&&(e=this.startNode()),e.body=[],this.expect(ph.braceL),t&&this.enterScope(0);this.type!==ph.braceR;){var i=this.parseStatement(null);e.body.push(i)}return n&&(this.strict=!1),this.next(),t&&this.exitScope(),this.finishNode(e,"BlockStatement")},Rh.parseFor=function(t,e){return t.init=e,this.expect(ph.semi),t.test=this.type===ph.semi?null:this.parseExpression(),this.expect(ph.semi),t.update=this.type===ph.parenR?null:this.parseExpression(),this.expect(ph.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")},Rh.parseForIn=function(t,e){var n=this.type===ph._in;return this.next(),"VariableDeclaration"===e.type&&null!=e.declarations[0].init&&(!n||this.options.ecmaVersion<8||this.strict||"var"!==e.kind||"Identifier"!==e.declarations[0].id.type)&&this.raise(e.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),t.left=e,t.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(ph.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,n?"ForInStatement":"ForOfStatement")},Rh.parseVar=function(t,e,n){for(t.declarations=[],t.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(ph.eq)?i.init=this.parseMaybeAssign(e):"const"!==n||this.type===ph._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===i.id.type||e&&(this.type===ph._in||this.isContextual("of"))?i.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),t.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(ph.comma))break}return t},Rh.parseVarId=function(t,e){t.id=this.parseBindingAtom(),this.checkLValPattern(t.id,"var"===e?1:2,!1)};var Hh=1,qh=2;function Yh(t,e){var n=e.key.name,i=t[n],r="true";return"MethodDefinition"!==e.type||"get"!==e.kind&&"set"!==e.kind||(r=(e.static?"s":"i")+e.kind),"iget"===i&&"iset"===r||"iset"===i&&"iget"===r||"sget"===i&&"sset"===r||"sset"===i&&"sget"===r?(t[n]="true",!1):!!i||(t[n]=r,!1)}function Wh(t,e){var n=t.computed,i=t.key;return!n&&("Identifier"===i.type&&i.name===e||"Literal"===i.type&&i.value===e)}Rh.parseFunction=function(t,e,n,i,r){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!i)&&(this.type===ph.star&&e&qh&&this.unexpected(),t.generator=this.eat(ph.star)),this.options.ecmaVersion>=8&&(t.async=!!i),e&Hh&&(t.id=4&e&&this.type!==ph.name?null:this.parseIdent(),!t.id||e&qh||this.checkLValSimple(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?1:2:3));var s=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Bh(t.async,t.generator)),e&Hh||(t.id=this.type===ph.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,n,!1,r),this.yieldPos=s,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(t,e&Hh?"FunctionDeclaration":"FunctionExpression")},Rh.parseFunctionParams=function(t){this.expect(ph.parenL),t.params=this.parseBindingList(ph.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},Rh.parseClass=function(t,e){this.next();var n=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var i=this.enterClassBody(),r=this.startNode(),s=!1;for(r.body=[],this.expect(ph.braceL);this.type!==ph.braceR;){var a=this.parseClassElement(null!==t.superClass);a&&(r.body.push(a),"MethodDefinition"===a.type&&"constructor"===a.kind?(s&&this.raise(a.start,"Duplicate constructor in the same class"),s=!0):a.key&&"PrivateIdentifier"===a.key.type&&Yh(i,a)&&this.raiseRecoverable(a.key.start,"Identifier '#"+a.key.name+"' has already been declared"))}return this.strict=n,this.next(),t.body=this.finishNode(r,"ClassBody"),this.exitClassBody(),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},Rh.parseClassElement=function(t){if(this.eat(ph.semi))return null;var e=this.options.ecmaVersion,n=this.startNode(),i="",r=!1,s=!1,a="method",o=!1;if(this.eatContextual("static")){if(e>=13&&this.eat(ph.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===ph.star?o=!0:i="static"}if(n.static=o,!i&&e>=8&&this.eatContextual("async")&&(!this.isClassElementNameStart()&&this.type!==ph.star||this.canInsertSemicolon()?i="async":s=!0),!i&&(e>=9||!s)&&this.eat(ph.star)&&(r=!0),!i&&!s&&!r){var c=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?a=c:i=c)}if(i?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=i,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),e<13||this.type===ph.parenL||"method"!==a||r||s){var l=!n.static&&Wh(n,"constructor"),u=l&&t;l&&"method"!==a&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":a,this.parseClassMethod(n,r,s,u)}else this.parseClassField(n);return n},Rh.isClassElementNameStart=function(){return this.type===ph.name||this.type===ph.privateId||this.type===ph.num||this.type===ph.string||this.type===ph.bracketL||this.type.keyword},Rh.parseClassElementName=function(t){this.type===ph.privateId?("constructor"===this.value&&this.raise(this.start,"Classes can't have an element named '#constructor'"),t.computed=!1,t.key=this.parsePrivateIdent()):this.parsePropertyName(t)},Rh.parseClassMethod=function(t,e,n,i){var r=t.key;"constructor"===t.kind?(e&&this.raise(r.start,"Constructor can't be a generator"),n&&this.raise(r.start,"Constructor can't be an async method")):t.static&&Wh(t,"prototype")&&this.raise(r.start,"Classes may not have a static property named prototype");var s=t.value=this.parseMethod(e,n,i);return"get"===t.kind&&0!==s.params.length&&this.raiseRecoverable(s.start,"getter should have no params"),"set"===t.kind&&1!==s.params.length&&this.raiseRecoverable(s.start,"setter should have exactly one param"),"set"===t.kind&&"RestElement"===s.params[0].type&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(t,"MethodDefinition")},Rh.parseClassField=function(t){if(Wh(t,"constructor")?this.raise(t.key.start,"Classes can't have a field named 'constructor'"):t.static&&Wh(t,"prototype")&&this.raise(t.key.start,"Classes can't have a static field named 'prototype'"),this.eat(ph.eq)){var e=this.currentThisScope(),n=e.inClassFieldInit;e.inClassFieldInit=!0,t.value=this.parseMaybeAssign(),e.inClassFieldInit=n}else t.value=null;return this.semicolon(),this.finishNode(t,"PropertyDefinition")},Rh.parseClassStaticBlock=function(t){t.body=[];var e=this.labels;for(this.labels=[],this.enterScope(320);this.type!==ph.braceR;){var n=this.parseStatement(null);t.body.push(n)}return this.next(),this.exitScope(),this.labels=e,this.finishNode(t,"StaticBlock")},Rh.parseClassId=function(t,e){this.type===ph.name?(t.id=this.parseIdent(),e&&this.checkLValSimple(t.id,2,!1)):(!0===e&&this.unexpected(),t.id=null)},Rh.parseClassSuper=function(t){t.superClass=this.eat(ph._extends)?this.parseExprSubscripts(null,!1):null},Rh.enterClassBody=function(){var t={declared:Object.create(null),used:[]};return this.privateNameStack.push(t),t.declared},Rh.exitClassBody=function(){for(var t=this.privateNameStack.pop(),e=t.declared,n=t.used,i=this.privateNameStack.length,r=0===i?null:this.privateNameStack[i-1],s=0;s<n.length;++s){var a=n[s];wh(e,a.name)||(r?r.used.push(a):this.raiseRecoverable(a.start,"Private field '#"+a.name+"' must be declared in an enclosing class"))}},Rh.parseExport=function(t,e){if(this.next(),this.eat(ph.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(t.exported=this.parseModuleExportName(),this.checkExport(e,t.exported,this.lastTokStart)):t.exported=null),this.expectContextual("from"),this.type!==ph.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(ph._default)){var n;if(this.checkExport(e,"default",this.lastTokStart),this.type===ph._function||(n=this.isAsyncFunction())){var i=this.startNode();this.next(),n&&this.next(),t.declaration=this.parseFunction(i,4|Hh,!1,n)}else if(this.type===ph._class){var r=this.startNode();t.declaration=this.parseClass(r,"nullableID")}else t.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(t,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(null),"VariableDeclaration"===t.declaration.type?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==ph.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var s=0,a=t.specifiers;s<a.length;s+=1){var o=a[s];this.checkUnreserved(o.local),this.checkLocalExport(o.local),"Literal"===o.local.type&&this.raise(o.local.start,"A string literal cannot be used as an exported binding without `from`.")}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},Rh.checkExport=function(t,e,n){t&&("string"!=typeof e&&(e="Identifier"===e.type?e.name:e.value),wh(t,e)&&this.raiseRecoverable(n,"Duplicate export '"+e+"'"),t[e]=!0)},Rh.checkPatternExport=function(t,e){var n=e.type;if("Identifier"===n)this.checkExport(t,e,e.start);else if("ObjectPattern"===n)for(var i=0,r=e.properties;i<r.length;i+=1){var s=r[i];this.checkPatternExport(t,s)}else if("ArrayPattern"===n)for(var a=0,o=e.elements;a<o.length;a+=1){var c=o[a];c&&this.checkPatternExport(t,c)}else"Property"===n?this.checkPatternExport(t,e.value):"AssignmentPattern"===n?this.checkPatternExport(t,e.left):"RestElement"===n?this.checkPatternExport(t,e.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(t,e.expression)},Rh.checkVariableExport=function(t,e){if(t)for(var n=0,i=e;n<i.length;n+=1){var r=i[n];this.checkPatternExport(t,r.id)}},Rh.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},Rh.parseExportSpecifiers=function(t){var e=[],n=!0;for(this.expect(ph.braceL);!this.eat(ph.braceR);){if(n)n=!1;else if(this.expect(ph.comma),this.afterTrailingComma(ph.braceR))break;var i=this.startNode();i.local=this.parseModuleExportName(),i.exported=this.eatContextual("as")?this.parseModuleExportName():i.local,this.checkExport(t,i.exported,i.exported.start),e.push(this.finishNode(i,"ExportSpecifier"))}return e},Rh.parseImport=function(t){return this.next(),this.type===ph.string?(t.specifiers=zh,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===ph.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},Rh.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===ph.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLValSimple(n.local,2),t.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(ph.comma))return t}if(this.type===ph.star){var i=this.startNode();return this.next(),this.expectContextual("as"),i.local=this.parseIdent(),this.checkLValSimple(i.local,2),t.push(this.finishNode(i,"ImportNamespaceSpecifier")),t}for(this.expect(ph.braceL);!this.eat(ph.braceR);){if(e)e=!1;else if(this.expect(ph.comma),this.afterTrailingComma(ph.braceR))break;var r=this.startNode();r.imported=this.parseModuleExportName(),this.eatContextual("as")?r.local=this.parseIdent():(this.checkUnreserved(r.imported),r.local=r.imported),this.checkLValSimple(r.local,2),t.push(this.finishNode(r,"ImportSpecifier"))}return t},Rh.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===ph.string){var t=this.parseLiteral(this.value);return Th.test(t.value)&&this.raise(t.start,"An export name cannot include a lone surrogate."),t}return this.parseIdent(!0)},Rh.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)},Rh.isDirectiveCandidate=function(t){return this.options.ecmaVersion>=5&&"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"string"==typeof t.expression.value&&('"'===this.input[t.start]||"'"===this.input[t.start])};var Gh=Dh.prototype;Gh.toAssignable=function(t,e,n){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&"await"===t.name&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var i=0,r=t.properties;i<r.length;i+=1){var s=r[i];this.toAssignable(s,e),"RestElement"!==s.type||"ArrayPattern"!==s.argument.type&&"ObjectPattern"!==s.argument.type||this.raise(s.argument.start,"Unexpected token")}break;case"Property":"init"!==t.kind&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),"AssignmentPattern"===t.argument.type&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==t.operator&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);break;case"ParenthesizedExpression":this.toAssignable(t.expression,e,n);break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return t},Gh.toAssignableList=function(t,e){for(var n=t.length,i=0;i<n;i++){var r=t[i];r&&this.toAssignable(r,e)}if(n){var s=t[n-1];6===this.options.ecmaVersion&&e&&s&&"RestElement"===s.type&&"Identifier"!==s.argument.type&&this.unexpected(s.argument.start)}return t},Gh.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")},Gh.parseRestBinding=function(){var t=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==ph.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")},Gh.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case ph.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(ph.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case ph.braceL:return this.parseObj(!0)}return this.parseIdent()},Gh.parseBindingList=function(t,e,n){for(var i=[],r=!0;!this.eat(t);)if(r?r=!1:this.expect(ph.comma),e&&this.type===ph.comma)i.push(null);else{if(n&&this.afterTrailingComma(t))break;if(this.type===ph.ellipsis){var s=this.parseRestBinding();this.parseBindingListItem(s),i.push(s),this.type===ph.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),i.push(a)}return i},Gh.parseBindingListItem=function(t){return t},Gh.parseMaybeDefault=function(t,e,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(ph.eq))return n;var i=this.startNodeAt(t,e);return i.left=n,i.right=this.parseMaybeAssign(),this.finishNode(i,"AssignmentPattern")},Gh.checkLValSimple=function(t,e,n){void 0===e&&(e=0);var i=0!==e;switch(t.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(i?"Binding ":"Assigning to ")+t.name+" in strict mode"),i&&(2===e&&"let"===t.name&&this.raiseRecoverable(t.start,"let is disallowed as a lexically bound name"),n&&(wh(n,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),n[t.name]=!0),5!==e&&this.declareName(t.name,e,t.start));break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":i&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ParenthesizedExpression":return i&&this.raiseRecoverable(t.start,"Binding parenthesized expression"),this.checkLValSimple(t.expression,e,n);default:this.raise(t.start,(i?"Binding":"Assigning to")+" rvalue")}},Gh.checkLValPattern=function(t,e,n){switch(void 0===e&&(e=0),t.type){case"ObjectPattern":for(var i=0,r=t.properties;i<r.length;i+=1){var s=r[i];this.checkLValInnerPattern(s,e,n)}break;case"ArrayPattern":for(var a=0,o=t.elements;a<o.length;a+=1){var c=o[a];c&&this.checkLValInnerPattern(c,e,n)}break;default:this.checkLValSimple(t,e,n)}},Gh.checkLValInnerPattern=function(t,e,n){switch(void 0===e&&(e=0),t.type){case"Property":this.checkLValInnerPattern(t.value,e,n);break;case"AssignmentPattern":this.checkLValPattern(t.left,e,n);break;case"RestElement":this.checkLValPattern(t.argument,e,n);break;default:this.checkLValPattern(t,e,n)}};var Kh=function(t,e,n,i,r){this.token=t,this.isExpr=!!e,this.preserveSpace=!!n,this.override=i,this.generator=!!r},Qh={b_stat:new Kh("{",!1),b_expr:new Kh("{",!0),b_tmpl:new Kh("${",!1),p_stat:new Kh("(",!1),p_expr:new Kh("(",!0),q_tmpl:new Kh("`",!0,!0,(function(t){return t.tryReadTemplateToken()})),f_stat:new Kh("function",!1),f_expr:new Kh("function",!0),f_expr_gen:new Kh("function",!0,!1,null,!0),f_gen:new Kh("function",!1,!1,null,!0)},Jh=Dh.prototype;Jh.initialContext=function(){return[Qh.b_stat]},Jh.curContext=function(){return this.context[this.context.length-1]},Jh.braceIsBlock=function(t){var e=this.curContext();return e===Qh.f_expr||e===Qh.f_stat||(t!==ph.colon||e!==Qh.b_stat&&e!==Qh.b_expr?t===ph._return||t===ph.name&&this.exprAllowed?dh.test(this.input.slice(this.lastTokEnd,this.start)):t===ph._else||t===ph.semi||t===ph.eof||t===ph.parenR||t===ph.arrow||(t===ph.braceL?e===Qh.b_stat:t!==ph._var&&t!==ph._const&&t!==ph.name&&!this.exprAllowed):!e.isExpr)},Jh.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if("function"===e.token)return e.generator}return!1},Jh.updateContext=function(t){var e,n=this.type;n.keyword&&t===ph.dot?this.exprAllowed=!1:(e=n.updateContext)?e.call(this,t):this.exprAllowed=n.beforeExpr},Jh.overrideContext=function(t){this.curContext()!==t&&(this.context[this.context.length-1]=t)},ph.parenR.updateContext=ph.braceR.updateContext=function(){if(1!==this.context.length){var t=this.context.pop();t===Qh.b_stat&&"function"===this.curContext().token&&(t=this.context.pop()),this.exprAllowed=!t.isExpr}else this.exprAllowed=!0},ph.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?Qh.b_stat:Qh.b_expr),this.exprAllowed=!0},ph.dollarBraceL.updateContext=function(){this.context.push(Qh.b_tmpl),this.exprAllowed=!0},ph.parenL.updateContext=function(t){var e=t===ph._if||t===ph._for||t===ph._with||t===ph._while;this.context.push(e?Qh.p_stat:Qh.p_expr),this.exprAllowed=!0},ph.incDec.updateContext=function(){},ph._function.updateContext=ph._class.updateContext=function(t){!t.beforeExpr||t===ph._else||t===ph.semi&&this.curContext()!==Qh.p_stat||t===ph._return&&dh.test(this.input.slice(this.lastTokEnd,this.start))||(t===ph.colon||t===ph.braceL)&&this.curContext()===Qh.b_stat?this.context.push(Qh.f_stat):this.context.push(Qh.f_expr),this.exprAllowed=!1},ph.backQuote.updateContext=function(){this.curContext()===Qh.q_tmpl?this.context.pop():this.context.push(Qh.q_tmpl),this.exprAllowed=!1},ph.star.updateContext=function(t){if(t===ph._function){var e=this.context.length-1;this.context[e]===Qh.f_expr?this.context[e]=Qh.f_expr_gen:this.context[e]=Qh.f_gen}this.exprAllowed=!0},ph.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==ph.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var Zh=Dh.prototype;function Xh(t){return"MemberExpression"===t.type&&"PrivateIdentifier"===t.property.type||"ChainExpression"===t.type&&Xh(t.expression)}Zh.checkPropClash=function(t,e,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===t.type||this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var i,r=t.key;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=t.kind;if(this.options.ecmaVersion>=6)"__proto__"===i&&"init"===s&&(e.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),e.proto=!0);else{var a=e[i="$"+i];if(a)("init"===s?this.strict&&a.init||a.get||a.set:a.init||a[s])&&this.raiseRecoverable(r.start,"Redefinition of property");else a=e[i]={init:!1,get:!1,set:!1};a[s]=!0}}},Zh.parseExpression=function(t,e){var n=this.start,i=this.startLoc,r=this.parseMaybeAssign(t,e);if(this.type===ph.comma){var s=this.startNodeAt(n,i);for(s.expressions=[r];this.eat(ph.comma);)s.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(s,"SequenceExpression")}return r},Zh.parseMaybeAssign=function(t,e,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var i=!1,r=-1,s=-1,a=-1;e?(r=e.parenthesizedAssign,s=e.trailingComma,a=e.doubleProto,e.parenthesizedAssign=e.trailingComma=-1):(e=new Ph,i=!0);var o=this.start,c=this.startLoc;this.type!==ph.parenL&&this.type!==ph.name||(this.potentialArrowAt=this.start,this.potentialArrowInForAwait="await"===t);var l=this.parseMaybeConditional(t,e);if(n&&(l=n.call(this,l,o,c)),this.type.isAssign){var u=this.startNodeAt(o,c);return u.operator=this.value,this.type===ph.eq&&(l=this.toAssignable(l,!1,e)),i||(e.parenthesizedAssign=e.trailingComma=e.doubleProto=-1),e.shorthandAssign>=l.start&&(e.shorthandAssign=-1),this.type===ph.eq?this.checkLValPattern(l):this.checkLValSimple(l),u.left=l,this.next(),u.right=this.parseMaybeAssign(t),a>-1&&(e.doubleProto=a),this.finishNode(u,"AssignmentExpression")}return i&&this.checkExpressionErrors(e,!0),r>-1&&(e.parenthesizedAssign=r),s>-1&&(e.trailingComma=s),l},Zh.parseMaybeConditional=function(t,e){var n=this.start,i=this.startLoc,r=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return r;if(this.eat(ph.question)){var s=this.startNodeAt(n,i);return s.test=r,s.consequent=this.parseMaybeAssign(),this.expect(ph.colon),s.alternate=this.parseMaybeAssign(t),this.finishNode(s,"ConditionalExpression")}return r},Zh.parseExprOps=function(t,e){var n=this.start,i=this.startLoc,r=this.parseMaybeUnary(e,!1,!1,t);return this.checkExpressionErrors(e)||r.start===n&&"ArrowFunctionExpression"===r.type?r:this.parseExprOp(r,n,i,-1,t)},Zh.parseExprOp=function(t,e,n,i,r){var s=this.type.binop;if(null!=s&&(!r||this.type!==ph._in)&&s>i){var a=this.type===ph.logicalOR||this.type===ph.logicalAND,o=this.type===ph.coalesce;o&&(s=ph.logicalAND.binop);var c=this.value;this.next();var l=this.start,u=this.startLoc,h=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,r),l,u,s,r),p=this.buildBinary(e,n,t,h,c,a||o);return(a&&this.type===ph.coalesce||o&&(this.type===ph.logicalOR||this.type===ph.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(p,e,n,i,r)}return t},Zh.buildBinary=function(t,e,n,i,r,s){"PrivateIdentifier"===i.type&&this.raise(i.start,"Private identifier can only be left side of binary expression");var a=this.startNodeAt(t,e);return a.left=n,a.operator=r,a.right=i,this.finishNode(a,s?"LogicalExpression":"BinaryExpression")},Zh.parseMaybeUnary=function(t,e,n,i){var r,s=this.start,a=this.startLoc;if(this.isContextual("await")&&this.canAwait)r=this.parseAwait(i),e=!0;else if(this.type.prefix){var o=this.startNode(),c=this.type===ph.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0,c,i),this.checkExpressionErrors(t,!0),c?this.checkLValSimple(o.argument):this.strict&&"delete"===o.operator&&"Identifier"===o.argument.type?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):"delete"===o.operator&&Xh(o.argument)?this.raiseRecoverable(o.start,"Private fields can not be deleted"):e=!0,r=this.finishNode(o,c?"UpdateExpression":"UnaryExpression")}else if(e||this.type!==ph.privateId){if(r=this.parseExprSubscripts(t,i),this.checkExpressionErrors(t))return r;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(s,a);l.operator=this.value,l.prefix=!1,l.argument=r,this.checkLValSimple(r),this.next(),r=this.finishNode(l,"UpdateExpression")}}else(i||0===this.privateNameStack.length)&&this.unexpected(),r=this.parsePrivateIdent(),this.type!==ph._in&&this.unexpected();return n||!this.eat(ph.starstar)?r:e?void this.unexpected(this.lastTokStart):this.buildBinary(s,a,r,this.parseMaybeUnary(null,!1,!1,i),"**",!1)},Zh.parseExprSubscripts=function(t,e){var n=this.start,i=this.startLoc,r=this.parseExprAtom(t,e);if("ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return r;var s=this.parseSubscripts(r,n,i,!1,e);return t&&"MemberExpression"===s.type&&(t.parenthesizedAssign>=s.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=s.start&&(t.parenthesizedBind=-1),t.trailingComma>=s.start&&(t.trailingComma=-1)),s},Zh.parseSubscripts=function(t,e,n,i,r){for(var s=this.options.ecmaVersion>=8&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&t.end-t.start==5&&this.potentialArrowAt===t.start,a=!1;;){var o=this.parseSubscript(t,e,n,i,s,a,r);if(o.optional&&(a=!0),o===t||"ArrowFunctionExpression"===o.type){if(a){var c=this.startNodeAt(e,n);c.expression=o,o=this.finishNode(c,"ChainExpression")}return o}t=o}},Zh.parseSubscript=function(t,e,n,i,r,s,a){var o=this.options.ecmaVersion>=11,c=o&&this.eat(ph.questionDot);i&&c&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(ph.bracketL);if(l||c&&this.type!==ph.parenL&&this.type!==ph.backQuote||this.eat(ph.dot)){var u=this.startNodeAt(e,n);u.object=t,l?(u.property=this.parseExpression(),this.expect(ph.bracketR)):this.type===ph.privateId&&"Super"!==t.type?u.property=this.parsePrivateIdent():u.property=this.parseIdent("never"!==this.options.allowReserved),u.computed=!!l,o&&(u.optional=c),t=this.finishNode(u,"MemberExpression")}else if(!i&&this.eat(ph.parenL)){var h=new Ph,p=this.yieldPos,d=this.awaitPos,f=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(ph.parenR,this.options.ecmaVersion>=8,!1,h);if(r&&!c&&!this.canInsertSemicolon()&&this.eat(ph.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=p,this.awaitPos=d,this.awaitIdentPos=f,this.parseArrowExpression(this.startNodeAt(e,n),m,!0,a);this.checkExpressionErrors(h,!0),this.yieldPos=p||this.yieldPos,this.awaitPos=d||this.awaitPos,this.awaitIdentPos=f||this.awaitIdentPos;var y=this.startNodeAt(e,n);y.callee=t,y.arguments=m,o&&(y.optional=c),t=this.finishNode(y,"CallExpression")}else if(this.type===ph.backQuote){(c||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var g=this.startNodeAt(e,n);g.tag=t,g.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(g,"TaggedTemplateExpression")}return t},Zh.parseExprAtom=function(t,e){this.type===ph.slash&&this.readRegexp();var n,i=this.potentialArrowAt===this.start;switch(this.type){case ph._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),n=this.startNode(),this.next(),this.type!==ph.parenL||this.allowDirectSuper||this.raise(n.start,"super() call outside constructor of a subclass"),this.type!==ph.dot&&this.type!==ph.bracketL&&this.type!==ph.parenL&&this.unexpected(),this.finishNode(n,"Super");case ph._this:return n=this.startNode(),this.next(),this.finishNode(n,"ThisExpression");case ph.name:var r=this.start,s=this.startLoc,a=this.containsEsc,o=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&"async"===o.name&&!this.canInsertSemicolon()&&this.eat(ph._function))return this.overrideContext(Qh.f_expr),this.parseFunction(this.startNodeAt(r,s),0,!1,!0,e);if(i&&!this.canInsertSemicolon()){if(this.eat(ph.arrow))return this.parseArrowExpression(this.startNodeAt(r,s),[o],!1,e);if(this.options.ecmaVersion>=8&&"async"===o.name&&this.type===ph.name&&!a&&(!this.potentialArrowInForAwait||"of"!==this.value||this.containsEsc))return o=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(ph.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,s),[o],!0,e)}return o;case ph.regexp:var c=this.value;return(n=this.parseLiteral(c.value)).regex={pattern:c.pattern,flags:c.flags},n;case ph.num:case ph.string:return this.parseLiteral(this.value);case ph._null:case ph._true:case ph._false:return(n=this.startNode()).value=this.type===ph._null?null:this.type===ph._true,n.raw=this.type.keyword,this.next(),this.finishNode(n,"Literal");case ph.parenL:var l=this.start,u=this.parseParenAndDistinguishExpression(i,e);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(u)&&(t.parenthesizedAssign=l),t.parenthesizedBind<0&&(t.parenthesizedBind=l)),u;case ph.bracketL:return n=this.startNode(),this.next(),n.elements=this.parseExprList(ph.bracketR,!0,!0,t),this.finishNode(n,"ArrayExpression");case ph.braceL:return this.overrideContext(Qh.b_expr),this.parseObj(!1,t);case ph._function:return n=this.startNode(),this.next(),this.parseFunction(n,0);case ph._class:return this.parseClass(this.startNode(),!1);case ph._new:return this.parseNew();case ph.backQuote:return this.parseTemplate();case ph._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},Zh.parseExprImport=function(){var t=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var e=this.parseIdent(!0);switch(this.type){case ph.parenL:return this.parseDynamicImport(t);case ph.dot:return t.meta=e,this.parseImportMeta(t);default:this.unexpected()}},Zh.parseDynamicImport=function(t){if(this.next(),t.source=this.parseMaybeAssign(),!this.eat(ph.parenR)){var e=this.start;this.eat(ph.comma)&&this.eat(ph.parenR)?this.raiseRecoverable(e,"Trailing comma is not allowed in import()"):this.unexpected(e)}return this.finishNode(t,"ImportExpression")},Zh.parseImportMeta=function(t){this.next();var e=this.containsEsc;return t.property=this.parseIdent(!0),"meta"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for import is 'import.meta'"),e&&this.raiseRecoverable(t.start,"'import.meta' must not contain escaped characters"),"module"===this.options.sourceType||this.options.allowImportExportEverywhere||this.raiseRecoverable(t.start,"Cannot use 'import.meta' outside a module"),this.finishNode(t,"MetaProperty")},Zh.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),110===e.raw.charCodeAt(e.raw.length-1)&&(e.bigint=e.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(e,"Literal")},Zh.parseParenExpression=function(){this.expect(ph.parenL);var t=this.parseExpression();return this.expect(ph.parenR),t},Zh.parseParenAndDistinguishExpression=function(t,e){var n,i=this.start,r=this.startLoc,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a,o=this.start,c=this.startLoc,l=[],u=!0,h=!1,p=new Ph,d=this.yieldPos,f=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==ph.parenR;){if(u?u=!1:this.expect(ph.comma),s&&this.afterTrailingComma(ph.parenR,!0)){h=!0;break}if(this.type===ph.ellipsis){a=this.start,l.push(this.parseParenItem(this.parseRestBinding())),this.type===ph.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}l.push(this.parseMaybeAssign(!1,p,this.parseParenItem))}var m=this.lastTokEnd,y=this.lastTokEndLoc;if(this.expect(ph.parenR),t&&!this.canInsertSemicolon()&&this.eat(ph.arrow))return this.checkPatternErrors(p,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=f,this.parseParenArrowList(i,r,l,e);l.length&&!h||this.unexpected(this.lastTokStart),a&&this.unexpected(a),this.checkExpressionErrors(p,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=f||this.awaitPos,l.length>1?((n=this.startNodeAt(o,c)).expressions=l,this.finishNodeAt(n,"SequenceExpression",m,y)):n=l[0]}else n=this.parseParenExpression();if(this.options.preserveParens){var g=this.startNodeAt(i,r);return g.expression=n,this.finishNode(g,"ParenthesizedExpression")}return n},Zh.parseParenItem=function(t){return t},Zh.parseParenArrowList=function(t,e,n,i){return this.parseArrowExpression(this.startNodeAt(t,e),n,!1,i)};var tp=[];Zh.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(ph.dot)){t.meta=e;var n=this.containsEsc;return t.property=this.parseIdent(!0),"target"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(t.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(t.start,"'new.target' can only be used in functions and class static block"),this.finishNode(t,"MetaProperty")}var i=this.start,r=this.startLoc,s=this.type===ph._import;return t.callee=this.parseSubscripts(this.parseExprAtom(),i,r,!0,!1),s&&"ImportExpression"===t.callee.type&&this.raise(i,"Cannot use new with import()"),this.eat(ph.parenL)?t.arguments=this.parseExprList(ph.parenR,this.options.ecmaVersion>=8,!1):t.arguments=tp,this.finishNode(t,"NewExpression")},Zh.parseTemplateElement=function(t){var e=t.isTagged,n=this.startNode();return this.type===ph.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===ph.backQuote,this.finishNode(n,"TemplateElement")},Zh.parseTemplate=function(t){void 0===t&&(t={});var e=t.isTagged;void 0===e&&(e=!1);var n=this.startNode();this.next(),n.expressions=[];var i=this.parseTemplateElement({isTagged:e});for(n.quasis=[i];!i.tail;)this.type===ph.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(ph.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(ph.braceR),n.quasis.push(i=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(n,"TemplateLiteral")},Zh.isAsyncProp=function(t){return!t.computed&&"Identifier"===t.key.type&&"async"===t.key.name&&(this.type===ph.name||this.type===ph.num||this.type===ph.string||this.type===ph.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===ph.star)&&!dh.test(this.input.slice(this.lastTokEnd,this.start))},Zh.parseObj=function(t,e){var n=this.startNode(),i=!0,r={};for(n.properties=[],this.next();!this.eat(ph.braceR);){if(i)i=!1;else if(this.expect(ph.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(ph.braceR))break;var s=this.parseProperty(t,e);t||this.checkPropClash(s,r,e),n.properties.push(s)}return this.finishNode(n,t?"ObjectPattern":"ObjectExpression")},Zh.parseProperty=function(t,e){var n,i,r,s,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(ph.ellipsis))return t?(a.argument=this.parseIdent(!1),this.type===ph.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(a.argument=this.parseMaybeAssign(!1,e),this.type===ph.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(t||e)&&(r=this.start,s=this.startLoc),t||(n=this.eat(ph.star)));var o=this.containsEsc;return this.parsePropertyName(a),!t&&!o&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(a)?(i=!0,n=this.options.ecmaVersion>=9&&this.eat(ph.star),this.parsePropertyName(a)):i=!1,this.parsePropertyValue(a,t,n,i,r,s,e,o),this.finishNode(a,"Property")},Zh.parsePropertyValue=function(t,e,n,i,r,s,a,o){if((n||i)&&this.type===ph.colon&&this.unexpected(),this.eat(ph.colon))t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),t.kind="init";else if(this.options.ecmaVersion>=6&&this.type===ph.parenL)e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(n,i);else if(e||o||!(this.options.ecmaVersion>=5)||t.computed||"Identifier"!==t.key.type||"get"!==t.key.name&&"set"!==t.key.name||this.type===ph.comma||this.type===ph.braceR||this.type===ph.eq)this.options.ecmaVersion>=6&&!t.computed&&"Identifier"===t.key.type?((n||i)&&this.unexpected(),this.checkUnreserved(t.key),"await"!==t.key.name||this.awaitIdentPos||(this.awaitIdentPos=r),t.kind="init",e?t.value=this.parseMaybeDefault(r,s,this.copyNode(t.key)):this.type===ph.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),t.value=this.parseMaybeDefault(r,s,this.copyNode(t.key))):t.value=this.copyNode(t.key),t.shorthand=!0):this.unexpected();else{(n||i)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var c="get"===t.kind?0:1;if(t.value.params.length!==c){var l=t.value.start;"get"===t.kind?this.raiseRecoverable(l,"getter should have no params"):this.raiseRecoverable(l,"setter should have exactly one param")}else"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")}},Zh.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(ph.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(ph.bracketR),t.key;t.computed=!1}return t.key=this.type===ph.num||this.type===ph.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},Zh.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},Zh.parseMethod=function(t,e,n){var i=this.startNode(),r=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(i),this.options.ecmaVersion>=6&&(i.generator=t),this.options.ecmaVersion>=8&&(i.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|Bh(e,i.generator)|(n?128:0)),this.expect(ph.parenL),i.params=this.parseBindingList(ph.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(i,!1,!0,!1),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(i,"FunctionExpression")},Zh.parseArrowExpression=function(t,e,n,i){var r=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(16|Bh(n,!1)),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1,i),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(t,"ArrowFunctionExpression")},Zh.parseFunctionBody=function(t,e,n,i){var r=e&&this.type!==ph.braceL,s=this.strict,a=!1;if(r)t.body=this.parseMaybeAssign(i),t.expression=!0,this.checkParams(t,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);s&&!o||(a=this.strictDirective(this.end))&&o&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list");var c=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(t,!s&&!a&&!e&&!n&&this.isSimpleParamList(t.params)),this.strict&&t.id&&this.checkLValSimple(t.id,5),t.body=this.parseBlock(!1,void 0,a&&!s),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=c}this.exitScope()},Zh.isSimpleParamList=function(t){for(var e=0,n=t;e<n.length;e+=1){if("Identifier"!==n[e].type)return!1}return!0},Zh.checkParams=function(t,e){for(var n=Object.create(null),i=0,r=t.params;i<r.length;i+=1){var s=r[i];this.checkLValInnerPattern(s,1,e?null:n)}},Zh.parseExprList=function(t,e,n,i){for(var r=[],s=!0;!this.eat(t);){if(s)s=!1;else if(this.expect(ph.comma),e&&this.afterTrailingComma(t))break;var a=void 0;n&&this.type===ph.comma?a=null:this.type===ph.ellipsis?(a=this.parseSpread(i),i&&this.type===ph.comma&&i.trailingComma<0&&(i.trailingComma=this.start)):a=this.parseMaybeAssign(!1,i),r.push(a)}return r},Zh.checkUnreserved=function(t){var e=t.start,n=t.end,i=t.name;(this.inGenerator&&"yield"===i&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===i&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&"arguments"===i&&this.raiseRecoverable(e,"Cannot use 'arguments' in class field initializer"),!this.inClassStaticBlock||"arguments"!==i&&"await"!==i||this.raise(e,"Cannot use "+i+" in class static initialization block"),this.keywords.test(i)&&this.raise(e,"Unexpected keyword '"+i+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(e,n).indexOf("\\"))||(this.strict?this.reservedWordsStrict:this.reservedWords).test(i)&&(this.inAsync||"await"!==i||this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+i+"' is reserved"))},Zh.parseIdent=function(t){var e=this.startNode();return this.type===ph.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,"class"!==e.name&&"function"!==e.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(!!t),this.finishNode(e,"Identifier"),t||(this.checkUnreserved(e),"await"!==e.name||this.awaitIdentPos||(this.awaitIdentPos=e.start)),e},Zh.parsePrivateIdent=function(){var t=this.startNode();return this.type===ph.privateId?t.name=this.value:this.unexpected(),this.next(),this.finishNode(t,"PrivateIdentifier"),0===this.privateNameStack.length?this.raise(t.start,"Private field '#"+t.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(t),t},Zh.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===ph.semi||this.canInsertSemicolon()||this.type!==ph.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(ph.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")},Zh.parseAwait=function(t){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0,!1,t),this.finishNode(e,"AwaitExpression")};var ep=Dh.prototype;ep.raise=function(t,e){var n=Eh(this.input,t);e+=" ("+n.line+":"+n.column+")";var i=new SyntaxError(e);throw i.pos=t,i.loc=n,i.raisedAt=this.pos,i},ep.raiseRecoverable=ep.raise,ep.curPosition=function(){if(this.options.locations)return new kh(this.curLine,this.pos-this.lineStart)};var np=Dh.prototype,ip=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};np.enterScope=function(t){this.scopeStack.push(new ip(t))},np.exitScope=function(){this.scopeStack.pop()},np.treatFunctionsAsVarInScope=function(t){return 2&t.flags||!this.inModule&&1&t.flags},np.declareName=function(t,e,n){var i=!1;if(2===e){var r=this.currentScope();i=r.lexical.indexOf(t)>-1||r.functions.indexOf(t)>-1||r.var.indexOf(t)>-1,r.lexical.push(t),this.inModule&&1&r.flags&&delete this.undefinedExports[t]}else if(4===e){this.currentScope().lexical.push(t)}else if(3===e){var s=this.currentScope();i=this.treatFunctionsAsVar?s.lexical.indexOf(t)>-1:s.lexical.indexOf(t)>-1||s.var.indexOf(t)>-1,s.functions.push(t)}else for(var a=this.scopeStack.length-1;a>=0;--a){var o=this.scopeStack[a];if(o.lexical.indexOf(t)>-1&&!(32&o.flags&&o.lexical[0]===t)||!this.treatFunctionsAsVarInScope(o)&&o.functions.indexOf(t)>-1){i=!0;break}if(o.var.push(t),this.inModule&&1&o.flags&&delete this.undefinedExports[t],259&o.flags)break}i&&this.raiseRecoverable(n,"Identifier '"+t+"' has already been declared")},np.checkLocalExport=function(t){-1===this.scopeStack[0].lexical.indexOf(t.name)&&-1===this.scopeStack[0].var.indexOf(t.name)&&(this.undefinedExports[t.name]=t)},np.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},np.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(259&e.flags)return e}},np.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(259&e.flags&&!(16&e.flags))return e}};var rp=function(t,e,n){this.type="",this.start=e,this.end=0,t.options.locations&&(this.loc=new Mh(t,n)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])},sp=Dh.prototype;function ap(t,e,n,i){return t.type=e,t.end=n,this.options.locations&&(t.loc.end=i),this.options.ranges&&(t.range[1]=n),t}sp.startNode=function(){return new rp(this,this.start,this.startLoc)},sp.startNodeAt=function(t,e){return new rp(this,t,e)},sp.finishNode=function(t,e){return ap.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},sp.finishNodeAt=function(t,e,n,i){return ap.call(this,t,e,n,i)},sp.copyNode=function(t){var e=new rp(this,t.start,this.startLoc);for(var n in t)e[n]=t[n];return e};var op="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",cp=op+" Extended_Pictographic",lp=cp+" EBase EComp EMod EPres ExtPict",up={9:op,10:cp,11:cp,12:lp,13:lp,14:lp},hp="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",pp="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",dp=pp+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",fp=dp+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",mp=fp+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",yp=mp+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",gp={9:pp,10:dp,11:fp,12:mp,13:yp,14:yp+" Kawi Nag_Mundari Nagm"},bp={};function vp(t){var e=bp[t]={binary:Ih(up[t]+" "+hp),nonBinary:{General_Category:Ih(hp),Script:Ih(gp[t])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}for(var _p=0,xp=[9,10,11,12,13,14];_p<xp.length;_p+=1){vp(xp[_p])}var wp=Dh.prototype,Sp=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":""),this.unicodeProperties=bp[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function Ip(t){return 36===t||t>=40&&t<=43||46===t||63===t||t>=91&&t<=94||t>=123&&t<=125}function Ap(t){return t>=65&&t<=90||t>=97&&t<=122}function Tp(t){return Ap(t)||95===t}function kp(t){return Tp(t)||Mp(t)}function Mp(t){return t>=48&&t<=57}function Ep(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function Cp(t){return t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:t-48}function Np(t){return t>=48&&t<=55}Sp.prototype.reset=function(t,e,n){var i=-1!==n.indexOf("u");this.start=0|t,this.source=e+"",this.flags=n,this.switchU=i&&this.parser.options.ecmaVersion>=6,this.switchN=i&&this.parser.options.ecmaVersion>=9},Sp.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)},Sp.prototype.at=function(t,e){void 0===e&&(e=!1);var n=this.source,i=n.length;if(t>=i)return-1;var r=n.charCodeAt(t);if(!e&&!this.switchU||r<=55295||r>=57344||t+1>=i)return r;var s=n.charCodeAt(t+1);return s>=56320&&s<=57343?(r<<10)+s-56613888:r},Sp.prototype.nextIndex=function(t,e){void 0===e&&(e=!1);var n=this.source,i=n.length;if(t>=i)return i;var r,s=n.charCodeAt(t);return!e&&!this.switchU||s<=55295||s>=57344||t+1>=i||(r=n.charCodeAt(t+1))<56320||r>57343?t+1:t+2},Sp.prototype.current=function(t){return void 0===t&&(t=!1),this.at(this.pos,t)},Sp.prototype.lookahead=function(t){return void 0===t&&(t=!1),this.at(this.nextIndex(this.pos,t),t)},Sp.prototype.advance=function(t){void 0===t&&(t=!1),this.pos=this.nextIndex(this.pos,t)},Sp.prototype.eat=function(t,e){return void 0===e&&(e=!1),this.current(e)===t&&(this.advance(e),!0)},wp.validateRegExpFlags=function(t){for(var e=t.validFlags,n=t.flags,i=0;i<n.length;i++){var r=n.charAt(i);-1===e.indexOf(r)&&this.raise(t.start,"Invalid regular expression flag"),n.indexOf(r,i+1)>-1&&this.raise(t.start,"Duplicate regular expression flag")}},wp.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))},wp.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,n=t.backReferenceNames;e<n.length;e+=1){var i=n[e];-1===t.groupNames.indexOf(i)&&t.raise("Invalid named capture referenced")}},wp.regexp_disjunction=function(t){for(this.regexp_alternative(t);t.eat(124);)this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")},wp.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););},wp.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):!!(t.switchU?this.regexp_eatAtom(t):this.regexp_eatExtendedAtom(t))&&(this.regexp_eatQuantifier(t),!0)},wp.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!n,!0}return t.pos=e,!1},wp.regexp_eatQuantifier=function(t,e){return void 0===e&&(e=!1),!!this.regexp_eatQuantifierPrefix(t,e)&&(t.eat(63),!0)},wp.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)},wp.regexp_eatBracedQuantifier=function(t,e){var n=t.pos;if(t.eat(123)){var i=0,r=-1;if(this.regexp_eatDecimalDigits(t)&&(i=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(r=t.lastIntValue),t.eat(125)))return-1!==r&&r<i&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=n}return!1},wp.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)},wp.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1},wp.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=e}return!1},wp.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):63===t.current()&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1},wp.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)},wp.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1},wp.regexp_eatSyntaxCharacter=function(t){var e=t.current();return!!Ip(e)&&(t.lastIntValue=e,t.advance(),!0)},wp.regexp_eatPatternCharacters=function(t){for(var e=t.pos,n=0;-1!==(n=t.current())&&!Ip(n);)t.advance();return t.pos!==e},wp.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return!(-1===e||36===e||e>=40&&e<=43||46===e||63===e||91===e||94===e||124===e)&&(t.advance(),!0)},wp.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t))return-1!==t.groupNames.indexOf(t.lastStringValue)&&t.raise("Duplicate capture group name"),void t.groupNames.push(t.lastStringValue);t.raise("Invalid group")}},wp.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1},wp.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=Ah(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=Ah(t.lastIntValue);return!0}return!1},wp.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,n=this.options.ecmaVersion>=11,i=t.current(n);return t.advance(n),92===i&&this.regexp_eatRegExpUnicodeEscapeSequence(t,n)&&(i=t.lastIntValue),function(t){return rh(t,!0)||36===t||95===t}(i)?(t.lastIntValue=i,!0):(t.pos=e,!1)},wp.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,n=this.options.ecmaVersion>=11,i=t.current(n);return t.advance(n),92===i&&this.regexp_eatRegExpUnicodeEscapeSequence(t,n)&&(i=t.lastIntValue),function(t){return sh(t,!0)||36===t||95===t||8204===t||8205===t}(i)?(t.lastIntValue=i,!0):(t.pos=e,!1)},wp.regexp_eatAtomEscape=function(t){return!!(this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t))||(t.switchU&&(99===t.current()&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)},wp.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var n=t.lastIntValue;if(t.switchU)return n>t.maxBackReference&&(t.maxBackReference=n),!0;if(n<=t.numCapturingParens)return!0;t.pos=e}return!1},wp.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1},wp.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t,!1)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)},wp.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1},wp.regexp_eatZero=function(t){return 48===t.current()&&!Mp(t.lookahead())&&(t.lastIntValue=0,t.advance(),!0)},wp.regexp_eatControlEscape=function(t){var e=t.current();return 116===e?(t.lastIntValue=9,t.advance(),!0):110===e?(t.lastIntValue=10,t.advance(),!0):118===e?(t.lastIntValue=11,t.advance(),!0):102===e?(t.lastIntValue=12,t.advance(),!0):114===e&&(t.lastIntValue=13,t.advance(),!0)},wp.regexp_eatControlLetter=function(t){var e=t.current();return!!Ap(e)&&(t.lastIntValue=e%32,t.advance(),!0)},wp.regexp_eatRegExpUnicodeEscapeSequence=function(t,e){void 0===e&&(e=!1);var n,i=t.pos,r=e||t.switchU;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var s=t.lastIntValue;if(r&&s>=55296&&s<=56319){var a=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var o=t.lastIntValue;if(o>=56320&&o<=57343)return t.lastIntValue=1024*(s-55296)+(o-56320)+65536,!0}t.pos=a,t.lastIntValue=s}return!0}if(r&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&((n=t.lastIntValue)>=0&&n<=1114111))return!0;r&&t.raise("Invalid unicode escape"),t.pos=i}return!1},wp.regexp_eatIdentityEscape=function(t){if(t.switchU)return!!this.regexp_eatSyntaxCharacter(t)||!!t.eat(47)&&(t.lastIntValue=47,!0);var e=t.current();return!(99===e||t.switchN&&107===e)&&(t.lastIntValue=e,t.advance(),!0)},wp.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do{t.lastIntValue=10*t.lastIntValue+(e-48),t.advance()}while((e=t.current())>=48&&e<=57);return!0}return!1},wp.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(function(t){return 100===t||68===t||115===t||83===t||119===t||87===t}(e))return t.lastIntValue=-1,t.advance(),!0;if(t.switchU&&this.options.ecmaVersion>=9&&(80===e||112===e)){if(t.lastIntValue=-1,t.advance(),t.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(t)&&t.eat(125))return!0;t.raise("Invalid property name")}return!1},wp.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var n=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var i=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,n,i),!0}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var r=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,r),!0}return!1},wp.regexp_validateUnicodePropertyNameAndValue=function(t,e,n){wh(t.unicodeProperties.nonBinary,e)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[e].test(n)||t.raise("Invalid property value")},wp.regexp_validateUnicodePropertyNameOrValue=function(t,e){t.unicodeProperties.binary.test(e)||t.raise("Invalid property name")},wp.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";Tp(e=t.current());)t.lastStringValue+=Ah(e),t.advance();return""!==t.lastStringValue},wp.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";kp(e=t.current());)t.lastStringValue+=Ah(e),t.advance();return""!==t.lastStringValue},wp.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)},wp.regexp_eatCharacterClass=function(t){if(t.eat(91)){if(t.eat(94),this.regexp_classRanges(t),t.eat(93))return!0;t.raise("Unterminated character class")}return!1},wp.regexp_classRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var n=t.lastIntValue;!t.switchU||-1!==e&&-1!==n||t.raise("Invalid character class"),-1!==e&&-1!==n&&e>n&&t.raise("Range out of order in character class")}}},wp.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var n=t.current();(99===n||Np(n))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var i=t.current();return 93!==i&&(t.lastIntValue=i,t.advance(),!0)},wp.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)},wp.regexp_eatClassControlLetter=function(t){var e=t.current();return!(!Mp(e)&&95!==e)&&(t.lastIntValue=e%32,t.advance(),!0)},wp.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1},wp.regexp_eatDecimalDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;Mp(n=t.current());)t.lastIntValue=10*t.lastIntValue+(n-48),t.advance();return t.pos!==e},wp.regexp_eatHexDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;Ep(n=t.current());)t.lastIntValue=16*t.lastIntValue+Cp(n),t.advance();return t.pos!==e},wp.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var n=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=64*e+8*n+t.lastIntValue:t.lastIntValue=8*e+n}else t.lastIntValue=e;return!0}return!1},wp.regexp_eatOctalDigit=function(t){var e=t.current();return Np(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)},wp.regexp_eatFixedHexDigits=function(t,e){var n=t.pos;t.lastIntValue=0;for(var i=0;i<e;++i){var r=t.current();if(!Ep(r))return t.pos=n,!1;t.lastIntValue=16*t.lastIntValue+Cp(r),t.advance()}return!0};var Op=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new Mh(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Lp=Dh.prototype;function Bp(t){return"function"!=typeof BigInt?null:BigInt(t.replace(/_/g,""))}Lp.next=function(t){!t&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Op(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Lp.getToken=function(){return this.next(),new Op(this)},"undefined"!=typeof Symbol&&(Lp[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===ph.eof,value:e}}}}),Lp.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(ph.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},Lp.readToken=function(t){return rh(t,this.options.ecmaVersion>=6)||92===t?this.readWord():this.getTokenFromCode(t)},Lp.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);if(t<=55295||t>=56320)return t;var e=this.input.charCodeAt(this.pos+1);return e<=56319||e>=57344?t:(t<<10)+e-56613888},Lp.skipBlockComment=function(){var t=this.options.onComment&&this.curPosition(),e=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(-1===n&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var i=void 0,r=e;(i=yh(this.input,r,this.pos))>-1;)++this.curLine,r=this.lineStart=i;this.options.onComment&&this.options.onComment(!0,this.input.slice(e+2,n),e,this.pos,t,this.curPosition())},Lp.skipLineComment=function(t){for(var e=this.pos,n=this.options.onComment&&this.curPosition(),i=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!mh(i);)i=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,n,this.curPosition())},Lp.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!(t>8&&t<14||t>=5760&&gh.test(String.fromCharCode(t))))break t;++this.pos}}},Lp.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=t,this.value=e,this.updateContext(n)},Lp.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===t&&46===e?(this.pos+=3,this.finishToken(ph.ellipsis)):(++this.pos,this.finishToken(ph.dot))},Lp.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(ph.assign,2):this.finishOp(ph.slash,1)},Lp.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),n=1,i=42===t?ph.star:ph.modulo;return this.options.ecmaVersion>=7&&42===t&&42===e&&(++n,i=ph.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(ph.assign,n+1):this.finishOp(i,n)},Lp.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);if(e===t){if(this.options.ecmaVersion>=12)if(61===this.input.charCodeAt(this.pos+2))return this.finishOp(ph.assign,3);return this.finishOp(124===t?ph.logicalOR:ph.logicalAND,2)}return 61===e?this.finishOp(ph.assign,2):this.finishOp(124===t?ph.bitwiseOR:ph.bitwiseAND,1)},Lp.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(ph.assign,2):this.finishOp(ph.bitwiseXOR,1)},Lp.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45!==e||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!dh.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(ph.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===e?this.finishOp(ph.assign,2):this.finishOp(ph.plusMin,1)},Lp.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),n=1;return e===t?(n=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(ph.assign,n+1):this.finishOp(ph.bitShift,n)):33!==e||60!==t||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===e&&(n=2),this.finishOp(ph.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},Lp.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(ph.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(ph.arrow)):this.finishOp(61===t?ph.eq:ph.prefix,1)},Lp.readToken_question=function(){var t=this.options.ecmaVersion;if(t>=11){var e=this.input.charCodeAt(this.pos+1);if(46===e){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(ph.questionDot,2)}if(63===e){if(t>=12)if(61===this.input.charCodeAt(this.pos+2))return this.finishOp(ph.assign,3);return this.finishOp(ph.coalesce,2)}}return this.finishOp(ph.question,1)},Lp.readToken_numberSign=function(){var t=35;if(this.options.ecmaVersion>=13&&(++this.pos,rh(t=this.fullCharCodeAtPos(),!0)||92===t))return this.finishToken(ph.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Ah(t)+"'")},Lp.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(ph.parenL);case 41:return++this.pos,this.finishToken(ph.parenR);case 59:return++this.pos,this.finishToken(ph.semi);case 44:return++this.pos,this.finishToken(ph.comma);case 91:return++this.pos,this.finishToken(ph.bracketL);case 93:return++this.pos,this.finishToken(ph.bracketR);case 123:return++this.pos,this.finishToken(ph.braceL);case 125:return++this.pos,this.finishToken(ph.braceR);case 58:return++this.pos,this.finishToken(ph.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(ph.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(120===e||88===e)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===e||79===e)return this.readRadixNumber(8);if(98===e||66===e)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 63:return this.readToken_question();case 126:return this.finishOp(ph.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Ah(t)+"'")},Lp.finishOp=function(t,e){var n=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,n)},Lp.readRegexp=function(){for(var t,e,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var i=this.input.charAt(this.pos);if(dh.test(i)&&this.raise(n,"Unterminated regular expression"),t)t=!1;else{if("["===i)e=!0;else if("]"===i&&e)e=!1;else if("/"===i&&!e)break;t="\\"===i}++this.pos}var r=this.input.slice(n,this.pos);++this.pos;var s=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(s);var o=this.regexpState||(this.regexpState=new Sp(this));o.reset(n,r,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var c=null;try{c=new RegExp(r,a)}catch(t){}return this.finishToken(ph.regexp,{pattern:r,flags:a,value:c})},Lp.readInt=function(t,e,n){for(var i=this.options.ecmaVersion>=12&&void 0===e,r=n&&48===this.input.charCodeAt(this.pos),s=this.pos,a=0,o=0,c=0,l=null==e?1/0:e;c<l;++c,++this.pos){var u=this.input.charCodeAt(this.pos),h=void 0;if(i&&95===u)r&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===o&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===c&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),o=u;else{if((h=u>=97?u-97+10:u>=65?u-65+10:u>=48&&u<=57?u-48:1/0)>=t)break;o=u,a=a*t+h}}return i&&95===o&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||null!=e&&this.pos-s!==e?null:a},Lp.readRadixNumber=function(t){var e=this.pos;this.pos+=2;var n=this.readInt(t);return null==n&&this.raise(this.start+2,"Expected number in radix "+t),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(n=Bp(this.input.slice(e,this.pos)),++this.pos):rh(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(ph.num,n)},Lp.readNumber=function(t){var e=this.pos;t||null!==this.readInt(10,void 0,!0)||this.raise(e,"Invalid number");var n=this.pos-e>=2&&48===this.input.charCodeAt(e);n&&this.strict&&this.raise(e,"Invalid number");var i=this.input.charCodeAt(this.pos);if(!n&&!t&&this.options.ecmaVersion>=11&&110===i){var r=Bp(this.input.slice(e,this.pos));return++this.pos,rh(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(ph.num,r)}n&&/[89]/.test(this.input.slice(e,this.pos))&&(n=!1),46!==i||n||(++this.pos,this.readInt(10),i=this.input.charCodeAt(this.pos)),69!==i&&101!==i||n||(43!==(i=this.input.charCodeAt(++this.pos))&&45!==i||++this.pos,null===this.readInt(10)&&this.raise(e,"Invalid number")),rh(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s,a=(s=this.input.slice(e,this.pos),n?parseInt(s,8):parseFloat(s.replace(/_/g,"")));return this.finishToken(ph.num,a)},Lp.readCodePoint=function(){var t;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var e=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(e,"Code point out of bounds")}else t=this.readHexChar(4);return t},Lp.readString=function(t){for(var e="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var i=this.input.charCodeAt(this.pos);if(i===t)break;92===i?(e+=this.input.slice(n,this.pos),e+=this.readEscapedChar(!1),n=this.pos):8232===i||8233===i?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(mh(i)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(n,this.pos++),this.finishToken(ph.string,e)};var Dp={};Lp.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t!==Dp)throw t;this.readInvalidTemplateToken()}this.inTemplateElement=!1},Lp.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Dp;this.raise(t,e)},Lp.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==ph.template&&this.type!==ph.invalidTemplate?(t+=this.input.slice(e,this.pos),this.finishToken(ph.template,t)):36===n?(this.pos+=2,this.finishToken(ph.dollarBraceL)):(++this.pos,this.finishToken(ph.backQuote));if(92===n)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(mh(n)){switch(t+=this.input.slice(e,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},Lp.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(ph.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},Lp.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Ah(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),t){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(e>=48&&e<=55){var i=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(i,8);return r>255&&(i=i.slice(0,-1),r=parseInt(i,8)),this.pos+=i.length-1,e=this.input.charCodeAt(this.pos),"0"===i&&56!==e&&57!==e||!this.strict&&!t||this.invalidStringToken(this.pos-1-i.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(r)}return mh(e)?"":String.fromCharCode(e)}},Lp.readHexChar=function(t){var e=this.pos,n=this.readInt(16,t);return null===n&&this.invalidStringToken(e,"Bad character escape sequence"),n},Lp.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,n=this.pos,i=this.options.ecmaVersion>=6;this.pos<this.input.length;){var r=this.fullCharCodeAtPos();if(sh(r,i))this.pos+=r<=65535?1:2;else{if(92!==r)break;this.containsEsc=!0,t+=this.input.slice(n,this.pos);var s=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(e?rh:sh)(a,i)||this.invalidStringToken(s,"Invalid Unicode escape"),t+=Ah(a),n=this.pos}e=!1}return t+this.input.slice(n,this.pos)},Lp.readWord=function(){var t=this.readWord1(),e=ph.name;return this.keywords.test(t)&&(e=uh[t]),this.finishToken(e,t)};Dh.acorn={Parser:Dh,version:"8.8.2",defaultOptions:Ch,Position:kh,SourceLocation:Mh,getLineInfo:Eh,Node:rp,TokenType:ah,tokTypes:ph,keywordTypes:uh,TokContext:Kh,tokContexts:Qh,isIdentifierChar:sh,isIdentifierStart:rh,Token:Op,isNewLine:mh,lineBreak:dh,lineBreakG:fh,nonASCIIwhitespace:gh};var Fp={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"};const Vp={ecmaVersion:11},Up="$",Pp="d",Rp="d1",jp="d2",$p=t=>(e,n)=>n.error(e,t+" not allowed"),zp=$p("Aggregate function"),Hp=$p("Window function"),qp="Invalid argument",Yp="Invalid column reference",Wp=Yp+" (must be input to an aggregate function)",Gp="Invalid function call",Kp="Invalid operator parameter",Qp="Unsupported destructuring pattern",Jp="Table expressions do not support closures",Zp="Use aq.escape(fn) to use a function as-is (including closures)",Xp=`\nNote: ${Jp}. ${Zp}, or use table.params({ name: value }) to define dynamic parameters.`,td=`\nNote: ${Jp}. ${Zp}, or use aq.addFunction(name, fn) to add new op functions.`,ed=`The ${gn} method is not valid in multi-table expressions.`;function nd(t,e){const n=function(t){try{const i=t.field?function(t){const e=JSON.stringify(t+"");return t.table?`(a,b)=>b[${e}]`:`d=>d[${e}]`}(t):vt(t)?be(t):t;return(e=`expr=(${i})`,n=Vp,Dh.parse(e,n)).body[0].expression.right}catch(e){St("Expression parse error: "+(t+""))}var e,n}(e);let i=t.root=n;return t.spec=e,t.tuple=null,t.tuple1=null,t.tuple2=null,t.$param=null,t.$op=0,t.scope=new Set,t.paramsRef=new Map,t.columnRef=new Map,!function(t){return qu(Ne,t)||qu(Ce,t)}(i)?t.join?(t.scope.add(t.tuple1=Rp),t.scope.add(t.tuple2=jp),t.scope.add(t.$param=Up)):(t.scope.add(t.tuple=Pp),t.scope.add(t.$param=Up)):(!function(t,e){t.generator&&$p("Generator functions")(t,e);t.async&&$p("Async functions")(t,e);const{params:n}=t,i=n.length,r=t=>(n,i)=>e.columnRef.set(n,[i,t]),s=(t,n)=>e.paramsRef.set(t,n);i&&(e.join?(ad(e,n[0],"tuple1",r(1)),i>1&&ad(e,n[1],"tuple2",r(2)),i>2&&ad(e,n[2],"$param",s)):(ad(e,n[0],"tuple",r(0)),i>1&&ad(e,n[1],"$param",s)));e.root=t.body}(i,t),i=i.body),Du(i,t,id),t.root}const id={FunctionDeclaration:$p("Function definitions"),ForStatement:$p("For loops"),ForOfStatement:$p("For-of loops"),ForInStatement:$p("For-in loops"),WhileStatement:$p("While loops"),DoWhileStatement:$p("Do-while loops"),AwaitExpression:$p("Await expressions"),ArrowFunctionExpression:$p("Function definitions"),AssignmentExpression:$p("Assignments"),FunctionExpression:$p("Function definitions"),NewExpression:$p('Use of "new"'),UpdateExpression:$p("Update expressions"),VariableDeclarator(t,e){yd(t.id,e)},Identifier(t,e,n){ld(t,e,n)&&!e.scope.has(t.name)&&e.error(t,"Invalid variable reference",Xp)},CallExpression(t,e){const n=od(t.callee),i=un(n)||hn(n);if(i){if((e.join||!1===e.aggregate)&&on(n)&&zp(t,e),(e.join||!1===e.window)&&cn(n)&&Hp(t,e),e.$op=1,e.ast)md(t,n,e),t.arguments.forEach((t=>Du(t,e,sd)));else{const r=e.op(function(t,e,n,i){const r=[],s=[],a=e.param[0]||0,o=a+(e.param[1]||0);return i.forEach(((e,n)=>{n<a?(Du(e,t,sd),r.push(t.field(e))):n<o?(Du(e,t,sd),s.push(t.param(e))):t.error(e,Kp)})),{name:n,fields:r,params:s,...t.spec.window||{}}}(e,i,n,t.arguments));Object.assign(t,{type:"Op",name:r.id})}return e.$op=0,!1}ln(n)?md(t,n,e):e.error(t,Gp,td)},MemberExpression(t,e,n){const{object:i,property:r}=t;if(!qu(Oe,i))return;const{name:s}=i;if(cd(t)&&qu(Oe,r)&&Vt(Fp,r.name))return void fd(t,r.name);const a=s===e.tuple?0:s===e.tuple1?1:s===e.tuple2?2:-1;return a>=0?rd(t,a,e,ud,n):s===e.$param?rd(t,a,e,pd):void(e.paramsRef.has(s)?dd(t,e.paramsRef.get(s)):e.columnRef.has(s)?hd(i,s,e,t):Vt(e.params,s)&&dd(i,s))}};function rd(t,e,n,i,r){const{property:s,computed:a}=t;let o;if(a)if(qu(Le,s))o=s.value;else try{Du(s,n,id,t),o=n.param(s)}catch(e){n.error(t,"Invalid member expression")}else o=s.name;return i(t,o,e,n,r),!1}const sd={...id,VariableDeclarator:$p("Variable declaration in operator call"),Identifier(t,e,n){ld(t,e,n)&&e.error(t,"Variable not accessible in operator call")},CallExpression(t,e){const n=od(t.callee);ln(n)?md(t,n,e):e.error(t,Gp,td)}};function ad(t,e,n,i){qu(Oe,e)?(t.scope.add(e.name),t[n]=e.name):qu(Fe,e)&&e.properties.forEach((e=>{const n=qu(Oe,e.key)?e.key.name:qu(Le,e.key)?e.key.value:t.error(e,qp);qu(Oe,e.value)||t.error(e.value,Qp),i(e.value.name,n)}))}function od(t){return qu(Oe,t)?t.name:qu(Be,t)?cd(t)?function(t){return"max"===t?"greatest":"min"===t?"least":t}(t.property.name):t.property.name:null}function cd(t){return qu(Oe,t.object)&&"Math"===t.object.name}function ld(t,e,n){const{name:i}=t;if(qu(Be,n)&&n.property===t);else if(qu(Ve,n)&&n.key===t);else if(e.paramsRef.has(i))dd(t,e.paramsRef.get(i));else if(e.columnRef.has(i))hd(t,i,e,n);else if(Vt(e.params,i))dd(t,i);else{if(!Vt(Fp,i))return!0;fd(t,i)}}function ud(t,e,n,i,r){const s=0===n?i.table:n>0?i.join[n-1]:null,a=s&&s.column(e);s&&!a&&i.error(t,Yp),i.aggronly&&!i.$op&&i.error(t,Wp),mn(t,e,n,a,r)}function hd(t,e,n,i){const[r,s]=n.columnRef.get(e);ud(t,r,s,n,i)}function pd(t,e,n,i){i.params&&!Vt(i.params,e)&&i.error(t,"Invalid param reference"),dd(t,e)}function dd(t,e){t.type=je,t.name=e}function fd(t,e){t.type=Pe,t.name=e,t.raw=Fp[e]}function md(t,e,n){if(e===gn){const e=n.table;e||n.error(t,ed),bn(t,t.arguments.length?t.arguments.map((t=>{const i=n.param(t),r=It(i)?e.columnName(i):i;return e.column(r)||n.error(t,Yp),r})):e.columnNames())}else t.callee={type:"Function",name:e}}function yd(t,e){qu(Oe,t)?e.scope.add(t.name):qu("ArrayPattern",t)?t.elements.forEach((t=>yd(t,e))):qu(Fe,t)?t.properties.forEach((t=>yd(t.value,e))):e.error(t.id,"Unsupported variable declaration")}const gd={[Ue]:1,Op:1};function bd(t,e={}){const n=e.generate||Qe,i=e.compiler||dn,r=function(t){return(t.table?vd(t.table):t.join?{...vd(t.join[1]),...vd(t.join[0])}:{})||{}}(e),s={},a={},o=[],c=[];let l=0,u=-1;const h=e.join?i.join:1==e.index?i.expr2:i.expr,p={op(t){const e=function(t){let e=`${t.name}(${t.fields.concat(t.params).join(",")})`;if(t.frame){e+=`[${t.frame.map((t=>Number.isFinite(t)?Math.abs(t):-1))},${!!t.peers}]`}return e}(t);return a[e]||(t.id=++u,a[e]=t)},field(t){const e=n(t);return s[e]||(s[e]=++l)},param:t=>qu(Le,t)?t.value:i.param(n(t),r),value(t,i){o.push(t);const s=i.escape||(e.ast?function(t){return Du(t,null,{Column:Hu,Constant:Hu,Default:zu}),t}(i):h(n(i),r));c.push(s),gd[i.type]&&s!==i&&Nt(s)&&(s.field=i.name)},error(t,e,n=""){const i=t.start-6,r=t.end-6;St(`${e}: "${String(p.spec).slice(i,r)}"${n}`)}};Object.assign(p,e,{params:r});for(const[e,n]of yn(t))p.value(e+"",n.escape?Wu(p,n,r):nd(p,n));if(e.ast)return{names:o,exprs:c};const d=[];for(const t in s)d[s[t]]=i.expr(t,r);const f=Object.values(a);return f.forEach((t=>t.fields=t.fields.map((t=>d[t])))),{names:o,exprs:c,ops:f}}function vd(t){return t&&At(t.params)?t.params():{}}const _d="Expr",xd="ExprList",wd="ExprNumber",Sd="ExprObject",Id="JoinKeys",Ad="JoinValues",Td="Options",kd="OrderKeys",Md="SelectionList",Ed="TableRef",Cd="TableRefList",Nd="Descending",Od="Selection",Ld="Window";function Bd(t,e){return t&&t.expr?new Dd({...t,...e}):new Dd(e,t)}class Dd{constructor(t,e){this.expr=e,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...At(this.expr)?{func:!0}:{}}}}function Fd(t,e,n=0){const i=n?{field:!0,table:n}:{field:!0};return Bd(t,e?{expr:e,...i}:i)}function Vd(t,e){return(e=e&&At(e.query)?e.query():e)&&At(e.evaluate)?e.evaluate(null,t):t(e)}function Ud(t){return Nt(t)&&(vt(t.all)||vt(t.matches)||vt(t.not)||vt(t.range))}function Pd(t){return t&&At(t.toObject)?t.toObject():At(t)?{expr:String(t),func:!0}:vt(t)?t.map(Pd):Nt(t)?wu(t,(t=>Pd(t))):t}function Rd(t){return vt(t)?t.map(Rd):Nt(t)?vt(t.verbs)?rf.from(t):vt(t.all)?Cu():vt(t.range)?function(t,e){return Mu((n=>{let i=It(t)?t:n.columnIndex(t),r=It(e)?e:n.columnIndex(e);if(r<i){const t=r;r=i,i=t}return n.columnNames().slice(i,r+1)}),(()=>({range:[t,e]})))}(...t.range):vt(t.match)?(Lt(e=RegExp(...t.match))&&(e=RegExp(e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"))),Mu((t=>t.columnNames((t=>e.test(t)))),(()=>({matches:[e.source,e.flags]})))):vt(t.not)?Nu(t.not.map(Pd)):function(t){let e=t,n=t.expr;if(null!=n){if(!0===t.field?e=n=Fd(n):!0===t.func&&(e=n=function(t){const e=t=>t;return e.toString=()=>t,e}(n)),Nt(t.window)){const{frame:i,peers:r}=t.window;e=n=function(t,e,n){return Bd(t,{window:{frame:e||[-1/0,0],peers:!!n}})}(n,i,r)}!0===t.desc&&(e=function(t){return Bd(t,{desc:!0})}(n))}return t===e?wu(t,(t=>Rd(t))):e}(t):t;var e}function jd(t){const e=[];return _t(t).forEach((t=>{It(t)?e.push(t):Lt(t)?e.push(Fd(t,null)):Nt(t)&&t.expr||At(t)?e.push(t):St("Invalid key value: "+(t+""))})),e}function $d(t,e){return e<2?_t(t):t}const zd={[_d]:Qd,[xd]:Jd,[wd]:function(t){return It(t)?t:Wd(t)},[Sd]:Wd,[Id]:function(t){return vt(t)?t.map(Jd):Wd(t,{join:!0})},[Ad]:function(t){return vt(t)?t.map(((t,e)=>e<2?Jd(t):Wd(t,{join:!0}))):Wd(t,{join:!0})},[kd]:Jd,[Md]:function(t){return _t(t).map(Kd).flat()}};function Hd(t,e,n){return e===Td?t?function(t,e={}){const n={};for(const i in t){const r=t[i];n[i]=e[i]?Hd(r,e[i]):r}return n}(t,n):t:zd[e](t)}function qd(t){return{type:Ue,name:t}}function Yd(t){return{type:Ue,index:t}}function Wd(t,e){if(Lt(t))return function(t,e){return bd({expr:t},{...e,ast:!0}).exprs[0]}(t,e);if(t.expr){let n;if(!0===t.field?n=qd(t.expr):!0===t.func&&(n=Wd(t.expr,e)),n)return t.desc&&(n={type:Nd,expr:n}),t.window&&(n={type:Ld,expr:n,...t.window}),n}return Object.keys(t).map((n=>({...Wd(t[n],e),as:n})))}function Gd(t){const e=Od;return t.all?{type:e,operator:"all"}:t.not?{type:e,operator:"not",arguments:Jd(t.not)}:t.range?{type:e,operator:"range",arguments:Jd(t.range)}:t.matches?{type:e,operator:"matches",arguments:t.matches}:St("Invalid input")}function Kd(t){return Ud(t)?Gd(t):It(t)?Yd(t):Lt(t)?qd(t):Nt(t)?Object.keys(t).map((e=>({type:Ue,name:e,as:t[e]}))):St("Invalid input")}function Qd(t){return Ud(t)?Gd(t):It(t)?Yd(t):Lt(t)?qd(t):Nt(t)?Wd(t):St("Invalid input")}function Jd(t){return _t(t).map(Qd).flat()}function Zd(t){return t&&At(t.toAST)?t.toAST():t}class Xd{constructor(t,e=[],n=[]){this.verb=t,this.schema=e,e.forEach(((t,e)=>{const i=t.type,r=n[e],s=i===Id?vt(a=r)?a.map(jd):a:i===Ad?function(t){return vt(t)?t.map($d):t}(r):i===kd?function(t){const e=[];return t.forEach((t=>{const n=null!=t.expr?t.expr:t;if(Nt(n)&&!At(n))for(const t in n)e.push(n[t]);else t=It(n)?n:Lt(n)?Fd(t):At(n)?t:St("Invalid orderby field: "+t),e.push(t)})),e}(r):r;var a;this[t.name]=void 0!==s?s:t.default}))}static from(t){const e=ef[t.verb],n=(e.schema||[]).map((({name:e})=>Rd(t[e])));return e(...n)}evaluate(t,e){const n=this.schema.map((({name:t,type:n})=>{const i=this[t];return n===Ed?Vd(e,i):n===Cd?i.map((t=>Vd(e,t))):i}));return t[this.verb](...n)}toObject(){const t={verb:this.verb};return this.schema.forEach((({name:e})=>{t[e]=Pd(this[e])})),t}toAST(){const t={type:"Verb",verb:this.verb};return this.schema.forEach((({name:e,type:n,props:i})=>{t[e]=function(t,e,n){return e===Ed?Zd(t):e===Cd?t.map(Zd):Hd(Pd(t),e,n)}(this[e],n,i)})),t}}function tf(t,e){return Object.assign(((...n)=>new Xd(t,e,n)),{schema:e})}const ef={count:tf("count",[{name:"options",type:Td}]),derive:tf("derive",[{name:"values",type:Sd},{name:"options",type:Td,props:{before:Md,after:Md}}]),filter:tf("filter",[{name:"criteria",type:Sd}]),groupby:tf("groupby",[{name:"keys",type:xd}]),orderby:tf("orderby",[{name:"keys",type:kd}]),relocate:tf("relocate",[{name:"columns",type:Md},{name:"options",type:Td,props:{before:Md,after:Md}}]),rename:tf("rename",[{name:"columns",type:Md}]),rollup:tf("rollup",[{name:"values",type:Sd}]),sample:tf("sample",[{name:"size",type:wd},{name:"options",type:Td,props:{weight:_d}}]),select:tf("select",[{name:"columns",type:Md}]),ungroup:tf("ungroup"),unorder:tf("unorder"),reify:tf("reify"),dedupe:tf("dedupe",[{name:"keys",type:xd,default:[]}]),impute:tf("impute",[{name:"values",type:Sd},{name:"options",type:Td,props:{expand:xd}}]),fold:tf("fold",[{name:"values",type:xd},{name:"options",type:Td}]),pivot:tf("pivot",[{name:"keys",type:xd},{name:"values",type:xd},{name:"options",type:Td}]),spread:tf("spread",[{name:"values",type:xd},{name:"options",type:Td}]),unroll:tf("unroll",[{name:"values",type:xd},{name:"options",type:Td,props:{drop:xd}}]),lookup:tf("lookup",[{name:"table",type:Ed},{name:"on",type:Id},{name:"values",type:xd}]),join:tf("join",[{name:"table",type:Ed},{name:"on",type:Id},{name:"values",type:Ad},{name:"options",type:Td}]),cross:tf("cross",[{name:"table",type:Ed},{name:"values",type:Ad},{name:"options",type:Td}]),semijoin:tf("semijoin",[{name:"table",type:Ed},{name:"on",type:Id}]),antijoin:tf("antijoin",[{name:"table",type:Ed},{name:"on",type:Id}]),concat:tf("concat",[{name:"tables",type:Cd}]),union:tf("union",[{name:"tables",type:Cd}]),intersect:tf("intersect",[{name:"tables",type:Cd}]),except:tf("except",[{name:"tables",type:Cd}])};function nf(t){return new rf(null,null,t)}class rf extends wt{constructor(t,e,n){super(e),this._verbs=t||[],this._table=n}static from({verbs:t,table:e,params:n}){return new rf(t.map(Xd.from),n,e)}get[Symbol.toStringTag](){if(!this._verbs)return"Object";return`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:"")}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,e){t=t||e(this._table);for(const n of this._verbs)t=n.evaluate(t.params(this._params),e);return t}toObject(){return sf(this,"toObject")}toJSON(){return this.toObject()}toAST(){return sf(this,"toAST",{type:"Query"})}}function sf(t,e,n){return{...n,verbs:t._verbs.map((t=>t[e]())),...t._params?{params:t._params}:null,...t._table?{table:t._table}:null}}function af(t,e){return new rf(t._verbs.concat(e),t._params,t._table)}for(const t in ef){const e=ef[t];rf.prototype["__"+t]=function(t,...n){return af(t,e(...n))}}function of(t,e,...n){const i=["_","$"],r=i.slice(0,n.length);return r.push('"use strict"; const '+n.map(((t,e)=>t.map(((t,n)=>`${i[e]}${n} = ${i[e]}[${n}]`)).join(", "))).join(", ")+`; return (${t}) => ${e};`),Function(...r)(...n)}var cf=t=>t;const lf=[t=>"true"===t||"false"===t,t=>"false"!==t],uf=[t=>"NaN"===t||(t=+t)===t,t=>+t],hf=[te,t=>new Date(Date.parse(t))];function pf(t){const{decimal:e}=t;return e&&"."!==e?uf.map((t=>n=>t(n&&n.replace(e,".")))):uf}function df(t,e){const n=t.length;for(let i=0;i<n;++i){const n=t[i];if(null!=n&&!e(n))return!1}return!0}function ff(t,e=0){return Tt(t-e,(t=>`col${t+e+1}`))}function mf(t,e,n){let i=t();const r=i.length,s=+n.autoMax||1e3,a=Tt(r,(()=>[]));e=e?e.length<r?[...e,ff(r,e.length)]:e:ff(r);let o=0;for(;o<s&&i;++o,i=t())for(let t=0;t<r;++t)a[t].push(""===i[t]?null:i[t]);const c=function(t,e,n){const{parse:i={}}=n,r=!1===n.autoType;return t.map(((t,s)=>At(i[t])?i[t]:r?cf:function(t,e){const n=[lf,pf(e),hf],i=n.length;for(let e=0;e<i;++e){const[i,r]=n[e];if(df(t,i))return r}return cf}(e[s],n)))}(e,a,n);for(c.forEach(((t,e)=>{if(t===cf)return;const n=a[e];for(let e=0;e<o;++e)null!=n[e]&&(n[e]=t(n[e]))}));i;i=t())for(let t=0;t<r;++t)a[t].push(i[t]?c[t](i[t]):null);const l={};return e.forEach(((t,e)=>l[t]=a[e])),new Ou(l,e)}const yf={},gf={},bf=34,vf=10,_f=13;function xf(t,e={}){const n=function(t,{delimiter:e=",",skip:n,comment:i}){1!==e.length&&St(`Text "delimiter" should be a single character, found "${e}"`);const r=e.charCodeAt(0);let s,a=t.length,o=0,c=a<=0,l=!1;function u(){if(c)return gf;if(l)return l=!1,yf;const e=o;let n,i;if(t.charCodeAt(e)===bf){for(;o++<a&&t.charCodeAt(o)!==bf||t.charCodeAt(++o)===bf;);return(n=o)>=a?c=!0:(i=t.charCodeAt(o++))===vf?l=!0:i===_f&&(l=!0,t.charCodeAt(o)===vf&&++o),t.slice(e+1,n-1).replace(/""/g,'"')}for(;o<a;){if((i=t.charCodeAt(n=o++))===vf)l=!0;else if(i===_f)l=!0,t.charCodeAt(o)===vf&&++o;else if(i!==r)continue;return t.slice(e,n)}return c=!0,t.slice(e,a)}return t.charCodeAt(a-1)===vf&&--a,t.charCodeAt(a-1)===_f&&--a,function(t,e,n){let i=+e||0;for(;--i>=0;)t();return n?()=>{let e;for(;!e;){if(!n(e=t()))return e;e=null}}:t}((function(){if((s=u())!==gf){const t=[];for(;s!==yf&&s!==gf;)t.push(s),s=u();return t}}),n,i&&(t=>(t&&t[0]||"").startsWith(i)))}(t,e);return mf(n,!1!==e.header?n():e.names,e)}function wf(t){const e=t.length;for(let n=0;n<e;++n){const e=t.charCodeAt(n);if(e<48||e>57)return!1}return!0}function Sf(t,e){const n=Ut();return e.forEach(((e,i)=>{const r=Lt(e)?e:i;if(r){const e=t.column(i)||St(`Unrecognized column: ${i}`);n.add(r,e)}})),t.create(n)}function If(t,e,{before:n,after:i}={}){const r=null!=n,s=null!=i;r||s||St("relocate requires a before or after option."),r&&s&&St("relocate accepts only one of the before or after options."),e=ku(t,e);const a=[...ku(t,r?n:i).keys()],o=r?a[0]:a.pop(),c=new Map;return t.columnNames().forEach((t=>{const n=!e.has(t);if(t===o){s&&n&&c.set(t,t);for(const[t,n]of e)c.set(t,n);if(s)return}n&&c.set(t,t)})),Sf(t,c)}function Af(t,e=(t=>t),n=""){const i=t.length;if(!i)return"";let r=e(t[0],0);for(let s=1;s<i;++s)r+=n+e(t[s],s);return r}function Tf(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function kf(t){return ge(t)?t:+t}class Mf{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:function(t,e=0,n=t.length){let i=n?t[e++]:Rt;for(let r=e;r<n;++r)i>t[r]&&(i=t[r]);return i}(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:function(t,e=0,n=t.length){let i=n?t[e++]:Rt;for(let r=e;r<n;++r)i<t[r]&&(i=t[r]);return i}(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(Tf)),function(t,e){const n=t.length;if(!n)return Rt;if((e=+e)<=0||n<2)return kf(t[0]);if(e>=1)return kf(t[n-1]);const i=(n-1)*e,r=Math.floor(i),s=kf(t[r]);return ge(s)?s:s+(kf(t[r+1])-s)*(i-r)}(this._sorted,t)}}const Ef=(t,e,n)=>of(e,"{"+Af(t,((t,i)=>`_${i}.${n}(${e});`))+"}",t);function Cf(t,e){const{ops:n,output:i}=function(t,e){const n={},i=[];function r(t,s=[]){const a=t+":"+s;if(n[a])return n[a];const o=un(t),c=o.create(...s);return e<0&&o.stream&&o.stream.forEach((t=>r(t,[]))),o.req&&o.req.forEach((t=>r(t,[]))),n[a]=c,i.push(c),c}const s=t.map((t=>{const e=r(t.name,t.params);return e.output=t.id,e}));return{ops:i,output:s}}(t,e),r=t[0].fields,s=r.length;return new(0===s?Nf:1===s?Of:2===s?Lf:St("Unsupported field count: "+s))(r,n,i,e)}class Nf extends Bu{constructor(t,e,n,i){super(n),this._op=e,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach((e=>e.init(t))),t.values&&(t.list=new Mf),t}write(t,e,n){const i=this._outputs,r=i.length;for(let s=0;s<r;++s)e[i[s].output][n]=i[s].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class Of extends Nf{constructor(t,e,n,i){super(t,e,n,i);const r=["state","v1","v2"];this._add=Ef(e,r,"add"),this._rem=Ef(e,r,"rem")}add(t,e,n){const i=this._fields[0](e,n);++t.count,Ht(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,e,n){const i=this._fields[0](e,n);--t.count,Ht(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class Lf extends Nf{constructor(t,e,n,i){super(t,e,n,i);const r=["state","v1","v2"];this._add=Ef(e,r,"add"),this._rem=Ef(e,r,"rem")}add(t,e,n){const i=this._fields[0](e,n),r=this._fields[1](e,n);++t.count,Ht(i)&&Ht(r)&&(++t.valid,t.list&&t.list.add([i,r]),this._add(t,i,r))}rem(t,e,n){const i=this._fields[0](e,n),r=this._fields[1](e,n);--t.count,Ht(i)&&Ht(r)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,r))}}function Bf(t,e,n){if(e.length){const i=t.data(),{keys:r}=t.groups()||{},s=Df(t,e),a=r?(t,e)=>s[t][r[e]]:t=>s[t][0];n=n.map((t=>e=>t(e,i,a)))}return n}function Df(t,e,n){if(!e.length)return n;const i=Ff(e),r=t.groups(),s=r?r.size:1;return n=n||Tt(e.length,(()=>Array(s))),s>1?i.forEach((e=>{const i=Uf(t,e,r);for(let t=0;t<s;++t)e.write(i[t],n,t)})):i.forEach((e=>{const i=Vf(t,e);e.write(i,n,0)})),n}function Ff(t,e){const n=[],i={};for(const e of t){const t=e.fields.map((t=>t+"")).join(",");(i[t]||(i[t]=[])).push(e)}for(const t in i)n.push(Cf(i[t],e));return n}function Vf(t,e){const n=e.init(),i=t.totalRows(),r=t.data(),s=t.mask();if(t.isOrdered()){const s=t.indices();for(let t=0;t<i;++t)e.add(n,s[t],r)}else if(s)for(let t=s.next(0);t>=0;t=s.next(t+1))e.add(n,t,r);else for(let t=0;t<i;++t)e.add(n,t,r);return n}function Uf(t,e,n){const{keys:i,size:r}=n,s=Tt(r,(()=>e.init())),a=t.data();if(t.isOrdered()){const n=t.indices(),r=n.length;for(let t=0;t<r;++t){const r=n[t];e.add(s[i[r]],r,a)}}else if(t.isFiltered()){const n=t.mask();for(let t=n.next(0);t>=0;t=n.next(t+1))e.add(s[i[t]],t,a)}else{const n=t.totalRows();for(let t=0;t<n;++t)e.add(s[i[t]],t,a)}return s}function Pf(t,e){const{get:n,names:i,rows:r,size:s}=e,a=i.length;for(let e=0;e<a;++e){const a=t.add(i[e],Array(s)),o=n[e];for(let t=0;t<s;++t)a[t]=o(r[t])}}function Rf(t){return{left(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){const s=i+r>>>1;t(e[s],n)<0?i=s+1:r=s}return i},right(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){const s=i+r>>>1;t(e[s],n)>0?r=s:i=s+1}return i}}}const jf=Rf(Tf);const $f=t=>(t.frame||[null,null]).map((t=>Number.isFinite(t)?Math.abs(t):null)),zf=t=>!!t.peers;function Hf(t,e,n,i={},r){const s=t.data(),a=function(t,e){const n={};return t.forEach((t=>{const e=$f(t),i=zf(t),r=`${e},${i}`,{aggOps:s,winOps:a}=n[r]||(n[r]={frame:e,peers:i,aggOps:[],winOps:[]});on(t.name)?s.push(t):a.push(function(t){const{id:e,name:n,fields:i=[],params:r=[]}=t,s=hn(n).create(...r);return i.length&&(s.get=i[0]),s.id=e,s}(t))})),Object.values(n).map((t=>function(t,e,n,i,r){let s,a,o,c,l;const u=t=>a[t-1]===a[t],h=i.length,p=r.length,d=i.length?of(["w","r","k"],"{"+Af(i,((t,e)=>`r[_${e}.id][k]=_${e}.value(w,_${e}.get);`))+"}",i):()=>{},f={i0:0,i1:0,index:0,size:0,peer:u,init(t,e,n,u){f.index=f.i0=f.i1=0,f.size=e.length,s=t,a=e,c=n,l=u,o=r?r.map((t=>t.init())):null;for(let t=0;t<h;++t)i[t].init();return f},value:(e,n)=>n(s[e],t),step(i){const[h,m]=e,y=f.size,g=f.i0,b=f.i1;f.i0=null!=h?Math.max(0,i-Math.abs(h)):0,f.i1=null!=m?Math.min(y,i+Math.abs(m)+1):y,f.index=i,n&&(f.i0>0&&u(f.i0)&&(f.i0=jf.left(a,a[f.i0])),f.i1<y&&u(f.i1)&&(f.i1=jf.right(a,a[f.i1-1])));for(let e=0;e<p;++e){const n=r[e],i=o[e];for(let e=g;e<f.i0;++e)n.rem(i,s[e],t);for(let e=b;e<f.i1;++e)n.add(i,s[e],t);n.write(i,c,l)}return d(f,c,l),c}};return f}(e,t.frame,t.peers,t.winOps,Ff(t.aggOps,null!=t.frame[0]?-1:1))))}(r,s),o=a.length,c=of(["r","d","op"],"{"+Af(e,((t,e)=>`_${e}[r] = $${e}(r, d, op);`))+"}",e,n);t.partitions().forEach(((e,n)=>{const r=e.length,l=function(t,e){if(t.isOrdered()){const n=t.comparator(),i=t.data(),r=e.length,s=new Uint32Array(r);for(let t=1,a=0;t<r;++t)s[t]=n(e[t-1],e[t],i)?++a:a;return s}return e}(t,e);for(let t=0;t<o;++t)a[t].init(e,l,i,n);const u=t=>i[t][n];for(let t=0;t<r;++t){for(let e=0;e<o;++e)a[e].step(t);c(e[t],s,u)}}))}function qf(t){return cn(t.name)||t.frame&&(Number.isFinite(t.frame[0])||Number.isFinite(t.frame[1]))}function Yf(t,{names:e,exprs:n,ops:i},r={}){const s=t.totalRows(),a=Ut(r.drop?null:t),o=e.map((t=>a.add(t,Array(s)))),[c,l]=function(t){const e=[],n=[],i=t.length;for(let r=0;r<i;++r){const i=t[r];i.id=r,(qf(i)?n:e).push(i)}return[e,n]}(i),u=t.isGrouped()?t.groups().size:1,h=Df(t,c,Tt(i.length,(()=>Array(u))));return l.length?Hf(t,o,n,h,l):function(t,e,n,i){const r=t.mask(),s=t.data(),{keys:a}=t.groups()||{},o=a?(t,e)=>i[t][a[e]]:t=>i[t][0],c=e.length;for(let i=0;i<c;++i){const a=n[i],c=e[i];if(r)for(let t=r.next(0);t>=0;t=r.next(t+1))c[t]=a(t,s,o);else{const e=t.totalRows();for(let t=0;t<e;++t)c[t]=a(t,s,o)}}}(t,o,n,h),t.create(a)}const Wf=2147483648;class Gf{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let e=0;for(let n=0;n<t;++n)for(let t=this._bits[n];t;++e)t&=t-1;return e}get(t){return this._bits[t>>5]&Wf>>>t}set(t){this._bits[t>>5]|=Wf>>>t}clear(t){this._bits[t>>5]&=~(Wf>>>t)}scan(t){for(let e=this.next(0);e>=0;e=this.next(e+1))t(e)}next(t){const e=this._bits,n=e.length;let i=t>>5,r=e[i]&4294967295>>>t;for(;i<n;r=e[++i])if(0!==r)return(i<<5)+Math.clz32(r);return-1}nth(t){let e=this.next(0);for(;t--&&e>=0;)e=this.next(e+1);return e}not(){const t=this._bits,e=t.length;for(let n=0;n<e;++n)t[n]=~t[n];const n=this._size%32;return n&&(t[e-1]&=Wf>>n-1),this}and(t){if(t){const e=this._bits,n=t._bits,i=e.length;for(let t=0;t<i;++t)e[t]&=n[t]}return this}or(t){if(t){const e=this._bits,n=t._bits,i=e.length;for(let t=0;t<i;++t)e[t]|=n[t]}return this}}function Kf(t,{names:e=[],exprs:n=[],ops:i=[]},r={}){if(!e.length)return t;const s=r.limit>0?+r.limit:1/0,a=r.index?!0===r.index?"index":r.index+"":null,o=new Set(r.drop),c=Bf(t,i,n),l=Ut(),u=new Set(e),h=[],p=[],d=[];t.columnNames().forEach((e=>{if(!o.has(e)){const n=l.add(e,[]);u.has(e)||(h.push(t.column(e)),p.push(n))}})),e.forEach((t=>{o.has(t)||(l.has(t)||l.add(t,[]),d.push(l.data[t]))}));const f=a?l.add(a,[]):null;let m=0;const y=h.length,g=d.length,b=(t,e)=>{for(let n=0;n<y;++n)p[n].length=m+e,p[n].fill(h[n].get(t),m,m+e)},v=f?(t,e)=>{for(let n=0;n<e;++n)f[t+n]=n}:()=>{};if(1===g){const e=c[0],n=d[0];t.scan(((t,i)=>{const r=_t(e(t,i)),a=Math.min(r.length,s);b(t,a);for(let t=0;t<a;++t)n[m+t]=r[t];v(m,a),m+=a}))}else t.scan(((t,e)=>{let n=0;const i=c.map((i=>{const r=_t(i(t,e));return n=Math.min(Math.max(n,r.length),s),r}));b(t,n);for(let t=0;t<g;++t){const e=d[t],r=i[t];for(let t=0;t<n;++t)e[m+t]=r[t]}v(m,n),m+=n}));return t.create(l.new())}function Qf(t,e,n,i={window:!1}){const r=new Map,s=n=>{Lt(n=It(n)?e.columnName(n):n)?r.set(n,Fd(n)):At(n)?ku(e,n).forEach(s):Nt(n)?Tu(r,n):St(`Invalid ${t} value: ${n+""}`)};return _t(n).forEach(s),i.preparse&&i.preparse(r),bd(r,{table:e,...i})}function Jf(t,e,n,i){const r=n&&n.length;return function(t,{names:e,exprs:n,ops:i},r){const s=Bf(t,i,n),a=r?null:Ut(t),o=t.totalRows();return e.forEach(((e,n)=>{const i=t.column(e),c=r?i.data:a.add(e,Array(o)),l=s[n];t.scan((t=>{const e=i.get(t);c[t]=Ht(e)?e:l(t)}))})),r?t:t.create(a)}(r?function(t,e,n){const i=t.groups(),r=t.data(),s=(i?i.names:[]).concat(e),a=(i?i.get:[]).concat(e.map((e=>t.getter(e)))),o=new Set,c=Ze(a);t.scan(((t,e)=>o.add(c(t,e))));const l=t.columnNames(),u=Ut(),h=l.map((t=>u.add(t,[])));l.forEach(((e,n)=>{const i=r[e],s=h[n];t.scan((t=>s.push(i.get(t))))}));const p=Ze(a.map(((t,e)=>t=>t[e]))),d=of("v","{"+h.map(((t,e)=>`_${e}.push(v[$${e}]);`)).join("")+"}",h,l.map((t=>s.indexOf(t))));if(i){let t=i.keys.length;const e=n.reduce(((t,e)=>t*e.length),i.size),r=new Uint32Array(e+(t-o.size));r.set(i.keys),Zf(i,n,((e,n)=>{o.has(p(e))||(d(e),r[t++]=n[0])})),u.groupby({...i,keys:r})}else Zf(i,n,(t=>{o.has(p(t))||d(t)}));return t.create(u.new())}(t,n,i):t,e,r)}function Zf(t,e,n){const i=t?t.get.length:0,r=t?1:0,s=r+e.length,a=new Int32Array(s),o=new Int32Array(s),c=[];if(t){const{get:e,rows:n,size:r}=t;a[0]=r,c.push(((t,r)=>{const s=n[r];for(let n=0;n<i;++n)t[n]=e[n](s)}))}e.forEach(((t,e)=>{const n=e+i;a[e+r]=t.length,c.push(((e,i)=>e[n]=t[i]))}));const l=Array(i+e.length);for(let t=0;t<s;++t)c[t](l,0);n(l,o);for(let t=s-1;t>=0;){const e=++o[t];e<a[t]?(c[t](l,e),n(l,o),t=s-1):(o[t]=0,c[t](l,0),--t)}}function Xf(t,{names:e,exprs:n,ops:i}){const r=Ut(),s=t.groups();return s&&Pf(r,s),function(t,e,n,i=[],r){if(!e.length)return;const s=n?n.size:1,a=(t,e)=>i[t][e],o=t.length;for(let n=0;n<o;++n){const o=e[n];if(null!=o.field)r.add(t[n],i[o.field]);else if(s>1){const e=r.add(t[n],Array(s));for(let t=0;t<s;++t)e[t]=o(t,null,a)}else r.add(t[n],[o(0,null,a)])}}(e,n,s,Df(t,i),r),t.create(r.new())}function tm(t){t.forEach(((e,n)=>e.field?t.set(n,Ie(e+"")):0))}function em(t,e){const n=new Map;return t.scan(((t,i)=>{const r=e(t,i);null!=r&&r==r&&n.set(r,t)})),n}function nm(t,e,n,{names:i,exprs:r},s={}){const a=t.data(),o=t.indices(!1),c=o.length,l=new Int32Array(c),u=e.data(),h=e.indices(!1),p=h.length,d=new Int32Array(p),f=i.length,m=Ut(),y=Array(f),g=Array(f);for(let t=0;t<i.length;++t)y[t]=m.add(i[t],[]),g[t]=r[t];const b=function(t,e){const n=["i","a","j","b"];return of(n,"{"+Af(t,((t,e)=>`_${e}.push($${e}(${n}));`))+"}",t,e)}(y,g);if((vt(n)?rm:im)(b,n,a,u,o,h,l,d,c,p),s.left)for(let t=0;t<c;++t)l[t]||b(o[t],a,-1,u);if(s.right)for(let t=0;t<p;++t)d[t]||b(-1,a,h[t],u);return t.create(m.new())}function im(t,e,n,i,r,s,a,o,c,l){for(let u=0;u<c;++u){const c=r[u];for(let r=0;r<l;++r){const l=s[r];e(c,n,l,i)&&(t(c,n,l,i),a[u]=1,o[r]=1)}}}function rm(t,[e,n],i,r,s,a,o,c,l,u){let h,p,d,f,m,y,g,b,v=t;l>=u?(h=i,p=e,d=o,f=s,m=r,y=n,g=c,b=a):(h=r,p=n,d=c,f=a,m=i,y=e,g=o,b=s,v=(e,n,i,r)=>t(i,r,e,n));const _=function(t,e,n){const i=new Map,r=t.length;for(let s=0;s<r;++s){const r=n(t[s],e);null!=r&&r==r&&(i.has(r)?i.get(r).push(s):i.set(r,[s]))}return i}(b,m,y),x=f.length;for(let t=0;t<x;++t){const e=f[t],n=_.get(p(e,h));if(n){const i=n.length;for(let t=0;t<i;++t){const i=n[t];v(e,h,b[i],m),g[i]=1}d[t]=1}}}function sm(t,e,n){const i=new Map;_t(n).forEach(((n,r)=>{Lt(n=It(n)?e.columnName(n):n)?i.set(r,Fd(n)):At(n)||Nt(n)&&n.expr?i.set(r,n):St(`Invalid ${t} key value: ${n+""}`)}));return Ze(bd(i,{table:e,aggregate:!1,window:!1}).exprs,!0)}function am(t,e,n){if(n)Lt(n)?n=[n,n]:vt(n)&&1===n.length&&(n=[n[0],n[0]]);else{const i=function(t,e){const n=new Set(e);return t.filter((t=>n.has(t)))}(t.columnNames(),e.columnNames());i.length||St("Natural join requires shared column names."),n=[i,i]}return n}function om(t,e,n,i){return n.length!==i.length&&St("Mismatched number of join keys"),[sm("join",t,n),sm("join",e,i)]}const cm={aggregate:!1,window:!1,index:1};function lm(t,e,n,i,r={}){n=am(t,e,n);const s={join:[t,e]};let a;if(vt(n)){const[s,o]=n.map(_t);a=om(t,e,s,o),i||(i=function(t,e,n,i){const r=[];e.forEach(((t,e)=>Lt(t)&&t===n[e]?r.push(t):0));const s=Nu(r);if(i.left&&i.right){const e=new Set(r);return[t.columnNames().map((t=>{const n=`[${be(t)}]`;return e.has(t)?{[t]:`(a, b) => a${n} == null ? b${n} : a${n}`}:t})),s]}return i.right?[s,Cu()]:[Cu(),s]}(t,s,o,r))}else a=bd({on:n},s).exprs[0],i||(i=[Cu(),Cu()]);return nm(t,e,a,function(t,e,n,i,r=[]){if(vt(n)){let s,a,o,c=n.length;s=a=o={names:[],exprs:[]},c--&&(s=Qf("join",t,n[0],i)),c--&&(a=Qf("join",e,n[1],cm)),c--&&(o=bd(n[2],i));const l=new Set,u=new Set(s.names);return a.names.forEach((t=>{u.has(t)&&l.add(t)})),l.size&&(um(s.names,l,r[0]||"_1"),um(a.names,l,r[1]||"_2")),{names:s.names.concat(a.names,o.names),exprs:s.exprs.concat(a.exprs,o.exprs)}}return bd(n,i)}(t,e,i,s,r&&r.suffix),r)}function um(t,e,n){t.forEach(((i,r)=>e.has(i)?t[r]=i+n:0))}function hm(t,e,n,[i,r]){const s=em(n,r);e.scan(((e,n)=>{s.get(i(e,n))>=0&&t.set(e)}))}function pm(t,e,n,i){const r=e.numRows(),s=n.numRows(),a=e.data(),o=n.data();if(e.isFiltered()||n.isFiltered()){const c=e.indices(!1),l=n.indices(!1);for(let e=0;e<r;++e){const n=c[e];for(let e=0;e<s;++e)if(i(n,a,l[e],o)){t.set(n);break}}}else for(let e=0;e<r;++e)for(let n=0;n<s;++n)if(i(e,a,n,o)){t.set(e);break}}function dm(t,e,n,i){n=am(t,e,n);return function(t,e,n,i={}){const r=new Gf(t.totalRows());return(vt(n)?hm:pm)(r,t,e,n),i.anti&&r.not().and(t.mask()),t.create({filter:r})}(t,e,vt(n)?om(t,e,...n.map(_t)):bd({on:n},{join:[t,e]}).exprs[0],i)}const fm=(t,e)=>null!=t?t:e;function mm(t,e,n,i={}){const{keys:r,keyColumn:s}=function(t,e,n){const i=n.limit>0?+n.limit:1/0,r=fm(n.sort,!0),s=fm(n.keySeparator,"_"),a=Bf(t,e.ops,e.exprs),o=1===a.length?a[0]:(t,e)=>a.map((n=>n(t,e))).join(s),c=Array(t.totalRows());t.scan(((t,e)=>c[t]=o(t,e)));const l=Df(t.ungroup(),[{id:0,name:"array_agg_distinct",fields:[t=>c[t]],params:[]}])[0][0],u=r?l.sort():l;return{keys:Number.isFinite(i)?u.slice(0,i):u,keyColumn:c}}(t,e,i),a=fm(i.valueSeparator,"_"),o=n.names.length>1?(t,e)=>e+a+r[t]:t=>r[t],c=r.map((e=>Df(t,n.ops.map((t=>{if("count"===t.name){const n=t=>e===s[t]?1:NaN;return n.toString=()=>e+":1",{...t,name:"sum",fields:[n]}}const n=t.fields.map((t=>{const n=(n,i)=>e===s[n]?t(n,i):NaN;return n.toString=()=>e+":"+t,n}));return{...t,fields:n}})))));return t.create(function({names:t,exprs:e},n,i,r){const s=i?i.size:1,a=Ut(),o=r.length,c=t.length;let l;const u=(t,e)=>l[t][e];i&&Pf(a,i);for(let i=0;i<c;++i){const c=e[i];if(null!=c.field)for(let e=0;e<o;++e)a.add(n(e,t[i]),r[e][c.field]);else if(s>1)for(let e=0;e<o;++e){l=r[e];const o=a.add(n(e,t[i]),Array(s));for(let t=0;t<s;++t)o[t]=c(t,null,u)}else for(let e=0;e<o;++e)l=r[e],a.add(n(e,t[i]),[c(0,null,u)])}return a.new()}(n,o,t.groups(),c))}function ym(t){t.forEach(((e,n)=>e.field?t.set(n,xe(e+"")):0))}function gm(t,e){return Xf(t,bd(e,{table:t,aggronly:!0,window:!1}))}function bm(t,e,n,i){return(e?i?_m:vm:i?wm:xm)(t.length,t,n,i)}function vm(t,e,n){const i=n.length;for(let r=0;r<t;++r)e[r]=n[i*he()|0];return e}function _m(t,e,n,i){const r=n.length,s=new Float64Array(r);let a=0;for(let t=0;t<r;++t)s[t]=a+=i(n[t]);const o=Rf(Tf).right;for(let i=0;i<t;++i)e[i]=n[o(s,a*he())];return e}function xm(t,e,n){const i=n.length;if(t>=i)return n;for(let i=0;i<t;++i)e[i]=n[i];for(let r=t;r<i;++r){const i=r*he();i<t&&(e[0|i]=n[r])}return e}function wm(t,e,n,i){const r=n.length;if(t>=r)return n;const s=new Float32Array(r),a=new Uint32Array(r);for(let t=0;t<r;++t)a[t]=t,s[t]=-Math.log(he())/i(n[t]);a.sort(((t,e)=>s[t]-s[e]));for(let i=0;i<t;++i)e[i]=n[a[i]];return e}function Sm(t,e,n,i={}){const{replace:r,shuffle:s}=i,a=t.partitions(!1);let o=0;e=a.map(((t,n)=>{let i=e(n);return o+=i=r?i:Math.min(t.length,i),i}));const c=new Uint32Array(o);let l=0;return a.forEach(((t,i)=>{const s=e[i],a=c.subarray(l,l+=s);r||s!==t.length?bm(a,r,t,n):a.set(t)})),!1!==s&&(a.length>1||!r)&&function(t,e=0,n=t.length){let i=n-(e=+e);for(;i;){const n=he()*i--|0,r=t[i+e];t[i+e]=t[n+e],t[n+e]=r}}(c),t.reify(c)}const Im=t=>e=>t.get(e)||0;function Am(t,{names:e,exprs:n,ops:i=[]},r={}){if(0===e.length)return t;const s=1===e.length&&r.as||[],a=null==r.drop||!!r.drop,o=null==r.limit?s.length||1/0:Math.max(1,+r.limit||1),c=Bf(t,i,n),l=Ut(),u=e.reduce(((t,e,n)=>t.set(e,n)),new Map),h=(e,n)=>{const i=function(t,e,n){const i=t.totalRows(),r=[];return t.scan(((t,s)=>{const a=_t(e(t,s)),o=Math.min(a.length,n);for(;r.length<o;)r.push(Array(i).fill(Rt));for(let e=0;e<o;++e)r[e][t]=a[e]})),r}(t,c[e],o),r=i.length;for(let t=0;t<r;++t)l.add(s[t]||`${n}_${t+1}`,i[t])};return t.columnNames().forEach((e=>{u.has(e)?(a||l.add(e,t.column(e)),h(u.get(e),e),u.delete(e)):l.add(e,t.column(e))})),u.forEach(h),t.create(l)}function Tm(t,{names:e=[],exprs:n=[],ops:i=[]}){const r=e.length;if(0===r)return null;if(1===r&&!t.isFiltered()&&n[0].field){const i=t.column(n[0].field);if(i.groups)return i.groups(e)}let s=Bf(t,i,n);const a=Ze(s),o=t.totalRows(),c=new Uint32Array(o),l={},u=[],h=t.data(),p=t.mask();if(p)for(let t=p.next(0);t>=0;t=p.next(t+1)){const e=a(t,h)+"",n=l[e];c[t]=null!=n?n:l[e]=u.push(t)-1}else for(let t=0;t<o;++t){const e=a(t,h)+"",n=l[e];c[t]=null!=n?n:l[e]=u.push(t)-1}return i.length||(s=s.map((t=>e=>t(e,h)))),{keys:c,get:s,names:e,rows:u,size:u.length}}const km=(t,e,n,i)=>`((u = ${t}) < (v = ${e}) || u == null) && v != null ? ${n}\n    : (u > v || v == null) && u != null ? ${i}\n    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}\n    : v !== v && u === u ? ${i} : `;var Mm={__antijoin:(t,e,n)=>dm(t,e,n,{anti:!0}),__count:(t,e={})=>gm(t,{[e.as||"count"]:we()}),__cross:(t,e,n,i)=>lm(t,e,(()=>!0),n,{...i,left:!0,right:!0}),__concat:function(t,e){const n=t.numRows(),i=n+e.reduce(((t,e)=>t+e.numRows()),0);if(n===i)return t;const r=[t,...e],s=Ut();return t.columnNames().forEach((t=>{const e=Array(i);let n=0;r.forEach((i=>{const r=i.column(t)||{get:()=>Rt};i.scan((t=>e[n++]=r.get(t)))})),s.add(t,e)})),t.create(s.new())},__dedupe:function(t,e=[]){return t.groupby(e.length?e:t.columnNames()).filter("row_number() === 1").ungroup().reify()},__derive:function(t,e,n={}){const i=Yf(t,bd(e,{table:t}),n);return n.drop||null==n.before&&null==n.after?i:If(i,Object.keys(e).filter((e=>!t.column(e))),n)},__except:function(t,e){if(0===e.length)return t;const n=t.columnNames();return e.reduce(((t,e)=>t.antijoin(e.select(n))),t).dedupe()},__filter:function(t,e){const n=bd({p:e},{table:t});let i=n.exprs[0];if(n.ops.length){const{data:e}=Yf(t,n,{drop:!0}).column("p");i=t=>e[t]}return function(t,e){const n=t.totalRows(),i=t.mask(),r=t.data(),s=new Gf(n);if(i)for(let t=i.next(0);t>=0;t=i.next(t+1))e(t,r)&&s.set(t);else for(let t=0;t<n;++t)e(t,r)&&s.set(t);return t.create({filter:s})}(t,i)},__fold:function(t,e,n){return function(t,{names:e=[],exprs:n=[],ops:i=[]},r={}){if(0===e.length)return t;const[s="key",a="value"]=r.as||[],o=Bf(t,i,n);return Kf(t,{names:[s,a],exprs:[()=>e,(t,e)=>o.map((n=>n(t,e)))]},{...r,drop:e})}(t,Qf("fold",t,e),n)},__impute:function(t,e,n={}){if((e=bd(e,{table:t})).names.forEach((e=>t.column(e)?0:St(`Invalid impute column ${be(e)}`))),n.expand){const i={preparse:tm,aggronly:!0},r=Qf("impute",t,n.expand,i),s=Xf(t.ungroup(),r);return Jf(t,e,r.names,r.names.map((t=>s.get(t,0))))}return Jf(t,e)},__intersect:function(t,e){const n=t.columnNames();return e.length?e.reduce(((t,e)=>t.semijoin(e.select(n))),t).dedupe():t.reify([])},__join:lm,__lookup:function(t,e,n,i){return function(t,e,[n,i],{names:r,exprs:s,ops:a}){const o=Ut(t),c=t.totalRows();r.forEach((t=>o.add(t,Array(c).fill(Rt))));const l=em(e,i),u=of(["lr","rr","data"],"{"+Af(r,((t,e)=>`_[${e}][lr] = $[${e}](rr, data);`))+"}",r.map((t=>o.data[t])),Bf(e,a,s)),h=e.data();return t.scan(((t,e)=>{const i=l.get(n(t,e));i>=0&&u(t,i,h)})),t.create(o)}(t,e,[sm("lookup",t,(n=am(t,e,n))[0]),sm("lookup",e,n[1])],Qf("lookup",e,i))},__pivot:function(t,e,n,i){return mm(t,Qf("fold",t,e),Qf("fold",t,n,{preparse:ym,aggronly:!0}),i)},__relocate:If,__rename:function(t,e){const n=new Map;return t.columnNames((t=>(n.set(t,t),0))),Sf(t,ku(t,e,n))},__rollup:gm,__sample:function(t,e,n={}){return Sm(t,function(t,e){return It(e)?()=>e:Im(Xf(t,bd({size:e},{table:t,window:!1})).column("size"))}(t,e),function(t,e){return null==e?null:(e=It(e)?t.columnName(e):e,Im(Lt(e)?t.column(e):Yf(t,bd({w:e},{table:t}),{drop:!0}).column("w")))}(t,n.weight),n)},__select:function(t,e){return Sf(t,ku(t,e))},__semijoin:dm,__spread:function(t,e,n){return Am(t,Qf("spread",t,e),n)},__union:function(t,e){return t.concat(e).dedupe()},__unroll:function(t,e,n){return Kf(t,Qf("unroll",t,e),n&&n.drop?{...n,drop:Qf("unroll",t,n.drop).names}:n)},__groupby:function(t,e){return function(t,e){return t.create({groups:Tm(t,e)})}(t,Qf("groupby",t,e))},__orderby:function(t,e){return function(t,e){return t.create({order:e})}(t,function(t,e){let n=-1;const i=new Map,r=t=>i.set(++n+"",t);return e.forEach((e=>{const n=null!=e.expr?e.expr:e;if(Nt(n)&&!At(n))for(const t in n)r(n[t]);else r(It(n)?Fd(e,t.columnName(n)):Lt(n)?Fd(e):At(n)?e:St("Invalid orderby field: "+(e+"")))})),function(t,e){const n=[],i=[],r=[];let s=null,a="0",o="0";t.isGrouped()&&(s=t.groups().keys,a="ka",o="kb");const{ops:c}=bd(e,{table:t,value:(t,e)=>{if(n.push(t),e.escape){const t=t=>`fn[${r.length}](${t}, data)`;i.push([t("a"),t("b")]),r.push(e.escape)}else i.push([Qe(e,{index:"a",op:a}),Qe(e,{index:"b",op:o})])},window:!1}),l=Df(t,c),u=(t,e)=>l[t][e],h=n.length;let p="return (a, b) => {"+(u&&t.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let t=0;t<h;++t){const r=e.get(n[t]).desc?-1:1,[s,a]=i[t];p+=km(s,a,-r,r)}return p+="0;};",Function("op","keys","fn","data",p)(u,s,r,t.data())}(t,i)}(t,e))},__ungroup:function(t){return t.isGrouped()?t.create({groups:null}):t},__unorder:function(t){return t.isOrdered()?t.create({order:null}):t},__reduce:function(t,e){const n=Ut(),i=t.groups(),{get:r,names:s=[],rows:a,size:o=1}=i||{},c=new Uint32Array(o+1);s.forEach((t=>n.add(t,null)));const l=i?Uf(t,e,i):[Vf(t,e)];e.outputs().map((t=>n.add(t,[])));const u=c.length-1;let h=0;for(let t=0;t<u;++t)h+=c[t+1]=e.write(l[t],n.data,c[t]);if(i){const e=t.data();s.forEach(((t,i)=>{const s=n.data[t]=Array(h),l=r[i];for(let t=0,n=0;t<o;++t)s.fill(l(a[t],e),n,n+=c[t+1])}))}return t.create(n.new())}};function Em(t,e){return Ou.new(t,e)}function Cm(t,e={}){const n=e.using||xf;return fetch(t,e.fetch).then((t=>t[e.as||"text"]())).then((t=>n(t,e)))}function Nm(t,e){return vt(t)?function(t,e){return Ou.from(t,e)}(t):function(t,e={}){const n=Iu(e.autoType);Lt(t)&&(t=JSON.parse(t));let i,r=t.data;if(Nt(r)&&!zt(r)?t.schema&&t.schema.fields&&(i=t.schema.fields.map((t=>t.name))):r=t,n||e.parse){const t=e.parse||{};for(const e in r){const i=r[e],s=i.length;if(t[e])for(let n=0;n<s;++n)i[n]=t[e](i[n]);else if(n)for(let t=0;t<s;++t){const e=i[t];Lt(e)&&te(e)&&!wf(e)&&(i[t]=new Date(e))}}}return new Ou(r,i)}(t,e)}function Om(t){return Bd(t,{escape:!0,toString(){St("Escaped values can not be serialized.")}})}function Lm(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Bm(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Dm(t){let e,n,i;function r(t,i,r=0,s=t.length){if(r<s){if(0!==e(i,i))return s;do{const e=r+s>>>1;n(t[e],i)<0?r=e+1:s=e}while(r<s)}return r}return 2!==t.length?(e=Lm,n=(e,n)=>Lm(t(e),n),i=(e,n)=>t(e)-n):(e=t===Lm||t===Bm?t:Fm,n=t,i=t),{left:r,center:function(t,e,n=0,s=t.length){const a=r(t,e,n,s-1);return a>n&&i(t[a-1],e)>-i(t[a],e)?a-1:a},right:function(t,i,r=0,s=t.length){if(r<s){if(0!==e(i,i))return s;do{const e=r+s>>>1;n(t[e],i)<=0?r=e+1:s=e}while(r<s)}return r}}}function Fm(){return 0}Object.assign(Ou.prototype,Mm),Ou.prototype;const Vm=Dm(Lm).right;Dm((function(t){return null===t?NaN:+t})).center;var Um=Vm;class Pm extends Map{constructor(t,e=jm){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(Rm(this,t))}has(t){return super.has(Rm(this,t))}set(t,e){return super.set(function({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}(this,t),e)}delete(t){return super.delete(function({_intern:t,_key:e},n){const i=e(n);t.has(i)&&(n=t.get(i),t.delete(i));return n}(this,t))}}function Rm({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function jm(t){return null!==t&&"object"==typeof t?t.valueOf():t}const $m=Math.sqrt(50),zm=Math.sqrt(10),Hm=Math.sqrt(2);function qm(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),s=i/Math.pow(10,r),a=s>=$m?10:s>=zm?5:s>=Hm?2:1;let o,c,l;return r<0?(l=Math.pow(10,-r)/a,o=Math.round(t*l),c=Math.round(e*l),o/l<t&&++o,c/l>e&&--c,l=-l):(l=Math.pow(10,r)*a,o=Math.round(t/l),c=Math.round(e/l),o*l<t&&++o,c*l>e&&--c),c<o&&.5<=n&&n<2?qm(t,e,2*n):[o,c,l]}function Ym(t,e,n){return qm(t=+t,e=+e,n=+n)[2]}function Wm(t,e,n){n=+n;const i=(e=+e)<(t=+t),r=i?Ym(e,t,n):Ym(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function Gm(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let i=-1;for(let r of t)null!=(r=e(r,++i,t))&&(n<r||void 0===n&&r>=r)&&(n=r)}return n}function Km(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let i=-1;for(let r of t)null!=(r=e(r,++i,t))&&(n>r||void 0===n&&r>=r)&&(n=r)}return n}function Qm(t,e){let n=0,i=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(++n,i+=e);else{let r=-1;for(let s of t)null!=(s=e(s,++r,t))&&(s=+s)>=s&&(++n,i+=s)}if(n)return i/n}function Jm(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),s=new Array(r);++i<r;)s[i]=t+i*n;return s}const Zm={POINT:0,RANGE:1};function Xm(t){const e=[];for(const n of t){const t=Object.keys(n)[0],{value:i,cond:r,type:s}=n[t];let a;s===Zm.POINT?a=nf().filter(Om((e=>e[t]===i))).reify():s===Zm.RANGE&&(a=nf().filter(Om((e=>">="===r?e[t]>=i:e[t]<=i))).reify()),e.push(a)}return e}function ty(t,e,n){if(n===Zm.POINT)return[{[t]:{value:e[t],type:n}}];console.log("TODO")}const ey=1,ny=.1,iy="__opacity__",ry="tick",sy="background",ay="foreground",oy="svgPlot",cy="svg",ly="g",uy="ellipse",hy="line",py="polygon",dy="polyline",fy="rect",my="path",yy="text",gy="#text",by="style",vy="left",_y="right",xy="top",wy="bottom",Sy="centerX",Iy="centerY",Ay="width",Ty="height",ky="size",My="colorCat",Ey="fill",Cy="color",Ny="stroke",Oy="__inferred__data__",Ly="__role__",By="legend",Dy="axis-domain",Fy="title",Vy="orphan-tick",Uy="viewport",Py="mark",Ry="_mark_",jy="_I_",$y="_gI_",zy=2,Hy={COUNT:"count",MIN:"min",MAX:"max",MEAN:"mean",SUM:"sum",STDEV:"stdev",MEDIAN:"median"},qy={NONE:0,DIRECT:1,SUBSET:2,AGGREGATE:3};function Yy(t,e,n=zy){return"string"==typeof t&&"string"==typeof e?t.toLowerCase()===e.toLowerCase():Math.abs(t-e)<=n}function Wy(t,e,n,i=zy){const r=[],s=[];let a=0,o=0;for(;a<t.length&&o<n.length;)if(Yy(t[a],n[o],i)){for(;a<t.length&&o<n.length&&Yy(t[a],n[o],i);)r.push(e[a++]),s.push(o++);for(;a<t.length&&o<n.length&&Yy(t[a],n[o-1],i);)r.push(e[a++])}else++a;if(a<t.length)for(;a<t.length&&Yy(t[a],n[o-1],i);)r.push(e[a++]);if(o<n.length)for(;o<n.length&&Yy(t[a-1],n[o],i);)s.push(o++);return[r,s]}function Gy(t,e=!1){const n=[Ry,jy,$y];return e?t.columnNames():t.columnNames((t=>!n.includes(t)))}function Ky(t,e,n,i,r=!0){function s(){}function a(t,e,n,i){const r=t.orderby(n).array(jy),s=e.orderby(i).array(jy),a=Object.fromEntries(r.map(((t,e)=>[t,s[e]]))),o=Object.fromEntries(s.map(((t,e)=>[t,r[e]]))),c=Gy(t).filter((t=>!n.includes(t)));let l;if(c.length){const r=t.orderby(n).select(c);l=e.orderby(i).assign(r).orderby(jy).reify()}return{map:{fromToMap:a,toFromMap:o,mergedTable:l}}}function o(t,e,n){return{fromToQuery:nf().groupby([...t,jy]).rollup(n),toFromQuery:nf().groupby(t).derive(n),assignTable:Em({[$y]:e})}}function c(t,e,n=!1){const r=Gy(t),s=Gy(e);if(!r.length||!s.length||e.numRows()>t.numRows())return null;2===r.length&&r.includes("precipitation")&&r.includes("MEAN-maximum daily temperature (c)")&&2===s.length&&s.includes("precipitation (binned)")&&s.includes("mean of temp_max");const o={},c=[],l=[],u=[];for(let n=0;n<s.length&&Object.keys(o).length<r.length&&Object.keys(o).length<s.length;++n){e=e.orderby(u.length?[...u,s[n]]:s[n]);for(let a=0;a<r.length&&Object.keys(o).length<r.length&&Object.keys(o).length<s.length;++a){if(c.includes(a))continue;const h=(t=t.orderby(l.length?[...l,r[a]]:r[a])).array(r[a]),p=t.array(jy),d=e.array(s[n]),[f,m]=Wy(h,p,d,i[s[n]]?i[s[n]]:zy);if(m.length===d.length&&f.length>=m.length){t=t.filter(Om((t=>f.includes(t[jy])))).reify(),o[r[a]]=s[n],c.push(a),l.push(r[a]),u.push(s[n]);break}}}const h=Object.keys(o).length,p=Object.keys(o).length!==s.length;return h&&t.numRows()>e.numRows()&&(t=t.slice(0,e.numRows())),n&&h||!n&&h&&!p?{fields:o,...a(t,e,l,u)}:{}}function l(t,e,i,r){const s=Gy(t),a=Gy(e);if(s.length<a.length||t.numRows()<=e.numRows()||i.length>2)return null;for(let a=0;a<s.length;++a){if(r.includes(s[a]))continue;const u=nf().groupby(i);for(const[n,r]of Object.entries(Hy)){const l={[n+"-"+s[a]]:Me[r](s[a])},h=u.evaluate(t);let p=h.rollup(l);p=p.assign(Em({[jy]:Jm(p.numRows())}));const d=c(p,e);if(d&&Object.keys(d).length){return{aggregation:o(i,Array.from(h._group.keys),l),...d}}}const h="string"==typeof t.column(s[a]).get(0)?[s[a]]:n.map((function(t){return{[s[a]]:Om((e=>String(Me.bin(e[s[a]],...t)+t[2]/2)))}}));for(const n of h){const o=l(t,e,[...i,n],[...r,s[a]]);if(o)return o}}}return s.exists=function(t){return t&&Object.keys(t).length},s.direct=function(){const n=c(t,e,!1);return{link:n,type:s.exists(n)?qy.DIRECT:qy.NONE}},s.subset=function(){const n=c(t,e,!0);return{link:n,type:s.exists(n)?qy.SUBSET:qy.NONE}},s.aggregate=function(){const n=l(t,e,[],[]);return{link:n,type:s.exists(n)?qy.AGGREGATE:qy.NONE}},s.getLink=function(){const t=s.direct();if(t.type===qy.DIRECT)return t;if(r){const t=s.aggregate();if(t.type===qy.AGGREGATE)return t}const e=s.subset();return e.type===qy.SUBSET?e:{type:qy.NONE}},s}function Qy(t){const{yAxis:e}=t,{scale:n,ticks:i,ordinal:r}=e,s=r.length?[]:function(t,e){const n=t.domain(),i=Math.abs(n[0]-n[1])/(e.length-1);return[...n,i]}(n,i);return[s]}function Jy(t){const e={},n=.01,{xAxis:i,yAxis:r,legends:s}=t,{domain:a}=i,{domain:o}=r;i.ordinal.length||(e[i.title.innerHTML.toLowerCase()]=Math.abs(a[1]-a[0])*n),r.ordinal.length||(e[r.title.innerHTML.toLowerCase()]=Math.abs(o[1]-o[0])*n);for(const t of s)if(t.type===ky){const{scale:i}=t,r=i.domain();e[t.title.innerHTML.toLowerCase()]=Math.abs(r[0]-r[r.length-1])*n}return e}function Zy(t,e,n,i,r=!1){const{aggregation:s,fields:a,map:o}=e,{fromToMap:c,toFromMap:l,mergedTable:u}=o;let h,p,d;s&&({fromToQuery:h,toFromQuery:p,assignTable:d}=s);const f={type:t,next:n,map:c,fields:a},m={type:t,next:i,map:l,fields:tg(a)};t===qy.DIRECT||t===qy.SUBSET?(i.children.push(f),n.children.push(m),r&&t===qy.SUBSET&&(n.table=u)):(i.children.push({...f,aggregation:{query:h,assignTable:d}}),n.parents.push({...m,aggregation:{query:p,assignTable:d}}))}function Xy(t,e){const n=new Map;!function(t,e,n){const{table:i}=e;if(!i)return;const r=new Map;for(const n of t){const{data:t}=n;if(!t.table)continue;const s=Ky(i,t.table,null,Jy(n)),{type:a,link:o}=s.direct(),c=[];if(a===qy.DIRECT){if(!o.map.mergedTable)return;r.set(n,!0),c.push([a,o,t])}c.forEach((t=>Zy(...t,e)))}for(const s of t){const{data:t}=s;if(r.has(s))continue;if(!t.table)continue;const{type:a,link:o}=Ky(i,t.table,Qy(s),Jy(s),!0).aggregate();a===qy.AGGREGATE&&(Zy(a,o,t,e),n.set(s,!0))}}(t,e,n),function(t,e){for(let n=0;n<t.length;++n){const{data:i}=t[n];if(i.table)for(let r=n+1;r<t.length;++r){const{data:s}=t[r];if(!s.table)continue;const{type:a,link:o}=Ky(i.table,s.table,Qy(t[r]),Jy(t[r]),!e.has(t[r])).getLink();if(a!==qy.NONE){if(a===qy.SUBSET)continue;Zy(a,o,s,i,!0),a===qy.AGGREGATE&&e.set(t[r],!0)}else{const{type:r,link:a}=Ky(s.table,i.table,Qy(t[n]),Jy(t[n]),!e.has(t[n])).getLink();r!==qy.NONE&&(Zy(r,a,i,s,!0),r===qy.AGGREGATE&&e.set(t[n],!0))}}}}(t,n)}function tg(t){return Object.fromEntries(Object.keys(t).map((e=>[t[e],e])))}function eg(t,e){return e.map((e=>t[e]))}function ng(t,e){return Object.fromEntries(Object.keys(t).filter((t=>t in e)).map((n=>[e[n],t[n]])))}function ig(t,e){return Object.fromEntries(Object.keys(t).map((n=>n in e?[n,e[n]]:[n,t[n]])))}function rg(t,e){let{table:n}=t;for(const[t,i]of e){const{query:e}=t;n=e.evaluate(n);const r=eg(tg(i),Array.from(n._group.keys)).map((t=>Number(t)));n=n.assign(Em({[$y]:r}))}return n.ungroup()}function sg(t,e,n){const i=t.array(jy).map((t=>n[t]));return[t.assign({[jy]:i}),e.filter(Om((t=>i.includes(t[jy])))).reify()].map((t=>t.filter(Om((t=>null!=t[jy])))))}function ag(t,e,n=!1){const i=new Map;function r(t,e){if(i.has(t))return;i.set(t,!0);const{active:n,table:s}=t;n.selected=e;const{children:a}=t;for(const t of a){const{next:n,map:i,aggregation:a,fields:o,type:c}=t;let l,u=n.table;if(n.active.type=c,a){const{query:t,assignTable:n}=a,r=Object.fromEntries(s.array(jy).map((t=>[t,t])));[,l]=sg(e,s.assign(n),r),l=t.evaluate(l.rename({[$y]:jy})),[l,u]=sg(l,u,i),u=u.orderby(jy).assign(l.rename(o).orderby(jy)).unorder()}else[,u]=sg(e,u,i);r(n,u)}}function s(t){if(i.has(t))return;i.set(t,!0);const{active:e,children:n}=t;e.selected=e.table;for(const t of n){const{next:e}=t;e.active.type=qy.NONE,s(e)}}for(const i of t){const[t,a,o]=i,{active:c}=t;if(e){e=e.map((t=>(t=ng(t,o),Gy(a,!0).includes($y)&&jy in t&&(t[$y]=t[jy],delete t[jy]),t)));let i=c.selected.numRows()<c.table.numRows()&&!n?c.selected:null;Xm(e).forEach((t=>{i=t.evaluate(i||a)})),n&&(i=t.active.selected.concat(i)),r(t,i)}else s(t)}}function og(t,e){!function(t,e){bt(t).attr("opacity",e)}(t,e)}function cg(t){og(t,t[0][iy]||ey)}function lg(t,e){!function(t){og(t,ny)}(t),og(e,ey)}function ug(t,e){for(const n of t){if(!n.title)continue;const t=n.title.innerHTML.toLowerCase(),i=e.array(t);if("precipitation"===t)continue;const r=n.marks.filter((e=>i.includes(e.mark[Oy][t]))).map((t=>t.mark));lg(n.marks.map((t=>t.mark)),r)}}function hg(t,e,n){const i=e.array(Ry);bt("."+t+".AGGREGATE_LAYER").remove();const r=[];for(let s=0;s<i.length;++s){const a=i[s]._getBBox(),c=yt(i[s].parentElement).append("path").classed(t,!0).classed("AGGREGATE_LAYER",!0).attr("fill",window.getComputedStyle(i[s]).fill);if(i[s].tagName===my){const t=i[s].contour[0].x,l=i[s].contour[0].y-i[s]._getBBox().height,u=a.height,h=n.scale(e.array(n.title.innerHTML.toLowerCase())[s])-n.range[0],p=o();p.rect(t,l,h,u),c.attr("d",p.toString()),r.push(c)}}bt([...i,...r]).raise()}function pg(t){for(const e of t){const{data:t,legends:n,xAxis:i}=e,{table:r,active:s}=t,{selected:a,type:o}=s;let c=a.array(Ry);o===qy.AGGREGATE?c=hg(e.svg.id,a,i):bt("."+e.svg.id+"AGGREGATE_LAYER").remove(),lg(r.array(Ry),c),ug(n,a)}}function dg(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}const fg=Symbol("implicit");function mg(){var t=new Pm,e=[],n=[],i=fg;function r(r){let s=t.get(r);if(void 0===s){if(i!==fg)return i;t.set(r,s=e.push(r)-1)}return n[s%n.length]}return r.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new Pm;for(const i of n)t.has(i)||t.set(i,e.push(i)-1);return r},r.range=function(t){return arguments.length?(n=Array.from(t),r):n.slice()},r.unknown=function(t){return arguments.length?(i=t,r):i},r.copy=function(){return mg(e,n).unknown(i)},dg.apply(r,arguments),r}function yg(){var t,e,n=mg().unknown(void 0),i=n.domain,r=n.range,s=0,a=1,o=!1,c=0,l=0,u=.5;function h(){var n=i().length,h=a<s,p=h?a:s,d=h?s:a;t=(d-p)/Math.max(1,n-c+2*l),o&&(t=Math.floor(t)),p+=(d-p-t*(n-c))*u,e=t*(1-c),o&&(p=Math.round(p),e=Math.round(e));var f=Jm(n).map((function(e){return p+t*e}));return r(h?f.reverse():f)}return delete n.unknown,n.domain=function(t){return arguments.length?(i(t),h()):i()},n.range=function(t){return arguments.length?([s,a]=t,s=+s,a=+a,h()):[s,a]},n.rangeRound=function(t){return[s,a]=t,s=+s,a=+a,o=!0,h()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(o=!!t,h()):o},n.padding=function(t){return arguments.length?(c=Math.min(1,l=+t),h()):c},n.paddingInner=function(t){return arguments.length?(c=Math.min(1,t),h()):c},n.paddingOuter=function(t){return arguments.length?(l=+t,h()):l},n.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),h()):u},n.copy=function(){return yg(i(),[s,a]).round(o).paddingInner(c).paddingOuter(l).align(u)},dg.apply(h(),arguments)}function gg(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function bg(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function vg(){}var _g=.7,xg=1/_g,wg="\\s*([+-]?\\d+)\\s*",Sg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ig="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ag=/^#([0-9a-f]{3,8})$/,Tg=new RegExp(`^rgb\\(${wg},${wg},${wg}\\)$`),kg=new RegExp(`^rgb\\(${Ig},${Ig},${Ig}\\)$`),Mg=new RegExp(`^rgba\\(${wg},${wg},${wg},${Sg}\\)$`),Eg=new RegExp(`^rgba\\(${Ig},${Ig},${Ig},${Sg}\\)$`),Cg=new RegExp(`^hsl\\(${Sg},${Ig},${Ig}\\)$`),Ng=new RegExp(`^hsla\\(${Sg},${Ig},${Ig},${Sg}\\)$`),Og={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Lg(){return this.rgb().formatHex()}function Bg(){return this.rgb().formatRgb()}function Dg(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ag.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Fg(e):3===n?new Pg(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Vg(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Vg(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Tg.exec(t))?new Pg(e[1],e[2],e[3],1):(e=kg.exec(t))?new Pg(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Mg.exec(t))?Vg(e[1],e[2],e[3],e[4]):(e=Eg.exec(t))?Vg(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Cg.exec(t))?qg(e[1],e[2]/100,e[3]/100,1):(e=Ng.exec(t))?qg(e[1],e[2]/100,e[3]/100,e[4]):Og.hasOwnProperty(t)?Fg(Og[t]):"transparent"===t?new Pg(NaN,NaN,NaN,0):null}function Fg(t){return new Pg(t>>16&255,t>>8&255,255&t,1)}function Vg(t,e,n,i){return i<=0&&(t=e=n=NaN),new Pg(t,e,n,i)}function Ug(t,e,n,i){return 1===arguments.length?((r=t)instanceof vg||(r=Dg(r)),r?new Pg((r=r.rgb()).r,r.g,r.b,r.opacity):new Pg):new Pg(t,e,n,null==i?1:i);var r}function Pg(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function Rg(){return`#${Hg(this.r)}${Hg(this.g)}${Hg(this.b)}`}function jg(){const t=$g(this.opacity);return`${1===t?"rgb(":"rgba("}${zg(this.r)}, ${zg(this.g)}, ${zg(this.b)}${1===t?")":`, ${t})`}`}function $g(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function zg(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Hg(t){return((t=zg(t))<16?"0":"")+t.toString(16)}function qg(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Wg(t,e,n,i)}function Yg(t){if(t instanceof Wg)return new Wg(t.h,t.s,t.l,t.opacity);if(t instanceof vg||(t=Dg(t)),!t)return new Wg;if(t instanceof Wg)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),s=Math.max(e,n,i),a=NaN,o=s-r,c=(s+r)/2;return o?(a=e===s?(n-i)/o+6*(n<i):n===s?(i-e)/o+2:(e-n)/o+4,o/=c<.5?s+r:2-s-r,a*=60):o=c>0&&c<1?0:a,new Wg(a,o,c,t.opacity)}function Wg(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function Gg(t){return(t=(t||0)%360)<0?t+360:t}function Kg(t){return Math.max(0,Math.min(1,t||0))}function Qg(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}gg(vg,Dg,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Lg,formatHex:Lg,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Yg(this).formatHsl()},formatRgb:Bg,toString:Bg}),gg(Pg,Ug,bg(vg,{brighter(t){return t=null==t?xg:Math.pow(xg,t),new Pg(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?_g:Math.pow(_g,t),new Pg(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Pg(zg(this.r),zg(this.g),zg(this.b),$g(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Rg,formatHex:Rg,formatHex8:function(){return`#${Hg(this.r)}${Hg(this.g)}${Hg(this.b)}${Hg(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:jg,toString:jg})),gg(Wg,(function(t,e,n,i){return 1===arguments.length?Yg(t):new Wg(t,e,n,null==i?1:i)}),bg(vg,{brighter(t){return t=null==t?xg:Math.pow(xg,t),new Wg(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?_g:Math.pow(_g,t),new Wg(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Pg(Qg(t>=240?t-240:t+120,r,i),Qg(t,r,i),Qg(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new Wg(Gg(this.h),Kg(this.s),Kg(this.l),$g(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=$g(this.opacity);return`${1===t?"hsl(":"hsla("}${Gg(this.h)}, ${100*Kg(this.s)}%, ${100*Kg(this.l)}%${1===t?")":`, ${t})`}`}}));var Jg=t=>()=>t;function Zg(t){return 1==(t=+t)?Xg:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):Jg(isNaN(e)?n:e)}}function Xg(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):Jg(isNaN(t)?e:t)}var tb=function t(e){var n=Zg(e);function i(t,e){var i=n((t=Ug(t)).r,(e=Ug(e)).r),r=n(t.g,e.g),s=n(t.b,e.b),a=Xg(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=s(e),t.opacity=a(e),t+""}}return i.gamma=t,i}(1);function eb(t,e){e||(e=[]);var n,i=t?Math.min(e.length,t.length):0,r=e.slice();return function(s){for(n=0;n<i;++n)r[n]=t[n]*(1-s)+e[n]*s;return r}}function nb(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,s=new Array(r),a=new Array(i);for(n=0;n<r;++n)s[n]=lb(t[n],e[n]);for(;n<i;++n)a[n]=e[n];return function(t){for(n=0;n<r;++n)a[n]=s[n](t);return a}}function ib(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function rb(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function sb(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=lb(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}var ab=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ob=new RegExp(ab.source,"g");function cb(t,e){var n,i,r,s=ab.lastIndex=ob.lastIndex=0,a=-1,o=[],c=[];for(t+="",e+="";(n=ab.exec(t))&&(i=ob.exec(e));)(r=i.index)>s&&(r=e.slice(s,r),o[a]?o[a]+=r:o[++a]=r),(n=n[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,c.push({i:a,x:rb(n,i)})),s=ob.lastIndex;return s<e.length&&(r=e.slice(s),o[a]?o[a]+=r:o[++a]=r),o.length<2?c[0]?function(t){return function(e){return t(e)+""}}(c[0].x):function(t){return function(){return t}}(e):(e=c.length,function(t){for(var n,i=0;i<e;++i)o[(n=c[i]).i]=n.x(t);return o.join("")})}function lb(t,e){var n,i,r=typeof e;return null==e||"boolean"===r?Jg(e):("number"===r?rb:"string"===r?(n=Dg(e))?(e=n,tb):cb:e instanceof Dg?tb:e instanceof Date?ib:(i=e,!ArrayBuffer.isView(i)||i instanceof DataView?Array.isArray(e)?nb:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?sb:rb:eb))(t,e)}function ub(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function hb(t){return+t}var pb=[0,1];function db(t){return t}function fb(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function mb(t,e,n){var i=t[0],r=t[1],s=e[0],a=e[1];return r<i?(i=fb(r,i),s=n(a,s)):(i=fb(i,r),s=n(s,a)),function(t){return s(i(t))}}function yb(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),s=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<i;)r[a]=fb(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(e){var n=Um(t,e,1,i)-1;return s[n](r[n](e))}}function gb(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function bb(){var t,e,n,i,r,s,a=pb,o=pb,c=lb,l=db;function u(){var t=Math.min(a.length,o.length);return l!==db&&(l=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(a[0],a[t-1])),i=t>2?yb:mb,r=s=null,h}function h(e){return null==e||isNaN(e=+e)?n:(r||(r=i(a.map(t),o,c)))(t(l(e)))}return h.invert=function(n){return l(e((s||(s=i(o,a.map(t),rb)))(n)))},h.domain=function(t){return arguments.length?(a=Array.from(t,hb),u()):a.slice()},h.range=function(t){return arguments.length?(o=Array.from(t),u()):o.slice()},h.rangeRound=function(t){return o=Array.from(t),c=ub,u()},h.clamp=function(t){return arguments.length?(l=!!t||db,u()):l!==db},h.interpolate=function(t){return arguments.length?(c=t,u()):c},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,i){return t=n,e=i,u()}}function vb(){return bb()(db,db)}function _b(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function xb(t){return(t=_b(Math.abs(t)))?t[1]:NaN}var wb,Sb=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ib(t){if(!(e=Sb.exec(t)))throw new Error("invalid format: "+t);var e;return new Ab({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Ab(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Tb(t,e){var n=_b(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}Ib.prototype=Ab.prototype,Ab.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var kb={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Tb(100*t,e),r:Tb,s:function(t,e){var n=_b(t,e);if(!n)return t+"";var i=n[0],r=n[1],s=r-(wb=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,a=i.length;return s===a?i:s>a?i+new Array(s-a+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+_b(t,Math.max(0,e+s-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Mb(t){return t}var Eb,Cb,Nb,Ob=Array.prototype.map,Lb=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Bb(t){var e,n,i=void 0===t.grouping||void 0===t.thousands?Mb:(e=Ob.call(t.grouping,Number),n=t.thousands+"",function(t,i){for(var r=t.length,s=[],a=0,o=e[0],c=0;r>0&&o>0&&(c+o+1>i&&(o=Math.max(1,i-c)),s.push(t.substring(r-=o,r+o)),!((c+=o+1)>i));)o=e[a=(a+1)%e.length];return s.reverse().join(n)}),r=void 0===t.currency?"":t.currency[0]+"",s=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",o=void 0===t.numerals?Mb:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Ob.call(t.numerals,String)),c=void 0===t.percent?"%":t.percent+"",l=void 0===t.minus?"":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=Ib(t)).fill,n=t.align,h=t.sign,p=t.symbol,d=t.zero,f=t.width,m=t.comma,y=t.precision,g=t.trim,b=t.type;"n"===b?(m=!0,b="g"):kb[b]||(void 0===y&&(y=12),g=!0,b="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var v="$"===p?r:"#"===p&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",_="$"===p?s:/[%p]/.test(b)?c:"",x=kb[b],w=/[defgprs%]/.test(b);function S(t){var r,s,c,p=v,S=_;if("c"===b)S=x(t)+S,t="";else{var I=(t=+t)<0||1/t<0;if(t=isNaN(t)?u:x(Math.abs(t),y),g&&(t=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(!+t[i])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(e+1):t}(t)),I&&0==+t&&"+"!==h&&(I=!1),p=(I?"("===h?h:l:"-"===h||"("===h?"":h)+p,S=("s"===b?Lb[8+wb/3]:"")+S+(I&&"("===h?")":""),w)for(r=-1,s=t.length;++r<s;)if(48>(c=t.charCodeAt(r))||c>57){S=(46===c?a+t.slice(r+1):t.slice(r))+S,t=t.slice(0,r);break}}m&&!d&&(t=i(t,1/0));var A=p.length+t.length+S.length,T=A<f?new Array(f-A+1).join(e):"";switch(m&&d&&(t=i(T+t,T.length?f-S.length:1/0),T=""),n){case"<":t=p+t+S+T;break;case"=":t=p+T+t+S;break;case"^":t=T.slice(0,A=T.length>>1)+p+t+S+T.slice(A);break;default:t=T+p+t+S}return o(t)}return y=void 0===y?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),S.toString=function(){return t+""},S}return{format:h,formatPrefix:function(t,e){var n=h(((t=Ib(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(xb(e)/3))),r=Math.pow(10,-i),s=Lb[8+i/3];return function(t){return n(r*t)+s}}}}function Db(t,e,n,i){var r,s=Wm(t,e,n);switch((i=Ib(null==i?",f":i)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(r=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(xb(e)/3)))-xb(Math.abs(t)))}(s,a))||(i.precision=r),Nb(i,a);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,xb(e)-xb(t))+1}(s,Math.max(Math.abs(t),Math.abs(e))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=function(t){return Math.max(0,-xb(Math.abs(t)))}(s))||(i.precision=r-2*("%"===i.type))}return Cb(i)}function Fb(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){if(!((n=+n)>0))return[];if((t=+t)==(e=+e))return[t];const i=e<t,[r,s,a]=i?qm(e,t,n):qm(t,e,n);if(!(s>=r))return[];const o=s-r+1,c=new Array(o);if(i)if(a<0)for(let t=0;t<o;++t)c[t]=(s-t)/-a;else for(let t=0;t<o;++t)c[t]=(s-t)*a;else if(a<0)for(let t=0;t<o;++t)c[t]=(r+t)/-a;else for(let t=0;t<o;++t)c[t]=(r+t)*a;return c}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var i=e();return Db(i[0],i[i.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var i,r,s=e(),a=0,o=s.length-1,c=s[a],l=s[o],u=10;for(l<c&&(r=c,c=l,l=r,r=a,a=o,o=r);u-- >0;){if((r=Ym(c,l,n))===i)return s[a]=c,s[o]=l,e(s);if(r>0)c=Math.floor(c/r)*r,l=Math.ceil(l/r)*r;else{if(!(r<0))break;c=Math.ceil(c*r)/r,l=Math.floor(l*r)/r}i=r}return t},t}function Vb(){var t=vb();return t.copy=function(){return gb(t,Vb())},dg.apply(t,arguments),Fb(t)}Eb=Bb({thousands:",",grouping:[3],currency:["$",""]}),Cb=Eb.format,Nb=Eb.formatPrefix;const Ub=new Date,Pb=new Date;function Rb(t,e,n,i){function r(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return r.floor=e=>(t(e=new Date(+e)),e),r.ceil=n=>(t(n=new Date(n-1)),e(n,1),t(n),n),r.round=t=>{const e=r(t),n=r.ceil(t);return t-e<n-t?e:n},r.offset=(t,n)=>(e(t=new Date(+t),null==n?1:Math.floor(n)),t),r.range=(n,i,s)=>{const a=[];if(n=r.ceil(n),s=null==s?1:Math.floor(s),!(n<i&&s>0))return a;let o;do{a.push(o=new Date(+n)),e(n,s),t(n)}while(o<n&&n<i);return a},r.filter=n=>Rb((e=>{if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),((t,i)=>{if(t>=t)if(i<0)for(;++i<=0;)for(;e(t,-1),!n(t););else for(;--i>=0;)for(;e(t,1),!n(t););})),n&&(r.count=(e,i)=>(Ub.setTime(+e),Pb.setTime(+i),t(Ub),t(Pb),Math.floor(n(Ub,Pb))),r.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?r.filter(i?e=>i(e)%t==0:e=>r.count(0,e)%t==0):r:null)),r}const jb=Rb((()=>{}),((t,e)=>{t.setTime(+t+e)}),((t,e)=>e-t));jb.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?Rb((e=>{e.setTime(Math.floor(e/t)*t)}),((e,n)=>{e.setTime(+e+n*t)}),((e,n)=>(n-e)/t)):jb:null),jb.range;const $b=1e3,zb=6e4,Hb=36e5,qb=864e5,Yb=6048e5,Wb=2592e6,Gb=31536e6,Kb=Rb((t=>{t.setTime(t-t.getMilliseconds())}),((t,e)=>{t.setTime(+t+e*$b)}),((t,e)=>(e-t)/$b),(t=>t.getUTCSeconds()));Kb.range;const Qb=Rb((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*$b)}),((t,e)=>{t.setTime(+t+e*zb)}),((t,e)=>(e-t)/zb),(t=>t.getMinutes()));Qb.range;const Jb=Rb((t=>{t.setUTCSeconds(0,0)}),((t,e)=>{t.setTime(+t+e*zb)}),((t,e)=>(e-t)/zb),(t=>t.getUTCMinutes()));Jb.range;const Zb=Rb((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*$b-t.getMinutes()*zb)}),((t,e)=>{t.setTime(+t+e*Hb)}),((t,e)=>(e-t)/Hb),(t=>t.getHours()));Zb.range;const Xb=Rb((t=>{t.setUTCMinutes(0,0,0)}),((t,e)=>{t.setTime(+t+e*Hb)}),((t,e)=>(e-t)/Hb),(t=>t.getUTCHours()));Xb.range;const tv=Rb((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*zb)/qb),(t=>t.getDate()-1));tv.range;const ev=Rb((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/qb),(t=>t.getUTCDate()-1));ev.range;const nv=Rb((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/qb),(t=>Math.floor(t/qb)));function iv(t){return Rb((e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),((t,e)=>{t.setDate(t.getDate()+7*e)}),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*zb)/Yb))}nv.range;const rv=iv(0),sv=iv(1),av=iv(2),ov=iv(3),cv=iv(4),lv=iv(5),uv=iv(6);function hv(t){return Rb((e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+7*e)}),((t,e)=>(e-t)/Yb))}rv.range,sv.range,av.range,ov.range,cv.range,lv.range,uv.range;const pv=hv(0),dv=hv(1),fv=hv(2),mv=hv(3),yv=hv(4),gv=hv(5),bv=hv(6);pv.range,dv.range,fv.range,mv.range,yv.range,gv.range,bv.range;const vv=Rb((t=>{t.setDate(1),t.setHours(0,0,0,0)}),((t,e)=>{t.setMonth(t.getMonth()+e)}),((t,e)=>e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())),(t=>t.getMonth()));vv.range;const _v=Rb((t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)}),((t,e)=>e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())),(t=>t.getUTCMonth()));_v.range;const xv=Rb((t=>{t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,e)=>{t.setFullYear(t.getFullYear()+e)}),((t,e)=>e.getFullYear()-t.getFullYear()),(t=>t.getFullYear()));xv.every=t=>isFinite(t=Math.floor(t))&&t>0?Rb((e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,n)=>{e.setFullYear(e.getFullYear()+n*t)})):null,xv.range;const wv=Rb((t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)}),((t,e)=>e.getUTCFullYear()-t.getUTCFullYear()),(t=>t.getUTCFullYear()));wv.every=t=>isFinite(t=Math.floor(t))&&t>0?Rb((e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null,wv.range;const[Sv,Iv]=function(t,e,n,i,r,s){const a=[[Kb,1,$b],[Kb,5,5e3],[Kb,15,15e3],[Kb,30,3e4],[s,1,zb],[s,5,3e5],[s,15,9e5],[s,30,18e5],[r,1,Hb],[r,3,108e5],[r,6,216e5],[r,12,432e5],[i,1,qb],[i,2,1728e5],[n,1,Yb],[e,1,Wb],[e,3,7776e6],[t,1,Gb]];function o(e,n,i){const r=Math.abs(n-e)/i,s=Dm((([,,t])=>t)).right(a,r);if(s===a.length)return t.every(Wm(e/Gb,n/Gb,i));if(0===s)return jb.every(Math.max(Wm(e,n,i),1));const[o,c]=a[r/a[s-1][2]<a[s][2]/r?s-1:s];return o.every(c)}return[function(t,e,n){const i=e<t;i&&([t,e]=[e,t]);const r=n&&"function"==typeof n.range?n:o(t,e,n),s=r?r.range(t,+e+1):[];return i?s.reverse():s},o]}(xv,vv,rv,tv,Zb,Qb);function Av(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Tv(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function kv(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}var Mv,Ev,Cv,Nv={"-":"",_:" ",0:"0"},Ov=/^\s*\d+/,Lv=/^%/,Bv=/[\\^$*+?|[\]().{}]/g;function Dv(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(e)+r:r)}function Fv(t){return t.replace(Bv,"\\$&")}function Vv(t){return new RegExp("^(?:"+t.map(Fv).join("|")+")","i")}function Uv(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function Pv(t,e,n){var i=Ov.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Rv(t,e,n){var i=Ov.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function jv(t,e,n){var i=Ov.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function $v(t,e,n){var i=Ov.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function zv(t,e,n){var i=Ov.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function Hv(t,e,n){var i=Ov.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function qv(t,e,n){var i=Ov.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function Yv(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function Wv(t,e,n){var i=Ov.exec(e.slice(n,n+1));return i?(t.q=3*i[0]-3,n+i[0].length):-1}function Gv(t,e,n){var i=Ov.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function Kv(t,e,n){var i=Ov.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function Qv(t,e,n){var i=Ov.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function Jv(t,e,n){var i=Ov.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function Zv(t,e,n){var i=Ov.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function Xv(t,e,n){var i=Ov.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function t_(t,e,n){var i=Ov.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function e_(t,e,n){var i=Ov.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function n_(t,e,n){var i=Lv.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function i_(t,e,n){var i=Ov.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function r_(t,e,n){var i=Ov.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function s_(t,e){return Dv(t.getDate(),e,2)}function a_(t,e){return Dv(t.getHours(),e,2)}function o_(t,e){return Dv(t.getHours()%12||12,e,2)}function c_(t,e){return Dv(1+tv.count(xv(t),t),e,3)}function l_(t,e){return Dv(t.getMilliseconds(),e,3)}function u_(t,e){return l_(t,e)+"000"}function h_(t,e){return Dv(t.getMonth()+1,e,2)}function p_(t,e){return Dv(t.getMinutes(),e,2)}function d_(t,e){return Dv(t.getSeconds(),e,2)}function f_(t){var e=t.getDay();return 0===e?7:e}function m_(t,e){return Dv(rv.count(xv(t)-1,t),e,2)}function y_(t){var e=t.getDay();return e>=4||0===e?cv(t):cv.ceil(t)}function g_(t,e){return t=y_(t),Dv(cv.count(xv(t),t)+(4===xv(t).getDay()),e,2)}function b_(t){return t.getDay()}function v_(t,e){return Dv(sv.count(xv(t)-1,t),e,2)}function __(t,e){return Dv(t.getFullYear()%100,e,2)}function x_(t,e){return Dv((t=y_(t)).getFullYear()%100,e,2)}function w_(t,e){return Dv(t.getFullYear()%1e4,e,4)}function S_(t,e){var n=t.getDay();return Dv((t=n>=4||0===n?cv(t):cv.ceil(t)).getFullYear()%1e4,e,4)}function I_(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Dv(e/60|0,"0",2)+Dv(e%60,"0",2)}function A_(t,e){return Dv(t.getUTCDate(),e,2)}function T_(t,e){return Dv(t.getUTCHours(),e,2)}function k_(t,e){return Dv(t.getUTCHours()%12||12,e,2)}function M_(t,e){return Dv(1+ev.count(wv(t),t),e,3)}function E_(t,e){return Dv(t.getUTCMilliseconds(),e,3)}function C_(t,e){return E_(t,e)+"000"}function N_(t,e){return Dv(t.getUTCMonth()+1,e,2)}function O_(t,e){return Dv(t.getUTCMinutes(),e,2)}function L_(t,e){return Dv(t.getUTCSeconds(),e,2)}function B_(t){var e=t.getUTCDay();return 0===e?7:e}function D_(t,e){return Dv(pv.count(wv(t)-1,t),e,2)}function F_(t){var e=t.getUTCDay();return e>=4||0===e?yv(t):yv.ceil(t)}function V_(t,e){return t=F_(t),Dv(yv.count(wv(t),t)+(4===wv(t).getUTCDay()),e,2)}function U_(t){return t.getUTCDay()}function P_(t,e){return Dv(dv.count(wv(t)-1,t),e,2)}function R_(t,e){return Dv(t.getUTCFullYear()%100,e,2)}function j_(t,e){return Dv((t=F_(t)).getUTCFullYear()%100,e,2)}function $_(t,e){return Dv(t.getUTCFullYear()%1e4,e,4)}function z_(t,e){var n=t.getUTCDay();return Dv((t=n>=4||0===n?yv(t):yv.ceil(t)).getUTCFullYear()%1e4,e,4)}function H_(){return"+0000"}function q_(){return"%"}function Y_(t){return+t}function W_(t){return Math.floor(+t/1e3)}function G_(t){return new Date(t)}function K_(t){return t instanceof Date?+t:+new Date(+t)}function Q_(t,e,n,i,r,s,a,o,c,l){var u=vb(),h=u.invert,p=u.domain,d=l(".%L"),f=l(":%S"),m=l("%I:%M"),y=l("%I %p"),g=l("%a %d"),b=l("%b %d"),v=l("%B"),_=l("%Y");function x(t){return(c(t)<t?d:o(t)<t?f:a(t)<t?m:s(t)<t?y:i(t)<t?r(t)<t?g:b:n(t)<t?v:_)(t)}return u.invert=function(t){return new Date(h(t))},u.domain=function(t){return arguments.length?p(Array.from(t,K_)):p().map(G_)},u.ticks=function(e){var n=p();return t(n[0],n[n.length-1],null==e?10:e)},u.tickFormat=function(t,e){return null==e?x:l(e)},u.nice=function(t){var n=p();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?p(function(t,e){var n,i=0,r=(t=t.slice()).length-1,s=t[i],a=t[r];return a<s&&(n=i,i=r,r=n,n=s,s=a,a=n),t[i]=e.floor(s),t[r]=e.ceil(a),t}(n,t)):u},u.copy=function(){return gb(u,Q_(t,e,n,i,r,s,a,o,c,l))},u}function J_(){return dg.apply(Q_(Sv,Iv,xv,vv,rv,tv,Zb,Qb,Kb,Ev).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Z_(t){return t}function X_(t){return t.metaKey||t.ctrlKey||t.altKey||t.shiftKey}function tx(t){const e=t.cloneNode(!0);for(const[n,i]of Object.entries(t))e[n]=i;return e}function ex(t,e){const n=t._getBBox(),i=e===_y||e===vy?n.width/2:n.height/2;return n[e]+(e===vy||e===xy?i:-i)}function nx(t){return t&&t.includes("pt")?4*+t.split("pt")[0]/3:t}function ix(t,e,n,i){const r=t.createSVGPoint();return r.x=n,r.y=i,r.matrixTransform(e.getScreenCTM())}function rx(t,e,n=!1){const i=e=>(i,r)=>null==t?i._getBBox()[e]-r._getBBox()[e]:n?i[t]-r[t]:(i[t]?i[t]:i.marks[0])._getBBox()[e]-(r[t]?r[t]:r.marks[0])._getBBox()[e];e.sort(i(Sy)),e.sort(i(Iy))}!function(t){Mv=function(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,s=t.days,a=t.shortDays,o=t.months,c=t.shortMonths,l=Vv(r),u=Uv(r),h=Vv(s),p=Uv(s),d=Vv(a),f=Uv(a),m=Vv(o),y=Uv(o),g=Vv(c),b=Uv(c),v={a:function(t){return a[t.getDay()]},A:function(t){return s[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return o[t.getMonth()]},c:null,d:s_,e:s_,f:u_,g:x_,G:S_,H:a_,I:o_,j:c_,L:l_,m:h_,M:p_,p:function(t){return r[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Y_,s:W_,S:d_,u:f_,U:m_,V:g_,w:b_,W:v_,x:null,X:null,y:__,Y:w_,Z:I_,"%":q_},_={a:function(t){return a[t.getUTCDay()]},A:function(t){return s[t.getUTCDay()]},b:function(t){return c[t.getUTCMonth()]},B:function(t){return o[t.getUTCMonth()]},c:null,d:A_,e:A_,f:C_,g:j_,G:z_,H:T_,I:k_,j:M_,L:E_,m:N_,M:O_,p:function(t){return r[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Y_,s:W_,S:L_,u:B_,U:D_,V:V_,w:U_,W:P_,x:null,X:null,y:R_,Y:$_,Z:H_,"%":q_},x={a:function(t,e,n){var i=d.exec(e.slice(n));return i?(t.w=f.get(i[0].toLowerCase()),n+i[0].length):-1},A:function(t,e,n){var i=h.exec(e.slice(n));return i?(t.w=p.get(i[0].toLowerCase()),n+i[0].length):-1},b:function(t,e,n){var i=g.exec(e.slice(n));return i?(t.m=b.get(i[0].toLowerCase()),n+i[0].length):-1},B:function(t,e,n){var i=m.exec(e.slice(n));return i?(t.m=y.get(i[0].toLowerCase()),n+i[0].length):-1},c:function(t,n,i){return I(t,e,n,i)},d:Kv,e:Kv,f:e_,g:qv,G:Hv,H:Jv,I:Jv,j:Qv,L:t_,m:Gv,M:Zv,p:function(t,e,n){var i=l.exec(e.slice(n));return i?(t.p=u.get(i[0].toLowerCase()),n+i[0].length):-1},q:Wv,Q:i_,s:r_,S:Xv,u:Rv,U:jv,V:$v,w:Pv,W:zv,x:function(t,e,i){return I(t,n,e,i)},X:function(t,e,n){return I(t,i,e,n)},y:qv,Y:Hv,Z:Yv,"%":n_};function w(t,e){return function(n){var i,r,s,a=[],o=-1,c=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++o<l;)37===t.charCodeAt(o)&&(a.push(t.slice(c,o)),null!=(r=Nv[i=t.charAt(++o)])?i=t.charAt(++o):r="e"===i?" ":"0",(s=e[i])&&(i=s(n,r)),a.push(i),c=o+1);return a.push(t.slice(c,o)),a.join("")}}function S(t,e){return function(n){var i,r,s=kv(1900,void 0,1);if(I(s,t,n+="",0)!=n.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(1e3*s.s+("L"in s?s.L:0));if(e&&!("Z"in s)&&(s.Z=0),"p"in s&&(s.H=s.H%12+12*s.p),void 0===s.m&&(s.m="q"in s?s.q:0),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(r=(i=Tv(kv(s.y,0,1))).getUTCDay(),i=r>4||0===r?dv.ceil(i):dv(i),i=ev.offset(i,7*(s.V-1)),s.y=i.getUTCFullYear(),s.m=i.getUTCMonth(),s.d=i.getUTCDate()+(s.w+6)%7):(r=(i=Av(kv(s.y,0,1))).getDay(),i=r>4||0===r?sv.ceil(i):sv(i),i=tv.offset(i,7*(s.V-1)),s.y=i.getFullYear(),s.m=i.getMonth(),s.d=i.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),r="Z"in s?Tv(kv(s.y,0,1)).getUTCDay():Av(kv(s.y,0,1)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(r+5)%7:s.w+7*s.U-(r+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,Tv(s)):Av(s)}}function I(t,e,n,i){for(var r,s,a=0,o=e.length,c=n.length;a<o;){if(i>=c)return-1;if(37===(r=e.charCodeAt(a++))){if(r=e.charAt(a++),!(s=x[r in Nv?e.charAt(a++):r])||(i=s(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}return v.x=w(n,v),v.X=w(i,v),v.c=w(e,v),_.x=w(n,_),_.X=w(i,_),_.c=w(e,_),{format:function(t){var e=w(t+="",v);return e.toString=function(){return t},e},parse:function(t){var e=S(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",_);return e.toString=function(){return t},e},utcParse:function(t){var e=S(t+="",!0);return e.toString=function(){return t},e}}}(t),Ev=Mv.format,Cv=Mv.parse,Mv.utcFormat,Mv.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});class sx{constructor(...t){if(t[0]instanceof sx){const[e]=t;this.translate={...e.translate},this.scale={...e.scale},this.rotate=e.rotate}else{const[e,n,i,r,s]=t;this.translate={x:e||0,y:n||0},this.scale={x:i||1,y:r||1},this.rotate=s||0}}addTransform(t){return this.translate.x+=t.translate.x,this.translate.y+=t.translate.y,this.scale.x*=t.scale.x,this.scale.y*=t.scale.y,this.rotate+=t.rotate,this}getTransform(t=new sx){return"translate("+(this.translate.x+t.translate.x)+","+(this.translate.y+t.translate.y)+") scale("+this.scale.x*t.scale.x+","+this.scale.y*t.scale.y+") rotate("+(this.rotate+t.rotate)+")"}}const ax=1,ox=2,cx=3,lx=4;function ux(t){return e=>+t(e)}function hx(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function px(t,e,n){let i=[],r=null,s=null,a=6,o=6,c=3,l="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5;const u=t===ax||t===cx?n.xAxis:n.yAxis,h=u.ticks;function p(){let n=null==r?e.ticks?e.ticks.apply(e,i):e.domain():r;const a=null==s?e.tickFormat?e.tickFormat.apply(e,i):Z_:s,o=(e.bandwidth?hx:ux)(e.copy(),l);function c(e,n){e.value=n;const i=e.label,r=e.marks;i.innerHTML=u.ordinal.length||i.value===a(n)?i.value:a(n);const s=i.globalPosition.translate.x,c=i.globalPosition.translate.y,l=t===cx?o(n)-s:0,h=t===lx?o(n)-c:0;i.setAttribute("transform",i.localTransform.getTransform(new sx(l,h)));for(const e of r){const i=e.globalPosition.translate.x,r=e.globalPosition.translate.y,s=t===cx?o(n)-i:0,a=t===lx?o(n)-r:0;e.setAttribute("transform",e.localTransform.getTransform(new sx(s,a)))}}let p;for(n=t===lx||t===ox?n.reverse():n,p=0;p<n.length&&p<h.length;++p)c(h[p],u.ordinal.length?u.ordinal[p]:n[p]);for(;p<n.length;++p){const t={label:tx(h[0].label),marks:h[0].marks.map((t=>tx(t))),value:0};c(t,n[p]),h[0].label.parentElement.appendChild(t.label),h[0].marks.forEach(((e,n)=>e.parentElement.insertBefore(t.marks[n],e))),h.push(t)}const d=h.length;for(;p<d;++p){const t=h.length-1;h[t].label&&h[t].label.remove(),h[t].marks.forEach((t=>t.remove())),h.pop()}}return p.applyTransform=function(t){return arguments.length?(scale_transform=t,p):p},p.scale=function(t){return arguments.length?(e=t,p):e},p.ticks=function(){return i=Array.from(arguments),p},p.tickArguments=function(t){return arguments.length?(i=null==t?[]:Array.from(t),p):i.slice()},p.tickValues=function(t){return arguments.length?(r=null==t?null:Array.from(t),p):r&&r.slice()},p.tickFormat=function(t){return arguments.length?(s=t,p):s},p.tickSize=function(t){return arguments.length?(a=o=+t,p):a},p.tickSizeInner=function(t){return arguments.length?(a=+t,p):a},p.tickSizeOuter=function(t){return arguments.length?(o=+t,p):o},p.tickPadding=function(t){return arguments.length?(c=+t,p):c},p.offset=function(t){return arguments.length?(l=+t,p):l},p}function dx(t,e){const n=t.step(),i=t(t.domain()[0])+t.paddingOuter()*n,r=t.bandwidth();let s=Math.round(Math.abs(e-i-r/2)/n);return s=Gm([0,Km([t.domain().length-1,s])]),t.domain()[t.domain().length-1-s]}function fx(t,e){return t.domain()[t.range().indexOf(e)]}function mx(t,e=new sx){if(!t.transform)return;const n=t.transform.baseVal;for(let t=0;t<n.numberOfItems;++t){const i=n.getItem(t),r=i.matrix;e.translate.x+=r.e,e.translate.y+=r.f,e.scale.x*=r.a,e.scale.y*=r.d,e.rotate+=i.angle}return e}function yx(t,e){if(!t)return null;const n=t.innerHTML.replace(//g,"-").replace(//g,"-").replace(/,/g,""),i=parseFloat(n),r=function(t){const e=["%d"],n=["%a","%A"],i=["%b","%B","%m"],r=["%Y","'%y"],s=[[r,i,e],[i,e,r],[i,r],[e,i,r],[n,i,e,r],[n,e,i,r]],a=["%Y-%m-%d","%Y %m %d %H:%M:%S","%Y-%m-%d% %H:%M:%S","%Y %m %d %H:%M","%Y-%m-%d% %H:%M","%H:%M:%S","%H:%M"];for(const e of a){const n=Cv(e)(t);if(n)return{format:Ev(e),value:n}}return function(e){function n(e,i){if(!e||!e.length)return null;for(const r of e[0]){const s=i.length?i+" "+r:r,a=Cv(s)(t);if("%m"!==s&&"%d"!==s&&a)return console.log(s,t,a),{format:Ev(s),value:a};const o=n(e.slice(1),s);if(o)return o}return null}for(const t of e){const e=n(t,"");if(e)return e}}(s)}(n);return isNaN(i)||n.includes("-")&&"-"!==n.charAt(0)||n.includes("/")?r&&e?r:n:i}const gx=3;let bx=25;function vx(t){let[e,n,i]=function(t,e){function n(t,e=!0){const n={[vy]:[],[_y]:[],[xy]:[],[wy]:[]};e&&(n[Sy]=[],n[Iy]=[]);for(const e of t){const t=e._getBBox();for(const[i,r]of Object.entries(n)){const n=t[i];r.push([n,e])}}return n}function i(t,e=!1){const n=[];if(e){const e=[Sy,Iy];for(const i of e){const e=t[i],r={};e.forEach((([t,e])=>{const n=e._getBBox(),i=window.getComputedStyle(e),s=[n.width,n.height,i.fill,i.color,i.stroke].join(",");s in r?r[s].push([t,e]):r[s]=[[t,e]]})),Object.values(r).forEach((t=>n.push([i,a(t)])))}}else for(const[e,i]of Object.entries(t))n.push([e,a(i)]);return n}function r(t,e){const n=new Map,i=new Map;for(const[t,r]of e)for(const e of r)for(const r of e){const s=n.get(r);(!s||e.length>s.length)&&(n.set(r,e),i.set(e,t))}const r=[];for(let e=0;e<t.length;++e){const i=t[e],s=n.get(i);r.includes(s)||r.push(s)}for(let t=0;t<r.length;++t)for(const e of[...r[t]])n.get(e)!==r[t]&&r[t].splice(r[t].indexOf(e),1);return r.map((t=>({alignment:i.get(t),marks:t})))}const s=r(t,i(n(t,!1))),o=n(e),c=r(e,i(o,!0)),l=i(o).map((([t,e])=>e.map((e=>({alignment:t,marks:e}))))).flat();return[s,c,l]}(t.textMarks,t.svgMarks),r=o(e,n);r=r.sort(((t,e)=>t.text[0]._getBBox()[Sy]-e.text[0]._getBBox()[Iy])),r.length>=2&&(r=[r[0],r[1]],function(e){const n=new Map,i=[];function r(e,n,i){n===xy||n===wy?t.xAxis.ticks.push({label:e,marks:i}):t.yAxis.ticks.push({label:e,marks:i}),i.forEach((t=>{t[Ly]=e?ry:Vy}))}for(const{alignment:t,group:r}of e)for(const e of r){const[r,s]=e,a=new Map;for(const[e,i]of r)a.set(i,!0),n.has(e)?n.get(e).ticks.push(i):n.set(e,{alignment:t,ticks:[i]});s.filter((t=>!a.has(t))).forEach((e=>{i.push({alignment:t,tick:e})}))}for(const[t,{alignment:e,ticks:i}]of n)r(t,e,i);for(const{alignment:t,tick:e}of i)r(null,t,[e]);[t.xAxis,t.yAxis].forEach((t=>rx("label",t.ticks)))}(r),e=e.filter((t=>!r.map((t=>t.text)).includes(t.marks))));const s=o(e,i,!1).filter((t=>t.dist<5*bx));function a(t){t.sort(((t,e)=>t[0]-e[0]));const e=[[t[0][0],[t[0][1]]]];for(let n=1;n<t.length;++n){const i=e[e.length-1][0];Math.abs(i-t[n][0])<gx?e[e.length-1][1].push(t[n][1]):e.push([t[n][0],[t[n][1]]])}return e.map((t=>t[1]))}function o(t,e,n=!0){function i(t,e){e.sort(((e,n)=>{const i=e._getBBox(),r=n._getBBox();return c.includes(t)?i[Sy]-r[Sy]:i[Iy]-r[Iy]}))}function r(t,e,n){const i=[0,0,0],r=[0,0,0];function s(t,e,i){const r=e._getBBox(),s=o.includes(n)?o:c;for(let e=0;e<s.length;++e)t[e]=t[e]+r[s[e]]/i}return t.forEach((e=>s(i,e,t.length))),e.forEach((t=>s(r,t,e.length))),Km([Km(i)-Km(r),Km(i)-Gm(r),Gm(i)-Km(r),Gm(i)-Gm(r)].map((t=>Math.abs(t))))}function s(t,e,n){let i=0,r=0;const s=new Map;for(const a of e){const e=a._getBBox();let o=Number.MAX_SAFE_INTEGER;if(i===n.length)return[Number.MAX_SAFE_INTEGER,null];for(;i<=n.length;){const l=n[Km([i,n.length-1])]._getBBox(),u=c.includes(t)?Sy:Iy,h=Math.abs(l[u]-e[u]);if(h>=o){s.set(a,n[i-1]),r+=o;break}o=h,++i}}return[r/e.length,s]}const a=[],o=[vy,_y,Sy],c=[xy,wy,Iy];for(const{alignment:l,marks:u}of t){if(1===u.length)continue;let t={dist:Number.MAX_SAFE_INTEGER,group:null};i(l,u);for(const{alignment:a,marks:h}of e){if(h.length<u.length)continue;if(o.includes(l)&&!o.includes(a)||c.includes(l)&&!c.includes(a))continue;if(r(u,h,l)>bx)continue;i(l,h);const[e,p]=s(l,u,h);if(e===Number.MAX_SAFE_INTEGER)continue;const d=Math.abs(e-t.dist)<gx;n&&d?t.group.push([p,h]):(!n&&d&&h.length<t.group[0][1].length||e<t.dist)&&(t={alignment:l,dist:e,group:[[p,h]],text:u})}t.group&&a.push(t)}return a.sort(((t,e)=>t.dist-e.dist)),a}s.length&&(!function(t,e){let n;function i(t){if(t.type===My){const e=t.marks.map((t=>t.label.innerHTML)),i=t.marks.map((e=>window.getComputedStyle(e.mark)[t.matchingAttr]));n=mg().domain(e).range(i)}else{const e=t.marks.map((t=>+t.label.innerHTML)),i=t.marks.map((t=>t.mark._getBBox().width**2));n=Vb().domain(e).range(i)}t.scale=n}function r(t){return{title:null,marks:Array.from(t.group[0][0]).map((([t,e])=>({label:t,mark:e})))}}for(let n of e){n=r(n);const s=window.getComputedStyle(n.marks[0].mark),a=window.getComputedStyle(n.marks[1].mark);let o=null;if(s.stroke!==a.stroke?o=Ny:s.color!==a.color?o=Cy:s.fill!==a.fill&&(o=Ey),o)n.type=My,n.matchingAttr=o;else{const t=[],i=[];for(let e=1;e<n.marks.length;++e){const r=n.marks[e-1].mark._getBBox(),s=n.marks[e].mark._getBBox();t.push(Math.abs(r.width-s.width)),i.push(Math.abs(r.height-s.height))}if(!(Qm(t)>2||Qm(i)>2))return void e.splice(e.indexOf(n),1);n.type=ky}for(const{label:t,mark:e}of n.marks)t[Ly]=e[Ly]=By,e.style["pointer-events"]="fill",e.legend=n,e[iy]=e.hasAttribute("opacity")?+e.getAttribute("opacity"):window.getComputedStyle(e).opacity||ey;i(n),rx("label",n.marks,n.type===ky),t.legends.push(n)}}(t,s),e=e.filter((t=>!s.map((t=>t.text)).includes(t.marks)))),function(e){const n=new Map;function i(t){const e=t._getBBox();return[e.centerX,e.centerY]}function r(t,n){let r={title:null,dist:Number.MAX_SAFE_INTEGER};for(const s of e){const[e,a]=i(s),o=Math.abs(e-t)+Math.abs(a-n);o<r.dist&&(r={title:s,dist:o})}return r}const s=[t.xAxis,t.yAxis,...t.legends];for(const t of s){const e=("ticks"in t?t.ticks:t.marks).filter((t=>t.label)).map((t=>i(t.label))),s=r(Qm(e.map((t=>t[0]))),Qm(e.map((t=>t[1])))),{title:a,dist:o}=s;a&&((!n.has(a)||o<n.get(a).dist)&&(t.title=a,a[Ly]=Fy,n.set(a,s)))}t.title=e.filter((t=>!t[Ly]))[0]}(e.map((t=>t.marks)).flat()),t.legends.forEach((t=>function(t){const{scale:e,title:n,type:i,matchingAttr:r}=t;for(const{mark:s}of t.marks){const t=fx(e,i===My?window.getComputedStyle(s)[r]:s._getBBox().width**2);s[Oy]={[n?n.innerHTML.toLowerCase():"legend-0"]:t}}}(t)))}function _x(t){for(const e of t.svgMarks){const n=e._getBBox();if(n.width>=t.xAxis.range[1]-t.xAxis.range[0]&&n.height>=t.yAxis.range[0]-t.yAxis.range[1]){e[Ly]=Uy;continue}const i=t.svg._getBBox(),[r,s]=t.xAxis.range,[a,o]=t.yAxis.range.map((t=>t+i.top));(n.top<=o&&n.bottom>=a&&n.left<=r||n.top<=o&&n.bottom>=a&&n.right>=s||!(n.right>=r&&n.left<=s&&n.bottom>=o&&n.top<=a))&&(e[Ly]=Dy);for(const e of t.legends)for(const{mark:t}of e.marks)t[Ly]=By}t.svgMarks=t.svgMarks.filter((t=>!t[Ly])),t.svgMarks.forEach((t=>{t[Ly]=Py})),rx(null,t.svgMarks,!1)}function xx(t){let e=!0;for(const[,n]of Object.entries(t.ticks))if(null!=n.label&&"[object Date]"!==Object.prototype.toString.call(yx(n.label,!0).value)){e=!1;break}for(const[,n]of Object.entries(t.ticks)){if(!n.label)continue;let i=yx(n.label,e);i.value&&(t.formatter={format:i.format},i=i.value),n.value=i,"string"==typeof i?t.ordinal.push(i):(t.domain[0]=null===t.domain[0]?i:Km([t.domain[0],i]),t.domain[1]=null===t.domain[1]?i:Gm([t.domain[1],i]))}}function wx(t){bx=.1*Gm([t.svg._getBBox().width,t.svg._getBBox().height]),vx(t),xx(t.xAxis),xx(t.yAxis);let e=+nx(t.svg.getAttribute("width")),n=+nx(t.svg.getAttribute("height"));e||(e=t.svg._getBBox().width),n||(n=t.svg._getBBox().height);const i=t.svg._getBBox();if(!t.xAxis.ticks.length&&!t.yAxis.ticks.length)return t.xAxis.range=[0,e],t.yAxis.range=[n,0],void _x(t);const r=t.yAxis.ticks[0].marks[0]._getBBox(),s=t.xAxis.ticks[0].marks[0]._getBBox(),a=[r.left,r.left+r.width],o=[s.top+s.height,s.top],c=Gm([(r.width<10?a[1]:a[0])-i.left,0]),l=Gm([Km([a[1]-i.left,e]),t.xAxis.ticks[t.xAxis.ticks.length-1].marks[0]._getBBox().right-i.left]),u=Gm([(s.height<10?t.yAxis.ticks[t.yAxis.ticks.length-1].marks[0]._getBBox().top:o[1])-i.top,0]),h=Km([o[0]-i.top,n]);var p,d;t.xAxis.range=[c,l],t.yAxis.range=[h,u],t.xAxis.scale=(t.xAxis.domain[0]instanceof Date?J_():t.xAxis.ordinal.length?yg():Vb()).domain(t.xAxis.ordinal.length?t.xAxis.ordinal:t.xAxis.domain).range(t.xAxis.range),t.xAxis.axis=(p=t.xAxis.scale,d=t,px(cx,p,d)).ticks(t.xAxis.ticks.length),t.xAxis.domain[0]instanceof Date&&(t.xAxis.axis=t.xAxis.axis.tickFormat(t.xAxis.formatter.format)),t.yAxis.scale=(t.yAxis.domain[0]instanceof Date?J_():t.yAxis.ordinal.length?yg():Vb()).domain(t.yAxis.ordinal.length?t.yAxis.ordinal:t.yAxis.domain).range(t.yAxis.range),t.yAxis.axis=function(t,e){return px(lx,t,e)}(t.yAxis.scale,t).ticks(t.yAxis.ticks.length),function(t){const e=t.svg._getBBox();if(t.xAxis.scale&&!t.xAxis.ordinal.length){const n=[ex(t.xAxis.ticks.filter((e=>e.value===t.xAxis.domain[0]))[0].marks[0],vy),ex(t.xAxis.ticks.filter((e=>e.value===t.xAxis.domain[1]))[0].marks[0],vy)].map((t=>t-e.left)),i=t.xAxis.range.map(t.xAxis.scale.copy().range(n).invert,t.xAxis.scale);t.xAxis.scale.domain(i)}if(t.yAxis.scale&&!t.yAxis.ordinal.length){const n=[ex(t.yAxis.ticks.filter((e=>e.value===t.yAxis.domain[0]))[0].marks[0],xy),ex(t.yAxis.ticks.filter((e=>e.value===t.yAxis.domain[1]))[0].marks[0],xy)].map((t=>t-e.top)),i=t.yAxis.range.map(t.yAxis.scale.copy().range(n).invert,t.yAxis.scale);t.yAxis.scale.domain(i)}}(t),_x(t)}class Sx{constructor(t){this.table=t,this.active={table:t,selected:t,filtered:null,type:qy.NONE},this.children=[],this.parents=[]}}async function Ix(t){if(!t||!Object.keys(t).length)return{};const{url:e}=t,n=e.split(".").pop(),i=await("json"===n?function(t,e){return Cm(t,{...e,as:"json",using:Nm})}(e):function(t,e){return Cm(t,{...e,as:"text",using:xf})}(e));return new Sx(i.assign(Em({[jy]:Jm(i.numRows())})))}function Ax(t){const e={};let n=t.map((t=>t[Oy]));n=n.flat();const i=Object.keys(n[0]);return t.forEach(((t,e)=>{t[jy]=e})),i.forEach((t=>{e[t.toLowerCase()]=function(t,e){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof e)throw new TypeError("mapper is not a function");return Array.from(t,((n,i)=>e(n,i,t)))}(n,(e=>e[t.toLowerCase()]))})),e[Ry]=t,e[jy]=Jm(t.length),new Sx(Em(e))}class Tx{constructor(){this.hasDomain=!1,this.svg=null,this.svgMarks=[],this.textMarks=[],this.data=null,this.xAxis={domain:[null,null],ordinal:[],range:[null,null],ticks:[],scale:null,axis:null,title:null},this.yAxis={domain:[null,null],ordinal:[],range:[null,null],ticks:[],scale:null,axis:null,title:null},this.legends=[],this.title=null,this.interactions={selection:!0,brush:!0,navigate:!1,filter:!1,sort:!1,annotate:!1}}}function kx(t,e,n,i){this.message=t,this.expected=e,this.found=n,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,kx)}!function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}(kx,Error),kx.buildMessage=function(t,e){var n={literal:function(t){return'"'+r(t.text)+'"'},class:function(t){var e,n="";for(e=0;e<t.parts.length;e++)n+=t.parts[e]instanceof Array?s(t.parts[e][0])+"-"+s(t.parts[e][1]):s(t.parts[e]);return"["+(t.inverted?"^":"")+n+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function i(t){return t.charCodeAt(0).toString(16).toUpperCase()}function r(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+i(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+i(t)}))}function s(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+i(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+i(t)}))}return"Expected "+function(t){var e,i,r,s=new Array(t.length);for(e=0;e<t.length;e++)s[e]=(r=t[e],n[r.type](r));if(s.sort(),s.length>0){for(e=1,i=1;e<s.length;e++)s[e-1]!==s[e]&&(s[i]=s[e],i++);s.length=i}switch(s.length){case 1:return s[0];case 2:return s[0]+" or "+s[1];default:return s.slice(0,-1).join(", ")+", or "+s[s.length-1]}}(t)+" but "+function(t){return t?'"'+r(t)+'"':"end of input"}(e)+" found."};var Mx=function(t,e){e=void 0!==e?e:{};var n,i={},r={svg_path:dt},s=dt,a=function(t){if(!t)return[];for(var e=[],n=0;n<t.length;n++)e=e.concat.apply(e,t[n]);var i=e[0];return i&&"m"==i.code&&(delete i.relative,i.code="M"),e},o=function(t,e){return function(t,e){if(!e)return[t];for(var n=[t],i=0,r=e.length;i<r;i++)n[i+1]=e[i][1];return n}(t,e)},c=/^[Mm]/,l=lt(["M","m"],!1,!1),u=function(t,e,n){var i=Ut(t,[e]);return n&&(i=i.concat(Ut("M"==t?"L":"l",n[1]))),i},h=/^[Zz]/,p=lt(["Z","z"],!1,!1),d=function(){return Ut("Z")},f=/^[Ll]/,m=lt(["L","l"],!1,!1),y=function(t,e){return Ut(t,e)},g=/^[Hh]/,b=lt(["H","h"],!1,!1),v=function(t,e){return Ut(t,e.map((function(t){return{x:t}})))},_=/^[Vv]/,x=lt(["V","v"],!1,!1),w=function(t,e){return Ut(t,e.map((function(t){return{y:t}})))},S=/^[Cc]/,I=lt(["C","c"],!1,!1),A=function(t,e,n){return{x1:t.x,y1:t.y,x2:e.x,y2:e.y,x:n.x,y:n.y}},T=/^[Ss]/,k=lt(["S","s"],!1,!1),M=function(t,e){return{x2:t.x,y2:t.y,x:e.x,y:e.y}},E=/^[Qq]/,C=lt(["Q","q"],!1,!1),N=function(t,e){return{x1:t.x,y1:t.y,x:e.x,y:e.y}},O=/^[Tt]/,L=lt(["T","t"],!1,!1),B=/^[Aa]/,D=lt(["A","a"],!1,!1),F=function(t,e,n,i,r,s){return{rx:t,ry:e,xAxisRotation:n,largeArc:i,sweep:r,x:s.x,y:s.y}},V=function(t,e){return{x:t,y:e}},U=function(t){return 1*t},P=function(t){return 1*t.join("")},R=/^[01]/,j=lt(["0","1"],!1,!1),$=function(t){return"1"==t},z=function(){return""},H=",",q=ct(",",!1),Y=function(t){return t.join("")},W=".",G=ct(".",!1),K=/^[eE]/,Q=lt(["e","E"],!1,!1),J=/^[+\-]/,Z=lt(["+","-"],!1,!1),X=/^[0-9]/,tt=lt([["0","9"]],!1,!1),et=function(t){return t.join("")},nt=/^[ \t\n\r]/,it=lt([" ","\t","\n","\r"],!1,!1),rt=0,st=[{line:1,column:1}],at=0,ot=[];if("startRule"in e){if(!(e.startRule in r))throw new Error("Can't start parsing from rule \""+e.startRule+'".');s=r[e.startRule]}function ct(t,e){return{type:"literal",text:t,ignoreCase:e}}function lt(t,e,n){return{type:"class",parts:t,inverted:e,ignoreCase:n}}function ut(e){var n,i=st[e];if(i)return i;for(n=e-1;!st[n];)n--;for(i={line:(i=st[n]).line,column:i.column};n<e;)10===t.charCodeAt(n)?(i.line++,i.column=1):i.column++,n++;return st[e]=i,i}function ht(t,e){var n=ut(t),i=ut(e);return{start:{offset:t,line:n.line,column:n.column},end:{offset:e,line:i.line,column:i.column}}}function pt(t){rt<at||(rt>at&&(at=rt,ot=[]),ot.push(t))}function dt(){var t,e,n,r,s;for(t=rt,e=[],n=Ot();n!==i;)e.push(n),n=Ot();if(e!==i)if(n=function(){var t,e,n,r,s,a;if(t=rt,e=ft(),e!==i){for(n=[],r=rt,s=[],a=Ot();a!==i;)s.push(a),a=Ot();for(s!==i&&(a=ft())!==i?r=s=[s,a]:(rt=r,r=i);r!==i;){for(n.push(r),r=rt,s=[],a=Ot();a!==i;)s.push(a),a=Ot();s!==i&&(a=ft())!==i?r=s=[s,a]:(rt=r,r=i)}n!==i?t=e=o(e,n):(rt=t,t=i)}else rt=t,t=i;return t}(),n===i&&(n=null),n!==i){for(r=[],s=Ot();s!==i;)r.push(s),s=Ot();r!==i?t=e=a(n):(rt=t,t=i)}else rt=t,t=i;else rt=t,t=i;return t}function ft(){var e,n,r,s,a,h;if(e=rt,n=function(){var e,n,r,s,a,o,h;e=rt,c.test(t.charAt(rt))?(n=t.charAt(rt),rt++):(n=i,pt(l));if(n!==i){for(r=[],s=Ot();s!==i;)r.push(s),s=Ot();r!==i&&(s=wt())!==i?(a=rt,(o=Tt())===i&&(o=null),o!==i&&(h=yt())!==i?a=o=[o,h]:(rt=a,a=i),a===i&&(a=null),a!==i?e=n=u(n,s,a):(rt=e,e=i)):(rt=e,e=i)}else rt=e,e=i;return e}(),n!==i){for(r=[],s=rt,a=[],h=Ot();h!==i;)a.push(h),h=Ot();for(a!==i&&(h=mt())!==i?s=a=[a,h]:(rt=s,s=i);s!==i;){for(r.push(s),s=rt,a=[],h=Ot();h!==i;)a.push(h),h=Ot();a!==i&&(h=mt())!==i?s=a=[a,h]:(rt=s,s=i)}r!==i?e=n=o(n,r):(rt=e,e=i)}else rt=e,e=i;return e}function mt(){var e;return(e=function(){var e,n;e=rt,h.test(t.charAt(rt))?(n=t.charAt(rt),rt++):(n=i,pt(p));n!==i&&(n=d());return e=n,e}())===i&&(e=function(){var e,n,r,s;e=rt,f.test(t.charAt(rt))?(n=t.charAt(rt),rt++):(n=i,pt(m));if(n!==i){for(r=[],s=Ot();s!==i;)r.push(s),s=Ot();r!==i&&(s=yt())!==i?e=n=y(n,s):(rt=e,e=i)}else rt=e,e=i;return e}())===i&&(e=function(){var e,n,r,s;e=rt,g.test(t.charAt(rt))?(n=t.charAt(rt),rt++):(n=i,pt(b));if(n!==i){for(r=[],s=Ot();s!==i;)r.push(s),s=Ot();r!==i&&(s=gt())!==i?e=n=v(n,s):(rt=e,e=i)}else rt=e,e=i;return e}())===i&&(e=function(){var e,n,r,s;e=rt,_.test(t.charAt(rt))?(n=t.charAt(rt),rt++):(n=i,pt(x));if(n!==i){for(r=[],s=Ot();s!==i;)r.push(s),s=Ot();r!==i&&(s=gt())!==i?e=n=w(n,s):(rt=e,e=i)}else rt=e,e=i;return e}())===i&&(e=function(){var e,n,r,s;e=rt,S.test(t.charAt(rt))?(n=t.charAt(rt),rt++):(n=i,pt(I));if(n!==i){for(r=[],s=Ot();s!==i;)r.push(s),s=Ot();r!==i?(s=function(){var t,e,n,r,s,a;if(t=rt,e=bt(),e!==i){for(n=[],r=rt,(s=Tt())===i&&(s=null),s!==i&&(a=bt())!==i?r=s=[s,a]:(rt=r,r=i);r!==i;)n.push(r),r=rt,(s=Tt())===i&&(s=null),s!==i&&(a=bt())!==i?r=s=[s,a]:(rt=r,r=i);n!==i?t=e=o(e,n):(rt=t,t=i)}else rt=t,t=i;return t}(),s!==i?e=n=y(n,s):(rt=e,e=i)):(rt=e,e=i)}else rt=e,e=i;return e}())===i&&(e=function(){var e,n,r,s;e=rt,T.test(t.charAt(rt))?(n=t.charAt(rt),rt++):(n=i,pt(k));if(n!==i){for(r=[],s=Ot();s!==i;)r.push(s),s=Ot();r!==i?(s=function(){var t,e,n,r,s,a;if(t=rt,e=vt(),e!==i){for(n=[],r=rt,(s=Tt())===i&&(s=null),s!==i&&(a=vt())!==i?r=s=[s,a]:(rt=r,r=i);r!==i;)n.push(r),r=rt,(s=Tt())===i&&(s=null),s!==i&&(a=vt())!==i?r=s=[s,a]:(rt=r,r=i);n!==i?t=e=o(e,n):(rt=t,t=i)}else rt=t,t=i;return t}(),s!==i?e=n=y(n,s):(rt=e,e=i)):(rt=e,e=i)}else rt=e,e=i;return e}())===i&&(e=function(){var e,n,r,s;e=rt,E.test(t.charAt(rt))?(n=t.charAt(rt),rt++):(n=i,pt(C));if(n!==i){for(r=[],s=Ot();s!==i;)r.push(s),s=Ot();r!==i?(s=function(){var t,e,n,r,s,a;if(t=rt,e=_t(),e!==i){for(n=[],r=rt,(s=Tt())===i&&(s=null),s!==i&&(a=_t())!==i?r=s=[s,a]:(rt=r,r=i);r!==i;)n.push(r),r=rt,(s=Tt())===i&&(s=null),s!==i&&(a=_t())!==i?r=s=[s,a]:(rt=r,r=i);n!==i?t=e=o(e,n):(rt=t,t=i)}else rt=t,t=i;return t}(),s!==i?e=n=y(n,s):(rt=e,e=i)):(rt=e,e=i)}else rt=e,e=i;return e}())===i&&(e=function(){var e,n,r,s;e=rt,O.test(t.charAt(rt))?(n=t.charAt(rt),rt++):(n=i,pt(L));if(n!==i){for(r=[],s=Ot();s!==i;)r.push(s),s=Ot();r!==i?(s=function(){var t,e,n,r,s,a;if(t=rt,e=wt(),e!==i){for(n=[],r=rt,(s=Tt())===i&&(s=null),s!==i&&(a=wt())!==i?r=s=[s,a]:(rt=r,r=i);r!==i;)n.push(r),r=rt,(s=Tt())===i&&(s=null),s!==i&&(a=wt())!==i?r=s=[s,a]:(rt=r,r=i);n!==i?t=e=o(e,n):(rt=t,t=i)}else rt=t,t=i;return t}(),s!==i?e=n=y(n,s):(rt=e,e=i)):(rt=e,e=i)}else rt=e,e=i;return e}())===i&&(e=function(){var e,n,r,s;e=rt,B.test(t.charAt(rt))?(n=t.charAt(rt),rt++):(n=i,pt(D));if(n!==i){for(r=[],s=Ot();s!==i;)r.push(s),s=Ot();r!==i?(s=function(){var t,e,n,r,s,a;if(t=rt,e=xt(),e!==i){for(n=[],r=rt,(s=Tt())===i&&(s=null),s!==i&&(a=xt())!==i?r=s=[s,a]:(rt=r,r=i);r!==i;)n.push(r),r=rt,(s=Tt())===i&&(s=null),s!==i&&(a=xt())!==i?r=s=[s,a]:(rt=r,r=i);n!==i?t=e=o(e,n):(rt=t,t=i)}else rt=t,t=i;return t}(),s!==i?e=n=y(n,s):(rt=e,e=i)):(rt=e,e=i)}else rt=e,e=i;return e}()),e}function yt(){var t,e,n,r,s,a;if(t=rt,(e=wt())!==i){for(n=[],r=rt,(s=Tt())===i&&(s=null),s!==i&&(a=wt())!==i?r=s=[s,a]:(rt=r,r=i);r!==i;)n.push(r),r=rt,(s=Tt())===i&&(s=null),s!==i&&(a=wt())!==i?r=s=[s,a]:(rt=r,r=i);n!==i?t=e=o(e,n):(rt=t,t=i)}else rt=t,t=i;return t}function gt(){var t,e,n,r,s,a;if(t=rt,(e=It())!==i){for(n=[],r=rt,(s=Tt())===i&&(s=null),s!==i&&(a=It())!==i?r=s=[s,a]:(rt=r,r=i);r!==i;)n.push(r),r=rt,(s=Tt())===i&&(s=null),s!==i&&(a=It())!==i?r=s=[s,a]:(rt=r,r=i);n!==i?t=e=o(e,n):(rt=t,t=i)}else rt=t,t=i;return t}function bt(){var t,e,n,r,s,a;return t=rt,(e=wt())!==i?((n=Tt())===i&&(n=null),n!==i&&(r=wt())!==i?((s=Tt())===i&&(s=null),s!==i&&(a=wt())!==i?t=e=A(e,r,a):(rt=t,t=i)):(rt=t,t=i)):(rt=t,t=i),t}function vt(){var t,e,n,r;return t=rt,(e=wt())!==i?((n=Tt())===i&&(n=null),n!==i&&(r=wt())!==i?t=e=M(e,r):(rt=t,t=i)):(rt=t,t=i),t}function _t(){var t,e,n,r;return t=rt,(e=wt())!==i?((n=Tt())===i&&(n=null),n!==i&&(r=wt())!==i?t=e=N(e,r):(rt=t,t=i)):(rt=t,t=i),t}function xt(){var t,e,n,r,s,a,o,c,l,u,h;return t=rt,(e=St())!==i?((n=Tt())===i&&(n=null),n!==i&&(r=St())!==i?((s=Tt())===i&&(s=null),s!==i&&(a=It())!==i&&Tt()!==i&&(o=At())!==i?((c=Tt())===i&&(c=null),c!==i&&(l=At())!==i?((u=Tt())===i&&(u=null),u!==i&&(h=wt())!==i?t=e=F(e,r,a,o,l,h):(rt=t,t=i)):(rt=t,t=i)):(rt=t,t=i)):(rt=t,t=i)):(rt=t,t=i),t}function wt(){var t,e,n,r;return t=rt,(e=It())!==i?((n=Tt())===i&&(n=null),n!==i&&(r=It())!==i?t=e=V(e,r):(rt=t,t=i)):(rt=t,t=i),t}function St(){var t;return rt,(t=Mt())===i&&(t=Nt()),t!==i&&(t=U(t)),t}function It(){var t,e,n;return rt,t=rt,(e=Ct())===i&&(e=null),e!==i&&(n=Mt())!==i?t=e=[e,n]:(rt=t,t=i),t===i&&(t=rt,(e=Ct())===i&&(e=null),e!==i&&(n=Nt())!==i?t=e=[e,n]:(rt=t,t=i)),t!==i&&(t=P(t)),t}function At(){var e;return rt,R.test(t.charAt(rt))?(e=t.charAt(rt),rt++):(e=i,pt(j)),e!==i&&(e=$(e)),e}function Tt(){var t,e,n,r,s;if(t=rt,e=[],(n=Ot())!==i)for(;n!==i;)e.push(n),n=Ot();else e=i;if(e!==i)if((n=kt())===i&&(n=null),n!==i){for(r=[],s=Ot();s!==i;)r.push(s),s=Ot();r!==i?t=e=[e,n,r]:(rt=t,t=i)}else rt=t,t=i;else rt=t,t=i;if(t===i){if(t=rt,e=rt,(n=kt())!==i){for(r=[],s=Ot();s!==i;)r.push(s),s=Ot();r!==i?e=n=[n,r]:(rt=e,e=i)}else rt=e,e=i;e!==i&&(e=z()),t=e}return t}function kt(){var e;return 44===t.charCodeAt(rt)?(e=H,rt++):(e=i,pt(q)),e}function Mt(){var e,n,r;return rt,e=rt,n=function(){var e,n,r,s,a;e=rt,n=rt,r=Nt(),r===i&&(r=null);r!==i?(46===t.charCodeAt(rt)?(s=W,rt++):(s=i,pt(G)),s!==i&&(a=Nt())!==i?n=r=[r,s,a]:(rt=n,n=i)):(rt=n,n=i);n===i&&(n=rt,(r=Nt())!==i?(46===t.charCodeAt(rt)?(s=W,rt++):(s=i,pt(G)),s!==i?n=r=[r,s]:(rt=n,n=i)):(rt=n,n=i));n!==i&&(n=Y(n));return e=n,e}(),n!==i?((r=Et())===i&&(r=null),r!==i?e=n=[n,r]:(rt=e,e=i)):(rt=e,e=i),e===i&&(e=rt,(n=Nt())!==i&&(r=Et())!==i?e=n=[n,r]:(rt=e,e=i)),e!==i&&(e=Y(e)),e}function Et(){var e,n,r,s;return rt,e=rt,K.test(t.charAt(rt))?(n=t.charAt(rt),rt++):(n=i,pt(Q)),n!==i?((r=Ct())===i&&(r=null),r!==i&&(s=Nt())!==i?e=n=[n,r,s]:(rt=e,e=i)):(rt=e,e=i),e!==i&&(e=Y(e)),e}function Ct(){var e;return J.test(t.charAt(rt))?(e=t.charAt(rt),rt++):(e=i,pt(Z)),e}function Nt(){var e,n;if(rt,e=[],X.test(t.charAt(rt))?(n=t.charAt(rt),rt++):(n=i,pt(tt)),n!==i)for(;n!==i;)e.push(n),X.test(t.charAt(rt))?(n=t.charAt(rt),rt++):(n=i,pt(tt));else e=i;return e!==i&&(e=et(e)),e}function Ot(){var e;return rt,nt.test(t.charAt(rt))?(e=t.charAt(rt),rt++):(e=i,pt(it)),e!==i&&(e=z()),e}var Lt,Bt,Dt,Ft={m:"moveto",l:"lineto",h:"horizontal lineto",v:"vertical lineto",c:"curveto",s:"smooth curveto",q:"quadratic curveto",t:"smooth quadratic curveto",a:"elliptical arc",z:"closepath"};for(var Vt in Ft)Ft[Vt.toUpperCase()]=Ft[Vt];function Ut(t,e){e||(e=[{}]);for(var n=e.length;n--;){var i={code:t,command:Ft[t]};for(var r in t==t.toLowerCase()&&(i.relative=!0),e[n])i[r]=e[n][r];e[n]=i}return e}if((n=s())!==i&&rt===t.length)return n;throw n!==i&&rt<t.length&&pt({type:"end"}),Lt=ot,Bt=at<t.length?t.charAt(at):null,Dt=at<t.length?ht(at,at+1):ht(at,at),new kx(kx.buildMessage(Lt,Bt),Lt,Bt,Dt)},Ex=Mx;Ex.parseSVG=Ex,Ex.makeAbsolute=function(t){var e,n={x:0,y:0},i={x:"x0",y:"y0",x1:"x0",y1:"y0",x2:"x0",y2:"y0"};return t.forEach((function(t){for(var r in"moveto"===t.command&&(e=t),t.x0=n.x,t.y0=n.y,i)r in t&&(t[r]+=t.relative?t[i[r]]:0);"x"in t||(t.x=n.x),"y"in t||(t.y=n.y),t.relative=!1,t.code=t.code.toUpperCase(),"closepath"==t.command&&(t.x=e.x,t.y=e.y),n=t})),t};var Cx=Ex;const Nx=["circle",uy,hy,py,dy,fy,my,"use"];let Ox,Lx=1;function Bx(t,e,n,i=!1){e._getBBox=i?function(){return this.getBoundingClientRect()}:function(){const e=this.getBoundingClientRect(),n=this.getBBox?this.getBBox():e,i=this.getBBox?ix(t,this,n.x,n.y):{x:n.x,y:n.y},r=this.getBBox?ix(t,this,n.x+n.width,n.y+n.height):{x:n.x+n.width,y:n.y+n.height},s=Math.abs(i.x-r.x),a=Math.abs(i.y-r.y),o=e.left+e.width/2-s/2,c=e.top+e.height/2-a/2;return{[Ay]:s,[Ty]:a,[vy]:o,[_y]:o+s,[xy]:c,[wy]:c+a,[Sy]:o+s/2,[Iy]:c+a/2}},e.globalPosition=new sx(e._getBBox()[Sy]-t._getBBox()[vy],e._getBBox()[Iy]-t._getBBox()[xy]),e.localTransform=mx(e)}function Dx(t,e,n,i=!1){if(t&&t.nodeName.toLowerCase()!==by&&(!t.className||t.className.baseVal!==sy&&t.className.baseVal!==ay)){if(i||t.nodeName===cy)e.svg=t,Bx(e.svg,t,0,i),t.id||(t.id=oy+"-"+Lx++);else if(t.nodeName===ly)mx(t,n);else if(t.nodeName===gy&&""!==t.textContent.trim()){let n=t.parentElement;n.nodeName!==yy&&(n=yt(n).append("text").html(t.textContent).node(),yt(t).remove()),Bx(e.svg,n),n.removeAttribute("textLength"),e.textMarks.push(n),n.style["pointer-events"]="none",n.style["user-select"]="none"}else if(Nx.includes(t.nodeName)){const i=t.nodeName;i===my?(!function(t,e,n){const i=Cx.parseSVG(t.getAttribute("d"));if(!i.length)return;t.contour=i;const r=i[i.length-1],s=["v","h"],a=function(t){if(t.length<=2||t.length%2!=0)return[];const e=[];for(let n=0;n<t.length;n+=2){if("M"!==t[n].code||"L"!==t[n+1].code)return[];const i=o();i.moveTo(t[n].x,t[n].y),i.lineTo(t[n+1].x,t[n+1].y),e.push(i.toString())}return e}(i);if(3===i.length&&"A"===i[1].code&&"A"===r.code)t.type=uy;else if(a.length){const i=yt(t.parentElement);a.forEach((r=>{const s=window.getComputedStyle(t);Dx(i.append("path").attr("d",r).style("fill",s.fill).style("color",s.color).style("stroke",s.stroke).style("stroke-width",s.strokeWidth).attr("id","test").node(),e,n)})),yt(t).remove()}else"Z"!==r.code?t.type=hy:5===i.length&&s.includes(i[1].code)&&s.includes(i[2].code)&&s.includes(i[3].code)?t.type=fy:t.type=py}(t,e,n),t.setAttribute("vector-effect","non-scaling-stroke")):i!==dy&&i!==py&&i!==hy||(t.type=i,t.setAttribute("vector-effect","non-scaling-stroke")),Bx(e.svg,t),t.setAttribute(Py,"true"),e.svgMarks.includes(t)||e.svgMarks.push(t)}for(const i of t.childNodes)Dx(i,e,new sx(n))}}function Fx(t,e){var n;n=t.svg,Ox=yt(n).append("rect").attr("opacity",.35).attr("x",0).attr("y",0).attr("width",0).attr("height",0).attr("id",n.id+"-brush-rect").style("fill","gray").style("stroke","#fff");const[i,r]=gt(e,t.svg);Ox.attr("x",i).attr("y",r)}function Vx(t,e){const n=t.map((t=>{return e=function(t){const e=new Tx;return Dx(t,e,new sx,!0),e.svg=t,console.log(e),e}(t),e.svg.style.cursor="crosshair",wx(e),function(t){t.svgMarks=t.svgMarks.filter((t=>t.type!==hy));for(let e=0;e<t.svgMarks.length;++e){const n=t.svgMarks[e],i=t.svg._getBBox(),r=n._getBBox();if(n.type===hy)continue;if(n.type===dy){const e=n.getAttribute("points").split(" ").map((t=>t.split(",").map((t=>Number(t)))));n[Oy]=[];for(const s of e){let[e,a]=s;e-=i.left,a-=i.top;const o={};o[t.xAxis.title?t.xAxis.title.innerHTML.toLowerCase():"x"]=t.xAxis.scale.invert(e),o[t.yAxis.title?t.yAxis.title.innerHTML.toLowerCase():"y"]=t.yAxis.scale.invert(a);for(let e=0;e<t.legends.length;++e){const i=t.legends[e],s=i.type===My?i.scale.domain()[i.scale.range().indexOf(window.getComputedStyle(n)[i.matchingAttr])]:i.scale.invert(r.width**2);o[i.title?i.title.innerHTML.toLowerCase():"legend-"+e]=s}n[Oy].push(o)}continue}const s=t.xAxis.ordinal.length?e:t.yAxis.ordinal.length||n.type===fy?r.right-i.left:r.centerX-i.left,a=t.yAxis.ordinal.length?e:t.xAxis.ordinal.length?r.top-i.top:r.centerY-i.top,o={};o[t.xAxis.title?t.xAxis.title.innerHTML.toLowerCase():"x"]=t.xAxis.ordinal.length?dx(t.xAxis.scale,r.centerX-i.left):t.xAxis.scale.invert(s),o[t.yAxis.title?t.yAxis.title.innerHTML.toLowerCase():"y"]=t.yAxis.ordinal.length?dx(t.yAxis.scale,r.centerY-i.top):"rect"===n.type?String(Math.round(t.yAxis.scale.invert(a))):t.yAxis.scale.invert(a);for(let e=0;e<t.legends.length;++e){const i=t.legends[e],s=i.type===My?i.scale.domain()[i.scale.range().indexOf(window.getComputedStyle(n)[i.matchingAttr])]:i.scale.invert(r.width**2);o[i.title?i.title.innerHTML.toLowerCase():"legend-"+e]=s}n.style["pointer-events"]="fill",n[Oy]=o,n[iy]=n.hasAttribute("opacity")?+n.getAttribute("opacity"):window.getComputedStyle(n).opacity||ey}}(e),e.data=Ax(e.svgMarks),e;var e}));return Xy(n,e),n.forEach((t=>function(t){const{data:e}=t,i=function(t){const e=new Map,n=function t(n,i,r){if(e.has(n))return[];e.set(n,!0);const{parents:s}=n;if(!s.length)return[[n,i,r]];let a=[];for(const e of s){const{next:n,aggregation:s,map:o,fields:c}=e;a=[...a,...t(n,[...i,[s,o]],ig(r,c))]}return a}(t,[],Object.fromEntries(Gy(t.table,!0).map((t=>[t,t]))));return n.map((([t,e,n])=>[t,rg(t,e),n]))}(e);let r=!1;function s(e){if(r)return;const{target:s}=e;ag(i,function(t,e){return e[Ly]===Py?ty(jy,e,Zm.POINT):e[Ly]===By?ty(Object.keys(e[Oy])[0],e[Oy],Zm.POINT):(cg(t.svgMarks),t.legends.forEach((t=>cg(t.marks.map((t=>t.mark))))),null)}(t,s),X_(e)),pg(n)}function a(e){let s,a,o,c;function l(e){e.stopPropagation(),e.preventDefault();const n=gt(e);if(Math.hypot(h[0]-n[0],h[1]-n[1])<5)return;r=!0;const[i,l,u,p]=function(t,e){e.preventDefault();const[n,i]=gt(e,t.svg),r=+Ox.node().getAttribute("x"),s=+Ox.node().getAttribute("y"),a=n-r,o=i-s,c=a<0?a:0,l=o<0?o:0;return Ox.attr("width",Math.abs(a)).attr("height",Math.abs(o)).attr("transform","translate("+c+","+l+")"),[r,s,a,o]}(t,e);s=t.xAxis.scale.invert(i),a=t.xAxis.scale.invert(i+u),o=t.yAxis.scale.invert(l),c=t.yAxis.scale.invert(l+p)}function u(e){if(Ox.remove(),r){const r=(h=t.xAxis.title.innerHTML.toLowerCase(),p=t.yAxis.title.innerHTML.toLowerCase(),f=[o,c],[{[h]:{value:(d=[s,a])[0],cond:">=",type:Zm.RANGE}},{[h]:{value:d[1],cond:"<=",type:Zm.RANGE}},{[p]:{value:f[0],cond:"<=",type:Zm.RANGE}},{[p]:{value:f[1],cond:">=",type:Zm.RANGE}}]);ag(i,r,X_(e)),pg(n)}var h,p,d,f;t.svg.removeEventListener("mousemove",l),t.svg.removeEventListener("mouseup",u)}r=!1;const h=gt(e);t.interactions.brush&&(Fx(t,e),t.svg.addEventListener("mousemove",l),t.svg.addEventListener("mouseup",u))}t.svg.addEventListener("click",s),t.svg.addEventListener("mousedown",a)}(t))),console.log(e),n}t.hydrate=async function(t,e={}){if(t)return Array.isArray(t)||(t=[t]),Vx(t=t.map((t=>"string"==typeof t?document.querySelector(t):t)),await Ix(e))}}));
//# sourceMappingURL=divi.min.js.map
